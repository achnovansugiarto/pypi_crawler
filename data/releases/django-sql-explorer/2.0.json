{
  "info": {
    "author": "Chris Clark",
    "author_email": "chris@untrod.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Framework :: Django :: 2.2",
      "Framework :: Django :: 3.0",
      "Framework :: Django :: 3.1",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3 :: Only",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Topic :: Utilities"
    ],
    "description": ".. image:: https://travis-ci.org/groveco/django-sql-explorer.svg?branch=master\n   :target: https://travis-ci.org/groveco/django-sql-explorer\n\n.. image:: http://img.shields.io/pypi/v/django-sql-explorer.svg?style=flat-square\n    :target: https://pypi.python.org/pypi/django-sql-explorer/\n    :alt: Latest Version\n\n.. image:: http://img.shields.io/pypi/dm/django-sql-explorer.svg?style=flat-square\n    :target: https://pypi.python.org/pypi/django-sql-explorer/\n    :alt: Downloads\n\n.. image:: http://img.shields.io/pypi/l/django-sql-explorer.svg?style=flat-square\n    :target: https://pypi.python.org/pypi/django-sql-explorer/\n    :alt: License\n\nSQL Explorer\n===================\n\nSQL Explorer aims to make the flow of data between people fast,\nsimple, and confusion-free. It is a Django-based application that you\ncan add to an existing Django site, or use as a standalone business\nintelligence tool.\n\nQuickly write and share SQL queries in a simple, usable SQL editor,\npreview the results in the browser, share links, download CSV, JSON,\nor Excel files (and even expose queries as API endpoints, if desired),\nand keep the information flowing!\n\nComes with support for multiple connections, to many different SQL\ndatabase types, a schema explorer, query history (e.g. lightweight\nversion control), a basic security model, in-browser pivot tables, and\nmore.\n\nSQL Explorer values simplicity, intuitive use, unobtrusiveness,\nstability, and the principle of least surprise.\n\nSQL Explorer is inspired by any number of great query and\nreporting tools out there.\n\nThe original idea came from Stack Exchange's `Data Explorer\n<http://data.stackexchange.com/stackoverflow/queries>`_, but also owes\ncredit to similar projects like `Redash <http://redash.io/>`_ and\n`Blazer <https://github.com/ankane/blazer>`_.\n\nSql Explorer is MIT licensed, and pull requests are welcome.\n\n**A view of a query**\n\n.. image:: https://s3-us-west-1.amazonaws.com/django-sql-explorer/2019_2.png\n\n**Viewing all queries**\n\n.. image:: https://s3-us-west-1.amazonaws.com/django-sql-explorer/2019_querylist.png\n\n**Quick access to DB schema info**\n\n.. image:: https://s3-us-west-1.amazonaws.com/django-sql-explorer/2019_3.png\n\n**Snapshot query results to S3 & download as csv**\n\n.. image:: https://s3-us-west-1.amazonaws.com/django-sql-explorer/2019_snapshots.png\n\n\nFeatures\n========\n\n- **Security**\n    - Let's not kid ourselves - this tool is all about giving people\n      access to running SQL in production. So if that makes you\n      nervous (**and it should**) - you've been warned. Explorer makes an\n      effort to not allow terrible things to happen, but be careful!\n      It's recommended you setup read-only roles for each of your database \n      connections and only use these particular connections for your queries through the  \n      ``EXPLORER_CONNECTIONS`` setting.\n    - Explorer supports two different permission checks for users of\n      the tool. Users passing the ``EXPLORER_PERMISSION_CHANGE`` test can\n      create, edit, delete, and execute queries. Users who do not pass\n      this test but pass the ``EXPLORER_PERMISSION_VIEW`` test can only\n      execute queries. Other users cannot access any part of\n      Explorer. Both permission groups are set to is_staff by default\n      and can be overridden in your settings file.\n    - Enforces a SQL blacklist so destructive queries don't get\n      executed (delete, drop, alter, update etc). This is not\n      bulletproof and it's recommended that you instead configure a\n      read-only database role, but when not possible the blacklist\n      provides reasonable protection.\n- **Easy to get started**\n    - Built on Django's ORM, so works with Postgresql, Mysql, and\n      Sqlite. And, between you and me, it works fine on RedShift as\n      well.\n    - Small number of dependencies.\n    - Just want to get in and write some ad-hoc queries? Go nuts with\n      the Playground area.\n- **Snapshots**\n    - Tick the 'snapshot' box on a query, and Explorer will upload a\n      .csv snapshot of the query results to S3. Configure the snapshot\n      frequency via a celery cron task, e.g. for daily at 1am:\n\n    .. code-block:: python\n\n       'explorer.tasks.snapshot_queries': {\n           'task': 'explorer.tasks.snapshot_queries',\n           'schedule': crontab(hour=1, minute=0)\n       }\n\n    - Requires celery, obviously. Also uses djcelery and tinys3. All\n      of these deps are optional and can be installed with\n      ``pip install -r optional-requirements.txt``\n    - The checkbox for opting a query into a snapshot is ALL THE WAY\n      on the bottom of the query view (underneath the results table).\n    - You must also have the setting ``EXPLORER_TASKS_ENABLED`` enabled.\n- **Email query results**\n    - Click the email icon in the query listing view, enter an email\n      address, and the query results (zipped .csv) will be sent to you\n      asynchronously. Very handy for long-running queries.\n- **Parameterized Queries**\n    - Use $$foo$$ in your queries and Explorer will build a UI to fill\n      out parameters. When viewing a query like ``SELECT * FROM table\n      WHERE id=$$id$$``, Explorer will generate UI for the ``id``\n      parameter.\n    - Parameters are stashed in the URL, so you can share links to\n      parameterized queries with colleagues\n    - Use ``$$paramName:defaultValue$$`` to provide default values for the\n      parameters.\n- **Schema Helper**\n    - ``/explorer/schema/<connection-alias>`` renders a list of your table\n      and column names + types that you can refer to while writing\n      queries. Apps can be excluded from this list so users aren't\n      bogged down with tons of irrelevant tables. See settings\n      documentation below for details.\n    - This is available quickly as a sidebar helper while composing\n      queries (see screenshot)\n    - Quick search for the tables you are looking for. Just start\n      typing!\n    - Explorer uses Django DB introspection to generate the\n      schema. This can sometimes be slow, as it issues a separate\n      query for each table it introspects. Therefore, once generated,\n      Explorer caches the schema information. There is also the option\n      to generate the schema information asyncronously, via Celery. To\n      enable this, make sure Celery is installed and configured, and\n      set ``EXPLORER_ENABLE_TASKS`` and ``EXPLORER_ASYNC_SCHEMA`` to\n      ``True``.\n- **Template Columns**\n    - Let's say you have a query like 'select id, email from user' and\n      you'd like to quickly drill through to the profile page for each\n      user in the result. You can create a \"template\" column to do\n      just that.\n    - Just set up a template column in your settings file:\n\n    ``EXPLORER_TRANSFORMS = [('user', '<a href=\"https://yoursite.com/profile/{0}/\">{0}</a>')]``\n\n    - And change your query to ``SELECT id AS \"user\", email FROM\n      user``. Explorer will match the \"user\" column alias to the\n      transform and merge each cell in that column into the template\n      string. Cool!\n    - Note you *must* set ``EXPLORER_UNSAFE_RENDERING`` to ``True`` if you\n      want to see rendered HTML (vs string literals) in the output.\n      And be aware of the implications of enabling that setting.\n- **Pivot Table**\n    - Go to the Pivot tab on query results to use the in-browser pivot\n      functionality (provided by Pivottable JS).\n    - Hit the link icon on the top right to get a URL to recreate the\n      exact pivot setup to share with colleagues.\n- **Query Logs**\n    - Explorer will save a snapshot of every query you execute so you\n      can recover lost ad-hoc queries, and see what you've been\n      querying.\n    - This also serves as cheap-and-dirty versioning of Queries, and\n      provides the 'run count' property and average duration in\n      milliseconds, by aggregating the logs.\n    - You can also quickly share playground queries by copying the\n      link to the playground's query log record -- look on the top\n      right of the sql editor for the link icon.\n    - If Explorer gets a lot of use, the logs can get\n      beefy. explorer.tasks contains the 'truncate_querylogs' task\n      that will remove log entries older than <days> (30 days and\n      older in the example below).\n\n    .. code-block:: python\n\n       'explorer.tasks.truncate_querylogs': {\n           'task': 'explorer.tasks.truncate_querylogs',\n           'schedule': crontab(hour=1, minute=0),\n           'kwargs': {'days': 30}\n       }\n- **Multiple Connections**\n    - Have data in more than one database? No problemo. Just set up\n      multiple Django database connections, register them with\n      Explorer, and you can write, save, and view queries against all\n      of your different data sources. Compatible with any database\n      support by Django. Note that the target database does *not* have\n      to contain any Django schema, or be related to Django in any\n      way. See connections.py for more documentation on\n      multi-connection setup.\n- **Power tips**\n    - On the query listing page, focus gets set to a search box so you\n      can just navigate to /explorer and start typing the name of your\n      query to find it.\n    - Quick search also works after hitting \"Show Schema\" on a query\n      view.\n    - Command+Enter and Ctrl+Enter will execute a query when typing in\n      the SQL editor area.\n    - Hit the \"Format\" button to format and clean up your SQL (this is\n      non-validating -- just formatting).\n    - Use the Query Logs feature to share one-time queries that aren't\n      worth creating a persistent query for. Just run your SQL in the\n      playground, then navigate to ``/logs`` and share the link\n      (e.g. ``/explorer/play/?querylog_id=2428``)\n    - Click the 'history' link towards the top-right of a saved query\n      to filter the logs down to changes to just that query.\n    - If you need to download a query as something other than csv but\n      don't want to globally change delimiters via\n      ``settings.EXPLORER_CSV_DELIMETER``, you can use\n      ``/query/download?delim=|`` to get a pipe (or whatever) delimited\n      file. For a tab-delimited file, use ``delim=tab``. Note that the\n      file extension will remain .csv\n    - If a query is taking a long time to run (perhaps timing out) and\n      you want to get in there to optimize it, go to\n      ``/query/123/?show=0``. You'll see the normal query detail page, but\n      the query won't execute.\n    - Set env vars for ``EXPLORER_TOKEN_AUTH_ENABLED=TRUE`` and\n      ``EXPLORER_TOKEN=<SOME TOKEN>`` and you have an instant data\n      API. Just:\n\n      ``curl --header \"X-API-TOKEN: <TOKEN>\" https://www.your-site.com/explorer/<QUERY_ID>/stream?format=csv``\n\n      You can also pass the token with a query parameter like this:\n\n      ``curl https://www.your-site.com/explorer/<QUERY_ID>/stream?format=csv&token=<TOKEN>``\n\n\nInstall\n=======\n\nRequires Python 3.6 or higher. Requires Django 2.2 or higher.\n\nSet up a Django project with the following:\n\n.. code-block:: shell-session\n\n    $ pip install django\n    $ django-admin startproject project\n\nMore information in the `django tutorial <https://docs.djangoproject.com/en/3.1/intro/tutorial01/>`_.\n\nInstall with pip from pypi:\n\n``pip install django-sql-explorer``\n\nIf you would also like to support downloading Excel files install with the dependency using:\n\n``pip install django-sql-explorer[xls]``\n\nAdd to your ``INSTALLED_APPS``, located in the ``settings.py`` file in your project folder:\n\n.. code-block:: python\n\n    INSTALLED_APPS = (\n        ...,\n        'explorer',\n        ...\n    )\n\nAdd the following to your urls.py (all Explorer URLs are restricted\nvia the ``EXPLORER_PERMISSION_VIEW`` and ``EXPLORER_PERMISSION_CHANGE``\nsettings. See Settings section below for further documentation.):\n\n.. code-block:: python\n\n    from django.urls import path\n\n    urlpatterns = [\n        ...\n        path('explorer/', include('explorer.urls')),\n        ...\n    ]\n\nConfigure your settings to something like:\n\n.. code-block:: python\n\n    EXPLORER_CONNECTIONS = { 'Default': 'readonly' }\n    EXPLORER_DEFAULT_CONNECTION = 'readonly'\n\nThe first setting lists the connections you want to allow Explorer to\nuse. The keys of the connections dictionary are friendly names to show\nExplorer users, and the values are the actual database aliases used in\n``settings.DATABASES``. It is highly recommended to setup read-only roles\nin your database, add them in your project's ``DATABASES`` setting and \nuse these read-only cconnections in the ``EXPLORER_CONNECTIONS``.\n\nIf you want to quickly use django-sql-explorer with the existing default\nconnection **and know what you are doing** (or you are on development), you\ncan use the following settings:\n\n.. code-block:: python\n\n    EXPLORER_CONNECTIONS = { 'Default': 'default' }\n    EXPLORER_DEFAULT_CONNECTION = 'default'\n\nFinally, run migrate to create the tables:\n\n``python manage.py migrate``\n\nYou can now browse to https://yoursite/explorer/ and get exploring! \n\nThere are a handful of features (snapshots, emailing queries) that\nrely on Celery and the dependencies in optional-requirements.txt. If\nyou have Celery installed, set ``EXPLORER_TASKS_ENABLED=True`` in your\nsettings.py to enable these features.\n\nDependencies\n============\n\nAn effort has been made to keep the number of dependencies to a\nminimum.\n\n*Python*\n\n=========================================================== ======= ================\nName                                                        Version License\n=========================================================== ======= ================\n`sqlparse <https://github.com/andialbrecht/sqlparse/>`_     0.3.0   BSD\n=========================================================== ======= ================\n\n- sqlparse is used for SQL formatting\n\n*Python - Optional Dependencies*\n\n==================================================================== ======= ================\nName                                                                 Version License\n==================================================================== ======= ================\n`celery <http://www.celeryproject.org/>`_                            3.1     BSD\n`django-celery <http://www.celeryproject.org/>`_                     3.1     BSD\n`Factory Boy <https://github.com/rbarrois/factory_boy>`_             2.12.0  MIT\n`xlsxwriter <http://xlsxwriter.readthedocs.io/>`_                    1.2.1   BSD\n`boto <https://github.com/boto/boto>`_                               2.46    MIT\n==================================================================== ======= ================\n\n- Factory Boy is required for tests\n- celery is required for the 'email' feature, and for snapshots\n- boto is required for snapshots\n- xlsxwriter is required for Excel export (csv still works fine without it)\n\n*JavaScript*\n\n============================================================ ======== ================\nName                                                         Version  License\n============================================================ ======== ================\n`Twitter Boostrap <http://getbootstrap.com/>`_               3.3.6    MIT\n`jQuery <http://jquery.com/>`_                               2.1.4    MIT\n`jQuery Cookie <https://github.com/carhartl/jquery-cookie>`_ 1.4.1    MIT\n`jQuery UI <https://jqueryui.com>`_                          1.11.4   MIT\n`Underscore <http://underscorejs.org/>`_                     1.7.0    MIT\n`Codemirror <http://codemirror.net/>`_                       5.15.2   MIT\n`floatThead <http://mkoryak.github.io/floatThead/>`_         1.4.0    MIT\n`list.js <http://listjs.com>`_                               1.2.0    MIT\n`pivottable.js <http://nicolas.kruchten.com/pivottable/>`_   2.0.2    MIT\n============================================================ ======== ================\n\n- All all served from CDNJS except for jQuery UI, which uses a custom\n  build, served locally.\n\npivottable.js relies on jQuery UI but only for the ``Sortable`` method.\n\nTests\n=====\n\nFactory Boy is needed if you'd like to run the tests, which can you do\neasily:\n\n``python manage.py test``\n\nand with coverage:\n\n``coverage run --source='.' manage.py test``\n\nthen:\n\n``coverage report``\n\n...97%! Huzzah!\n\nRunning Locally\n===============\n\nThere is also a test_project that you can use to kick the tires. Just\ncreate a new virtualenv, cd into ``test_project`` and run ``start.sh`` (or\nwalk through the steps yourself) to get a test instance of the app up\nand running.\n\nSettings\n========\n\n======================================= =============================================================================================================== ================================================================================================================================================\nSetting                                 Description                                                                                                                                                  Default\n======================================= =============================================================================================================== ================================================================================================================================================\nEXPLORER_SQL_BLACKLIST                  Disallowed words in SQL queries to prevent destructive actions.                                                 ('ALTER', 'RENAME ', 'DROP', 'TRUNCATE', 'INSERT INTO', 'UPDATE', 'REPLACE', 'DELETE', 'ALTER', 'CREATE TABLE', 'SCHEMA', 'GRANT', 'OWNER TO')\nEXPLORER_SQL_WHITELIST                  These phrases are allowed, even though part of the phrase appears in the blacklist.                             ('CREATED', 'UPDATED', 'DELETED','REGEXP_REPLACE')\nEXPLORER_DEFAULT_ROWS                   The number of rows to show by default in the preview pane.                                                      1000\nEXPLORER_SCHEMA_INCLUDE_TABLE_PREFIXES  If not None, show schema only for tables starting with these prefixes. \"Wins\" if in conflict with EXCLUDE       None  # shows all tables\nEXPLORER_SCHEMA_EXCLUDE_TABLE_PREFIXES  Don't show schema for tables starting with these prefixes, in the schema helper.                                ('django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.admin')\nEXPLORER_SCHEMA_INCLUDE_VIEWS           Include database views                                                                                          False\nEXPLORER_ASYNC_SCHEMA                   Generate DB schema asynchronously. Requires Celery and EXPLORER_TASKS_ENABLED                                   False\nEXPLORER_DEFAULT_CONNECTION             The name of the Django database connection to use. Ideally set this to a connection with read only permissions  None  # Must be set for the app to work, as this is required\nEXPLORER_CONNECTIONS                    A dictionary of { 'Friendly Name': 'django_db_alias'}.                                                          {}  # At a minimum, should be set to something like { 'Default': 'readonly' } or similar. See connections.py for more documentation.\nEXPLORER_PERMISSION_VIEW                Callback to check if the user is allowed to view and execute stored queries                                     lambda u: u.is_staff\nEXPLORER_PERMISSION_CHANGE              Callback to check if the user is allowed to add/change/delete queries                                           lambda u: u.is_staff\nEXPLORER_TRANSFORMS                     List of tuples like [('alias', 'Template for {0}')]. See features section of this doc for more info.            []\nEXPLORER_RECENT_QUERY_COUNT             The number of recent queries to show at the top of the query listing.                                           10\nEXPLORER_GET_USER_QUERY_VIEWS           A dict granting view permissions on specific queries of the form {userId:[queryId, ...], ...}                   {}\nEXPLORER_TOKEN_AUTH_ENABLED             Bool indicating whether token-authenticated requests should be enabled. See \"Power Tips\", above.                False\nEXPLORER_TOKEN                          Access token for query results.                                                                                 \"CHANGEME\"\nEXPLORER_TASKS_ENABLED                  Turn on if you want to use the snapshot_queries celery task, or email report functionality in tasks.py          False\nEXPLORER_S3_ACCESS_KEY                  S3 Access Key for snapshot upload                                                                               None\nEXPLORER_S3_SECRET_KEY                  S3 Secret Key for snapshot upload                                                                               None\nEXPLORER_S3_BUCKET                      S3 Bucket for snapshot upload                                                                                   None\nEXPLORER_FROM_EMAIL                     The default 'from' address when using async report email functionality                                          \"django-sql-explorer@example.com\"\nEXPLORER_DATA_EXPORTERS                 The export buttons to use. Default includes Excel, so xlsxwriter from optional-requirements.txt is needed       [('csv', 'explorer.exporters.CSVExporter'), ('excel', 'explorer.exporters.ExcelExporter'), ('json', 'explorer.exporters.JSONExporter')]\nEXPLORER_UNSAFE_RENDERING               Disable autoescaping for rendering values from the database. Be wary of XSS attacks if querying unknown data...  False\n======================================= =============================================================================================================== ================================================================================================================================================\n\nRelease Process\n===============\n\nRelease process is documented `here\n<https://github.com/groveco/django-sql-explorer/blob/master/pypi-release-checklist.md>`_. If there\nare problems with the release, please help me improve the process so\nit doesn't happen again!\n\n\n",
    "description_content_type": "",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/groveco/django-sql-explorer",
    "keywords": "django sql explorer reports reporting csv database query",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-sql-explorer",
    "package_url": "https://pypi.org/project/django-sql-explorer/",
    "platform": "",
    "project_url": "https://pypi.org/project/django-sql-explorer/",
    "project_urls": {
      "Homepage": "https://github.com/groveco/django-sql-explorer"
    },
    "release_url": "https://pypi.org/project/django-sql-explorer/2.0/",
    "requires_dist": [
      "Django (>=2.2.14)",
      "sqlparse (>=0.4.0)",
      "xlsxwriter (>=1.2.1) ; extra == 'xls'"
    ],
    "requires_python": ">=3.6",
    "summary": "A pluggable app that allows users (admins) to execute SQL, view, and export the results.",
    "version": "2.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17069535,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "e46be6557e43fb561fae9249bd091f93e41b253b4203efdf3d6949126686d95c",
        "md5": "b6552dc0bef8fa67a68fb9cc105f776d",
        "sha256": "e0b66e6ec214dc3e1c2010bf6f1b2ffdfd8bbed23f9a4e32341aab89118e2017"
      },
      "downloads": -1,
      "filename": "django_sql_explorer-2.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "b6552dc0bef8fa67a68fb9cc105f776d",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6",
      "size": 106378,
      "upload_time": "2020-10-09T14:02:17",
      "upload_time_iso_8601": "2020-10-09T14:02:17.094178Z",
      "url": "https://files.pythonhosted.org/packages/e4/6b/e6557e43fb561fae9249bd091f93e41b253b4203efdf3d6949126686d95c/django_sql_explorer-2.0-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "5ecb87cdebc76fcaf700850f68d24de2ad060156a893389bfc4b063f4b5102e2",
        "md5": "c41211203293e912c438df9aeebb0cc3",
        "sha256": "2b1ea27ffbb420c773f32f0e10e5cbc0f9b73ec33420874c36241fee0c7887a6"
      },
      "downloads": -1,
      "filename": "django-sql-explorer-2.0.tar.gz",
      "has_sig": false,
      "md5_digest": "c41211203293e912c438df9aeebb0cc3",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 86414,
      "upload_time": "2020-10-09T14:02:19",
      "upload_time_iso_8601": "2020-10-09T14:02:19.074782Z",
      "url": "https://files.pythonhosted.org/packages/5e/cb/87cdebc76fcaf700850f68d24de2ad060156a893389bfc4b063f4b5102e2/django-sql-explorer-2.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}