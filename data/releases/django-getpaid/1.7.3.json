{
  "info": {
    "author": "Krzysztof Dorosz",
    "author_email": "cypreess@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable"
    ],
    "description": "Welcome to django-getpaid!\r\n============================\r\n\r\n.. image:: https://img.shields.io/pypi/v/django-getpaid.svg\r\n    :target: https://pypi.python.org/pypi/django-getpaid\r\n    :alt: Latest PyPI version\r\n.. image:: https://img.shields.io/pypi/dm/django-getpaid.svg\r\n    :target: https://pypi.python.org/pypi/django-getpaid\r\n    :alt: Number of PyPI downloads\r\n.. image:: https://travis-ci.org/cypreess/django-getpaid.png?branch=master\r\n    :target: https://travis-ci.org/cypreess/django-getpaid\r\n.. image:: https://coveralls.io/repos/cypreess/django-getpaid/badge.svg?branch=master&service=github\r\n    :target: https://coveralls.io/github/cypreess/django-getpaid?branch=master\r\n.. image:: https://img.shields.io/badge/wheel-yes-green.svg\r\n    :target: https://pypi.python.org/pypi/django-getpaid\r\n.. image:: https://img.shields.io/pypi/l/django-getpaid.svg\r\n    :target: https://pypi.python.org/pypi/django-getpaid\r\n.. image:: https://d2weczhvl823v0.cloudfront.net/cypreess/django-getpaid/trend.png\r\n    :target: https://bitdeli.com/free\r\n\r\nDocumentation: http://django-getpaid.readthedocs.org/en/latest/\r\n\r\n**django-getpaid** is carefully designed **multi-broker payment processor for Django** framework. It was designed\r\nto provide following features:\r\n\r\n* **multiple payment brokers support** - allows using simultaneously many payments methods at the same time,\r\n* **multiple payments currency support** (getpaid will automatically filter available backends list accordingly to the payment currency),\r\n* **integration flexibility**  -  makes minimal assumption on 3rd party code - requires only an existence of any single django model representing an order,\r\n* **proper architecture design** - all backends which requires fetching payment confirmation are enforced to use asynchronous celery tasks.\r\n\r\n\r\nSupported backends:\r\n-------------------\r\n\r\nIn alphabetical order:\r\n\r\n* `Dotpay.pl/Dotpay.eu <http://dotpay.eu>`_\r\n* `Epay.dk <http://www.epay.dk>`_\r\n* `Moip.com.br <http://moip.com.br>`_\r\n* `PayU.pl <http://payu.pl>`_\r\n* `Paymill.com <http://paymill.com>`_\r\n* `Przelewy24.pl <http://www.przelewy24.pl/>`_\r\n* `Transferuj.pl <http://transferuj.pl>`_\r\n\r\nDon't see the payment backend you need? `Writing your own backend <https://django-getpaid.readthedocs.org/en/latest/custom_backends.html>`_ is very simple. Pull requests are welcome.\r\n\r\nDisclaimer\r\n----------\r\nThis project has nothing in common with `getpaid <http://code.google.com/p/getpaid/>`_ plone project.\r\nIt is mostly based on `mamona <https://github.com/emesik/mamona>`_ project.\r\nThis app was written because there was not a single reliable or simple to use payment processor dedicated to django.\r\nYou can refer to other payment modules which does not meet our needs:\r\n`Satchmo <http://satchmoproject.sadba.org/docs/dev/>`_,\r\n`python-payflowpro <https://github.com/bkeating/python-payflowpro/>`_,\r\n`django-authorizenet <https://github.com/zen4ever/django-authorizenet>`_,\r\n`mamona <https://github.com/emesik/mamona>`_,\r\n`django-paypal <https://github.com/johnboxall/django-paypal>`_,\r\n`django-payme <https://github.com/bradleyayers/django-payme/>`_.\r\n\r\n\r\n\r\nPayment workflow integration\r\n============================\r\n\r\nWith few simple steps you will easily integrate your project with django-getpaid. This module is shipped with\r\nvery well documented django-getpaid test project which can be found with module source code. Please refer to this\r\ncode for implementation details.\r\n\r\nStep 1. Prepare your order model\r\n--------------------------------\r\n\r\n**Required**\r\n\r\nFirst of all you need a model that will represent an order in you application. It does not matter how\r\ncomplicated the model is or what fields does it provide, be it single item order, or multiple items order.\r\nLet's take an example from test project::\r\n\r\n    from django.core.urlresolvers import reverse\r\n    from django.db import models\r\n    import getpaid\r\n\r\n    class Order(models.Model):\r\n        name = models.CharField(max_length=100)\r\n        total = models.DecimalField(decimal_places=2, max_digits=8, default=0)\r\n        currency = models.CharField(max_length=3, default='EUR')\r\n        status = models.CharField(max_length=1, blank=True, default='W', choices=(('W', 'Waiting for payment'),\r\n                                                                                   ('P', 'Payment complete')))\r\n        def get_absolute_url(self):\r\n            return reverse('order_detail', kwargs={'pk': self.pk})\r\n\r\n        def __unicode__(self):\r\n            return self.name\r\n\r\n    Payment = getpaid.register_to_payment(Order, unique=False, related_name='payments')\r\n\r\n\r\nFor django >=1.7 please add the following line to your settings:\r\n\r\n    GETPAID_ORDER_MODEL = 'my_super_app.Order'\r\n\r\n\r\nFirst of all, class name is not important at all. You register a model with ``register_to_payment`` method.\r\n\r\nYou can add some `kwargs` that are basically used for ``ForeignKey`` kwargs. In this example whe allow creating multiple payments for one order, and naming One-To-Many relation.\r\n\r\nThere are two important things on that model. In fact two methods are required to be present in order class.\r\nThe first one is ``__unicode__`` method as this will be used in few places as a fallback for generating\r\norder description. The second one is ``get_absolute_url`` method which should return an URL of order object.\r\nIt is used again as a fallback for some final redirections after payment success of failure (if you do not provide otherwise).\r\n\r\nThe second important thing is, that it actually doesn't matter if you store `total` in database or just sum it up from some items.\r\nYou will see why, in further sections.\r\n\r\n\r\nStep 2. Prepare payment form for order\r\n--------------------------------------\r\n\r\n**Required**\r\n\r\nYour application - after some custom workflow - just created an order object. That's fine.\r\nWe now want to get paid for that order. So lets take a look on a view for creating a payment for an order::\r\n\r\n    from django.views.generic.detail import DetailView\r\n    from getpaid.forms import PaymentMethodForm\r\n    from getpaid_test_project.orders.models import Order\r\n\r\n    class OrderView(DetailView):\r\n        model=Order\r\n\r\n        def get_context_data(self, **kwargs):\r\n            context = super(OrderView, self).get_context_data(**kwargs)\r\n            context['payment_form'] = PaymentMethodForm(self.object.currency, initial={'order': self.object})\r\n            return context\r\n\r\n\r\nHere we get a ``PaymentMethodForm`` object, that is parametrised with currency type.\r\nThis is an important thing, because this form will display you only payments method that are suitable\r\nfor a given order currency.\r\n\r\n``PaymentMethodForm`` provides two fields: HiddenInput with order_id and ChoiceField with backend name. This is how you use it in template::\r\n\r\n    <form action=\"{% url getpaid-new-payment currency=object.currency %}\" method=\"post\">\r\n        {% csrf_token %}\r\n        {{ payment_form.as_p }}\r\n        <input type=\"submit\" value=\"Continue\">\r\n    </form>\r\n\r\n\r\nAction URL of form should point on named link  `getpaid-new-payment` that requires currency code argument.\r\nThis form will redirect client from order view directly to page of payment broker.\r\n\r\nStep 3. Filling necessary payment data\r\n--------------------------------------\r\n\r\n**Required**\r\n\r\nBecause the idea of whole module is that it should be loosely coupled, there is this convention that it does\r\nnot require any structure of your order model. But still it needs to know some transaction details of your order.\r\nDjango signals are used for that. django-getpaid, while generating gateway redirect url, will emit\r\na ``getpaid.signals.new_payment_query`` signal. Here is the signal declaration::\r\n\r\n    new_payment_query = Signal(providing_args=['order', 'payment'])\r\n    new_payment_query.__doc__ = \"\"\"\r\n    Sent to ask for filling Payment object with additional data:\r\n        payment.amount:                 total amount of an order\r\n        payment.currency:               amount currency\r\n    This data cannot be filled by ``getpaid`` because it is Order structure\r\n    agnostic. After filling values just return. Saving is done outside signal.\r\n    \"\"\"\r\n\r\nYour code should have some signal listeners, that will fill payment object with required information::\r\n\r\n    from getpaid import signals\r\n\r\n    def new_payment_query_listener(sender, order=None, payment=None, **kwargs):\r\n        \"\"\"\r\n        Here we fill only two obligatory fields of payment, and leave signal handler\r\n        \"\"\"\r\n        payment.amount = order.total\r\n        payment.currency = order.currency\r\n\r\n    signals.new_payment_query.connect(new_payment_query_listener)\r\n\r\n\r\nSo this is a little piece of logic that you need to provide to map your order to payment object.\r\nAs you can see you can do all fancy stuff here to get order total value and currency code.\r\n\r\n.. note::\r\n\r\n    If you don't know where to put your listeners code, we recommend to put it in ``listeners.py`` file\r\n    and then add a line ``import listeners`` to the end of you ``models.py`` file. Both files\r\n    (``listeners.py`` and ``models.py``) should be placed in on of your app (possibly an app related to order model).\r\n\r\nStep 4. Handling changes of payment status\r\n------------------------------------------\r\n\r\n**Required**\r\n\r\nSignals are also used to inform you that some particular payment just change status. In this case you will\r\nuse ``getpaid.signals.payment_status_changed`` signal which is defined as::\r\n\r\n    payment_status_changed = Signal(providing_args=['old_status', 'new_status'])\r\n    payment_status_changed.__doc__ = \"\"\"Sent when Payment status changes.\"\"\"\r\n\r\nexample code that handles status change::\r\n\r\n    from getpaid import signals\r\n\r\n    def payment_status_changed_listener(sender, instance, old_status, new_status, **kwargs):\r\n        \"\"\"\r\n        Here we will actually do something, when payment is accepted.\r\n        E.g. lets change an order status.\r\n        \"\"\"\r\n        if old_status != 'paid' and new_status == 'paid':\r\n            # Ensures that we process order only one\r\n            instance.order.status = 'P'\r\n            instance.order.save()\r\n\r\n    signals.payment_status_changed.connect(payment_status_changed_listener)\r\n\r\nFor example: when payment changes status to 'paid', it means that the necessary amount was verified\r\nby your payment broker. You can now access ``payment.order`` object and do some stuff here.\r\n\r\nStep 5. Handling new payment creation\r\n-------------------------------------\r\n\r\n**Optional**\r\n\r\nFor some reasons you may want to make some additiona checks before a new\r\nPayment is created or add some extra validation before the user is redirected\r\nto gateway url. You can handle this with\r\n``getpaid.signals.order_additional_validation`` signal defined as::\r\n\r\n        order_additional_validation = Signal(providing_args=['request',\r\n                                                         'order',\r\n                                                         'backend'])\r\n        order_additional_validation.__doc__ = \"\"\"\r\n        A hook for additional validation of an order.\r\n        Sent after PaymentMethodForm is submitted but before\r\n        Payment is created and before user is redirected to payment gateway.\r\n        \"\"\"\r\n\r\nIt may also (e.g. for KPI benchmarking) be important for you to how many\r\nand which payments were made.\r\nYou can handle ``getpaid.signals.new_payment`` signal defined as::\r\n\r\n    new_payment = Signal(providing_args=['order', 'payment'])\r\n    new_payment.__doc__ = \"\"\"Sent after creating new payment.\"\"\"\r\n\r\n\r\n.. note::\r\n\r\n    This method will enable you to make on-line KPI processing. For batch processing you can as well just query\r\n    the database for Payment model.\r\n\r\nStep 6. Setup your payment backends\r\n-----------------------------------\r\n\r\n**Required**\r\n\r\nPlease be sure to read carefully  `Backends <https://django-getpaid.readthedocs.org/en/latest/backends.html>`_ section for information on how to configure particular backends.\r\nThey will probably not work out of the box without providing some account keys or other credentials.",
    "description_content_type": null,
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/cypreess/django-getpaid",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-getpaid",
    "package_url": "https://pypi.org/project/django-getpaid/",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/django-getpaid/",
    "project_urls": {
      "Homepage": "https://github.com/cypreess/django-getpaid"
    },
    "release_url": "https://pypi.org/project/django-getpaid/1.7.3/",
    "requires_dist": null,
    "requires_python": null,
    "summary": "Multi-broker payment processor for django",
    "version": "1.7.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 10679541,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "e82cfbe449d350b54fcaed08365c48ae8747f5513e5aba4cd4f1cb8cbf01eb8c",
        "md5": "c623852c5d69cf08852af1e3c223910c",
        "sha256": "1265413ecae5b3c71858ccc7f875ee3731c3f45aaf8f101e84af5668af50c6f4"
      },
      "downloads": -1,
      "filename": "django-getpaid-1.7.3.tar.gz",
      "has_sig": false,
      "md5_digest": "c623852c5d69cf08852af1e3c223910c",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 66902,
      "upload_time": "2015-11-23T22:33:06",
      "upload_time_iso_8601": "2015-11-23T22:33:06.303323Z",
      "url": "https://files.pythonhosted.org/packages/e8/2c/fbe449d350b54fcaed08365c48ae8747f5513e5aba4cd4f1cb8cbf01eb8c/django-getpaid-1.7.3.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}