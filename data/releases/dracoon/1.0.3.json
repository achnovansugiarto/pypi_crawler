{
  "info": {
    "author": "Octavio Simone",
    "author_email": "octsim@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: Apache Software License",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "\n\n  <h3 align=\"center\">DRACOON-PYTHON-API</h3>\n\n  <p align=\"center\">\n    Python connector to DRACOON API\n    <br />\n    <a href=\"https://github.com/unbekanntes-pferd/DRACOON-PYTHON-API\"><strong>Explore the docs Â»</strong></a>\n    <br />\n    <a href=\"https://github.com/unbekanntes-pferd/DRACOON-PYTHON-API/issues\">Report Bug</a>\n  </p>\n</p>\n\n<!-- TABLE OF CONTENTS -->\n## Table of Contents\n\n* [About the Project](#about-the-project)\n  * [Built With](#built-with)\n* [Getting Started](#getting-started)\n  * [Prerequisites](#prerequisites)\n  * [Installation](#installation)\n* [Usage](#usage)\n* [Roadmap](#roadmap)\n* [Contributing](#contributing)\n* [License](#license)\n\n\n\n<!-- ABOUT THE PROJECT -->\n## About The Project\n__Disclaimer: this is an unofficial repo and is not supported by DRACOON__<br>\nThis package provides a wrapper for the DRACOON API including full crypto support. \nDRACOON is a cloud storage product / service (SaaS) by DRACOON GmbH (http://dracoon.com). \nDRACOON API documentation can be found here (Swagger UI):\n\nhttps://dracoon.team/api/\n\n### Built With\n\n* [Python 3.9.0](https://www.python.org/)\n* [httpx module](https://www.python-httpx.org/)\n* [cryptography](https://cryptography.io/en/latest/)\n* [pydantic](https://pydantic-docs.helpmanual.io/)\n\n[List all dependencies](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/requirements.txt)\n\n<!-- GETTING STARTED -->\n## Getting Started\n\nTo get started, create a virtual environment in Python and install the dracoon package:\n```bash\nvirtualenv <DIR>\nsource <DIR>/bin/activate \npython3 -m pip install dracoon\n```\n\n### Prerequisites\n\nYou will need a working Python 3 installation - check your version:\n* Python\n```bash\npython3 --version\n```\n\n### Installation\n\n1. Install the package from PyPi\n```bash\npython3 -m pip install dracoon\n```\n\n<!-- USAGE EXAMPLES -->\n## Usage\n### Import DRACOON\n```Python\nfrom dracoon import DRACOON\n```\n\nThis is the main class and contains all other adapters to access DRACOON API endpoints. \nThe object contains a client (DRACOONClient) which handles all http connections via httpx (async). \n\n\n### Object creation\n```Python\ndracoon = DRACOON(base_url, client_id, client_secret)\n```\n\n* _client_id_; please register your OAuth app or use dracoon_legacy_scripting (default)\n* _client_secret_; please register your OAuth app or use dracoon_legacy_scripting - secret is an empty string (no secret)\n* _base_url_: Your DRACOON URL instance (e.g. https://dracoon.team)\n\n\n### Authentication\n\n#### Password flow\n\n```Python\nconnection = await dracoon.connect(OAuth2ConnectionType.password_flow, username, password)\n```\n\nThe connection result contains the tokens (access and refresh, including validity).\n\nYou need pass one of the supported OAuth2 connection types. \nTo access the enums, import OAuth2ConnectionType:\n\n```Python\nfrom dracoon import DRACOON, OAuth2Connectiontype\n```\n\nPlease note: you can only authenticate if OAuth app is correctly configured. Only local accounts (including Active Directory) can be used via password flow.\nFull example: [Login via password flow](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_login_password_flow.py)\n\n#### Authorization code flow\n```Python\nprint(dracoon.get_code_url())\nauth_code = input('Enter auth code:')\nconnection = await dracoon.connect(auth_code=auth_code)\n```\nIf you do not provide a connection type, the default will be auth code.\nYou should prompt (or fetch) the auth code via the respective url.\nFull example: [Login via auth code](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_login_auth_code_flow.py)\n\nPlease note: you can only authenticate if OAuth app is correctly configured. You will need a custom app with authorization code flow enabled and you will need to set your redirect uri to https://your.domain.com/oauth/callback \n\n#### Test connection\n```Python\nconnected = dracoon.test_connection()\n```\nThis will provide a true / false result depending on the connection.\nAn authenticated ping is used to verify the tokens are valid.\n\n#### Refresh token\n\nAll methods check for access token validity and fetch new tokens, if the access tokens expire.\nTherefore it should not be necessary to manually request it.\n\nYou can manually use the refresh token auth as follows:\n\n```Python\nconnection = await dracoon.client.connect(OAuth2ConnectionType.refresh_token)\n```\n\nEvery connect process will update the connection.\n\n\n#### Log out\n```Python\nawait dracoon.logout()\n```\nThis will revoke both access and refresh tokens.\n\n\n### Send requests\n\n1. You can access specific API endpoints by accessing the related adapter, e.g. for users, once you have connected:\n\n```Python\nresult = await dracoon.users.get_users()\n```\n\nPlease note: \n* GET requests are limited to returning 500 items. Therefore all such requests contain an offset parameter (default is 0)\n* Providing a filter is optional - see API documentation and examples on usage\n* If you do not connect the client, the adapters are not instantiated and \ncannot be accessed!\n* All (!) calls are async methods and need to be awaited\n\nAvailable adapters:\n\n```Python\ndracoon.config  # config API including webhooks\ndracoon.users  # users management\ndracoon.groups # groups management\ndracoon.user # user account and keypair setup\ndracoon.nodes # nodes (up- and download including S3 direct up)\ndracoon.shares # shares and file requests\ndracoon.uploads # upload API\ndracoon.reports # new reporting API\ndracoon.eventlog # old eventlog API\n```\n\n\n2. This package contains type hints and includes models for all payloads (updates and create payloads).\nTo faciliate compliant object creation, there are several helper methods which can be found via make_, e.g.:\n\n```Python\nroom = dracoon.nodes.make_room(...)\n```\n\nThis helps finding the right parameters and building objects that are compliant with the DRACOON models.\n\n## Cryptography\n\nDRACOON cryptography is fully supported by the package. In order to use it, import the relevant functions or en- and decryptors:\n\n```Python\nfrom dracoon.crypto import create_plain_userkeypair\nfrom dracoon.crypto import create_file_key\n```\n\n### Create a new keypair\n\nThe account adapter (user) includes a method to set a new keypair:\n\n```Python\ndracoon.user.set_keypair(secret)\n\n```\nA new keypair will be generated (4096bit RSA asymmetric).\nPrior to setting a new keypair you always need to delete the old one!\nPlease note: Deleting a keypair can cause data loss.\n\n### Getting your (plain) keypair\n\nIn order to work with encrypted rooms you will need to access your keypair:\n\n```Python\nawait dracoon.get_keypair(secret=secret)\n\n```\nThis method of the main API wrapper will accept a secret (that you need to pass or prompt) returns the plain keypair and stores in in \nthe client for the current session.\n\n\n### En- and decode on the fly (in memory)\n\nFor smaller payload you can directly use the functions returning either\nplain or encrypted bytes like this:\n\n```Python\nplain_bytes = decrypt_bytes(enc_data, plain_file_key)\nenc_bytes = encrypt_bytes(plain_data, plain_file_key)\n\n```\n\n### Chunking\n\nFor larger files it is recommended to encrypt (and upload) in chunks.\nAn example of encryptor usage:\n\n```Python\ndracoon_cipher = FileEncryptionCipher(plain_file_key=plain_file_key)\nenc_chunk = dracoon_cipher.encode_bytes(chunk)\nlast_data, plain_file_key = dracoon_cipher.finalize()\n\n```\nYou can instantiate an encryptor / decryptor by passing a plain file key.\nWhen finalizing, you need to add the last data to the last chunk.\nThe result of the completed encryption is an updated plain_file_key with a specific tag.\n\nHint: You do not need to implement the upload process and can directly use full methods in the uploads adapter (see next chapter).\n\n## Uploads\n\nThe uploads adapter includes full methods to upload data to DRACOON and includes chunking and encryption support.\n\nHere is an example of uploading a file to an encrypted room with only a few lines of code:\n\n```Python\nupload_channel = CreateUploadChannel(parentId=9999, name=file_path.split('/')[-1])\n\nres = await dracoon.nodes.create_upload_channel(upload_channel=upload_channel)\nchannel_res = res.json()\n\nres = await dracoon.uploads.upload_encrypted(file_path=file_path, target_id=9999, upload_channel=channel_res, plain_keypair=plain_keypair)\n    \n```\n\nThe default chunk size is 5 MB but can be passed as an option (chunksize, in bytes).\n\nThe main API wrapper includes a method that includes upload for encrypted and unencrypted files.\nFull example: [File upload](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_upload.py)\n\n## Downloads\n\nThe downloads adapter includes full methods to download data from DRACOON including chunking and encryption support.\n\nIn order to download a file, generate a download url and use the relevant method:\n\n```Python\nres = await self.nodes.get_download_url(node_id=node_id)\ndownload_url = res.json()[\"downloadUrl\"]\n\nawait.self.downloads.download_unencrypted(download_url=download_url, target_path=target_path, node_info=node_info)\n    \n```\n\nTo get the node information based on a path, you can use the following method:\n\n```Python\nnode_info = await self.nodes.get_node_from_path(file_path)\n```\n\nIn order to download encrypted files, you will need to unlock your keypair and retrieve your file key:\n\n```Python\nplain_keypair = dracoon.get_keypair(secret)\n# get node id via node info (see above)\nfile_key = await self.nodes.get_user_file_key(node_id)\nplain_file_key = decrypt_file_key(file_key, plain_keypair)\n```\n\nAs with uploads, the main wrapper has a method which handles encryption, keypair and file key.\nFull example: [Download files](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_download.py)\n\n\n## Examples\n\n_For examples, check out the example files:_<br>\n\n* [Login via password flow](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_login_password_flow.py)\n* [Login via auth code](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_login_auth_code_flow.py)\n* [Create a user](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_create_user.py)\n* [Set a new keypair](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_create_new_keypair.py)\n* [Upload file](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_upload.py)\n* [Download files](https://github.com/unbekanntes-pferd/dracoon-python-api/blob/master/examples/async_download.py)\n\n<!-- ROADMAP -->\n## Roadmap\n\n* Add S3 direct upload\n* Add branding API \n* Error handling, testing coverage\n* Complete all types (update to data classes, remove pydantic, return objects)\n\n<!-- LICENSE -->\n## License\n\nDistributed under the Apache License. See [LICENSE](/LICENSE) for more information.\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/unbekanntes-pferd/DRACOON-PYTHON-API",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "dracoon",
    "package_url": "https://pypi.org/project/dracoon/",
    "platform": "",
    "project_url": "https://pypi.org/project/dracoon/",
    "project_urls": {
      "Homepage": "https://github.com/unbekanntes-pferd/DRACOON-PYTHON-API"
    },
    "release_url": "https://pypi.org/project/dracoon/1.0.3/",
    "requires_dist": [
      "httpx",
      "aiohttp",
      "asyncio",
      "pydantic",
      "requests",
      "cryptography",
      "tqdm"
    ],
    "requires_python": "",
    "summary": "DRACOON API wrapper in Python",
    "version": "1.0.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 15816756,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "fb25836eb89598663e82457e54312a1f5d53667a00437502a42f6258839bfe82",
        "md5": "b54ec5c8b658ad7a2a54e739b35d4408",
        "sha256": "5d3ec116b15aa8212b4e486841a3ee5cf5526f5dceb61e136e167eee43a283c5"
      },
      "downloads": -1,
      "filename": "dracoon-1.0.3-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "b54ec5c8b658ad7a2a54e739b35d4408",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 64272,
      "upload_time": "2021-11-19T15:38:13",
      "upload_time_iso_8601": "2021-11-19T15:38:13.381131Z",
      "url": "https://files.pythonhosted.org/packages/fb/25/836eb89598663e82457e54312a1f5d53667a00437502a42f6258839bfe82/dracoon-1.0.3-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "7d84fe5e3a86d3fb335d7aa0c88f17d10244debeb402fc190c5a87e2c3b8dd5e",
        "md5": "1bb610d493d114845740814272f7d6d0",
        "sha256": "4229ed004ce010a1fb0987eff91f41f788ad4087d51e7403f91692c4c8564166"
      },
      "downloads": -1,
      "filename": "dracoon-1.0.3.tar.gz",
      "has_sig": false,
      "md5_digest": "1bb610d493d114845740814272f7d6d0",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 51231,
      "upload_time": "2021-11-19T15:38:17",
      "upload_time_iso_8601": "2021-11-19T15:38:17.462666Z",
      "url": "https://files.pythonhosted.org/packages/7d/84/fe5e3a86d3fb335d7aa0c88f17d10244debeb402fc190c5a87e2c3b8dd5e/dracoon-1.0.3.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}