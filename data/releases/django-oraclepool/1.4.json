{
  "info": {
    "author": "Ed Crewe, Taras Halturin",
    "author_email": "ed.crewe@bris.ac.uk",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Framework :: Django",
      "License :: OSI Approved :: Apache Software License",
      "Programming Language :: Python",
      "Topic :: Software Development :: Libraries :: Python Modules"
    ],
    "description": "ILRT Django Oracle pool\r\n=======================\r\n\r\nEd Crewe, `IT Services R&D\r\n<http://www.bris.ac.uk/ilrt>`_ at University of Bristol, August 2014\r\n\r\nPackaged version of http://code.djangoproject.com/ticket/7732 by Taras Halturin\r\ndjango database backend that uses cx_Oracle session pooling for connections\r\n\r\nSee http://bitbucket.org/edcrewe/django-oraclepool\r\n\r\nOriginal Code Modifications\r\n---------------------------\r\n\r\nPruned original ticket's base.py to just hold the pooling relevant code. \r\nUsing the standard Oracle connection for the rest of the database classes, \r\nie. operations, client and introspection. \r\n\r\nTested with django 1.1 to 1.6\r\n\r\nExtra features\r\n--------------\r\n\r\n- Added the pooling and logging parameters to the settings.\r\n\r\n- The connector uses the standard python logging model and caters for logging \r\n  full details of queries, either to a file log or appending them to the \r\n  bottom of the screen if the log level is DEBUG.\r\n\r\n- Added an option for running against existing (older) Oracle databases, ie those \r\n  which may not have unicode for character fields.\r\n\r\n- Option also allows running the tests against an existing database so that \r\n  running tests doesnt require database creation (oracle sys dba) rights.\r\n\r\n- Added a modification to the cursor to not parse parameters if not required.\r\n\r\nWhy use it?\r\n-----------\r\n\r\nPerhaps due to our remotely distributed Oracle network taking a very long time \r\nto establish connections, the use of cx_Oracle's session pooling for \r\nconnections provided a truely radical performance boost for requests \r\nfrom 3-4 secs/req to 0.4 secs/req, so many times faster.   \r\n\r\nFor single direct Oracle access it might still give a doubling of performance. \r\nInstall it and run the performance test to find out (see below).\r\n\r\nInstallation\r\n------------\r\n\r\nDownload the egg (or use buildout) or download the tarball and extract it. \r\nThen add /path/to/django-oraclepool to your python path.\r\n\r\nSpecify DATABASE_ENGINE = 'oraclepool' instead of 'oracle' in your settings.  \r\n\r\nIf you dont want to use the default extra database settings then the following defaults\r\nare used\r\n\r\n>>> EXTRAS = {'min':4,        # starting number of pooled connections\r\n...           'max':8,         # maximum number of connections in the pool\r\n...           'increment':1,   # increase by this amount when more are needed\r\n...           'threaded':True, # server platform optimisation \r\n...           'timeout':600,   # connection timeout, 600 = 10 mins\r\n...           'log':0,         # extra logging functionality turned on\r\n...           'logfile':'',    # file system path to log file\r\n...           'existing':''    # Type modifications for existing database and flag for tests\r\n...           'session':[]     # Add session optimisations applied to each fresh connection, eg.\r\n...                            #   alter session set cursor_sharing = similar;\r\n...                            #   Enables use of bind variables assuming it isnt set at a system level \r\n...\t\t\t       #   alter session set session_cached_cursors = 20;\r\n...                            #   Allows cursor reuse between queries   \r\n...            'like':'LIKE'   # Option instead of LIKEC default which can stop indexes being used\r\n...            }\r\n\r\nNote that if you want sql logging to screen when in DEBUG mode then add \r\n'oraclepool.log_sql.SQLLogMiddleware' to your MIDDLEWARE_CLASSES\r\n\r\n\r\nGeneral Performance\r\n-------------------\r\n\r\nInitially after apache restart you will see the first few requests taking the same time as each \r\none initiates a new pooled connection. Then request speed should drop as it loses the Oracle \r\nconnection time.\r\n\r\nNB: Note that if you have PythonDebug On then the pool may get flushed much more regularly. \r\nSo you will often get the slower pool populating requests.\r\n\r\nUsing mod_wsgi rather than mod_python may give a 25% added increase although this needs\r\nconfirmation on a production instance.\r\n\r\nIt should be remembered that there is also a very great deal of performance work that can be \r\ndone at the database level. I have posted a page with some of the tips and tricks for \r\nimproving database performance on my blog - http://edcrewe.blogspot.co.uk/p/database-performance.html\r\n\r\nPooling alternatives\r\n--------------------\r\n\r\nPyora pool\r\n\r\nAlso tried out pyora pool see http://code.google.com/p/pyorapool\r\nbut found increase was only around 90% and also had \r\nissues with connection control and database edits failing.\r\nThis also requires the whole architecture of a separate remote procedure call daemon \r\nthat holds the connection pool. Uneccesary here ... although useful\r\nfor pooling across different applications, or multiple servers.\r\n\r\nORM pools\r\n\r\nUsually ORMs have a generic pooling capability, unfortuately djangos only has a beta one \r\nin development, unless you plugin another ORM, eg. http://www.sqlalchemy.org/ instead. \r\nHowever that does require code rewriting.\r\n\r\nHaving said that a generic ORM level pool is unlikely to perform as well as one at the \r\ndatabase connector level, which in turn is going to be less fast than one within the \r\ndatabase itself (see below).\r\n\r\nTests\r\n-----\r\n\r\nThe tests are run via the normal test command, however in order to test everything OK\r\nthe settings file within oraclepool.tests.settings should be used eg.\r\n\r\nbin/django-admin.py test oraclepool --settings=oraclepool.tests.settings\r\n\r\nor the applications adapted to add the oraclepool.tests sub-applications.\r\n\r\nNB: Some of these tests are derived from a set for http://code.google.com/p/django-mssql/\r\n\r\nThey also include the option to run the test suite against an existing database for users who dont\r\nhave full oracle dba rights on their test oracle servers. \r\n\r\nThe key extra tests are performance timings for running the test suite via the pooled oracle\r\nconnection vs the standard one. Hopefully these timings should indicate whether using oraclepool is\r\nof value when using django with your oracle server network. \r\n\r\nThe performance test simulates a real environment by running up a number of connections\r\nas would exist with a production web server (the Apache2 default is 2 processes * 64 threads)\r\nwhilst the test creates a maximum of only 32.\r\nIn practise I found the actual performance improvement significantly greater than that indicated \r\nby the doubling of speed that the multiple connections performance test gives. However that\r\nmay not be the case dependent on your production oracle and web server environment.\r\n\r\nSouth\r\n-----\r\n\r\nIf you use south you need to add the following - see oraclepool.tests.settings:\r\n\r\nSOUTH_DATABASE_ADAPTERS = { 'default': \"south.db.oracle\" }\r\n\r\n\r\n\r\n\r\n\r\nTODO\r\n----\r\n\r\n- Oracle 11g has internal session pooling - DRCP - and cx_Oracle can use that for\r\n  even better performance, so need to add appropriate modification to test whether \r\n  the database 11g or later, and use this feature in place of a cx_Oracle side pool.\r\n  NB: requires cx_Oracle 5, see http://www.oracle.com/technology/pub/articles/tuininga-cx_oracle.html\r\n\r\n\r\nChangelog\r\n=========\r\n\r\n1.4 Test with Django 1.5/1.6 and South - (2014-08-11)\r\n-----------------------------------------------------\r\n\r\n- Fix transaction wrapper - set autocommit each time add a conn to pool\r\n  Note - needs autocommit true on connection to use atomic or else writes not commited consistently\r\n- Use Oracle database wrapper rather than base to keep more in sync  \r\n  [Ed Crewe]\r\n\r\n1.3 Add fix for multiple EXTRAs existing - (2013-02-17)\r\n-------------------------------------------------------\r\n\r\n- Add fix for default value for multiple EXTRAs existing\r\n  [Nikita Zubchick]\r\n- Fix dbshell by adding base._connect_string property\r\n  [Bug reporter - skyl]\r\n- Minor tweaks - e.g. type casting of settings\r\n  [Ed Crewe]\r\n\r\n1.2 Make sure only live connections are used (2012-11-22)\r\n---------------------------------------------------------\r\n\r\n- Add get_alive_connection wrapper to conn.ping() test connections before use [Brent Watson]\r\n- Try Oracle rollback if requested [Brent Watson]\r\n- Pass logger from connection to cursor [Brent Watson]\r\n- Use retry on connections in case one has died [Ricardo del Cid]\r\n- Add models.py so test suite runs [Ed Crewe]\r\n\r\n1.1 Refactor the tests (2012-11-18)\r\n-----------------------------------\r\n\r\n- Make sure the use existing clause works OK for current database settings\r\n- Move tests into oraclepool tests\r\n- Split out the tests from the models files\r\n- Fix the performance test so that its against oracle \r\n  (not oraclepool itself, since the install can override the oracle engine class)\r\n\r\n[Ed Crewe]\r\n\r\n1.0 Add multiple connection extras configuration (2012-11-17)\r\n-------------------------------------------------------------\r\n\r\n- Use logger for credentials error, if available, and hide pw [Ed Crewe]\r\n- Fix tests for running against an existing database [Ed Crewe]\r\n- Fix logger usage so its OK when logging cursor errors [Ed Crewe]\r\n- Add extras dictionary and logger to connections, rather than globally so each one\r\n  can be configured and log separately [Brent Watson]\r\n\r\n0.9 Django 1.4 compatibility fixes (2012-05-18)\r\n-----------------------------------------------\r\n\r\n- Fix database connection usage for django 1.4 compatibility \r\n  [Ed Crewe]\r\n- Fix tests/monkeypatch for performance and regression tests to work OK\r\n  [Ed Crewe]\r\n- Add alias to pool to ensure each connection has its own pool\r\n  [Marc Bee]\r\n\r\n0.8 Django 1.3 compatibility fixes (2011-04-08)\r\n-----------------------------------------------\r\n\r\n- Make self.features = DatabaseFeatures(self) to work with oracle connector change\r\n- Fix the timezone for the tests\r\n- Improve the error reporting if the connection fails due to wrong credentials etc.\r\n\r\n[Ed Crewe]\r\n\r\n0.7 - Oracle LIKEC performance work around and bug fixes (2010-09-20)\r\n---------------------------------------------------------------------\r\n\r\n- Optional switch of use of LIKEC for LIKE since LIKEC ignores indexes in old Oracle\r\n  so has much worse performance, see http://code.djangoproject.com/ticket/11017\r\n- Tested an application and the test suite with django 1.2.3 and python 2.6 \r\n  [Ed Crewe]\r\n- Clean up raising of strings, required for python 2.6 or higher\r\n  [Reinout van Rees]\r\n- Lost an indent along the way for log_sql append to screen\r\n  [kylen]\r\n- Fix multiple pool creation bug under heavy initial load - with locking\r\n  [Aa`Koshh]\r\n- Fix old settings style with django 1.1 python \r\n  [akhenakh]\r\n\r\n0.6 - Minor bugs and django 1.2 compatibility fixes (2010-06-18)\r\n----------------------------------------------------------------\r\n\r\n- Use django 1.2 database settings format by default\r\n- Fix a bug with adding sql log to page when in DEBUG\r\n- Remove print statements where not critical failiure since they will cause one with wsgi\r\n- Drop homogeneous extra argument since unecessary and breaks if used with earlier cx_Oracle\r\n- Fix tests for earlier cx_Oracle\r\n- Remove unused separate class declaration for pools\r\n- Make sure all tests pass\r\n- Ensure default settings are picked up when using old format settings with 1.2 [Marc Bee]\r\n\r\n  [Ed Crewe]\r\n\r\n0.5 - Fix logger bug and add session config (2010-02-19)\r\n--------------------------------------------------------\r\n\r\n- Fix a bug preventing the logger from being used\r\n- Make sure session settings are only set on connection creation not cursor use\r\n- Add a session list of sql lines for optionally setting session parameters\r\n- Wrap connection signal in try except for older django compatibility.\r\n\r\n  [Ed Crewe]\r\n\r\n0.4 - Fix performance test (2010-01-29)\r\n---------------------------------------\r\n\r\n- Whoops, I realised the performance test was underplaying the improvement due to a bug,\r\n  it now gives the same performance for single connections (as expected) and 300% \r\n  improvement for multiple ones.\r\n- Added signal for connection 'creation' and fixed raise of unicode error\r\n\r\n  [Ed Crewe]\r\n\r\n0.3 - Initial release (2010-01-28)\r\n----------------------------------\r\n\r\n- Added test suite including performance test to demonstrate benefits\r\n- Tested and made compatible with django 1.2 (as well as django 1.1)\r\n- Cleaned up the code and factored out anything that wasnt specific to pooling,\r\n  subclassing most components from the standard Oracle engine.\r\n- Modified logging options so DEBUG switches on log to screen and EXTRAS['log'] \r\n  switches logging to file option separately.\r\n\r\n  [Ed Crewe]\r\n\r\n0.2 - Used for UoB student reps\r\n-------------------------------\r\n\r\n- Commented out debug print statements from DatabaseWrapper._cursor which broke install in wsgi\r\n- Added DatabaseWrapper.__init__ like the oracle backend with client, creation and introspection\r\n  borrowed from it, since creation is expected in django 1.1.1 code.\r\n- Added default value of None for settings in DatabaseWrapper._cursor since this argument is not \r\n  expected in django 1.1.1 code.\r\n- Added DATABASE_EXTRAS dictionary to set all the session parameters from django config.\r\n- Added session pool settings report method, to check these.\r\n- Added python logger option and sql_log middleware\r\n\r\n  [Ed Crewe]\r\n\r\n0.1 - Unreleased\r\n----------------\r\n\r\n* Initial release - packaging of code from http://code.djangoproject.com/ticket/7732\r\n \r\n  [Taras Halturin, et al.]",
    "description_content_type": null,
    "docs_url": null,
    "download_url": "UNKNOWN",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "http://bitbucket.org/edcrewe/django-oraclepool",
    "keywords": "django oracle connection pooling cx_Oracle",
    "license": "Apache",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-oraclepool",
    "package_url": "https://pypi.org/project/django-oraclepool/",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/django-oraclepool/",
    "project_urls": {
      "Download": "UNKNOWN",
      "Homepage": "http://bitbucket.org/edcrewe/django-oraclepool"
    },
    "release_url": "https://pypi.org/project/django-oraclepool/1.4/",
    "requires_dist": null,
    "requires_python": null,
    "summary": "django database backend that uses cx_Oracle session pooling for connections",
    "version": "1.4",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 1193683,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "2344c2b3d70f9778bc7fade42945501ed3e5258cf4ded7a81855193096d4bbf3",
        "md5": "c0b10abf7e8c55a844e6bc7ed922109a",
        "sha256": "9a1f68b88e38353f18be9bd9e1665dc14cbba3cdc81d92b00f313d55b909b149"
      },
      "downloads": -1,
      "filename": "django-oraclepool-1.4.tar.gz",
      "has_sig": false,
      "md5_digest": "c0b10abf7e8c55a844e6bc7ed922109a",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 34978,
      "upload_time": "2014-08-13T16:21:05",
      "upload_time_iso_8601": "2014-08-13T16:21:05.167041Z",
      "url": "https://files.pythonhosted.org/packages/23/44/c2b3d70f9778bc7fade42945501ed3e5258cf4ded7a81855193096d4bbf3/django-oraclepool-1.4.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}