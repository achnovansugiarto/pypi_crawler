{
  "info": {
    "author": "vb YAZILIM",
    "author_email": "hello@vbyazilim.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Environment :: Web Environment",
      "Framework :: Django",
      "Framework :: Django :: 2.2",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3 :: Only",
      "Programming Language :: Python :: 3.6",
      "Topic :: Internet :: WWW/HTTP",
      "Topic :: Internet :: WWW/HTTP :: Dynamic Content"
    ],
    "description": "[![Build Status](https://travis-ci.org/vbyazilim/django-vb-baseapp.svg?branch=master)](https://travis-ci.org/vbyazilim/django-vb-baseapp)\n![Python](https://img.shields.io/badge/python-3.7.4-green.svg)\n![Python](https://img.shields.io/badge/python-3.8.0-green.svg)\n![Django](https://img.shields.io/badge/django-2.2.8-green.svg)\n![Version](https://img.shields.io/badge/version-1.1.2-orange.svg)\n[![Codacy Badge](https://api.codacy.com/project/badge/Grade/4c6aa76f09fd437eb3888855fccc9604)](https://www.codacy.com/manual/vigo/django-vb-baseapp?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=vbyazilim/django-vb-baseapp&amp;utm_campaign=Badge_Grade)\n\n# django-vb-baseapp\n\nThis is a helper app for https://github.com/vbyazilim/django-vb-admin\nand ships with while installation:\n\n```bash\n$ pip install django-vb-admin\n$ django-vb-admin -h\n```\n\nIt’s also available on PyPI and available via:\n\n```bash\n$ pip install django-vb-baseapp\n```\n\n## Features\n\n- Two abstract custom base models: `CustomBaseModel` and `CustomBaseModelWithSoftDelete`\n- Two custom base model admins: `CustomBaseModelAdmin` and `CustomBaseModelAdminWithSoftDelete`\n- Soft deletion feature and admin actions for `CustomBaseModelAdminWithSoftDelete`\n- `pre_undelete` and `post_undelete` signals for **soft delete** operation\n- Pre enabled models admin site: `ContentTypeAdmin`, `LogEntryAdmin`, `PermissionAdmin`, `UserAdmin`\n- Timezone and locale middlewares\n- Onscreen debugging feature for views! (Template layer...)\n- Handy utils: `numerify`, `save_file`, `SlackExceptionHandler`\n- Fancy file widget: `AdminImageFileWidget` for `ImageField` on admin by default\n- `OverwriteStorage` for overwriting file uploads\n- Custom file storage for missing files for development environment: `FileNotFoundFileSystemStorage`\n- Custom and configurable error page views for: `400`, `403`, `404`, `500`\n- Custom management command with basic output feature `CustomBaseCommand`\n- Builtin `console`, `console.dir()` via `vb-console` [package][vb-console]\n- Simpler server logging for `runserver_plus`\n- This project uses [bulma.io][bulma.io] as HTML/CSS framework, ships with **jQuery** and **Fontawesome**\n\n---\n\n## Screenshots\n\n<table>\n    <tr>\n        <td><img src=\"screenshots/vb_baseapp-admin-changelist-1.png\" alt=\"Change list 1\"></td>\n        <td><img src=\"screenshots/vb_baseapp-admin-changelist-2.png\" alt=\"Change list 2\"></td>\n    </tr>\n    <tr>\n        <td><img src=\"screenshots/vb_baseapp-admin-change-form-1.png\" alt=\"Change form 1\"></td>\n        <td><img src=\"screenshots/vb_baseapp-admin-change-form-2.png\" alt=\"Change form 2\"></td>\n    </tr>\n</table>\n\n---\n\n## Tutorial\n\nLet’s build a basic blog with categories and tags! First, create a virtual\nenvironment:\n\n```bash\n# via builtin\n$ python -m venv my_env\n$ source my_env/bin/activate\n\n# or via virtualenvwrapper\n$ mkvirtualenv my_env\n```\n\nNow, create a postgresql database;\n\n```bash\n$ createdb my_project_dev\n```\n\nNow set your environment variables:\n\n```bash\n$ export DJANGO_SECRET=$(head -c 75 /dev/random | base64 | tr -dc 'a-zA-Z0-9' | head -c 50)\n$ export DATABASE_URL=\"postgres://localhost:5432/my_project_dev\"\n```\n\nEdit `my_env/bin/activate` or `~/.virtualenvs/my_env/bin/postactivate`\n(*according to your virtualenv creation procedure*) and put these export\nvariables in it. Will be handy next time you activate the environment. Now;\n\n```bash\n$ pip install django-vb-admin\n$ cd /path/to/my-django-project\n$ django-vb-admin startproject\n# or\n$ django-vb-admin startproject --target=\"/path/to/folder\"\n```\n\nYou’ll see:\n\n```bash\nSetup completed...\nNow, create your virtual environment and run\n\n\tpip install -r requirements/development.pip\n\n```\n\nmessage. Now;\n\n```bash\n$ pip install -r requirements/development.pip\n$ python manage.py migrate\nOperations to perform:\n  Apply all migrations: admin, auth, contenttypes, sessions\nRunning migrations:\n  Applying contenttypes.0001_initial... OK\n  Applying auth.0001_initial... OK\n  Applying admin.0001_initial... OK\n  Applying admin.0002_logentry_remove_auto_add... OK\n  Applying admin.0003_logentry_add_action_flag_choices... OK\n  Applying contenttypes.0002_remove_content_type_name... OK\n  Applying auth.0002_alter_permission_name_max_length... OK\n  Applying auth.0003_alter_user_email_max_length... OK\n  Applying auth.0004_alter_user_username_opts... OK\n  Applying auth.0005_alter_user_last_login_null... OK\n  Applying auth.0006_require_contenttypes_0002... OK\n  Applying auth.0007_alter_validators_add_error_messages... OK\n  Applying auth.0008_alter_user_username_max_length... OK\n  Applying auth.0009_alter_user_last_name_max_length... OK\n  Applying auth.0010_alter_group_name_max_length... OK\n  Applying auth.0011_update_proxy_permissions... OK\n  Applying sessions.0001_initial... OK\n```\n\nNow, we have a ready Django project. Let’s check;\n\n```bash\n$ python manage.py runserver_plus\n\n# or\n\n$ rake\n\nINFO |  * Running on http://127.0.0.1:8000/ (Press CTRL+C to quit)\nINFO |  * Restarting with stat\nPerforming system checks...\n\nSystem check identified no issues (0 silenced).\n\nDjango version X.X.X, using settings 'config.settings.development'\nDevelopment server is running at http://[127.0.0.1]:8000/\nUsing the Werkzeug debugger (http://werkzeug.pocoo.org/)\nQuit the server with CONTROL-C.\nWARNING |  * Debugger is active!\nWARNING |  * Debugger PIN disabled. DEBUGGER UNSECURED!\n```\n\nLet’s create a **blog** app!\n\n```bash\n$ python manage.py create_app blog\n\n# or\n\n$ rake new:application[blog]\n\n\"blog\" application created.\n\n\n    - Do not forget to add your `blog` to `INSTALLED_APPS` under `config/settings/base.py`:\n\n    INSTALLED_APPS += [\n        'django_extensions',\n        'blog.apps.BlogConfig', # <-- add this\n    ]\n\n    - Do not forget to fix your `config/urls.py`:\n\n    # ...\n    # add your newly created app's urls here!\n    urlpatterns += [\n        # ...\n        # this is just an example!\n        path('__blog__/', include('blog.urls', namespace='blog')),\n        # ..\n    ]\n    # ...\n```\n\nYou can follow the instructions, fix your `config/settings/base.py` and\n`config/urls.py` as seen on the command output. Now run development server\nand call the url:\n\n```bash\n$ python manage.py runserver_plus\n```\n\nOpen `http://127.0.0.1:8000/__blog__/`. Also, another builtin app is running;\n`http://127.0.0.1:8000/__vb_baseapp__/`. You can remove `__vb_baseapp__`\nconfig from `config/urls.py`.\n\nNow let’s add some models. We have 3 choices as parameters:\n\n1. `django`: Uses Django’s `models.Model`\n1. `basemodel`: Uses `CustomBaseModel` (which inherits from `models.Model`)\n1. `softdelete`: Uses `CustomBaseModelWithSoftDelete`\n\nWe’ll use soft-deletable model to demonstrate soft-delete features. Let’s\ncreate `Post`, `Category` and `Tag` models:\n\n```bash\n$ python manage.py create_model blog post softdelete\n\n# or\n\n$ rake new:model[blog,post,softdelete]\n\nmodels/post.py created.\nadmin/post.py created.\npost model added to models/__init__.py\npost model added to admin/__init__.py\n\n\n    `post` related files created successfully:\n\n    - `blog/models/post.py`\n    - `blog/admin/post.py`\n\n    Please check your models before running `makemigrations` ok?\n\n$ python manage.py create_model blog category softdelete\n\n# or\n\n$ rake new:model[blog,category,softdelete]\n\nmodels/category.py created.\nadmin/category.py created.\ncategory model added to models/__init__.py\ncategory model added to admin/__init__.py\n\n\n    `category` related files created successfully:\n\n    - `blog/models/category.py`\n    - `blog/admin/category.py`\n\n    Please check your models before running `makemigrations` ok?\n\n$ python manage.py create_model blog tag softdelete\n\n# or\n\n$ rake new:model[blog,tag,softdelete]\n\nmodels/tag.py created.\nadmin/tag.py created.\ntag model added to models/__init__.py\ntag model added to admin/__init__.py\n\n\n    `tag` related files created successfully:\n\n    - `blog/models/tag.py`\n    - `blog/admin/tag.py`\n\n    Please check your models before running `makemigrations` ok?\n```\n\nLet’s fix models before creating and executing migrations:\n\n```python\n# blog/models/post.py\n\nimport logging\n\nfrom django.conf import settings\nfrom django.db import models\nfrom django.utils.translation import ugettext_lazy as _\n\nfrom console import console\nfrom vb_baseapp.models import CustomBaseModelWithSoftDelete\n\n__all__ = ['Post']\n\nlogger = logging.getLogger('app')\nconsole = console(source=__name__)\n\n\nclass Post(CustomBaseModelWithSoftDelete):\n    author = models.ForeignKey(\n        to=settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='posts', verbose_name=_('author')\n    )\n    category = models.ForeignKey(\n        to='Category', on_delete=models.CASCADE, related_name='posts', verbose_name=_('category')\n    )\n    title = models.CharField(max_length=255, verbose_name=_('title'))\n    body = models.TextField(verbose_name=_('body'))\n    tags = models.ManyToManyField(to='Tag', related_name='posts', blank=True)\n\n    class Meta:\n        app_label = 'blog'\n        verbose_name = _('post')\n        verbose_name_plural = _('posts')  # check pluralization\n\n    def __str__(self):\n        return self.title\n```\n\nand `Category` model:\n\n```python\n# blog/models/category.py\n\nimport logging\n\nfrom django.db import models\nfrom django.utils.translation import ugettext_lazy as _\n\nfrom console import console\nfrom vb_baseapp.models import CustomBaseModelWithSoftDelete\n\n__all__ = ['Category']\n\nlogger = logging.getLogger('app')\nconsole = console(source=__name__)\n\n\nclass Category(CustomBaseModelWithSoftDelete):\n    title = models.CharField(max_length=255, verbose_name=_('title'))\n\n    class Meta:\n        app_label = 'blog'\n        verbose_name = _('category')\n        verbose_name_plural = _('categories')  # check pluralization\n\n    def __str__(self):\n        return self.title\n```\n\nand `Tag` model:\n\n```python\n# blog/models/tag.py\n\nimport logging\n\nfrom django.db import models\nfrom django.utils.translation import ugettext_lazy as _\n\nfrom console import console\nfrom vb_baseapp.models import CustomBaseModelWithSoftDelete\n\n__all__ = ['Tag']\n\nlogger = logging.getLogger('app')\nconsole = console(source=__name__)\n\n\nclass Tag(CustomBaseModelWithSoftDelete):\n    name = models.CharField(max_length=255, verbose_name=_('name'))\n\n    class Meta:\n        app_label = 'blog'\n\n    def __str__(self):\n        return self.name\n```\n\nLet’s create and run migration file:\n\n```bash\n$ python manage.py makemigrations --name create_post_category_and_tag\n\n# or\n\n$ rake db:update[blog,create_post_category_and_tag]\n\nMigrations for 'blog':\n  applications/blog/migrations/0001_create_post_category_and_tag.py\n    - Create model Category\n    - Create model Tag\n    - Create model Post\n\n$ python manage.py migrate\n\n# or\n\n$ rake db:migrate\n\nOperations to perform:\n  Apply all migrations: admin, auth, blog, contenttypes, sessions\nRunning migrations:\n  Applying blog.0001_create_post_category_and_tag... OK\n```\n\nNow we have a model which has relations to other models via `ForeignKey` and\n`ManyToMany` level. Let’s tweak `blog/admin/post.py`:\n\n```python\n# blog/admin/post.py\n\nimport logging\n\nfrom django.contrib import admin\n\nfrom console import console\nfrom vb_baseapp.admin import (\n    CustomBaseModelAdminWithSoftDelete,\n)\n\nfrom ..models import Post\n\n__all__ = ['PostAdmin']\n\nlogger = logging.getLogger('app')\nconsole = console(source=__name__)\n\n\n@admin.register(Post)\nclass PostAdmin(CustomBaseModelAdminWithSoftDelete):\n    list_filter = ('category', 'tags', 'author')\n    list_display = ('__str__', 'author')\n    ordering = ('title',)\n    # hide_deleted_at = False\n```\n\nLet’s create a super user and jump in to admin pages. `AUTH_PASSWORD_VALIDATORS`\nis removed from **development** settings, you can type any password :)\n\n```bash\n$ python manage.py createsuperuser --username=\"${USER}\" --email=\"your@email.com\"\n$ python manage.py runserver_plus\n\n# or\n\n$ rake\n\nINFO |  * Running on http://127.0.0.1:8000/ (Press CTRL+C to quit)\nINFO |  * Restarting with stat\nPerforming system checks...\n\nSystem check identified no issues (0 silenced).\n\nDjango version X.X.X, using settings 'config.settings.development'\nDevelopment server is running at http://[127.0.0.1]:8000/\nUsing the Werkzeug debugger (http://werkzeug.pocoo.org/)\nQuit the server with CONTROL-C.\nWARNING |  * Debugger is active!\nWARNING |  * Debugger PIN disabled. DEBUGGER UNSECURED!\nINFO | GET | 302 | /admin/\nINFO | GET | 200 | /admin/login/?next=/admin/\nINFO | GET | 404 | /favicon.ico\n:\n:\n```\n\nNow open `http://127.0.0.1:8000/admin/` and add a new blog post! \nCreate different categories and tags. Then open \n`http://127.0.0.1:8000/admin/blog/category/` page. \n\nIn the Action menu, you’ll have couple extra options:\n\n- Delete selected categories\n- Recover selected categories (*Appears if you are filtering inactive records*)\n- Hard delete selected categories\n\nNow, delete one or more categories or tags. Check **activity state** filter\nfor post, category and tag models. You can recover deleted items from the\naction menu too.\n\n---\n\n## Models\n\n### `CustomBaseModel`\n\nThis is a common model. By default, `CustomBaseModel` contains these fields:\n\n- `created_at`\n- `updated_at`\n\nAlmost a default `models.Model` with two extra fields.\n\n### `CustomBaseModelWithSoftDelete`\n\nThis model inherits from `CustomBaseModel` and provides fake deletion which is\nprobably called **SOFT DELETE**. This means, when you call model’s `delete()`\nmethod or QuerySet’s `delete()` method, it acts like delete action but never\ndeletes the data.\n\nJust sets the `deleted_at` field to **NOW**.\n\nThis works exactly like Django’s `delete()`. Broadcasts `pre_delete` and\n`post_delete` signals and returns the number of objects marked as deleted and\na dictionary with the number of deletion-marks per object type.\n\nYou can call `hard_delete()` method to delete an instance or a queryset\nactually.\n\nThis model uses `CustomBaseModelWithSoftDeleteManager` as default manager.\n\n#### How soft-delete works?\n\nWhen you call `.delete()` method of a model instance or queryset, model manager\nsets `deleted_at` attribute to **NOW** all the way down through related\n`ForeignKey` and `ManyToMany` fields. This means, you still keep everything.\n\nNothing is actually deleted, therefore your database constraints are still\nwork fine. When you access deleted (*inactive*) object from admin site, you’ll\nsee \"deleted\" text prefix in your related form fields if your related objects\nare `CustomBaseModelWithSoftDelete` instances.\n\nWhen you click **recover** button in the same page, all related and soft-deleted\nobjects’ `deleted_at` value will set to `NULL` and available again.\n\nPlease use `.actives()` queryset method instead of `.all()`. Why? `.all()`\nmethod is untouched and works as default. When `all()` called, returning\nqueryset set contains everything event if the `deleted_at` is NULL or not...\n\n#### Examples\n\n```python\n>>> Post.objects.all()\n\nSELECT \"blog_post\".\"id\",\n       \"blog_post\".\"created_at\",\n       \"blog_post\".\"updated_at\",\n       \"blog_post\".\"deleted_at\",\n       \"blog_post\".\"author_id\",\n       \"blog_post\".\"category_id\",\n       \"blog_post\".\"title\",\n       \"blog_post\".\"body\"\n  FROM \"blog_post\"\n LIMIT 21\n\n\nExecution time: 0.000950s [Database: default]\n\n<CustomBaseModelWithSoftDeleteQuerySet [\n    <Post: Python post 1>, \n    <Post: Python post 2>, \n    <Post: Python post 3>, \n    <Post: Python post 4>,\n    :\n    :\n    :\n    <Post: Golang post 4>\n]>\n\n>>> Category.objects.all()\n\nSELECT \"blog_category\".\"id\",\n       \"blog_category\".\"created_at\",\n       \"blog_category\".\"updated_at\",\n       \"blog_category\".\"deleted_at\",\n       \"blog_category\".\"title\"\n  FROM \"blog_category\"\n LIMIT 21\n\n\nExecution time: 0.000643s [Database: default]\n\n<CustomBaseModelWithSoftDeleteQuerySet [<Category: Python>, <Category: Ruby>, <Category: Bash>, <Category: Golang>]>\n\n>>> Tag.objects.all()\n\nSELECT \"blog_tag\".\"id\",\n       \"blog_tag\".\"created_at\",\n       \"blog_tag\".\"updated_at\",\n       \"blog_tag\".\"deleted_at\",\n       \"blog_tag\".\"name\"\n  FROM \"blog_tag\"\n LIMIT 21\n\n\nExecution time: 0.000519s [Database: default]\n\n<CustomBaseModelWithSoftDeleteQuerySet [<Tag: textmate>, <Tag: pyc>, <Tag: irb>, <Tag: ipython>, <Tag: lock>, <Tag: environment>]>\n\n>>> Category.objects.get(title='Bash').delete()\n(9, {'blog.Post_tags': 4, 'blog.Category': 1, 'blog.Post': 4})\n\n>>> Category.objects.delete()\n(11, {'blog.Post_tags': 4, 'blog.Category': 3, 'blog.Post': 4})\n\n>>> Category.objects.inactives()\n\nSELECT \"blog_category\".\"id\",\n       \"blog_category\".\"created_at\",\n       \"blog_category\".\"updated_at\",\n       \"blog_category\".\"deleted_at\",\n       \"blog_category\".\"title\"\n  FROM \"blog_category\"\n WHERE \"blog_category\".\"deleted_at\" IS NOT NULL\n LIMIT 21\n\n\nExecution time: 0.000337s [Database: default]\n\n<CustomBaseModelWithSoftDeleteQuerySet [<Category: Bash>]>\n\n>>> Post.objects.inactives()\n\nSELECT \"blog_post\".\"id\",\n       \"blog_post\".\"created_at\",\n       \"blog_post\".\"updated_at\",\n       \"blog_post\".\"deleted_at\",\n       \"blog_post\".\"author_id\",\n       \"blog_post\".\"category_id\",\n       \"blog_post\".\"title\",\n       \"blog_post\".\"body\"\n  FROM \"blog_post\"\n WHERE \"blog_post\".\"deleted_at\" IS NOT NULL\n LIMIT 21\n\n\nExecution time: 0.000387s [Database: default]\n\n<CustomBaseModelWithSoftDeleteQuerySet [<Post: Bash post 1>, <Post: Bash post 2>, <Post: Bash post 3>, <Post: Bash post 4>]>\n\n>>> Category.objects.inactives().undelete()\n(9, {'blog.Post_tags': 4, 'blog.Category': 1, 'blog.Post': 4})\n\n>>> Category.objects.inactives()\n<CustomBaseModelWithSoftDeleteQuerySet []>\n\n>>> Post.objects.inactives()\n<CustomBaseModelWithSoftDeleteQuerySet []>\n```\n\n`CustomBaseModelWithSoftDeleteQuerySet` has these query options:\n\n- `.actives()` : filters if `CustomBaseModelWithSoftDelete.deleted_at` is set to `NULL`\n- `.inactives()` : filters if `CustomBaseModelWithSoftDelete.deleted_at` is not set to `NULL`\n- `.delete()` : soft delete on given object/queryset.\n- `.undelete()` : recover soft deleted on given object/queryset.\n- `.hard_delete()` : this is real delete. this method erases given object/queryset and there is no turning back!.\n\nWhen soft-delete enabled (*during model creation*), Django admin will\nautomatically use `CustomBaseModelAdminWithSoftDelete` which is inherited from:\n `CustomBaseModelAdmin` <- `admin.ModelAdmin`.\n\n---\n\n## Model Admins\n\n### `CustomBaseModelAdmin`, `CustomBaseModelAdminWithSoftDelete`\n\nInherits from `admin.ModelAdmin`. When model is created via `rake new:model...` \nor via management command, admin file is generated automatically.\n\nThis model admin overrides `models.ImageField` form field and displays fancy\nthumbnail for images. By default, uses cached paginator and sets `show_full_result_count`\nto `False` for performance improvements.\n\n#### Model Admin Properties\n\n`show_goback_button` is set to `True` by default. You can disable via;\n\n```python\nclass ExampleAdmin(CustomBaseModelAdminWithSoftDelete):\n    # ...\n    show_goback_button = False\n    # ...\n```\n\n- `show_full_result_count` is set to `False` by default.\n- `hide_deleted_at` is set to `True` by default. This means, you will not see\nthat field while editing the instance.\n\nExample for `Post` model admin (*auto generated*).\n\n```python\nimport logging\n\nfrom django.contrib import admin\n\nfrom console import console\nfrom vb_baseapp.admin import (\n    CustomBaseModelAdminWithSoftDelete,\n)\n\nfrom ..models import Post\n\n__all__ = ['PostAdmin']\n\nlogger = logging.getLogger('app')\nconsole = console(source=__name__)\n\n\n@admin.register(Post)\nclass PostAdmin(CustomBaseModelAdminWithSoftDelete):\n    # hide_deleted_at = False\n```\n\nBy default, `deleted_at` excluded from admin form like `created_at` and\n`updated_at` fields. You can also override this via `hide_deleted_at`\nattribute. Comment/Uncomment lines according to your needs! This works only in\n`CustomBaseModelAdminWithSoftDelete`.\n\n`CustomBaseModelAdminWithSoftDelete` also comes with special admin action. You can\nrecover/make active (*undelete*) multiple objects like deleting feature of\nDjango’s default.\n\n### Extra Features\n\nWhen you’re dealing with soft-deleted objects, you’ll see **HARD DELETE** and \n**RECOVER** buttons in the change form. Hard delete really wipes the items\nfrom database. Recover, recovers/undeletes object and related elements.\n\nYou’ll also have **GO BACK** button too :)\n\n---\n\n## MiddleWare\n\n### `CustomLocaleMiddleware`\n\nThis is mostly used for our custom projects. Injects `LANGUAGE_CODE` variable to\n`request` object. `/en/path/to/page/` sets `request.LANGUAGE_CODE` to `en` otherwise `tr`.\n\n```python\n# add this to your settings/base.py\nMIDDLEWARE += ['baseapp.middlewares.CustomLocaleMiddleware']\n```\n\n### `TimezoneMiddleware`\n\nIf you have custom user model or you have `timezone` field in your `request.user`,\nthis middleware activates timezone for user.\n\n---\n\n## Custom Error Pages\n\nYou have a browsable (*only in development mode*) and customizable error handler\nfunctions and html templates now!. Templates are under `templates/custom_errors/`\nfolder.\n\n---\n\n## Goodies\n\n### `HtmlDebugMixin`\n\n![Example view](screenshots/vb_baseapp-view.png \"Debug on view layer\")\n\n`self.hdbg(arg, arg, arg, ...)` method helps you to output/debug some data\nin view layer.\n\n```python\n# example view: index.py\n\nimport logging\n\nfrom django.views.generic.base import TemplateView\n\nfrom console import console\nfrom vb_baseapp.mixins import HtmlDebugMixin\n\n__all__ = ['BlogView']\n\nlogger = logging.getLogger('app')\nconsole = console(source=__name__)\n\n\nclass BlogView(HtmlDebugMixin, TemplateView):\n    template_name = 'blog/index.html'\n\n    def get_context_data(self, **kwargs):\n        self.hdbg('Hello from hdbg')\n        kwargs = super().get_context_data(**kwargs)\n        console.dir(self.request.user)\n        return kwargs\n```\n\n`{% hdbg %}` tag is added by default in to your `templates/base.html` and works\nonly if the settings `DEBUG` is set to `True`.\n\n```django\n{% load static i18n %}\n\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>{% block title %}{% endblock %}</title>\n    {% if DJANGO_ENV == 'development' %}\n    <link rel=\"stylesheet\" href=\"{% static 'css/bulma.min.0.8.0.css' %}\">\n    <script defer src=\"{% static 'js/fontawesome.5.3.1.all.js' %}\"></script>\n    {% else %}\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css\">\n    <script defer src=\"https://use.fontawesome.com/releases/v5.3.1/js/all.js\"></script>\n    {% endif %}\n    <link rel=\"stylesheet\" href=\"{% static 'css/vb-baseapp.css' %}\">\n    <link rel=\"stylesheet\" href=\"{% static 'css/application.css' %}\">\n    {% block extra_css %}{% endblock %}\n    <script defer src=\"{% static 'js/application.js' %}\"></script>\n</head>\n<body>\n    {% hdbg %}\n    {% block body %}{% endblock %}\n    {% block extra_js %}{% endblock %}\n</body>\n</html>\n```\n\nIf you don’t want to extend from `templates/base.html` you can use your\nown template. You just need to add `{% hdbg %}` tag in to your template if\nyou still want to enable this feature.\n\nWe have some mini helpers and tools shipped with `vb_baseapp`.\n\n### `console`\n\nThis little tool helps you to output anything to console. This works only\nin test and development mode. If you forget console declarations in your\ncode, do not worry... console checks `DJANGO_ENV` environment variable...\n\n```python\nfrom console import console\n\nconsole = console(source=__name__)\n\nconsole('hello', 'world')\n```\n\nYou can inspect python object via `.dir()` method:\n\n```python\nconsole.dir([])\n\np = Post.objects.actives().first()\nconsole.dir(p)\n```\n\nMore information is available [here][vb-console]\n\n### `vb_baseapp.utils.numerify`\n\nLittle helper for catching **QUERY_STRING** parameters for numerical values:\n\n```python\nfrom baseapp.utils import numerify\n\n>>> numerify(\"1\")\n1\n>>> numerify(\"1a\")\n-1\n>>> numerify(\"ab\")\n-1\n>>> numerify(\"abc\", default=44)\n44\n```\n\n### `vb_baseapp.utils.save_file`\n\nWhile using `FileField`, sometimes you need to handle uploaded files. In this\ncase, you need to use `upload_to` attribute. Take a look at the example:\n\n```python\nfrom vb_baseapp.utils import save_file as custom_save_file\n:\n:\n:\nclass User(AbstractBaseUser, PermissionsMixin):\n    :\n    :\n    avatar = models.FileField(\n        upload_to=save_user_avatar,\n        verbose_name=_('Profile Image'),\n        null=True,\n        blank=True,\n    )\n    :\n    :\n```\n\n`save_user_avatar` returns `custom_save_file`’s return value. Default\nconfiguration of for `custom_save_file` is \n`save_file(instance, filename, upload_to='upload/%Y/%m/%d/')`. Uploads are go to\nsuch as `MEDIA_ROOT/upload/2017/09/21/`...\n\nMake your custom uploads like:\n\n```python\nfrom vb_baseapp.utils import save_file as custom_save_file\n\ndef my_custom_uploader(instance, filename):\n    # do your stuff\n    # at the end, call:\n    return custom_save_file(instance, filename, upload_to='images/%Y/')\n\n\nclass MyModel(models.Model):\n    image = models.FileField(\n        upload_to='my_custom_uploader',\n        verbose_name=_('Profile Image'),\n    )\n```\n\n### SlackExceptionHandler\n\n`vb_baseapp.utils.log.SlackExceptionHandler`\n\nYou can send errors/exceptions to [slack](https://api.slack.com) channel.\nJust create a slack app, get the webhook URL and set as `SLACK_HOOK`\nenvironment variable. Due to slack message size limitation, `traceback`\nis disabled.\n\nExample message contains:\n\n- http status\n- error message\n- exception message\n- user.id or None\n- full path\n\n```bash\nhttp status: 500\nERROR (internal IP): Internal Server Error: /__baseapp__/\nException: User matching query does not exist.\nuser_id: anonymous (None)\nfull path: /__baseapp__/?foo=!\n```\n\nYou can enable/disable in `config/settings/production.py` / `config/settings/heroku.py`:\n\n```python\n:\n:\n    'loggers': {\n        'django.request': {'handlers': ['mail_admins', 'slack'], 'level': 'ERROR', 'propagate': False},  # remove 'slack'\n    }\n:\n:\n```\n\n### `vb_baseapp.storage`\n\n#### `FileNotFoundFileSystemStorage`\n\nAfter shipping/deploying Django app, users start to upload files, right ?\nThen you need to implement new features etc. You can get the dump of the\ndatabase but what about uploaded files ? Sometimes files are too much or\ntoo big. If you call, let’s say, a model’s `ImageField`’s `url` property,\nlocal dev server logs lot’s of **file not found** errors to console.\n\nAlso breaks the look of application via broken image signs in browser.\n\nNow, you won’t see any errors... `FileNotFoundFileSystemStorage` is a\nfake storage that handles non existing files. Returns `file-not-found.jpg`\nfrom `static/images/` folder.\n\nThis is **development purposes** only! Do not use in the production!\n\nYou don’t need to change/add anything to your code... It’s embeded to\n`config/settings/development.py`:\n\n```python\n:\n:\nDEFAULT_FILE_STORAGE = 'vb_baseapp.storage.FileNotFoundFileSystemStorage'\n:\n```\n\nYou can disable if you like to...\n\n#### `OverwriteStorage`\n\n`OverwriteStorage` helps you to overwrite file when uploading from django\nadmin. Example usage:\n\n```python\n# in a model\nfrom vb_baseapp.utils.storage image OverwriteStorage\n\nclass MyModel(models.Model):\n    :\n    :\n    photo = models.ImageField(\n        upload_to=save_media_photo,\n        storage=OverwriteStorage(),\n    )\n    :\n    :\n```\n\nAdd `storage` option in your file related fields.\n\n#### `AdminImageFileWidget`\n\nUse this widget in your admin forms. By default, It’s already enabled in\n`CustomBaseModelAdmin`. You can also inject this to Django’s default `ModelAdmin`\nvia example:\n\n```python\nfrom vb_baseapp.admin.widgets import AdminImageFileWidget\n\nclass MyAdmin(admin.ModelAdmin):\n    formfield_overrides = {\n        models.FileField: {'widget': AdminImageFileWidget},\n    }\n```\n\nThis widget uses `Pillow` (*Python Image Library*) which ships with your `base.pip`\nrequirements file. Show image preview, width x height if the file is image.\n\n#### `context_processors.py`\n\nBy default, `vb_baseapp` injects few variables to you context:\n\n- `DJANGO_ENV`\n- `IS_DEBUG`\n- `LANGUAGE_CODE`\n- `CURRENT_GIT_TAG`\n- `CURRENT_PYTHON_VERSION`\n- `CURRENT_DJANGO_VERSION`\n\n---\n\n## Reminders\n\nDefault timezone is set to `UTC`, please change this or use according to your\nneeds.\n\n```python\n# config/settings/base.py\n# ...\nTIME_ZONE = 'UTC'\n# ...\n```\n\n---\n\n## Management Commands\n\n`vb_baseapp` ships with three managements commands;\n\n### `create_app`\n\n```bash\n$ python manage.py create_app NAME_OF_APP\n```\n\nCreates new Django application under `applications/` and provides application\nfolder structure:\n\n    applications/NAME_OF_APP/\n    ├── admin\n    ├── management\n    ├── migrations\n    ├── models\n    ├── tests\n    ├── views\n    ├── __init__.py\n    ├── apps.py\n    └── urls.py\n\n### `create_model`\n\n```bash\n$ python manage.py create_model NAME_OF_APP NAME_OF_MODEL STYLE_OF_MODEL\n```\n\nCreates Django model. You have three different model style;\n\n1. `django`: Uses Django’s `models.Model`\n1. `basemodel`: Uses `CustomBaseModel` (which inherits from `models.Model`)\n1. `softdelete`: Uses `CustomBaseModelWithSoftDelete`\n\nAccording to your model choice, related files will be generated.\n\n### `create_custom_user_model`\n\n```bash\n$ python manage.py create_custom_user_model NAME_OF_APP NAME_OF_MODEL STYLE_OF_MODEL \n```\n\nThis command will work only in the beginning state of development. Creating\na custom user model is prohibited in the middle of the development. You\nmust decide before you create other models or run initial migrations for\nDjango’s default.\n\nThis command creates;\n\n- Admin files\n- Model manager files\n- Model admin form files\n- Model files\n\nfor given argumens. Let’s say you’ll start a fresh project and want to use\ncustom user model. First, you need to create an app:\n\n```bash\n$ python manage.py create_app blog\n# follow the instructions\n$ python manage.py create_custom_user_model blog CustomUser softdelete\n\nSet AUTH_USER_MODEL in config file\nmodels/custom_user.py created.\nadmin/custom_user.py created.\nCustomUser model added to models/__init__.py\nCustomUser model added to admin/__init__.py\nCustomUser forms added to admin/forms/__init__.py\nadmin/forms/custom_user.py created.\n\nCustom user installation completed. Now please check your;\n\n    - blog/models/custom_user.py\n    - blog/admin/custom_user.py\n    - blog/admin/forms/custom_user.py\n\nAlso;\n\n    - `email` field is set to `USERNAME_FIELD`\n    - `first_name` and `last_name` are set as `REQUIRED_FIELDS`\n    - `middle_name`, `profile_image` are optionals\n\nMake sure if all ok? Make your changes before running migrations:\n\n    $ python manage.py makemigrations --name create_custom_users\n```\n\nWe’ve created `CustomUser` model from softdeletable object. Default fields\nare:\n\n- `email`: `EmailField`\n- `first_name`: `CharField`\n- `middle_name`: (optional) `CharField`\n- `last_name`: `CharField`\n- `profile_image`: (optional) `FileField`\n- `is_active`: (optional) `BooleanField`\n- `is_staff`: (optional) `BooleanField`\n\nand other fields inherited from `AbstractBaseUser`:\n\n- `password`\n- `last_login`\n\nand other properties from `PermissionsMixin`. You can add/change or remove\nfields before creating migrations. Do not forget to check these files for\n`CustomUser` for the sake of this example:\n\n- `admin/custom_user.py`\n- `admin/forms/custom_user.py`\n- `models/custom_user.py`\n\nAlso, this management commands sets `AUTH_USER_MODEL` value in `config/base.py`.\nYou’ll see;\n\n```python\nAUTH_USER_MODEL = 'blog.CustomUser'\n```\n\nsince you’ve named the custom model as `CustomUser`.\n\n---\n\n## Rake Tasks\n\nYou have some handy rake tasks if you like to use `ruby` :)\n\n```bash\n$ rake -T\n\nrake db:migrate[database]                                        # Run migration for given database (default: 'default')\nrake db:roll_back[name_of_application,name_of_migration]         # Roll-back (name of application, name of migration)\nrake db:shell                                                    # run database shell ..\nrake db:show[name_of_application]                                # Show migrations for an application (default: 'all')\nrake db:update[name_of_application,name_of_migration,is_empty]   # Update migration (name of application, name of migration?, is empty?)\nrake default                                                     # Default task: runserver_plus (Werkzeug)\nrake locale:compile                                              # Compile locale dictionary\nrake locale:update                                               # Update locale dictionary\nrake new:application[name_of_application]                        # Create new Django application\nrake new:model[name_of_application,name_of_model,type_of_model]  # Create new Model for given application: django,basemodel,softdelete\nrake runserver:default                                           # Run: runserver (Django's default server)\nrake runserver:default_ipdb                                      # Run: runserver (Django's default server) + ipdb debug support\nrake runserver:plus                                              # Run: runserver_plus (Werkzeug)\nrake runserver:plus_ipdb                                         # Run: runserver_plus (Werkzeug) + ipdb debug support\nrake shell[repl]                                                 # Run shell+ avail: ptpython,ipython,bpython default: ptpython\nrake test:browse_coverage[port]                                  # Browse test coverage\nrake test:coverage[cli_args]                                     # Show test coverage (default: '--show-missing --ignore-errors --skip-covered')\nrake test:run[name_of_application,verbose]                       # Run tests for given application\n```\n\nDefault task is `runserver:plus`. Just type `rake` that’s it! `runserver:plus` uses\n`runserver_plus`. This means you have lots of debugging options!\n\n### `runserver` based tasks\n\n- `rake runserver:default`: runs `python manage.py runserver`\n- `rake runserver:default_ipdb`: runs Django’s default server with debugging\n  feature. You can inject `breakpoint()` in your code! Debugger kicks in!\n- `rake runserver:plus`: runs `python manage.py runserver_plus --nothreading`\n- `rake runserver:plus_ipdb`: runs `runserver:plus` with debugging!\n\n### `rake db:migrate[database]`\n\nMigrates database with given database name. Default is `default`. If you like\nto work multiple databases:\n\n```python\n# example configuration\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db', 'development.sqlite3'),\n    },\n    'my_database': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db', 'my_database.sqlite3'),\n    }\n}\n```\n\nYou can just call `rake db:migrate` or specify different database like: \n`rake db:migrate[my_database]` :)\n\n### `rake db:show[name_of_application]`\n\nShow migration information:\n\n```bash\n$ rake db:show[blog]\nblog\n [X] 0001_create_post_category_and_tag\n [ ] 0002_add_spot_field_to_post\n\n$ rake db:migrate\nRunning migration for: default database...\nOperations to perform:\n  Apply all migrations: admin, auth, blog, contenttypes, sessions\nRunning migrations:\n  Applying blog.0002_add_spot_field_to_post... OK\n```\n\n### `rake db:roll_back[name_of_application,name_of_migration]`\n\nYour database must be rollable :) To see available migrations: \n`rake db:roll_back[NAME_OF_YOUR_APPLICATION]`. Look at the list and choose your\ntarget migration. You can use just the number as shortcut. In this example,\nwe’ll roll back to migration number 1, which has a name: `0001_create_post_category_and_tag`\n\n```bash\n$ rake db:roll_back[blog]\nPlease select your migration:\nblog\n [X] 0001_create_post_category_and_tag\n [X] 0002_add_spot_field_to_post\n\n$ rake db:roll_back[blog,1]\nOperations to perform:\n  Target specific migration: 0001_create_post_category_and_tag, from blog\nRunning migrations:\n  Rendering model states... DONE\n  Unapplying blog.0002_add_spot_field_to_post... OK\n\n$ rake db:show[blog]\nblog\n [X] 0001_create_post_category_and_tag\n [ ] 0002_add_spot_field_to_post\n```\n\n### `rake db:update[name_of_application,name_of_migration,is_empty]`\n\nWhen you add/change something in your model, you need to create migrations.\nLet’s say you have added new field to `Post` model in your `blog` app:\n\nIf you don’t provide `name_of_migration` param, you’ll endup with auto\ngenerated name such as `000X_auto_YYYMMDD_HHMM`. You can also create\nempty migration via 3^rd parameter: `yes`\n\n```bash\n$ rake db:update[blog,add_spot_field_to_post]\nMigrations for 'blog':\n  applications/blog/migrations/0002_add_spot_field_to_post.py\n    - Add field spot to post\n\n$ rake db:update[blog,add_new_field_to_post,yes]  # empty migration example\nMigrations for 'blog':\n  applications/blog/migrations/0003_add_new_field_to_post.py\n\n$ cat applications/blog/migrations/0003_add_new_field_to_post.py\n```\n\nempty migration output:\n\n```python\nfrom django.db import migrations\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('blog', '0002_add_spot_field_to_post'),\n    ]\n\n    operations = [\n    ]\n```\n\n### `rake db:shell`\n\nRuns default database client.\n\n### `rake new:application[name_of_application]`\n\nCreates new application with given application name!\n\n```bash\n$ rake new:application[blog]\n```\n\n### `rake new:model[name_of_application,name_of_model,type_of_model]`\n\nCreates new model! Available model types are:\n\n- `django` (default),\n- `basemodel`\n- `softdelete`\n\n```bash\n$ rake new:model[blog,Post]                # will create model using Django’s `models.Model`\n$ rake new:model[blog,Post,basemodel]      # will create model using our `CustomBaseModel`\n$ rake new:model[blog,Post,softdelete]     # will create model using our `CustomBaseModelWithSoftDelete`\n```\n\n### `rake locale:compile` and `rake locale:update`\n\nWhen you make changes in your application related to locales, run: `rake locale:update`.\nWhen you finish editing your `django.po` file, run `rake locale:compile`.\n\n### `rake shell[repl]`\n\nRuns Django repl/shell with use `shell_plus` of [django-extensions][01].\n `rake shell`. This loads everything to your shell! Also you can see the\nSQL statements while playing in shell. We have couple different repls:\n\n1. `ptpython`\n1. `bpython`\n1. `ipython`\n\nDefault repl is: `ptpython`\n\n```bash\n$ rake shell\n$ rake shell[bpython]\n$ rake shell[ipython]\n```\n\n### `rake test:run[name_of_application,verbose]`\n\nIf you don’t provide `name_of_application` default value will be `applications`. \n`verbose` is `1` by default.\n\nExamples:\n\n```bash\n$ rake test:run\n$ rake test:run[vb_baseapp,2]\n```\n\n### `rake test:coverage[cli_args]`\n\nGet the test report. Default is `--show-missing --ignore-errors --skip-covered` for\n`cli_args` parameter.\n\n```bash\n$ rake test:coverage\n```\n\n### `rake test:browse_coverage[port]`\n\nServes generated html coverages under `htmlcov` folder via `python`. Default port\nis `9001`\n\n---\n\n## Run Tests Manually\n\n```bash\n$ DJANGO_ENV=test python manage.py test vb_baseapp -v 2                                 # or\n$ DJANGO_ENV=test python manage.py test vb_baseapp.tests.test_user.CustomUserTestCase   # run single unit\n$ rake test:run[vb_baseapp]\n```\n\n---\n\n## Manual Usage\n\nLet’s assume you need a model called: `Page`. Create a file under `YOUR_APP/models/page.py`:\n\n```python\n# example for Django’s default model\n# YOUR_APP/models/page.py\n\nfrom django.db import models\n\n__all__ = ['Page',]\n\nclass Page(models.Model):\n    # define your fields here...\n    pass\n\n# YOUR_APP/models/__init__.py\n# append:\nfrom .page import *\n```\n\nor, you can use `CustomBaseModel` or `CustomBaseModelWithSoftDelete`:\n\n```bash\nfrom django.db import models\n\nfrom vb_baseapp.models import CustomBaseModelWithSoftDelete\n\n__all__ = ['Page']\n\nclass Page(CustomBaseModelWithSoftDelete):\n    # define your fields here...\n    pass\n```\n\nNow make migrations etc... Use it as `from YOUR_APP.models import Page` :)\n\n---\n\n## License\n\nThis project is licensed under MIT\n\n---\n\n## Contributer(s)\n\n* [Uğur \"vigo\" Özyılmazel](https://github.com/vigo) - Creator, maintainer\n\n---\n\n## Contribute\n\nAll PR’s are welcome!\n\n1. `fork` (https://github.com/vbyazilim/django-vb-baseapp/fork)\n1. Create your `branch` (`git checkout -b my-features`)\n1. `commit` yours (`git commit -am 'Add awesome features'`)\n1. `push` your `branch` (`git push origin my-features`)\n1. Than create a new **Pull Request**!\n\n---\n\n## Change Log\n\n**2019-12-05**\n\n- Django 2.2.8\n\n**2019-12-04**\n\n- Add custom user model generator\n- Version bump\n\n**2019-11-30**\n\n- Update and fix typos in README file\n\n**2019-11-28**\n\n- Add tests and travis integration\n- Version bump\n\n**2019-11-27**\n\n- Version bump\n- Ready to use...\n\n**2019-08-07**\n\n- Initial Beta relase: 1.0.0\n\n---\n\n[vb-console]: https://github.com/vbyazilim/vb-console\n[bulma.io]: https://bulma.io\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/vbyazilim/django-vb-baseapp",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-vb-baseapp",
    "package_url": "https://pypi.org/project/django-vb-baseapp/",
    "platform": "",
    "project_url": "https://pypi.org/project/django-vb-baseapp/",
    "project_urls": {
      "Homepage": "https://github.com/vbyazilim/django-vb-baseapp"
    },
    "release_url": "https://pypi.org/project/django-vb-baseapp/1.1.2/",
    "requires_dist": [
      "vb-console"
    ],
    "requires_python": ">=3.6",
    "summary": "Magical app for django-vb-admin",
    "version": "1.1.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 6729453,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "3a955035e617a601565062264c9d6adc1eca5d7327e7960f79040fe735662b57",
        "md5": "5c235807021006fef21c8d0bfcc933b4",
        "sha256": "85adf09877fcade6a36e0cb827f42518dc8538fd3eb477d45fd9b154643153a3"
      },
      "downloads": -1,
      "filename": "django_vb_baseapp-1.1.2-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "5c235807021006fef21c8d0bfcc933b4",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6",
      "size": 129366,
      "upload_time": "2019-12-05T13:08:46",
      "upload_time_iso_8601": "2019-12-05T13:08:46.593562Z",
      "url": "https://files.pythonhosted.org/packages/3a/95/5035e617a601565062264c9d6adc1eca5d7327e7960f79040fe735662b57/django_vb_baseapp-1.1.2-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "1d1601ac92193c8bf0dfc18f1b7e1230b4322ccf977000e5798363368ecee806",
        "md5": "4613acdc3df424b94634148480e7e3e4",
        "sha256": "104b39d849c750c3b1e666b53bdac70c665cfa95902b4301249d93d5507667e4"
      },
      "downloads": -1,
      "filename": "django-vb-baseapp-1.1.2.tar.gz",
      "has_sig": false,
      "md5_digest": "4613acdc3df424b94634148480e7e3e4",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 130665,
      "upload_time": "2019-12-05T13:08:48",
      "upload_time_iso_8601": "2019-12-05T13:08:48.694776Z",
      "url": "https://files.pythonhosted.org/packages/1d/16/01ac92193c8bf0dfc18f1b7e1230b4322ccf977000e5798363368ecee806/django-vb-baseapp-1.1.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}