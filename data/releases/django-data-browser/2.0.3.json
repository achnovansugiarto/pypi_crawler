{
  "info": {
    "author": "Gordon Wrigley",
    "author_email": "gordon.wrigley@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3"
    ],
    "description": "# Interactive and user friendly querying of Django project DBs.\n\n![screenshot](https://raw.githubusercontent.com/tolomea/django-data-browser/master/screenshot.png)\n\n### Features\n\n-   Zero config, if it's in the admin it's in the browser\n-   Select fields (including calculated fields), aggregate, filter, sort and pivot\n-   Automatically follow OneToOneFields and ForeignKeys\n-   Respects per user admin permissions\n-   Share views simply by sharing URLs\n-   Save views and optionally make them available to services like Google sheets\n-   Download views as CSV or JSON\n\n### Roadmap (in no particular order)\n\n-   UI improvements\n-   ToMany support\n-   Advanced filtering\n-   PII controls\n-   Graphs\n\n## Demo\n\nThere is a live demo site available. The Django project is a small e-commerce site selling microservices.\n\nSource: https://github.com/tolomea/data-browser-demo\n\nAdmin: https://data-browser-demo.herokuapp.com/admin/\n\nData Browser: https://data-browser-demo.herokuapp.com/data-browser/\n\nBecause it's hosted on Heroku free tier it might take a while to respond to the first page load.\n\n## Installation\n\n1. Run `pip install django-data-browser`\n1. Add `\"data_browser\"` to installed_apps.\n1. Add `path(\"data-browser/\", include(\"data_browser.urls\"))` to your urls.\n1. Run `python manage.py migrate`.\n\n## Settings\n\n| Name                      | Docs Section | Function                                                                                |\n| ------------------------- | ------------ | --------------------------------------------------------------------------------------- |\n| DATA_BROWSER_ALLOW_PUBLIC | Security     | Allow selected saved views to be accessed without admin login in limited circumstances. |\n| DATA_BROWSER_DEV          | Development  | Enable proxying frontend to JS dev server.                                              |\n| DATA_BROWSER_FE_DSN       | Sentry       | The DSN the frontend sentry should report to, disabled by default.                      |\n\n## Security\n\nThere are two types of Django views in the Data Browser.\n\nQueries can only be accessed by Django \"staff members\" and support general querying of the database (checked against the users admin permissions).\n\nViews can be accessed by anyone but they can only be used to access a query that has been saved and made public and they have long random URL's.\n\nYou can use the admin permission `data_browser | view | Can make a saved view publically available` to restrict who can make views public. To be public the view must be marked as public and owned by someone who has the permission. Users without the permission can not mark views as public and can not edit any view that is marked public.\n\nAdditionally the entire public views system is gated by the Django settings value `DATA_BROWSER_ALLOW_PUBLIC`.\n\n## Sentry\n\nThe frontend code has builtin Sentry support, it is **disabled by default**. To enable it set the Django settings value `DATA_BROWSER_FE_DSN`, for example to set it to the Data Browser project Sentry use:\n\n```\nDATA_BROWSER_FE_DSN = \"https://af64f22b81994a0e93b82a32add8cb2b@o390136.ingest.sentry.io/5231151\"\n```\n\n## Version numbers\n\nThe Data Browser uses the standard `Major.Minor.Patch` version numbering scheme.\n\nPatch versions may include bug fixes and minor features.\n\nMinor versions are for significant new features.\n\nMajor versions are for major features, significant changes to existing functionality and breaking changes.\n\nPatch and Minor versions should never contain breaking changes and should always be backward compatible. A breaking change is a change that makes backward incompatible changes to one or more of the following:\n\n-   The query URL format.\n-   The json, csv etc data formats.\n-   `request.databrowser`.\n-   Invalidates saved views.\n-   Changes the URL's of public saved views.\n\n## Customization and Performance\n\n### get_queryset\n\nThe Data Browser does it's fetching in two stages.\n\nFirst it does a single DB query to get the majority of the data. To construct the queryset for this it will call get_queryset on the ModelAdmin of the current Model. It uses `.values()` to fetch only the data it needs from the database and it will inline all referenced models to ensure it doesn't do multiple queries.\n\nSecondly for any calculated fields it will then fetch the complete objects that are needed for those calculated fields. To construct the querysets for these it will call get_queryset on their associated ModelAdmins. These calls are aggregated so it will only make one per model.\n\nAs a simple example. If you did a query against the Book model for the fields:\n\n-   `book.name`\n-   `book.author.name`\n-   `book.author.age`\n-   `book.publisher.name`\n\nWhere the `author.age` is actually a property on the Author Model then it would do the following two queries:\n\n```\nBookAdmin.get_queryset().values(\"name\", \"author__name\", \"author__id\", \"publisher__name\")\nAuthorAdmin.get_queryset().in_bulk(pks=...)\n```\n\nWhere the `pks` passed to in_bulk in the second query came from `author__id` in the first.\n\nWhen the Data Browser calls the admin `get_queryset` functions it will put some context in `request.databrowser`. This means you can test to see if the Data Browser is making the call as follows:\n\n```\nif request.databrowser:\n    # Data Browser specific customization\n```\n\nThis is particularly useful if you want to route the Data Browser to a DB replica.\n\nThe context includes a `calculated_fields` member that is set when doing the second stage requests for calculated fields. You can use this to do conditional prefetching or annotating to support those fields like this:\n\n```\nif not hasattr(request, \"databrowser\") or \"my_field\" in request.databrowser[`calculated_fields`]:\n\t# do prefetching and annotating associated with my_field\n```\n\n### get_fieldsets\n\nThe Data Browser also calls `get_fieldsets` to find out what fields the current user can access. When it does this it always passes a newly constructed instance of the relevant model. This is necessary to work around Django's User admin messing with the fieldsets when `None` is passed.\n\nAs with `get_queryset` the Data Browser will set `request.databrowser` when calling `get_fieldsets` and you can test this to detect it and make Data Browser specific customizations.\n\n## URL Format\n\nThe query URL format is `query/<model>/<fields>.<format>?<filters>`.\n\nModel is a Django app and model name for example `library.Book`\n\nFields are a series of comma separated fields, where each field is the path to that field from the model with the parts separated by `__`, e.g. `author__name`. This path structure also includes aggregates and functions e.g. `author__birthday__month__count`. Fields can be pivoted (where appropriate) by prefixing them with `&`. And sorted by suffixing with a direction `+`/`-` and a priority e.g. `author__birthday+1`.\n\nFilters use the same `__` path format as fields including a lookup e.g. `author__name__contains=Joe`.\n\nFormat determines the returned data format, the currently available formats are:\n\n| Format | Details                                                              |\n| ------ | -------------------------------------------------------------------- |\n| html   | Load the interactive Javascript frontend.                            |\n| csv    | Standard CSV format.                                                 |\n| json   | Standard JSON format, the JS frontend uses this for all data access. |\n| ctx    | See the JSON encoded config context passed to the JS on page load.   |\n\n## Development\n\nThe easiest way to develop this is against your existing client project.\n\nThe compiled Javascript is checked into the repo, so if only want to mess with the Python then it's sufficient to:\n\n1. Install the Data Browser in editable mode `pip install -e <directory to your git clone>`.\n\nIf you want to modify the Javascript then you also need to:\n\n2. Enable proxying to the JS dev server by adding `DATA_BROWSER_DEV = True` to your settings.\n3. Run the Javascript dev server with `WDS_SOCKET_PORT=3000 PUBLIC_URL=data_browser npm start`.\n   The `WDS_SOCKET_PORT` is so the proxied JS can find it's dev server.\n   The `PUBLIC_URL` tells the JS dev server what path to serve from and should be the same as the URL you have mounted the Data Browser on in your urls file.\n\nTo run the Python tests, in the top level of your git clone run `pip install -r requirements.txt` then `pytest`.\n\nThere is also pre-commit config for lint etc to enable this run `pip install pre-commit && pre-commit install` then lint will run on `git commit`. The linting includes Black and isort autoformatting.\n\nTo build the JS, move the files around appropriately and recreate the wheels run `build.sh`.\n\nDuring development it can be useful to look at the `.ctx` and `.json` views. The `.ctx` view will show you the initial context being passed to the Javascript on page load. The `.json` view is the actual API request the Javascript uses to fetch query results.\n\n### Structure\n\n![structure](https://raw.githubusercontent.com/tolomea/django-data-browser/master/structure.svg)\n\n### Terminology\n\n| Term             | Meaning                                                                                                                                  |\n| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |\n| aggregate        | Corresponds to a Django aggregation function.                                                                                            |\n| bound query      | A query that has been validated against the config.                                                                                      |\n| calculated field | A field that can not be sorted or filtered, generally a field whose value comes from a property or function on the Admin or Model.       |\n| concrete field   | A field that can be sorted and filtered, generally anything that came directly from the ORM.                                             |\n| config           | Information that doesn't change based on the particular query, includes all the models and their fields.                                 |\n| field name       | Just the name of the field e.g. `created_time`.                                                                                          |\n| field path       | Includes information on how to reach the model the field is on e.g. `[\"order\",\"seller\",\"created_time\"]`.                                 |\n| function         | Corresponds to a Django database function for transforming a value, e.g. `ExtractYear`.                                                  |\n| model name       | Fullstop separated app and model names e.g. `myapp.MyModel`, also includes synthetic 'models' for hosting aggregate and function fields. |\n| model path       | Like field path for the model the field is on.                                                                                           |\n| model            | In Python the actual model class, in Javascript the model name as above.                                                                 |\n| pretty...        | User friendly field, and path values                                                                                                     |\n| query            | The information that changes with the query being done, in the Javascript this also includes the results.                                |\n| type             | A data type, like string or number                                                                                                       |\n| view             | A saved query.                                                                                                                           |\n\nMost of the code deals with \"models\" that have \"fields\" that have \"types\".\nIn this context a \"model\" is just anything which might have fields.\nAn important consequence of this is that most types also have associated models which hold that types aggregate and function fields.\nThe special meanings of foreignkeys, aggregates, functions and calculated fields is confined to `orm.py` and `orm_fields.py`.\n\n#### Fields have 5 main properties.\n\n| Property  | Meaning and impact                                                                            |\n| --------- | --------------------------------------------------------------------------------------------- |\n| name      | The only required one.                                                                        |\n| type      | If set then this field can be added to a query and will return results of the specified type. |\n| concrete  | Can this field be sorted and filtered. Requires type to be set.                               |\n| can_pivot | The field goes on the outside of a pivot table and as such can be pivoted.                    |\n| model     | If set then this field has additional nested fields that are detailed on the given model.     |\n\n## Release History\n\n| Version   | Date           | Summary                                                                                       |\n| --------- | -------------- | --------------------------------------------------------------------------------------------- |\n| 2.0.3     | 2020-06-14     | Improve filtering on aggregates when pivoted.                                                 |\n| 2.0.2     | 2020-06-14     | Improve fonts and symbols.                                                                    |\n| 2.0.1     | 2020-06-14     | Improve sorting when pivoted.                                                                 |\n| **2.0.0** | **2020-06-14** | **Pivot tables.**<br>All public view URL's have changed.<br>The JSON data format has changed. |\n| 1.2.6     | 2020-06-08     | Bug fixes                                                                                     |\n| 1.2.5     | 2020-06-08     | Bug fixes                                                                                     |\n| **1.2.4** | **2020-06-03** | **Calculated fields interact better with aggregation.**                                       |\n| 1.2.3     | 2020-06-02     | JS error handling tweaks                                                                      |\n| 1.2.2     | 2020-06-01     | Minor fix                                                                                     |\n| 1.2.1     | 2020-05-31     | Improved date handling                                                                        |\n| **1.2.0** | **2020-05-31** | **Support for date functions \"year\", \"month\" etc and filtering based on \"now\"**               |\n| 1.1.6     | 2020-05-24     | Stronger sanitizing of URL strings                                                            |\n| 1.1.5     | 2020-05-23     | Fix bug aggregating time fields                                                               |\n| 1.1.4     | 2020-05-23     | Fix breaking bug with GenericInlineModelAdmin                                                 |\n| 1.1.3     | 2020-05-23     | Cosmetic fixes                                                                                |\n| 1.1.2     | 2020-05-22     | Cosmetic fixes                                                                                |\n| 1.1.1     | 2020-05-20     | Cosmetic fixes                                                                                |\n| **1.1.0** | **2020-05-20** | **Aggregate support**                                                                         |\n| **1.0.2** | **2020-05-17** | **Py3.6 support**                                                                             |\n| 1.0.1     | 2020-05-17     | Small fixes                                                                                   |\n| 1.0.0     | 2020-05-17     | Initial version                                                                               |\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/tolomea/django-data-browser",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-data-browser",
    "package_url": "https://pypi.org/project/django-data-browser/",
    "platform": "",
    "project_url": "https://pypi.org/project/django-data-browser/",
    "project_urls": {
      "Homepage": "https://github.com/tolomea/django-data-browser"
    },
    "release_url": "https://pypi.org/project/django-data-browser/2.0.3/",
    "requires_dist": [
      "Django",
      "python-dateutil",
      "dataclasses ; python_version < \"3.7\""
    ],
    "requires_python": ">=3.6",
    "summary": "A Django app for interactive user friendly browsing of a Django projects DB.",
    "version": "2.0.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17181385,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "30a74f7dd0c96441465c4fba1a7c7c43e83cdc235982cbd63da25b02c511b6d7",
        "md5": "1828ee04e420ab3d00137d4e5036c64d",
        "sha256": "38b93f774b28378eb18dc628da06cbc1384faa0ef66a387f7058c90220900153"
      },
      "downloads": -1,
      "filename": "django_data_browser-2.0.3-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "1828ee04e420ab3d00137d4e5036c64d",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6",
      "size": 322911,
      "upload_time": "2020-06-15T19:31:25",
      "upload_time_iso_8601": "2020-06-15T19:31:25.284412Z",
      "url": "https://files.pythonhosted.org/packages/30/a7/4f7dd0c96441465c4fba1a7c7c43e83cdc235982cbd63da25b02c511b6d7/django_data_browser-2.0.3-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "c4768c1240af92e700e160f850316d2730dd0f9766ca4e655b5c76eea698c580",
        "md5": "48c64b0037bb5a5283accdeb23a64a2b",
        "sha256": "f0bd338bcc72cbdfa3e392e77f2bda62e240789556022ad46e6552ab281276e4"
      },
      "downloads": -1,
      "filename": "django-data-browser-2.0.3.tar.gz",
      "has_sig": false,
      "md5_digest": "48c64b0037bb5a5283accdeb23a64a2b",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 323822,
      "upload_time": "2020-06-15T19:31:26",
      "upload_time_iso_8601": "2020-06-15T19:31:26.556252Z",
      "url": "https://files.pythonhosted.org/packages/c4/76/8c1240af92e700e160f850316d2730dd0f9766ca4e655b5c76eea698c580/django-data-browser-2.0.3.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}