{
  "info": {
    "author": "FNNDSC",
    "author_email": "dev@babymri.org",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "med2image 2.4.16\n==================\n\nQuick Overview\n--------------\n\n-  Convert ``DICOM`` or ``NIfTI`` inputs to ``jpg`` or ``png`` outputs.\n\nOverview\n--------\n\n``med2image`` is a simple Python3 utility that converts medical image formatted files (such as ``DICOM`` and ``NifTI``) to more web friendly ones, such as ``png`` and ``jpg``.\n\nCurrently, ``NIfTI`` and ``DICOM`` input formats are understood, while any graphical output type that is supported by matplotlib can be generated.\n\nAt present ``med2image`` does not convert ``DICOM`` to ``NifTI``, but this is planned for a future release.\n\nDependencies\n------------\n\nMake sure that the following dependencies are installed on your host system (or even better, a ``python3`` virtual env):\n\n-  ``pfmisc`` : (a general miscellaneous module for color support, etc)\n-  ``nibabel`` : (to read NIfTI files)\n-  ``pydicom`` : (to read DICOM files)\n-  ``matplotlib`` : (to save data in various image formats)\n-  ``pillow`` : (to save data in ``jpg`` format)\n\nAssumptions\n-----------\n\nThis document assumes UNIX conventions and a ``bash`` shell. The script should work fine under Windows, but we have not actively tested on that platform -- our dev envs are Linux Ubuntu and macOS.\n\nInstallation\n~~~~~~~~~~~~\n\nPython module\n~~~~~~~~~~~~~\n\nOne method of installing this script and all of its dependencies is by fetching it from `PyPI <https://pypi.org/project/med2image/>`_.\n\n.. code:: bash\n\n        pip3 install med2image\n\nShould you get an error about ``python3-tk`` not installed, simply do (for example on Ubuntu):\n\n.. code:: bash\n\n        sudo apt-get update\n        sudo apt-get install -y python3-tk\n\nDocker container\n~~~~~~~~~~~~~~~~\n\nWe also offer a docker container of ``med2image`` as a ChRIS-conformant platform plugin here https://github.com/FNNDSC/pl-med2img (see also the closely related https://github.com/FNNDSC/pl-dcm2img that performs conversions down a directory tree recursively) -- please that reference for information on running the dockerized container. The containerized version exposes a similar CLI and functionality as this module.\n\nHow to Use\n----------\n\n``med2image`` needs at a minimum (some of) the following required command line arguments:\n\n- ``-i | --inputFile <inputFile>`` : Input file to convert. Typically a ``DICOM`` file or a ``NifTI`` volume.\n\n- ``--inputFileSubStr <substr>`` : A short hand trick to specify the ``inputFile``. By only specifying a sub string that identifies the file, the first file in the ``inputDir`` that contains the sub string is tagged as the ``inputFile``. This saves a user from needing to specify long and cumbersome file names, esp in the case of many DICOM filenames.\n\n- ``-d | --outputDir <outputDir> :`` The directory to contain the converted output image files.\n\n**Example:**\n\n.. code:: bash\n\n    # Convert a NifTI file 'vol.nii' to JPEG and store\n    # the results in a dirctory called 'out'.\n    # The 'out' dir will contain a set of JPEG\n    # images of form 'output-sliceXXX.jpg'.\n\n    med2image -i vol.nii -d out\n\n.. code:: bash\n\n    # Convert a DICOM file 'file.dcm' to JPEG and store\n    # the results in a dirctory called 'out'.\n    # The 'out' dir will contain a set of JPEG\n    # images of form 'output-sliceXXX.jpg'.\n\n    # NOTE! If the directory containing 'file.dcm' contains\n    # multiple DICOM files, *ALL* of these will be converted\n    # to JPEG. See later for only converting a *single*\n    # DICOM file.\n\n    med2image -i file.dcm -d out\n\n``NIfTI`` details\n-----------------\n\n**NOTE:** ``NifTI`` is typically a *volume* format. One ``NIfTI`` (``.nii``) volume contains multiple *slices*. Converting a ``NifTI`` volume results in multiple ``.jpg`` or ``.png`` results.\n\n- ``NIfTI`` input data can be in 2 forms:\n\n  - 3D : The ``.nii`` volume contains multiple 2D slices\n\n  - 4D : The ``.nii`` file contains multiple 3D volumes that each contain multiple 2D slices\n\n- ``med2image`` understands both types of inputs.\n\nPull ``NIfTI``\n~~~~~~~~~~~~~~\n\nThe input should be a ``NIfTI`` volume with extension ``.nii``. We provide a sample volume here https://github.com/FNNDSC/SAG-anon-nii.git\n\n- Clone this repository (``SAG-anon-nii``) to your local computer.\n\n.. code:: bash\n\n    git clone https://github.com/FNNDSC/SAG-anon-nii.git\n\nConvert ``NIfTI``\n~~~~~~~~~~~~~~~~~\n\n**NOTE:**\n\n- If ``--outputDir | -d`` is not provided, outputs are created in the *current* directory.\n\n- if ``--sliceToConvert`` is not provided, *all* the slices of the ``.nii`` volume are converted.\n\nBoth 3D and 4D ``NIfTI`` input data are understood. In the case of 4D ``NIfTI``, a specific frame (``--frameToConvert``) can be additionally provided in conjunction with a specific slice index. Conversion options include:\n\n- *all* slices (default)\n- *middle* slice only, with the CLI ``--sliceToConvert m``\n- *someSpecificSlice*, with the CLI ``--sliceToConvert <N>``\n\nCASE 1: All slices in a volume\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nNow, let's convert all slices in the input ``NIfTI`` volume ``SAG-anon.nii``, and save the results to a nested subdir ``nifti-results/all-slices``. We'll use as output file name stem ``sample`` and convert to ``jpg``.\n\nAssuming you have cloned the ``SAG-anon-nii`` repo and assuming that you have ``med2image`` on your UNIX shell path,\n\n.. code:: bash\n\n    med2image -i SAG-anon-nii/SAG-anon.nii                 \\\n              -d nifti-results/all-slices                  \\\n              -o sample.jpg -s -1\n\nor equivalently and more verbosely,\n\n.. code:: bash\n\n    med2image --inputFile SAG-anon-nii/SAG-anon.nii         \\\n              --outputDir nifti-results/all-slices          \\\n              --outputFileStem sample  --outputFileType jpg \\\n              --sliceToConvert -1\n\nresulting in\n\n::\n\n    nifti-results/all-slices/sample-slice000.jpg\n    nifti-results/all-slices/sample-slice001.jpg\n    nifti-results/all-slices/sample-slice002.jpg\n    nifti-results/all-slices/sample-slice003.jpg\n    ...\n    nifti-results/all-slices/sample-slice188.jpg\n    nifti-results/all-slices/sample-slice189.jpg\n    nifti-results/all-slices/sample-slice190.jpg\n    nifti-results/all-slices/sample-slice191.jpg\n\nNote that even if the nested output directory structure does not exist, ``med2image`` will create it for you.\n\nCase 2: Convert only a single slice\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nOften times, you might only want to convert the \"middle\" slice in a volume (for example to generate a representative thumbnail of the volume). To do this, simply specify an ``m`` to ``--sliceToConvert`` (or ``-s m``):\n\n.. code:: bash\n\n    med2image -i SAG-anon-nii/SAG-anon.nii    \\\n              -d nifti-results/middle-slice   \\\n              -o sample --outputFileType jpg  \\\n              --sliceToConvert m\n\nresulting in\n\n::\n\n    nifti-results/middle-slice/sample-slice096.jpg\n\nAlternatively a specific slice index can be converted. Use\n\n.. code:: bash\n\n    med2image -i SAG-anon-nii/SAG-anon.nii    \\\n              -d nifti-results/specific-slice \\\n              -o sample                       \\\n              --outputFileType jpg            \\\n              --sliceToConvert 20\n\nto convert only the 20th slice of the volume.\n\nresulting in\n\n::\n\n    nifti-results/specific-slice/sample-slice020.jpg\n\n``DICOM``\n---------\n\n**NOTE:** One ``DICOM`` (``.dcm``) file typically corresponds to one ``.png`` or ``.jpg`` file (slice).\n\nPull DICOM\n~~~~~~~~~~\n\nThe input should be a ``DICOM`` file usually with extension ``.dcm``\n\nWe provide a sample directory of ``.dcm`` images here ``FNNDSC/SAG-anon``. (https://github.com/FNNDSC/SAG-anon.git)\n\n- Clone this repository (``SAG-anon``) to your local computer.\n\n.. code:: bash\n\n    git clone https://github.com/FNNDSC/SAG-anon.git\n\nConvert ``DICOM``\n~~~~~~~~~~~~~~~~~\n\n**NOTE:**\n\n- If ``--outputDir | -d`` is not provided, any output(s) are created in the current directory.\n- if ``--sliceToConvert`` argument is not specified and if mutiple ``dcm`` files are contained in the input directory with the ``DICOM`` input, then all the ``.dcm`` files are converted.\n- alternatively, specifying a ``--convertOnlySingleDICOM`` will only convert the DICOM file specified with the ``--inputFile`` flag.\n\n\nConvert all DICOMS in a directory/series\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nTo convert all the ``DICOM`` files in a directory, simply specify either ``--sliceToConvert -1`` (or just leave out the argument/value pair completely):\n\n.. code:: bash\n\n    med2image -i SAG-anon/0001-1.3.12.2.1107.5.2.19.45152.2013030808110258929186035.dcm   \\\n              -d dicom-results/all-slices      \\\n              -o sample                        \\\n              --outputFileType jpg             \\\n              --sliceToConvert -1\n\n    # OR equivalently\n\n    med2image -i SAG-anon/0001-1.3.12.2.1107.5.2.19.45152.2013030808110258929186035.dcm  \\\n              -d dicom-results/all-slices      \\\n              -o sample                        \\\n              --outputFileType jpg\n\n\nresulting in\n\n::\n\n    dicom-results/all-slices/sample-slice000.jpg\n    dicom-results/all-slices/sample-slice001.jpg\n    dicom-results/all-slices/sample-slice002.jpg\n    dicom-results/all-slices/sample-slice003.jpg\n    ...\n    dicom-results/all-slices/sample-slice188.jpg\n    dicom-results/all-slices/sample-slice189.jpg\n    dicom-results/all-slices/sample-slice190.jpg\n    dicom-results/all-slices/sample-slice191.jpg\n\nConvert a single ``DICOM`` file\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nMostly, you'll probably only want to convert the \"middle\" slice in a DICOM directory (for example to generate a representative thumbnail of the directory). To do this, simply specify a `m` to --sliceToConvert (or `-s m`)\n\n.. code:: bash\n\n    med2image -i SAG-anon/0001-1.3.12.2.1107.5.2.19.45152.2013030808110258929186035.dcm    \\\n              -d dicom-results/middle-slice  \\\n              -o sample --outputFileType jpg \\\n              --sliceToConvert m\n\nresulting in\n\n::\n\n    dicom-results/middle-slice/sample.jpg\n\nNote that even though the first slice in the ``SAG-anon`` directory was supplied to the script, ``med2image`` nonetheless found and converted the middle slice in the directory.\n\nAlternatively a specific slice index can be converted. Use\n\n.. code:: bash\n\n    med2image -i SAG-anon/0001-1.3.12.2.1107.5.2.19.45152.2013030808110258929186035.dcm     \\\n              -d dicom-results/specific-slice  \\\n              -o sample --outputFileType jpg   \\\n              --sliceToConvert 20\n\nresulting in\n\n::\n\n    dicom-results/specific-slice/sample.jpg\n\nAgain, even though the first slice was supplied to the script, ``med2image`` selected and converted the 20th slice in the directory.\n\nSpecial Cases\n^^^^^^^^^^^^^\n\nFor ``DICOM`` data, the ``<outputFileStem>`` can optionally be set to the value of an internal ``DICOM`` tag. The tag is specified by preceding the tag name with a percent character ``%``, so\n\n- ``-o %PatientID``\n\nwill use the ``DICOM`` ``PatientID`` to name the output file. Note that special characters (like spaces) in the ``DICOM`` value are replaced by underscores '_'.\n\n.. code:: bash\n\n    med2image -i SAG-anon/0001-1.3.12.2.1107.5.2.19.45152.2013030808110258929186035.dcm   \\\n              -d dicom-results/tags         \\\n              -o %PatientID.jpg -s m\n\nThis will create the following file in the ``tags`` sub-directory within ``dicom-results`` directory.\n\n.. code:: bash\n\n    dicom-results/tags/1449c1d.jpg\n\nMultiple tags can be specified, for example\n\n- ``-o %PatientName%PatientID%ProtocolName``\n\nand the output filename will have each ``DICOM`` tag string as specified in order, connected with dashes.\n\n.. code:: bash\n\n    med2image -i SAG-anon/0001-1.3.12.2.1107.5.2.19.45152.2013030808110258929186035.dcm \\\n              -d dicom-results/tags                        \\\n              -o %PatientName%PatientID%ProtocolName.jpg   \\\n              -s m\n\nThis will create the following file in the ``tags`` sub-directory within ``dicom-results`` directory.\n\n.. code:: bash\n\n    dicom-results/tags/anonymized-1449c1d-SAG_MPRAGE_220_FOV.jpg\n\n\nMultiple Direction Reslicing\n----------------------------\n\nBy default, only the slice (or slices) in the acquisition direction are converted. However, by passing a `--reslice` to the script, all dimensions are converted. Since the script does not know the anatomical orientation of the image, the directions are simply labeled ``x``, ``y``, and ``z``.\n\nThe ``z`` direction is the original acquistion (slice) direction, while ``x`` and ``y`` correspond to planes normal to the row and column directions. Converted images are stored in subdirectories labeled ``x``, ``y``, and ``z``.\n\nNo interpolation in the ``x`` and ``y`` directions is performed. This often results in ugly images!\n\n**NOTE:** In case of ``DICOM`` images, the `--reslice` option will work only if all slices in the directory are converted, i.e. converting with ``--sliceToConvert -1``\n\nSpecial Operations\n------------------\n\n``med2image`` also supports some very basic image processing through a ``--func <functionName>`` CLI, which applies some canned transformation on the image. Currently supported is\n\n::\n\n    --func invertIntensities\n\nwhich simply inverts the contrast intensity of the source image. Additional functions are planned for future releases.\n\nCommand Line Arguments\n----------------------\n\n::\n\n        [-i|--inputFile <inputFile>]\n        Input file to convert. Typically a DICOM file or a nifti volume.\n\n        [--inputFileSubStr <substr>]\n        As a convenience, the input file can be determined via a substring\n        search of all the files in the <inputDir> using this flag. The first\n        filename hit that contains the <substr> will be assigned the\n        <inputFile>.\n\n        This flag is useful is input names are long and cumbersome, but\n        a short substring search would identify the file. For example, an\n        input file of\n\n           0043-1.3.12.2.1107.5.2.19.45152.2013030808110149471485951.dcm\n\n        can be specified using ``--inputFileSubStr 0043-``\n\n        [-I|--inputDir <inputDir>]\n        If specified, a directory containing the <inputFile>. In this case\n        <inputFile> should be specified as relative to <inputDir>.\n\n        [-d|--outputDir <outputDir>]\n        The directory to contain the converted output image files.\n\n        -o|--outputFileStem <outputFileStem>\n        The output file stem to store conversion. If this is specified\n        with an extension, this extension will be used to specify the\n        output file type.\n\n        SPECIAL CASES:\n        For DICOM data, the <outputFileStem> can be set to the value of\n        an internal DICOM tag. The tag is specified by preceding the tag\n        name with a percent character '%', so\n\n            -o %ProtocolName\n\n        will use the DICOM 'ProtocolName' to name the output file. Note\n        that special characters (like spaces) in the DICOM value are\n        replaced by underscores '_'.\n\n        Multiple tags can be specified, for example\n\n            -o %PatientName%PatientID%ProtocolName\n\n        and the output filename will have each DICOM tag string as\n        specified in order, connected with dashes.\n\n        [--convertOnlySingleDICOM]\n        If specified, will only convert the single DICOM specified by the\n        '--inputFile' flag. This is useful for the case when an input\n        directory has many DICOMS but you specifially only want to convert\n        the named file. By default the script assumes that multiple DICOMS\n        should be converted en mass otherwise.\n\n        [-t|--outputFileType <outputFileType>]\n        The output file type. If different to <outputFileStem> extension,\n        will override extension in favour of <outputFileType>.\n\n        [-s|--sliceToConvert <sliceToConvert>]\n        In the case of volume files, the slice (z) index to convert. Ignored\n        for 2D input data. If a '-1' is sent, then convert *all* the slices.\n        If an 'm' is specified, only convert the middle slice in an input\n        volume.\n\n        [-f|--frameToConvert <sliceToConvert>]\n        In the case of 4D volume files, the volume (V) containing the\n        slice (z) index to convert. Ignored for 3D input data. If a '-1' is\n        sent, then convert *all* the frames. If an 'm' is specified, only\n        convert the middle frame in the 4D input stack.\n\n        [--showSlices]\n        If specified, render/show image slices as they are created.\n\n        [--rot <3DbinVector>]\n        A per dimension binary rotation vector. Useful to rotate individual\n        dimensions by an angle specified with [--rotAngle <angle>]. Default\n        is '110', i.e. rotate 'x' and 'y' but not 'z'. Note that for a\n        non-reslice selection, only the 'z' (or third) element of the vector\n        is used.\n\n        [--rotAngle <angle>]\n        Default 90 -- the rotation angle to apply to a given dimension of the\n        <3DbinVector>\n\n        [--func <functionName>]\n        Apply the specified transformation function before saving. Currently\n        support functions:\n\n            * invertIntensities\n              Inverts the contrast intensity of the source image.\n\n        [--reslice]\n        For 3D data only. Assuming [x,y,z] coordinates, the default is to save\n        along the 'z' direction. By passing a --reslice image data in the 'x'\n        and 'y' directions are also saved. Furthermore, the <outputDir> is\n        subdivided into 'slice' (z), 'row' (x), and 'col' (y) subdirectories.\n\n        [-x|--man]\n        Show full help.\n\n        [-y|--synopsis]\n        Show brief help.\n\n        [--verbosity <level=1>]\n        Control how chatty med2image is. Set to '0' for blissful silence, '1'\n        for sane progress and '3' for full information.\n\n\n",
    "description_content_type": "",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/FNNDSC/med2image",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "med2image",
    "package_url": "https://pypi.org/project/med2image/",
    "platform": null,
    "project_url": "https://pypi.org/project/med2image/",
    "project_urls": {
      "Homepage": "https://github.com/FNNDSC/med2image"
    },
    "release_url": "https://pypi.org/project/med2image/2.4.16/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "(Python) utility to convert medical images to jpg and png",
    "version": "2.4.16",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 13657297,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "ee6fe289f164a31a99e8becd889d0c3a04622a8e0f17cb674348f980f7007697",
        "md5": "64d6a91c25184dbd33ac516aa91c07d0",
        "sha256": "bd15896408e99684789d504ac916998ffbda3d1f6d4a881198a3fc1d05f3263f"
      },
      "downloads": -1,
      "filename": "med2image-2.4.16.tar.gz",
      "has_sig": false,
      "md5_digest": "64d6a91c25184dbd33ac516aa91c07d0",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 21678,
      "upload_time": "2022-04-26T18:39:11",
      "upload_time_iso_8601": "2022-04-26T18:39:11.468329Z",
      "url": "https://files.pythonhosted.org/packages/ee/6f/e289f164a31a99e8becd889d0c3a04622a8e0f17cb674348f980f7007697/med2image-2.4.16.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}