{
  "info": {
    "author": "FNNDSC",
    "author_email": "dev@babymri.org",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "mgz2imgslices 1.3.34\n====================\n\nQuick Overview\n--------------\n\n-   Filters ``mgz`` volume files by voxel value to well organized directories of image files.\n\nOverview\n--------\n\n``mgz2imgslices`` is a simple Python utility that fiters \"labels\" from ``mgz`` volume files and saves each label set as slices of (by default) ``png`` files, organized into a series of directories, one per label set.\n\nAn ``mgz`` format file simply contains a 3D volume data structure of image values. Often these values are interpreted to be image intensities. Sometimes, however, they can be interpreted as label identifiers. Regardless of the interpretation, the volume image data is simply a number value in each voxel of the volume.\n\nThis script will scan across the input ``mgz`` volume, and for each voxel value create a new output directory. In that directory will be a set of numpy arrays (.npy files), one per slice of the original volume. These numpy arrays will only contain the voxel values in the original dataset that all had that particular voxel value.\n\nIn this manner, ``mgz2imgslices`` can also be thought of as a dynamic filter of an ``mgz`` volume file that filters each voxel value into its own output directory of ``.npy`` files.\n\nDependencies\n------------\n\nMake sure that the following dependencies are installed on your host system (or even better, a ``python3`` virtual env):\n\n-  ``pfmisc`` : (a general miscellaneous module for color support, etc)\n-  ``nibabel`` : (to read NIfTI files)\n-  ``numpy`` : (to support large, multidimensional arrays and matrices)\n-  ``imageio`` : (interface to read and write image data)\n-  ``pandas`` : (data manipulation and analysis)\n-  ``re`` : (support for regular expressions)\n-  ``time`` : (support for various time related functions)\n\nAssumptions\n-----------\n\nThis document assumes UNIX conventions and a ``bash`` shell. The script should work fine under Windows, but we have not actively tested on that platform -- our dev envs are Linux Ubuntu and macOS.\n\nInstallation\n~~~~~~~~~~~~\n\nPython module\n~~~~~~~~~~~~~\n\nOne method of installing this script and all of its dependencies is by fetching it from `PyPI <https://pypi.org/project/med2image/>`_.\n\n.. code:: bash\n\n        pip3 install mgz2imgslices\n\nDocker container\n~~~~~~~~~~~~~~~~\n\nWe also offer a docker container of ``mgz2imgslices`` as a ChRIS-conformant platform plugin here https://github.com/FNNDSC/pl-mgz2imgslices -- please consult that page for information on running the dockerized container. The containerized version exposes a similar CLI and functionality as this module.\n\nHow to Use\n----------\n\n``mgz2imgslices`` needs at a minimum the following required command line arguments:\n\n- ``-i | --inputFile <inputFile>``: The input ``.mgz`` file to convert.\n\n- ``-d | --outputDir <outputDir>``:  The output directory. This in turn will contain several subdirectores, one per image voxel value in the input ``mgz`` file. Each of these sub directories will contain ``npy`` files, filtered to that voxel value.\n\nExamples\n--------\n\nFirst, let's create a directory, say ``devel`` wherever you feel like it. We will place some test data in this directory to process with this plugin.\n\n.. code:: bash\n\n    cd ~/\n    mkdir devel\n    cd devel\n    export DEVEL=$(pwd)\n\nNow, we need to fetch sample MGZ data.\n\nPull ``mgz`` data\n~~~~~~~~~~~~~~~~~\n\n- We provide a sample directory of a few ``.mgz`` volumes here. (https://github.com/FNNDSC/mgz_converter_dataset.git)\n\n- Clone this repository (``mgz_converter_dataset``) to your local computer.\n\n.. code:: bash\n\n    git clone https://github.com/FNNDSC/mgz_converter_dataset.git\n\nMake sure the ``mgz_converter_dataset`` directory is placed in the devel directory.\n\n- Make sure your current working directory is ``devel``. At this juncture it should contain ``mgz_converter_dataset``.\n\n- Create an output directory named ``results`` in ``devel``.\n\n.. code:: bash\n\n    mkdir results && chmod 777 results\n\nEXAMPLE 1\n^^^^^^^^^\n\n- Run ``mgz2imgslices`` using the following command. Change the arguments according to your need.\n\n.. code:: bash\n\n    mgz2imgslices\n        -I ${DEVEL}/mgz_converter_dataset/100307/                              \\\n        -inputFile aparc.a2009s+aseg.mgz                                       \\\n        --outputDir ${DEVEL}/results/                                          \\\n        --outputFileStem sample                                                \\\n        --outputFileType png                                                   \\\n        --saveImages\n        --label label                                                          \\\n        --wholeVolume FullVolume                                               \\\n        --lookupTable FreeSurferColorLUT.txt                                                  \\\n        --skipLabelValueList 0,4,7\n\nThe ``skipLabelValueList`` will skip any voxels in the input ``mgz`` that have numerical values of, in this case, ``0, 4, 7``. Note that each output filtered directory will have a name prefix string of ``label`` and should appear something similar to:\n\n.. code:: bash\n\n    results/label-002/sample-000.png\n                        ...\n    results/label-002/sample-00255.png\n\n    ...\n    ...\n\n    results/label-0012175/sample-000.png\n                        ...\n    results/label-0012175/sample-00255.png\n\n\nEXAMPLE 2\n^^^^^^^^^\n\n- This example uses the ``FreeSurferColorLUT.txt`` file to lookup textual names of the voxel values and use more descriptive string for the directory stem.\n\n- Make sure that your ``LUT.txt`` file is present in the ``([-I] [--inputDir])`` (in this case: ``${DEVEL}/mgz_converter_dataset/100307/``) and follows the format of the ``FreeSurferColorLUT.txt`` file. (https://surfer.nmr.mgh.harvard.edu/fswiki/FsTutorial/AnatomicalROI/FreeSurferColorLUT)\n\n- Run ``mgz2imgslices`` using the following command. Change the arguments according to your need.\n\n.. code:: bash\n\n   mgz2imgslices\n        -I ${DEVEL}/mgz_converter_dataset/100307/                               \\\n        -inputFile aparc.a2009s+aseg.mgz                                        \\\n        --outputDir ${DEVEL}/results/                                           \\\n        --outputFileStem sample                                                 \\\n        --outputFileType png                                                    \\\n        --label label                                                           \\\n        --wholeVolume FullVolume                                                \\\n        --lookupTable FreeSurferColorLUT.txt                                    \\\n        --skipLabelValueList 0,4,7\n\nAs above, this will skip some values in the input ``mgz`` file and create filtered directories in the output. However, instead of naming the output directories with the numerical value of the filtered (labelled) voxel value, the directory names will be looked up in the ``lookuptable`` file which associates a given voxel numerical value with a text name.\n\nNote that as above also, the output filtered directories are prefixed in this case with the text string ``label``.\n\n.. code:: bash\n\n    results/label-Left-Cerebral-White-Matter/sample-000.png\n                            ...\n    results/label-Left-Cerebral-White-Matter/sample-00255.png\n\n    ...\n    ...\n\n    results/label-ctx_rh_S_temporal_transverse/sample-000.png\n                            ...\n    results/label-ctx_rh_S_temporal_transverse/sample-00255.png\n\n\nCommand Line Arguments\n----------------------\n\n::\n\n    ARGS\n\n        [-i|--inputFile  <inputFile>]\n        Input file to convert. Should be an ``mgz`` file.\n\n        [-o|--outputFileStem <outputFileStem>]\n        The output file stem to store image conversion. If this is specified\n        with an extension, this extension will be used to specify the\n        output file type.\n\n        [-t|--outputFileType <outputFileType>]\n        The output file type. If different to <outputFileStem> extension,\n        will override extension in favour of <outputFileType>.\n\n        Should be a ``png``only.\n\n        [--saveImages]\n        If specified as True(boolean), will save the slices of the mgz file as \n        \".png\" image files along with the numpy files.\n\n        [--label <prefixForLabelDirectories>]\n        Prefixes the string <prefixForLabelDirectories> to each filtered\n        directory name. This is mostly for possible downstream processing,\n        allowing a subsequent operation to easily determine which of the output\n        directories correspond to labels.\n\n        [-n|--normalize]\n        If specified as True(boolean), will normalize the output image pixel values to\n        0 and 1, otherwise pixel image values will retain the value in\n        the original input volume.\n\n        [-l|--lookupTable <LUTfile>]\n        Need to pass a <LUTfile> (eg. FreeSurferColorLUT.txt)\n        to perform a looktup on the filtered voxel label values\n        according to the contents of the <LUTfile>. This <LUTfile> should\n        conform to the FreeSurfer lookup table format (documented elsewhere).\n\n        Note that the special <LUTfile> string ``__val__`` can be passed only when \n        running the docker image (fnndsc/pl-mgz2imageslices) of this utility which\n        effectively means \"no <LUTfile>\". In this case, the numerical voxel\n        values are used for output directory names. This special string is\n        really only useful for scripted cases of running this application when\n        modifying the CLI is more complex than simply setting the <LUTfile> to\n        ``__val__``.\n\n        While running the docker image, you can also pass ``__fs__`` which will use\n        the FreeSurferColorLUT.txt from within the docker container to perform a \n        looktup on the filtered voxel label values according to the contents of \n        the FreeSurferColorLUT.txt\n\n        [-s|--skipLabelValueList <ListOfLabelNumbersToSkip>]\n        If specified as a comma separated string of label numbers,\n        will not create directories of those label numbers.\n\n        [-f|--filterLabelValues <ListOfVoxelValuesToInclude>]\n        The logical inverse of the [skipLabelValueList] flag. If specified,\n        only filter the comma separated list of passed voxel values from the\n        input volume.\n\n        The detault value of \"-1\" implies all voxel values should be filtered.\n\n        [-w|--wholeVolume <wholeVolDirName>]\n        If specified, creates a diretory called <wholeVolDirName> (within the\n        outputdir) containing PNG/JPG images files of the entire input.\n\n        This effectively really creates a PNG/JPG conversion of the input\n        mgz file.\n\n        Values in the image files will be the same as the original voxel\n        values in the ``mgz``, unless the [--normalize] flag is specified\n        in which case this creates a single-value mask of the input image.\n\n        [-h|--help]\n        If specified, show help message and exit.\n\n        [--json]\n        If specified, show json representation of app and exit.\n\n        [--man]\n        If specified, print (this) man page and exit.\n\n        [--meta]\n        If specified, print plugin meta np_data and exit.\n\n        [--savejson <DIR>]\n        If specified, save json representation file to DIR and exit.\n\n        [-v <level>|--verbosity <level>]\n        Verbosity level for app. Not used currently.\n\n        [--version]\n        If specified, print version number and exit.\n\n        [-y|--synopsis]\n        Show short synopsis.",
    "description_content_type": "",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/FNNDSC/mgz2imgslices",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "mgz2imgslices",
    "package_url": "https://pypi.org/project/mgz2imgslices/",
    "platform": "",
    "project_url": "https://pypi.org/project/mgz2imgslices/",
    "project_urls": {
      "Homepage": "https://github.com/FNNDSC/mgz2imgslices"
    },
    "release_url": "https://pypi.org/project/mgz2imgslices/1.3.34/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "(Python) utility to filter mgz volumes to per-voxel-value directories of jpg/png image slices",
    "version": "1.3.34",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 15082376,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "d6278575687b24be5e2ee3b54a0ad5e9f889797c5c0458a2532dae1a8516987f",
        "md5": "783c495d94769158b057be543e8081ef",
        "sha256": "34f685546f235e11f3494cc80bb0e16a181e6ff0aa801610f0d4919e6f9fb684"
      },
      "downloads": -1,
      "filename": "mgz2imgslices-1.3.34.tar.gz",
      "has_sig": false,
      "md5_digest": "783c495d94769158b057be543e8081ef",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 14306,
      "upload_time": "2020-10-07T17:18:11",
      "upload_time_iso_8601": "2020-10-07T17:18:11.394736Z",
      "url": "https://files.pythonhosted.org/packages/d6/27/8575687b24be5e2ee3b54a0ad5e9f889797c5c0458a2532dae1a8516987f/mgz2imgslices-1.3.34.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}