{
  "info": {
    "author": "Jacek Tomaszewski",
    "author_email": "jacek.tomek@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Environment :: Web Environment",
      "Framework :: Django",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: BSD License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3",
      "Topic :: Utilities"
    ],
    "description": "|\n\n================================\nStoring settings in the database\n================================\n\nNot all settings belong in ``settings.py``, as it has some particular\nlimitations:\n\n    * Settings are project-wide. This not only requires apps to clutter up\n      ``settings.py``, but also increases the chances of naming conflicts.\n\n    * Settings are constant throughout an instance of Django. They cannot be\n      changed without restarting the application.\n\n    * Settings require a programmer in order to be changed. This is true even\n      if the setting has no functional impact on anything else.\n\nMany applications find need to overcome these limitations, and ``dbsettings``\nprovides a convenient way to do so.\n\nThe main goal in using this application is to define a set of placeholders that\nwill be used to represent the settings that are stored in the database. Then,\nthe settings may be edited at run-time using the provided editor, and all Python\ncode in your application that uses the setting will receive the updated value.\n\nRequirements\n============\n\n+------------------+------------+--------------+\n| Dbsettings       | Python     | Django       |\n+==================+============+==============+\n| >=1.0            | 3.5        | 2.0 - 2.2    |\n|                  +------------+--------------+\n|                  | 3.6 - 3.8  | 2.0 - 3.0    |\n+------------------+------------+--------------+\n| ==0.11           | 3.5 - 3.7  | 1.10 - 2.2   |\n|                  +------------+--------------+\n|                  | 2.7        | 1.10 - 1.11  |\n+------------------+------------+--------------+\n| ==0.10           | 3.4 - 3.5  | 1.7 - 1.10   |\n|                  +------------+--------------+\n|                  | 3.2 - 3.3  | 1.7 - 1.8    |\n|                  +------------+--------------+\n|                  | 2.7        | 1.7 - 1.10   |\n+------------------+------------+--------------+\n| ==0.9            | 3.4 - 3.5  | 1.7 - 1.9    |\n|                  +------------+--------------+\n|                  | 3.2 - 3.3  | 1.7 - 1.8    |\n|                  +------------+--------------+\n|                  | 2.7        | 1.7 - 1.9    |\n+------------------+------------+--------------+\n| ==0.8            | 3.2        | 1.5 - 1.8    |\n|                  +------------+--------------+\n|                  | 2.7        | 1.4 - 1.8    |\n|                  +------------+--------------+\n|                  | 2.6        | 1.4 - 1.6    |\n+------------------+------------+--------------+\n| ==0.7            | 3.2        | 1.5 - 1.7    |\n|                  +------------+--------------+\n|                  | 2.7        | 1.3 - 1.7    |\n|                  +------------+--------------+\n|                  | 2.6        | 1.3 - 1.6    |\n+------------------+------------+--------------+\n| ==0.6            | 3.2        |       1.5    |\n|                  +------------+--------------+\n|                  | 2.6 - 2.7  | 1.3 - 1.5    |\n+------------------+------------+--------------+\n| <=0.5            | 2.6 - 2.7  | 1.2\\* - 1.4  |\n+------------------+------------+--------------+\n\n\\* Possibly version below 1.2 will work too, but not tested.\n\nInstallation\n============\n\nTo install the ``dbsettings`` package, simply place it anywhere on your\n``PYTHONPATH``.\n\nProject settings\n----------------\n\nIn order to setup database storage, and to let Django know about your use of\n``dbsettings``, simply add it to your ``INSTALLED_APPS`` setting, like so::\n\n    INSTALLED_APPS = (\n        ...\n        'dbsettings',\n        ...\n    )\n\nIf your Django project utilizes ``sites`` framework, all setting would be related\nto some site. If ``sites`` are not present, settings won't be connected to any site\n(and ``sites`` framework is no longer required since 0.8.1).\n\nYou can force to do (not) use ``sites`` via ``DBSETTINGS_USE_SITES = True / False``\nconfiguration variable (put it in project's ``settings.py``).\n\nBy default, values stored in database are limited to 255 characters per setting.\nYou can change this limit with ``DBSETTINGS_VALUE_LENGTH`` configuration variable.\nIf you change this value after migrations were run, you need to manually alter\nthe ``dbsettings_setting`` table schema.\n\nURL Configuration\n-----------------\n\nIn order to edit your settings at run-time, you'll need to configure a URL to\naccess the provided editors. You'll just need to add a single line, defining\nthe base URL for the editors, as ``dbsettings`` has its own URLconf to handle\nthe rest. You may choose any location you like::\n\n    urlpatterns = patterns('',\n        ...\n        (r'^settings/', include('dbsettings.urls')),\n        ...\n    )\n\nor (django 2)::\n\n    from django.urls import path, include\n\n    urlpatterns = [\n        ...\n        path('settings/', include('dbsettings.urls')),\n        ...\n    ]\n\nA note about caching\n--------------------\n\nThis framework utilizes Django's built-in `cache framework`_, which is used to\nminimize how often the database needs to be accessed. During development,\nDjango's built-in server runs in a single process, so all cache backends will\nwork just fine.\n\nMost productions environments, including mod_python, FastCGI or WSGI, run multiple\nprocesses, which some backends don't fully support. When using the ``simple``\nor ``locmem`` backends, updates to your settings won't be reflected immediately\nin all workers, causing your application to ignore the new changes.\n\nNo other backends exhibit this behavior, but since ``simple`` is the default,\nmake sure to specify a proper backend when moving to a production environment.\n\n.. _`cache framework`: http://docs.djangoproject.com/en/dev/topics/cache/\n\nAlternatively you can disable caching of settings by setting\n``DBSETTINGS_USE_CACHE = False`` in ``settings.py``. Beware though: every\naccess of any setting will result in database hit.\n\nUsage\n=====\n\nThese database-backed settings can be applied to any model in any app, or even\nin the app itself. All the tools necessary to do so are available within the\n``dbsettings`` module. A single import provides everything you'll need::\n\n    import dbsettings\n\nDefining a group of settings\n----------------------------\n\nSettings are be defined in groups that allow them to be referenced together\nunder a single attribute. Defining a group uses a declarative syntax similar\nto that of models, by declaring a new subclass of the ``Group`` class and\npopulating it with values.\n\n::\n\n    class ImageLimits(dbsettings.Group):\n        maximum_width = dbsettings.PositiveIntegerValue()\n        maximum_height = dbsettings.PositiveIntegerValue()\n\nYou may name your groups anything you like, and they may be defined in any\nmodule. This allows them to be imported from common applications if applicable.\n\nDefining individual settings\n----------------------------\n\nWithin your groups, you may define any number of individual settings by simply\nassigning the value types to appropriate names. The names you assign them to\nwill be the attribute names you'll use to reference the setting later, so be\nsure to choose names accordingly.\n\nFor the editor, the default description of each setting will be retrieved from\nthe attribute name, similar to how the ``verbose_name`` of model fields is\nretrieved. Also like model fields, however, an optional argument may be provided\nto define a more fitting description. It's recommended to leave the first letter\nlower-case, as it will be capitalized as necessary, automatically.\n\n::\n\n    class EmailOptions(dbsettings.Group):\n        enabled = dbsettings.BooleanValue('whether to send emails or not')\n        sender = dbsettings.StringValue('address to send emails from')\n        subject = dbsettings.StringValue(default='SiteMail')\n\nFor more descriptive explanation, the ``help_text`` argument can be used. It\nwill be shown in the editor.\n\nThe ``default`` argument is very useful - it specify an initial value of the\nsetting.\n\nIn addition, settings may be supplied with a list of available options, through\nthe use of of the ``choices`` argument. This works exactly like the ``choices``\nargument for model fields, and that of the newforms ``ChoiceField``.\n\nThe widget used for a value can be overriden using the ``widget`` keyword. For example:\n\n::\n\n    payment_instructions = dbsettings.StringValue(\n        help_text=\"Printed on every invoice.\",\n        default=\"Payment to Example XYZ\\nBank name here\\nAccount: 0123456\\nSort: 01-02-03\",\n        widget=forms.Textarea\n    )\n\nA full list of value types is available later in this document, but the process\nand arguments are the same for each.\n\nAssigning settings\n------------------\n\nOnce your settings are defined and grouped properly, they must be assigned to a\nlocation where they will be referenced later. This is as simple as instantiating\nthe settings group in the appropriate location. This may be at the module level\nor within any standard Django model.\n\nGroup instance may receive one optional argument: verbose name of the group.\nThis name will be displayed in the editor.\n\n::\n\n    email = EmailOptions()\n\n    class Image(models.Model):\n        image = models.ImageField(upload_to='/upload/path')\n        caption = models.TextField()\n\n        limits = ImageLimits('Dimension settings')\n\nMultiple groups may be assigned to the same module or model, and they can even\nbe combined into a single group by using standard addition syntax::\n\n    options = EmailOptions() + ImageLimits()\n\nTo separate and tag settings nicely in the editor, use verbose names::\n\n    options = EmailOptions('Email') + ImageLimits('Dimesions')\n\nDatabase setup\n--------------\n\nA single model is provided for database storage, and this model must be\ninstalled in your database before you can use the included editors or the\npermissions that will be automatically created. This is a simple matter of\nrunning ``manage.py syncdb`` or ``manage.py migrate`` now that your settings\nare configured.\n\nThis step need only be repeate when settings are added to a new application,\nas it will create the appropriate permissions. Once those are in place, new\nsettings may be added to existing applications with no impact on the database.\n\nUsing your settings\n===================\n\nOnce the above steps are completed, you're ready to make use of database-backed\nsettings.\n\nEditing settings\n----------------\n\nWhen first defined, your settings will default to ``None`` (or ``False`` in\nthe case of ``BooleanValue``), so their values must be set using one of the\nsupplied editors before they can be considered useful (however, if the setting\nhad the ``default`` argument passed in the constructor, its value is already\nuseful - equal to the defined default).\n\nThe editor will be available at the URL configured earlier.\nFor example, if you used the prefix of ``'settings/'``, the URL ``/settings/``\nwill provide an editor of all available settings, while ``/settings/myapp/``\nwould contain a list of just the settings for ``myapp``.\n\nURL patterns are named: ``'site_settings'`` and ``'app_settings'``, respectively.\n\nThe editors are restricted to staff members, and the particular settings that\nwill be available to users is based on permissions that are set for them. This\nmeans that superusers will automatically be able to edit all settings, while\nother staff members will need to have permissions set explicitly.\n\nAccessing settings in Python\n----------------------------\n\nOnce settings have been assigned to an appropriate location, they may be\nreferenced as standard Python attributes. The group becomes an attribute of the\nlocation where it was assigned, and the individual values are attributes of the\ngroup.\n\nIf any settings are referenced without being set to a particular value, they\nwill default to ``None`` (or ``False`` in the case of ``BooleanValue``, or\nwhatever was passed as ``default``). In the\nfollowing example, assume that ``EmailOptions`` were just added to the project\nand the ``ImageLimits`` were added earlier and already set via editor.\n\n::\n\n    >>> from myproject.myapp import models\n\n    # EmailOptions are not defined\n    >>> models.email.enabled\n    False\n    >>> models.email.sender\n    >>> models.email.subject\n    'SiteMail'  # Since default was defined\n\n    # ImageLimits are defined\n    >>> models.Image.limits.maximum_width\n    1024\n    >>> models.Image.limits.maximum_height\n    768\n\nThese settings are accessible from any Python code, making them especially\nuseful in model methods and views. Each time the attribute is accessed, it will\nretrieve the current value, so your code doesn't need to worry about what\nhappens behind the scenes.\n\n::\n\n    def is_valid(self):\n        if self.width > Image.limits.maximum_width:\n            return False\n        if self.height > Image.limits.maximum_height:\n            return False\n    return True\n\nAs mentioned, views can make use of these settings as well.\n\n::\n\n    from myproject.myapp.models import email\n\n    def submit(request):\n\n        ...\n        # Deal with a form submission\n        ...\n\n        if email.enabled:\n            from django.core.mail import send_mail\n        send_mail(email.subject, 'message', email.sender, [request.user.email])\n\nSettings can be not only read, but also written. The admin editor is more\nuser-friendly, but in case code need to change something::\n\n    from myproject.myapp.models import Image\n\n    def low_disk_space():\n        Image.limits.maximum_width = Image.limits.maximum_height = 200\n\nEvery write is immediately commited to the database and proper cache key is deleted.\n\nA note about model instances\n----------------------------\n\nSince settings aren't related to individual model instances, any settings that\nare set on models may only be accessed by the model class itself. Attempting to\naccess settings on an instance will raise an ``AttributeError``.\n\nTriggering actions on settings changes\n--------------------------------------\n\nA signal is sent whenever a setting changes. You can receive it by doing\nsomething like this in your appconfig's ``ready()`` method::\n\n    from dbsetting.loading import get_setting\n    from dbsettings.signals import setting_changed\n\n    setting_changed.connect(my_function, sender=get_setting('myapp', 'MyClass', 'myattr'))\n\n`my_function` will be called with a `sender` and `value` parameters, the latter containing a\nnew value assigned to the setting.\n\nValue types\n===========\n\nThere are several various value types available for database-backed settings.\nSelect the one most appropriate for each individual setting, but all types use\nthe same set of arguments.\n\nBooleanValue\n------------\n\nPresents a checkbox in the editor, and returns ``True`` or ``False`` in Python.\n\nDurationValue\n-------------\n\nPresents a set of inputs suitable for specifying a length of time. This is\nrepresented in Python as a |timedelta|_ object.\n\n.. |timedelta| replace:: ``timedelta``\n.. _timedelta: https://docs.python.org/2/library/datetime.html#timedelta-objects\n\nFloatValue\n----------\n\nPresents a standard input field, which becomes a ``float`` in Python.\n\nIntegerValue\n------------\n\nPresents a standard input field, which becomes an ``int`` in Python.\n\nPercentValue\n------------\n\nSimilar to ``IntegerValue``, but with a limit requiring that the value be\nbetween 0 and 100. In addition, when accessed in Python, the value will be\ndivided by 100, so that it is immediately suitable for calculations.\n\nFor instance, if a ``myapp.taxes.sales_tax`` was set to 5 in the editor,\nthe following calculation would be valid::\n\n    >>> 5.00 * myapp.taxes.sales_tax\n    0.25\n\nPositiveIntegerValue\n--------------------\n\nSimilar to ``IntegerValue``, but limited to positive values and 0.\n\nStringValue\n-----------\n\nPresents a standard input, accepting any text string up to 255\n(or ``DBSETTINGS_VALUE_LENGTH``) characters. In\nPython, the value is accessed as a standard string.\n\nDateTimeValue\n-------------\n\nPresents a standard input field, which becomes a ``datetime`` in Python.\n\nUser input will be parsed according to ``DATETIME_INPUT_FORMATS`` setting.\n\nIn code, one can assign to field string or datetime object::\n\n    # These two statements has the same effect\n    myapp.Feed.next_feed = '2012-06-01 00:00:00'\n    myapp.Feed.next_feed = datetime.datetime(2012, 6, 1, 0, 0, 0)\n\nDateValue\n---------\n\nPresents a standard input field, which becomes a ``date`` in Python.\n\nUser input will be parsed according to ``DATE_INPUT_FORMATS`` setting.\n\nSee ``DateTimeValue`` for the remark about assigning.\n\nTimeValue\n---------\n\nPresents a standard input field, which becomes a ``time`` in Python.\n\nUser input will be parsed according to ``TIME_INPUT_FORMATS`` setting.\n\nSee ``DateTimeValue`` for the remark about assigning.\n\nImageValue\n----------\n\n(requires PIL or Pillow imaging library to work)\n\nAllows to upload image and view its preview.\n\nImageValue has optional keyword arguments:\n\n- ``upload_to`` specifies path (relative to ``MEDIA_ROOT``), where uploaded\n  images will be stored. If argument is not present, files will be saved\n  directly under ``MEDIA_ROOT``.\n- ``delete_old`` (default to True) controls whether to delete the old file when\n  the value has changed\n\nIn Python, the value is accessed as a standard string (file name, relative to\n``MEDIA_ROOT``).\n\nPasswordValue\n-------------\n\nPresents a standard password input. Retain old setting value if not changed.\n\n\nSetting defaults for a distributed application\n==============================================\n\nDistributed applications often have need for certain default settings that are\nuseful for the common case, but which may be changed to suit individual\ninstallations. For such cases, a utility is provided to enable applications to\nset any applicable defaults.\n\nLiving at ``dbsettings.utils.set_defaults``, this utility is designed to be used\nwithin the app's ``management.py``. This way, when the application is installed\nusing ``syncdb``/``migrate``, the default settings will also be installed to the database.\n\nThe function requires a single positional argument, which is the ``models``\nmodule for the application. Any additional arguments must represent the actual\nsettings that will be installed. Each argument is a 3-tuple, of the following\nformat: ``(class_name, setting_name, value)``.\n\nIf the value is intended for a module-level setting, simply set ``class_name``\nto an empty string. The value for ``setting_name`` should be the name given to\nthe setting itself, while the name assigned to the group isn't supplied, as it\nisn't used for storing the value.\n\nFor example, the following code in ``management.py`` would set defaults for\nsome of the settings provided earlier in this document::\n\n    from django.conf import settings\n    from dbsettings.utils import set_defaults\n    from myproject.myapp import models as myapp\n\n    set_defaults(myapp,\n        ('', 'enabled', True)\n        ('', 'sender', settings.ADMINS[0][1]) # Email of the first listed admin\n        ('Image', 'maximum_width', 800)\n        ('Image', 'maximum_height', 600)\n    )\n\n----------\n\nChangelog\n=========\n\n**1.1.0** (21/03/2020)\n    - Fixed image widget in Django 2.1\n    - Added ``delete_old`` parameter to ImageValue\n    - Make ``upload_to`` parameter to ImageValue no longer required.\n    - Fix PasswordValue to not render widget as required.\n**1.0.1** (26/12/2019)\n    - Introduced a signal `setting_changed`\n    - Added compatibility with Django 3.0\n    - Dropped compatibility with Django 1.10, 1.11\n    - Dropped compatibility with Python 2\n**0.11.0** (31/07/2019)\n    - Added compatibility with Django 1.11, 2.0, 2.1, 2.2\n    - Dropped compatibility with Django 1.7, 1.8, 1.9\n**0.10.0** (25/09/2016)\n    - Added compatibility with Django 1.10\n**0.9.3** (02/06/2016)\n    - Fixed (hopefully for good) problem with ImageValue in Python 3 (thanks rolexCoder)\n**0.9.2** (01/05/2016)\n    - Fixed bug when saving non-required settings\n    - Fixed problem with ImageValue in Python 3 (thanks rolexCoder)\n**0.9.1** (10/01/2016)\n    - Fixed `Sites` app being optional (thanks rolexCoder)\n**0.9.0** (25/12/2015)\n    - Added compatibility with Django 1.9 (thanks Alonso)\n    - Dropped compatibility with Django 1.4, 1.5, 1.6\n**0.8.2** (17/09/2015)\n    - Added migrations to distro\n    - Add configuration option to change max length of setting values from 255 to whatever\n    - Add configuration option to disable caching (thanks nwaxiomatic)\n    - Fixed PercentValue rendering (thanks last-partizan)\n**0.8.1** (21/06/2015)\n    - Made ``django.contrib.sites`` framework dependency optional\n    - Added migration for app\n**0.8.0** (16/04/2015)\n    - Switched to using django.utils.six instead of standalone six.\n    - Added compatibility with Django 1.8\n    - Dropped compatibility with Django 1.3\n**0.7.4** (24/03/2015)\n    - Added default values for fields.\n    - Fixed Python 3.3 compatibility\n    - Added creation of folders with ImageValue\n**0.7.3**, **0.7.2**\n    pypi problems\n**0.7.1** (11/03/2015)\n    - Fixed pypi distribution.\n**0.7** (06/07/2014)\n    - Added PasswordValue\n    - Added compatibility with Django 1.6 and 1.7.\n**0.6** (16/09/2013)\n    - Added compatibility with Django 1.5 and python3, dropped support for Django 1.2.\n    - Fixed permissions: added permission for editing non-model (module-level) settings\n    - Make PIL/Pillow not required in setup.py\n**0.5** (11/10/2012)\n    - Fixed error occuring when test are run with ``LANGUAGE_CODE`` different than 'en'\n    - Added verbose_name option for Groups\n    - Cleaned code\n**0.4.1** (02/10/2012)\n    - Fixed Image import\n**0.4** (30/09/2012)\n    - Named urls\n    - Added polish translation\n**0.3** (04/09/2012)\n    Included testrunner in distribution\n**0.2** (05/07/2012)\n    - Fixed errors appearing when module-level and model-level settings have\n      same attribute names\n    - Corrected the editor templates admin integration\n    - Updated README\n**0.1** (29/06/2012)\n    Initial PyPI release\n",
    "description_content_type": "",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "http://github.com/zlorf/django-dbsettings",
    "keywords": "",
    "license": "BSD",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-dbsettings",
    "package_url": "https://pypi.org/project/django-dbsettings/",
    "platform": "",
    "project_url": "https://pypi.org/project/django-dbsettings/",
    "project_urls": {
      "Homepage": "http://github.com/zlorf/django-dbsettings"
    },
    "release_url": "https://pypi.org/project/django-dbsettings/1.1.0/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "Application settings whose values can be updated while a project is up and running.",
    "version": "1.1.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 12944620,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "e04baa613c4ff877d04ed4c65c9454b518eb5e53f8bb30da54a5433a55138699",
        "md5": "11debd445d9e50017ab6ac356798b757",
        "sha256": "1f07fd390a7783253e20edcfad118ecb25408284ca329128535de7382f516167"
      },
      "downloads": -1,
      "filename": "django-dbsettings-1.1.0.tar.gz",
      "has_sig": false,
      "md5_digest": "11debd445d9e50017ab6ac356798b757",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 22723,
      "upload_time": "2020-03-21T08:40:20",
      "upload_time_iso_8601": "2020-03-21T08:40:20.594208Z",
      "url": "https://files.pythonhosted.org/packages/e0/4b/aa613c4ff877d04ed4c65c9454b518eb5e53f8bb30da54a5433a55138699/django-dbsettings-1.1.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}