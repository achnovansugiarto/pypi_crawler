{
  "info": {
    "author": "Kristofer Tengstr√∂m",
    "author_email": "ordermind@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Intended Audience :: Developers",
      "Programming Language :: Python :: 2",
      "Programming Language :: Python :: 2.7",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.2",
      "Programming Language :: Python :: 3.3",
      "Programming Language :: Python :: 3.4",
      "Programming Language :: Python :: 3.5",
      "Topic :: Software Development :: Libraries :: Python Modules"
    ],
    "description": "# logical-permissions\n\nThis is a generic library that provides support for dictionary-based\npermissions with logic gates such as AND and OR. You can register any\nkind of permission types such as roles and flags. The idea with this\nlibrary is to be an ultra-flexible foundation that can be used by any\nframework. It supports python 2 and 3.\n\nGetting started\n---------------\n\nInstallation\n~~~~~~~~~~~~\n\n``pip install logical-permissions``\n\nUsage\n~~~~~\n\n.. code:: python\n\n    # Simple example for checking user roles\n\n    from logical_permissions.LogicalPermissions import LogicalPermissions\n\n    lp = LogicalPermissions()\n\n    def roleCallback(role, context):\n      access = False\n      if 'roles' in context.get('user', {}):\n        access = role in context['user']['roles']\n      return access\n    lp.addType('role', roleCallback)\n\n    permissions = {\n      'role': ['editor', 'writer'],\n    }\n\n    user = {\n      'id': 1,\n      'roles': ['writer'],\n    }\n\n    access = lp.checkAccess(permissions, {'user': user})\n    print('Access granted: {0}'.format(access))\n\nThe main api method is\n```LogicalPermissions::checkAccess()`` <#checkaccess>`__, which checks\nthe access for a **permission tree**. A permission tree is a bundle of\npermissions that apply to a specific action. Let's say for example that\nyou want to restrict access for updating a user. You'd like only users\nwith the role \"admin\" to be able to update any user, but users should\nalso be able to update their own user data (or at least some of it).\nWith the structure this package provides, these conditions could be\nexpressed elegantly in a permission tree as such:\n\n.. code:: python\n\n    {\n      'OR': {\n        'role': 'admin',\n        'flag': 'is_author',\n      },\n    }\n\nIn this example ``role`` and ``flag`` are the evaluated permission\ntypes. For this example to work you will need to register the permission\ntypes 'role' and 'flag' so that the class knows which callbacks are\nresponsible for evaluating the respective permission types. You can do\nthat with ```LogicalPermissions::addType()`` <#addtype>`__.\n\nBypassing permissions\n~~~~~~~~~~~~~~~~~~~~~\n\nThis packages also supports rules for bypassing permissions completely\nfor superusers. In order to use this functionality you need to register\na callback with\n```LogicalPermissions::setBypassCallback()`` <#setbypasscallback>`__.\nThe registered callback will run on every permission check and if it\nreturns ``True``, access will automatically be granted. If you want to\nmake exceptions you can do so by adding ``'no_bypass': True`` to the\nfirst level of a permission tree. You can even use permissions as\nconditions for ``no_bypass``.\n\nExamples:\n\n.. code:: python\n\n    # Disallow access bypassing\n    {\n      'no_bypass': True,\n      'role': 'editor',\n    }\n\n.. code:: python\n\n    # Disallow access bypassing only if the user is an admin\n    {\n      'no_bypass': {\n        'role': 'admin',\n      },\n      'role': 'editor',\n    }\n\nLogic gates\n-----------\n\nCurrently supported logic gates are `AND <#and>`__, `NAND <#nand>`__,\n`OR <#or>`__, `NOR <#nor>`__, `XOR <#xor>`__ and `NOT <#not>`__. You can\nput logic gates anywhere in a permission tree and nest them to your\nheart's content. All logic gates support a dictionary or list as their\nvalue, except the NOT gate which has special rules. If a dictionary or\nlist of values does not have a logic gate as its key, an OR gate will be\nassumed.\n\nAND\n~~~\n\nA logic AND gate returns True if all of its children return True.\nOtherwise it returns False.\n\nExamples:\n\n.. code:: python\n\n    # Allow access only if the user is both an editor and a sales person\n    {\n      'role': {\n        'AND': ['editor', 'sales'],\n      },\n    }\n\n.. code:: python\n\n    # Allow access if the user is both a sales person and the author of the document\n    {\n      'AND': {\n        'role': 'sales',\n        'flag': 'is_author',\n      },\n    }\n\nNAND\n~~~~\n\nA logic NAND gate returns True if one or more of its children returns\nFalse. Otherwise it returns False.\n\nExamples:\n\n.. code:: python\n\n    # Allow access by anyone except if the user is both an editor and a sales person\n    {\n      'role': {\n        'NAND': ['editor', 'sales'],\n      },\n    }\n\n.. code:: python\n\n    # Allow access by anyone, but not if the user is both a sales person and the author of the document.\n    {\n      'NAND': {\n        'role': 'sales',\n        'flag': 'is_author',\n      },\n    }\n\nOR\n~~\n\nA logic OR gate returns True if one or more of its children returns\nTrue. Otherwise it returns False.\n\nExamples:\n\n.. code:: python\n\n    # Allow access if the user is either an editor or a sales person, or both.\n    {\n      'role': {\n        'OR': ['editor', 'sales'],\n      },\n    }\n\n.. code:: python\n\n    # Allow access if the user is either a sales person or the author of the document, or both\n    {\n      'OR': {\n        'role': 'sales',\n        'flag': 'is_author',\n      },\n    }\n\nShorthand OR\n~~~~~~~~~~~~\n\nAs previously mentioned, any dictionary or list of values that doesn't\nhave a logic gate as its key is interpreted as belonging to an OR gate.\n\nIn other words, this permission tree:\n\n.. code:: python\n\n    {\n      'role': ['editor', 'sales'],\n    }\n\nis interpreted exactly the same way as this permission tree:\n\n.. code:: python\n\n    {\n      'role': {\n        'OR': ['editor', 'sales'],\n      },\n    }\n\nNOR\n~~~\n\nA logic NOR gate returns True if all of its children returns False.\nOtherwise it returns False.\n\nExamples:\n\n.. code:: python\n\n    # Allow access if the user is neither an editor nor a sales person\n    {\n      'role': {\n        'NOR': ['editor', 'sales'],\n      },\n    }\n\n.. code:: python\n\n    # Allow neither sales people nor the author of the document to access it\n    {\n      'NOR': {\n        'role': 'sales',\n        'flag': 'is_author',\n      },\n    }\n\nXOR\n~~~\n\nA logic XOR gate returns True if one or more of its children returns\nTrue and one or more of its children returns False. Otherwise it returns\nFalse. An XOR gate requires a minimum of two elements in its value list\nor dictionary.\n\nExamples:\n\n.. code:: python\n\n    # Allow access if the user is either an editor or a sales person, but not both\n    {\n      'role': {\n        'XOR': ['editor', 'sales'],\n      },\n    }\n\n.. code:: python\n\n    # Allow either sales people or the author of the document to access it, but not if the user is both a sales person and the author\n    {\n      'XOR': {\n        'role': 'sales',\n        'flag': 'is_author',\n      },\n    }\n\nNOT\n~~~\n\nA logic NOT gate returns True if its child returns False, and vice\nversa. The NOT gate is special in that it supports either a string or a\ndictionary with a single element as its value.\n\nExamples:\n\n.. code:: python\n\n    # Allow access for anyone except editors\n    {\n      'role': {\n        'NOT': 'editor',\n      },\n    }\n\n.. code:: python\n\n    # Allow access for anyone except the author of the document\n    {\n      'NOT': {\n        'flag': 'is_author',\n      },\n    }\n\nAPI Documentation\n-----------------\n\nTable of Contents\n-----------------\n\n-  `LogicalPermissions <#logicalpermissions>`__\n\n   -  `addType <#addtype>`__\n   -  `removeType <#removetype>`__\n   -  `typeExists <#typeexists>`__\n   -  `getTypeCallback <#gettypecallback>`__\n   -  `getTypes <#gettypes>`__\n   -  `setTypes <#settypes>`__\n   -  `getBypassCallback <#getbypasscallback>`__\n   -  `setBypassCallback <#setbypasscallback>`__\n   -  `checkAccess <#checkaccess>`__\n\nLogicalPermissions\n------------------\n\naddType\n~~~~~~~\n\nAdds a permission type.\n\n.. code:: python\n\n    LogicalPermissions::addType( name, callback )\n\n**Parameters:**\n\n+----------------+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Parameter      | Type           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n+================+================+===========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+\n| ``name``       | **string**     | The name of the permission type.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n+----------------+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| ``callback``   | **callable**   | The callback that evaluates the permission type. Upon calling checkAccess() the registered callback will be passed two parameters: a permission string (such as a role) and the context dictionary passed to checkAccess(). The permission will always be a single string even if for example multiple roles are accepted. In that case the callback will be called once for each role that is to be evaluated. The callback should return a boolean which determines whether access should be granted.   |\n+----------------+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\n--------------\n\nremoveType\n~~~~~~~~~~\n\nRemoves a permission type.\n\n.. code:: python\n\n    LogicalPermissions::removeType( name )\n\n**Parameters:**\n\n+-------------+--------------+------------------------------------+\n| Parameter   | Type         | Description                        |\n+=============+==============+====================================+\n| ``name``    | **string**   | The name of the permission type.   |\n+-------------+--------------+------------------------------------+\n\n--------------\n\ntypeExists\n~~~~~~~~~~\n\nChecks whether a permission type is registered.\n\n.. code:: python\n\n    LogicalPermissions::typeExists( name )\n\n**Parameters:**\n\n+-------------+--------------+------------------------------------+\n| Parameter   | Type         | Description                        |\n+=============+==============+====================================+\n| ``name``    | **string**   | The name of the permission type.   |\n+-------------+--------------+------------------------------------+\n\n**Return Value:**\n\nTrue if the type is found or False if the type isn't found.\n\n--------------\n\ngetTypeCallback\n~~~~~~~~~~~~~~~\n\nGets the callback for a permission type.\n\n.. code:: python\n\n    LogicalPermissions::getTypeCallback( name )\n\n**Parameters:**\n\n+-------------+--------------+------------------------------------+\n| Parameter   | Type         | Description                        |\n+=============+==============+====================================+\n| ``name``    | **string**   | The name of the permission type.   |\n+-------------+--------------+------------------------------------+\n\n**Return Value:**\n\nCallback for the permission type.\n\n--------------\n\ngetTypes\n~~~~~~~~\n\nGets all defined permission types.\n\n.. code:: python\n\n    LogicalPermissions::getTypes(  )\n\n**Return Value:**\n\nA dictionary of permission types with the structure {name: callback,\nname2: callback2, ...}. This dictionary is shallow copied.\n\n--------------\n\nsetTypes\n~~~~~~~~\n\nOverwrites all defined permission types.\n\n.. code:: python\n\n    LogicalPermissions::setTypes( types )\n\n**Parameters:**\n\n+-------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------+\n| Parameter   | Type             | Description                                                                                                                       |\n+=============+==================+===================================================================================================================================+\n| ``types``   | **dictionary**   | A dictionary of permission types with the structure {name: callback, name2: callback2, ...}. This dictionary is shallow copied.   |\n+-------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------+\n\n--------------\n\ngetBypassCallback\n~~~~~~~~~~~~~~~~~\n\nGets the registered callback for access bypass evaluation.\n\n.. code:: python\n\n    LogicalPermissions::getBypassCallback(  )\n\n**Return Value:**\n\nBypass access callback.\n\n--------------\n\nsetBypassCallback\n~~~~~~~~~~~~~~~~~\n\nSets the callback for access bypass evaluation.\n\n.. code:: python\n\n    LogicalPermissions::setBypassCallback( callback )\n\n**Parameters:**\n\n+----------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Parameter      | Type           | Description                                                                                                                                                                                                                                                                           |\n+================+================+=======================================================================================================================================================================================================================================================================================+\n| ``callback``   | **callable**   | The callback that evaluates access bypassing. Upon calling checkAccess() the registered bypass callback will be passed one parameter, which is the context dictionary passed to checkAccess(). It should return a boolean which determines whether bypass access should be granted.   |\n+----------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\n--------------\n\ncheckAccess\n~~~~~~~~~~~\n\nChecks access for a permission tree.\n\n.. code:: python\n\n    LogicalPermissions::checkAccess( permissions, context )\n\n**Parameters:**\n\n+-------------------+------------------+----------------------------------------------------------------------------------------+\n| Parameter         | Type             | Description                                                                            |\n+===================+==================+========================================================================================+\n| ``permissions``   | **dictionary**   | The permission tree to be evaluated.                                                   |\n+-------------------+------------------+----------------------------------------------------------------------------------------+\n| ``context``       | **dictionary**   | A context dictionary that could for example contain the evaluated user and document.   |\n+-------------------+------------------+----------------------------------------------------------------------------------------+\n\n**Return Value:**\n\nTrue if access is granted or False if access is denied.\n\n--------------",
    "description_content_type": null,
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/Ordermind/logical-permissions-py",
    "keywords": "permissions",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "logical-permissions",
    "package_url": "https://pypi.org/project/logical-permissions/",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/logical-permissions/",
    "project_urls": {
      "Homepage": "https://github.com/Ordermind/logical-permissions-py"
    },
    "release_url": "https://pypi.org/project/logical-permissions/1.0.2/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "Provides support for dictionary-based permissions with logic gates such as AND and OR.",
    "version": "1.0.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 3445457,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "e4471a6a2ef89b1ae2f20e68e66d6326b8b68435a535b1e2b34b3dd14754bbe6",
        "md5": "971046144108225ae91794d6d75896a2",
        "sha256": "b899c6e2a7557a1782087c933aa6af697f5d0fcf95496c8963fe515842500437"
      },
      "downloads": -1,
      "filename": "logical_permissions-1.0.2-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "971046144108225ae91794d6d75896a2",
      "packagetype": "bdist_wheel",
      "python_version": "py2.py3",
      "requires_python": null,
      "size": 13075,
      "upload_time": "2015-12-29T14:03:43",
      "upload_time_iso_8601": "2015-12-29T14:03:43.226158Z",
      "url": "https://files.pythonhosted.org/packages/e4/47/1a6a2ef89b1ae2f20e68e66d6326b8b68435a535b1e2b34b3dd14754bbe6/logical_permissions-1.0.2-py2.py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "252c6ed440b44ebeb5c506da8f4d9169b9bed024583bae2b9d0bba7e34d98635",
        "md5": "b9beeca8830fd441a851eef8a64c3351",
        "sha256": "0644b4f602fbf1ea5ef032a96ba0354c3c346f2ec0d5f3778d59ba787741ebc8"
      },
      "downloads": -1,
      "filename": "logical-permissions-1.0.2.tar.gz",
      "has_sig": false,
      "md5_digest": "b9beeca8830fd441a851eef8a64c3351",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 6951,
      "upload_time": "2015-12-29T14:03:48",
      "upload_time_iso_8601": "2015-12-29T14:03:48.961240Z",
      "url": "https://files.pythonhosted.org/packages/25/2c/6ed440b44ebeb5c506da8f4d9169b9bed024583bae2b9d0bba7e34d98635/logical-permissions-1.0.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}