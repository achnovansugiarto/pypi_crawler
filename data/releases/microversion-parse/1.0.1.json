{
  "info": {
    "author": "OpenStack",
    "author_email": "openstack-discuss@lists.openstack.org",
    "bugtrack_url": null,
    "classifiers": [
      "Environment :: OpenStack",
      "Intended Audience :: Information Technology",
      "License :: OSI Approved :: Apache Software License",
      "Operating System :: POSIX :: Linux",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3 :: Only",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: Implementation :: CPython"
    ],
    "description": "microversion_parse\n==================\n\nA small set of functions to manage OpenStack `microversion`_ headers that can\nbe used in middleware, application handlers and decorators to effectively\nmanage microversions.\n\nAlso included, in the ``middleware`` module, is a ``MicroversionMiddleware``\nthat will process incoming microversion headers.\n\nget_version\n-----------\n\nA simple parser for OpenStack microversion headers::\n\n    import microversion_parse\n\n    # headers is a dict of headers with folded (comma-separated\n    # values) or a list of header, value tuples\n    version = microversion_parse.get_version(\n        headers, service_type='compute',\n        legacy_headers=['x-openstack-nova-api-version'])\n\n    # If headers are not already available, a dict of headers\n    # can be extracted from the WSGI environ\n    headers = microversion_parse.headers_from_wsgi_environ(environ)\n    version = microversion_parse.get_version(\n        headers, service_type='placement')\n\nIt processes microversion headers with the standard form::\n\n    OpenStack-API-Version: compute 2.1\n\nIn that case, the response will be '2.1'.\n\nIf provided with a ``legacy_headers`` argument, this is treated as\na list of additional headers to check for microversions. Some examples of\nheaders include::\n\n    OpenStack-telemetry-api-version: 2.1\n    OpenStack-nova-api-version: 2.1\n    X-OpenStack-nova-api-version: 2.1\n\nIf a version string cannot be found, ``None`` will be returned. If\nthe input is incorrect usual Python exceptions (ValueError,\nTypeError) are allowed to raise to the caller.\n\nparse_version_string\n--------------------\n\nA function to turn a version string into a ``Version``, a comparable\n``namedtuple``::\n\n    version_tuple = microversion_parse.parse_version_string('2.1')\n\nIf the provided string is not a valid microversion string, ``TypeError``\nis raised.\n\nextract_version\n---------------\n\nCombines ``get_version`` and ``parse_version_string`` to find and validate\na microversion for a given service type in a collection of headers::\n\n    version_tuple = microversion_parse.extract_version(\n        headers,  # a representation of headers, as accepted by get_version\n        service_type,  # service type identify to match in headers\n        versions_list,  # an ordered list of strings of version numbers that\n                        # are the valid versions presented by this service\n    )\n\n``latest`` will be translated to whatever the max version is in versions_list.\n\nIf the found version is not in versions_list a ``ValueError`` is raised.\n\nNote that ``extract_version`` does not support ``legacy_headers``.\n\nMicroversionMiddleware\n----------------------\n\nA WSGI middleware that can wrap an application that needs to be microversion\naware. The application will get a WSGI environ with a\n'SERVICE_TYPE.microversion' key that has a value of the microversion found at\nan 'openstack-api-version' header that matches SERVICE_TYPE.  If no header is\nfound, the minimum microversion will be set. If the special keyword 'latest' is\nused, the maximum microversion will be set.\n\nIf the requested microversion is not available a 406 response is returned.\n\nIf there is an error parsing a provided header, a 400 response is returned.\n\nOtherwise the application is called.\n\nThe middleware is configured when it is created. Three parameters are required:\n\napp\n  The next WSGI middleware or application in the stack.\n\nservice_type\n  The service type of the application, used to identify microversion headers.\n\nversions_list\n  An ordered list of legitimate microversions (as strings) for the application.\n  It's assumed that any application that is using microversions will have such\n  a list for its own housekeeping and documentation.\n\nOne named parameter is optional:\n\njson_error_formatter\n  A Webob error formatter that can be used to structure the response when JSON\n  is expected.\n\nFor example::\n\n    def app():\n        app = middleware.MicroversionMiddleware(\n            MyWSGIApp(), 'cats', ['1.0', '1.1', '1.2'])\n        return app\n\n\n.. _microversion: http://specs.openstack.org/openstack/api-wg/guidelines/microversion_specification.html\n\n\n\n",
    "description_content_type": "",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "http://www.openstack.org/",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "microversion-parse",
    "package_url": "https://pypi.org/project/microversion-parse/",
    "platform": "",
    "project_url": "https://pypi.org/project/microversion-parse/",
    "project_urls": {
      "Homepage": "http://www.openstack.org/"
    },
    "release_url": "https://pypi.org/project/microversion-parse/1.0.1/",
    "requires_dist": [
      "WebOb (>=1.2.3)"
    ],
    "requires_python": ">=3.6",
    "summary": "OpenStack microversion header parser",
    "version": "1.0.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 6968231,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "87b0ee589a03bac111ba8a80fe6ed23560736e24216b6031a47347a685df4064",
        "md5": "32115d73c76c1ca4ebcae274cd6cfd01",
        "sha256": "aab3ab98028923e778920ba6a837ea3b190d8827b08b3d1e845d9c44c9dfc221"
      },
      "downloads": -1,
      "filename": "microversion_parse-1.0.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "32115d73c76c1ca4ebcae274cd6cfd01",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6",
      "size": 19514,
      "upload_time": "2020-04-07T10:11:25",
      "upload_time_iso_8601": "2020-04-07T10:11:25.666705Z",
      "url": "https://files.pythonhosted.org/packages/87/b0/ee589a03bac111ba8a80fe6ed23560736e24216b6031a47347a685df4064/microversion_parse-1.0.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "1cbbffeb8ac7acfe77425220352f1338e164ceb1177fdb69f7bcbc6750ca878d",
        "md5": "57c6d82f0eb92306d47f1d1933810be5",
        "sha256": "ec6bc0711019f620d6690087b958f934634a242e49a7c1c60c1688363cbe102d"
      },
      "downloads": -1,
      "filename": "microversion_parse-1.0.1.tar.gz",
      "has_sig": false,
      "md5_digest": "57c6d82f0eb92306d47f1d1933810be5",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 19228,
      "upload_time": "2020-04-07T10:11:30",
      "upload_time_iso_8601": "2020-04-07T10:11:30.724051Z",
      "url": "https://files.pythonhosted.org/packages/1c/bb/ffeb8ac7acfe77425220352f1338e164ceb1177fdb69f7bcbc6750ca878d/microversion_parse-1.0.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}