{
  "info": {
    "author": "Reecetech",
    "author_email": "opensource@reecetech.com.au",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: Apache Software License",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9",
      "Topic :: Scientific/Engineering",
      "Topic :: Software Development"
    ],
    "description": "Django InformixDB\n==================\n\nA database driver for Django to connect to an Informix database via pyodbc.\n\n**Some limitations**:\n\n- Does not support default values\n- Informix automatically creates indexes on foreign keys, but Django attempts to do that\n  manually; the current implementation here just attempts to catch the error on index\n  creation. It may unintentionally catch other index creation errors where the index\n  already exists.\n\n\nConfigure local environment\n---------------------------\n\nThe following environment variables should exist:\n\nINFORMIXDIR\n    The path to the Informix client install directory\n\nINFORMIXSERVER\n    The name of the Informix service to which we need to connect\n\nINFORMIXSQLHOSTS\n    The path to the ``sqlhosts`` file that the Informix driver should use\n\nLD_LIBRARY_PATH\n    The path(s) to the various Informix library files: Usually\n    ``$INFORIMIXDIR/lib:$INFORMIXDIR/lib/cli:$IMFORMIXDIR/lib/esql``\n\nDB_LOCALE\n    In case of ``Database locale information mismatch.`` error during connection,\n    you should specify your database locale, e.g. ``DB_LOCALE=en_US.8859-15``\n\nYou will also need to add an entry within your ``sqlhosts`` file for each remote/local Informix\nserver connection in the following format::\n\n    <INFORMIX_SERVER_NAME>    onsoctcp     <INFORMIX_HOST_NAME>    <INFORMIX_SERVICE_NAME>\n\nFor example::\n\n    dev    onsoctcp    localhost    9088\n\nYou may alternatively use a symbolic name in that line in place of the port number, typically ``sqlexec`` and\nthen configure the port number in the ``/etc/services`` file::\n\n    sqlexec    9088/tcp\n\n\nConfigure settings.py\n---------------------\n\nDjangoâ€™s settings.py uses the following to connect to an Informix database:\n\n.. code-block:: python\n\n    'default': {\n        'ENGINE': 'django_informixdb',\n        'NAME': 'myproject',\n        'SERVER': 'ifxserver',\n        'USER' : 'testuser',\n        'PASSWORD': 'passw0rd',\n        'OPTIONS': {\n            'DRIVER': '/path/to/iclit09b.so'. # Or iclit09b.dylib on macOS\n            'CPTIMEOUT': 120,\n            'CONN_TIMEOUT': 120,\n            'ISOLATION_LEVEL': 'READ_UNCOMMITTED',\n            'LOCK_MODE_WAIT': 0,\n            'VALIDATE_CONNECTION': True,\n        },\n        'CONNECTION_RETRY': {\n            'MAX_ATTEMPTS': 10,\n        },\n        'TEST': {\n            'NAME': 'myproject',\n            'CREATE_DB': False\n        }\n    }\n\nCPTIMEOUT\n    This will set connection pooling timeout.\n    Possible values::\n\n        0 - Turn off connection pooling\n        nn - timeout set nn seconds\n\nCONN_TIMEOUT\n    This will set timeout for operations on connections (connection, ??closing??, we're not sure).\n    Possible values::\n\n        0 - Default timeout to the database (which could mean no timeout)\n        nn - timeout set nn seconds\n\nISOLATION_LEVEL\n    This will set database isolation level at connection level\n    Possible values::\n\n        READ_COMMITED\n        READ_UNCOMMITTED\n        SERIALIZABLE\n\nLOCK_MODE_WAIT\n    This will set database LOCK MODE WAIT at connection level\n    Application can use this property to override the default server\n    process for accessing a locked row or table.\n    The default value is 0 (do not wait for the lock).\n    Possible values::\n\n        -1 - WAIT until the lock is released.\n        0 - DO NOT WAIT, end the operation, and return with error.\n        nn - WAIT for nn seconds for the lock to be released.\n\nVALIDATE_CONNECTION\n    Whether existing connections should be validated at the start of the request. Defaults to\n    `False`.\n\nVALIDATION_INTERVAL\n    How often in seconds to revalidate connections if `VALIDATE_CONNECTION` is enabled. Defaults to\n    `300` (5 minutes).\n\nVALIDATION_QUERY\n    Query used to validate whether a connection is usable. Defaults to\n    `\"SELECT 1 FROM sysmaster:sysdual\"`.\n\nCONNECTION_RETRY\n    When opening a new connection to the database, automatically retry up to ``MAX_ATTEMPTS`` times\n    in the case of errors. Only error codes in ``ERRORS`` will trigger a retry. The wait time\n    between retries is calculated using an exponential backoff with jitter formula::\n\n        random_between(WAIT_MIN, min(WAIT_MAX, WAIT_MULTIPLIER * WAIT_EXP_BASE ** (attempt - 1)))\n\n    Defaults (wait times are in milliseconds)::\n\n        MAX_ATTEMPTS: 1  # this implies no retries\n        WAIT_MIN: 0\n        WAIT_MAX: 1000\n        WAIT_MULTIPLIER: 25\n        WAIT_EXP_BASE: 2\n        ERRORS: ['-908', '-930', '-27001']\n\n    Each of these settings can be overridden in the ``CONNECTION_RETRY`` section of the database\n    configuration in ``settings.py``. For example::\n\n        DATABASES = {\n           'default': {\n               'ENGINE': 'django_informixdb',\n               'CONNECTION_RETRY': {\n                   'MAX_ATTEMPTS': 10,\n                   'WAIT_MIN': 0,\n                   'WAIT_MAX': 500,\n               },\n               # ...\n            },\n         }\n\n    The error codes that are retried by default correspond to the following errors:\n\n    * ``-908 Attempt to connect to database server (servername) failed``\n    * ``-930 Cannot connect to database server servername``\n    * ``-27001 Read error occurred during connection attempt``\n\n    These errors are often seen when the database server is too busy, too many clients are\n    attempting to connect at the same time or a network firewall has chopped the connection.\n\n\n.. note:\n    The ``DRIVER`` option is optional, default locations will be used per platform if it is not provided.\n\n.. note:\n    The ``TEST`` option sets test parametes.  Use ``NAME`` to override the name of the test database\n    and set ``CREATE_DB`` to ``False`` to prevent Django from attempting to create a new test\n    database.\n\nUsing with the Docker Informix Dev Database\n-------------------------------------------\n\nThe docker image from IBM for the Informix developer database image behaves a little differently compared to other images. As such it needs a little extra handling, and doesn't seem to work with docker-compose\n\nFirstly we need to download and getting it running:\n\n.. code-block:: bash\n\n    $ docker run -itd --name iif_developer_edition --privileged -p 9088:9088 -p 9089:9089 -p 27017:27017 \\\n    -p 27018:27018 -p 27883:27883 -e LICENSE=accept ibmcom/informix-developer-database:latest\n\nThis will download the image if it doesn't exist, and then run it with the name ``iif_developer_edition``. The first time this run, the image will do a bunch of initial setup stuff. As we used the ``-d`` option, it will run in the background as a detached process. So don't be concerned that you do not see anything in the output.\n\nYou can stop and restart the container with:\n\n.. code-block:: bash\n\n    $ docker stop iif_developer_edition\n    $ docker start iif_developer_edition\n\nIt seems that the Informix ODBC driver does not currently support creating databases. So we will need to do\nthat manually, by attaching to the running container\n\n.. code-block:: bash\n\n    $ docker attach iif_developer_edition\n\n\nThis will give you a shell on the running container, and you can therefore use dbaccess to create your database.\nYou can exit this shell using ``Ctrl-p`` ``Ctrl-q`` without shutting down the whole container.\n\nThis Django database adaptor for Informix requires transaction support to be enabled in our database.\nThis is not the default within the Informix Developer image.  So you need to enable it on a per database basis:\n\n.. code-block:: bash\n\n    $ docker attach iif_developer_edition\n    $ ontape -s -B <DB_NAME>\n\nAgain, you can detach using ``Ctrl-p`` ``Ctrl-q``.\n\nFinally you need to ensure that our local dev database is included in the ``sqlhosts`` file. e.g.:\n\n.. code-block:: bash\n\n    dev    onsoctcp    localhost    9088\n\nYou should now be able to point Django to our local test database using the syntax detailed above.\n\n\nUsing Django InformixDB with docker-compose\n-------------------------------------------\n\nIt is possible to use the Informix developer docker image with docker-compose with a little effort.\n\nExample docker-compose.yml\n\n.. code-block:: yaml\n\n    version: '3'\n\n    services:\n        db:\n            image: ibmcom/informix-developer-database\n            tty: true # Needed to ensure container doesn't self terminate\n            environment:\n                LICENSE: accept\n            privileged: true\n            ports:\n                - \"9088:9088\"\n                - \"9089:9089\"\n                - \"27017:27017\"\n                - \"27018:27018\"\n                - \"27883:27883\"\n\n\nThe key entry in the compose file which is out of the ordinary is `tty: true`. This allocates a (virtual) TTY to the container. The Informix developer database container expects a `tty` and terminates without one when run inside docker-compose.\n\nOnce it is up and running with `docker-compose up` you can run a `bash` shell on the running container with:\n\n.. code-block:: bash\n\n    docker exec -it informix_db_1 bash\n\n\nWhere `informix_db_1` is the name of the running container. From this shell you can create your DB with `dbaccess` etc.\n\n.. warning::\n\n    This approach still requires the SDK to installed locally and the appropriate environmental variables to be set up. Along with entries in `sqlhosts` and `/etc/services`\n\n\nTesting against an Informix Database\n------------------------------------\n\nDue to a bug in the Informix ODBC driver, it is not currently possible to run Django tests normally. Specifically, it is not possible for Django to create a test database. As such, you will need to do it manually. By default Django will attempt to create a database with a name equal to the default database name with a ``test_`` prefix. e.g. if you database name is ``my_database``, the test database name would be ``test_my_database``.  This can be overridden with the ``NAME`` option under ``TEST``.\n\nTo prevent Django from attempting to create a test database, set the ``CREATE_DB`` option\nunder ``TEST`` to ``False``: see 'Configure settings.py' above.\n\nYou can follow the steps above, in the section on using Informix locally with Docker to create a test database. Then when running the test you can tell Django to re-use an existing database, rather than trying to create a new one with the ``-k`` parameter:\n\n.. code-block:: bash\n\n    ./manage.py test -k\n\n\nFor django_informixdb Developers\n--------------------------------\n\nTo run the django_informixdb test suite, you need to set the INFORMIXDIR environment variable, and the tests\nexpect an Informix database at host \"informix\". Change that host in `test/conftest.py` if you need to.\nThen run the test suite with:\n\n    tox\n\nThis will run the tests under Django 2 and 3.\n\n\nDocker based testing\n^^^^^^^^^^^^^^^^^^^^\n\nIf you don't want to install the Informix libraries and multiple versions of Python locally, then you can test within\nDocker containers.\n\nTry using the helper script `test-in-docker.sh`, or inspect the script and adapt for your own purposes.\n\nRequirements: Docker 19.03.2 or newer and Docker Compose 1.24.1 or newer.\n\n\nRelease History\n---------------\n\nVersion 1.10.1\n\n- Fix for https://github.com/reecetech/django_informixdb/issues/31\n\nVersion 1.10.0\n\n- Begin support for Django 3.x\n- Begin support for Python 3.9\n\nVersion 1.9.1\n\n- Begin support for Python 3.7 and 3.8\n- End support for Django 1.x and Python 3.5\n\nVersion 1.9.0\n\n- Enable setting a validation interval.\n\nVersion 1.8.0\n\n- Enable validating connections at start of request.\n\nVersion 1.7.0\n\n- Add CONN_TIMEOUT setting.\n\nVersion 1.5.0\n\n- Enable retrying if get connection fails.\n\nVersion 1.3.3\n\n- Compability fix for Django 2+ to remove old \"context\" argument from\n  custom fields\n\nVersion 1.3.0\n\n- Addressing deprecation warning for conversion functions in Django 2+\n- Detect incorrect INFORMIXSQLHOSTS setting earlier for better error message\n\nVersion 1.2.0\n\n- Fix bug in DecimalField handling under Django 2+\n\nVersion 1.1.0\n\n- Added LOCK_MODE_WAIT option\n\nVersion 1.0.0\n\n- Initial public release\n\n\n",
    "description_content_type": "",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/reecetech/django_informixdb",
    "keywords": "django informix",
    "license": "APLv2",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-informixdb",
    "package_url": "https://pypi.org/project/django-informixdb/",
    "platform": "",
    "project_url": "https://pypi.org/project/django-informixdb/",
    "project_urls": {
      "Homepage": "https://github.com/reecetech/django_informixdb"
    },
    "release_url": "https://pypi.org/project/django-informixdb/1.10.1/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "A database driver for Django to connect to an Informix db via ODBC",
    "version": "1.10.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 13826421,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "155933f70845790a3028e1a0ac82492ba784d2cb23e0603b218c9491011c20c1",
        "md5": "db2f7cc0d6ea332943dedc2bd6be84f4",
        "sha256": "95e43025bb78297bb70cb0269d93778883be419c23dc8a33f98549315d097192"
      },
      "downloads": -1,
      "filename": "django_informixdb-1.10.1.tar.gz",
      "has_sig": false,
      "md5_digest": "db2f7cc0d6ea332943dedc2bd6be84f4",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 31761,
      "upload_time": "2021-10-18T03:30:09",
      "upload_time_iso_8601": "2021-10-18T03:30:09.815394Z",
      "url": "https://files.pythonhosted.org/packages/15/59/33f70845790a3028e1a0ac82492ba784d2cb23e0603b218c9491011c20c1/django_informixdb-1.10.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}