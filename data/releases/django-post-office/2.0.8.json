{
  "info": {
    "author": "Selwin Ong",
    "author_email": "selwin.ong@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Environment :: Web Environment",
      "Framework :: Django",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 2",
      "Programming Language :: Python :: 2.6",
      "Programming Language :: Python :: 2.7",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.3",
      "Topic :: Internet :: WWW/HTTP",
      "Topic :: Software Development :: Libraries :: Python Modules"
    ],
    "description": "==================\nDjango Post Office\n==================\n\nDjango Post Office is a simple app to send and manage your emails in Django.\nSome awesome features are:\n\n* Allows you to send email asynchronously\n* Multi backend support\n* Supports HTML email\n* Supports database based email templates\n* Built in scheduling support\n* Works well with task queues like `RQ <http://python-rq.org>`_ or `Celery <http://www.celeryproject.org>`_\n* Uses multiprocessing to send a large number of emails in parallel\n* Supports multilingual email templates (i18n)\n\n\nDependencies\n============\n\n* `django >= 1.4 <http://djangoproject.com/>`_\n* `django-jsonfield <https://github.com/bradjasper/django-jsonfield>`_\n\n\nInstallation\n============\n\n|Build Status|\n\n\n* Install from PyPI (or you `manually download from PyPI <http://pypi.python.org/pypi/django-post_office>`_)::\n\n    pip install django-post_office\n\n* Add ``post_office`` to your INSTALLED_APPS in django's ``settings.py``:\n\n.. code-block:: python\n\n    INSTALLED_APPS = (\n        # other apps\n        \"post_office\",\n    )\n\n* Run ``syncdb``::\n\n    python manage.py syncdb\n\n* Set ``post_office.EmailBackend`` as your ``EMAIL_BACKEND`` in django's ``settings.py``::\n\n    EMAIL_BACKEND = 'post_office.EmailBackend'\n\nIf you're still on Django <= 1.6 and use South to manage your migrations,\nyou'll need to put the following in ``settings.py``:\n\n.. code-block:: python\n\n    SOUTH_MIGRATION_MODULES = {\n        \"post_office\": \"post_office.south_migrations\",\n    }\n\n\nQuickstart\n==========\n\nSend a simple email is really easy:\n\n.. code-block:: python\n\n    from post_office import mail\n\n    mail.send(\n        'recipient@example.com', # List of email addresses also accepted\n        'from@example.com',\n        subject='My email',\n        message='Hi there!',\n        html_message='Hi <strong>there</strong>!',\n    )\n\n\nIf you want to use templates, ensure that Django's admin interface is enabled. Create an\n``EmailTemplate`` instance via ``admin`` and do the following:\n\n.. code-block:: python\n\n    from post_office import mail\n\n    mail.send(\n        'recipient@example.com', # List of email addresses also accepted\n        'from@example.com',\n        template='welcome_email', # Could be an EmailTemplate instance or name\n        context={'foo': 'bar'},\n    )\n\nThe above command will put your email on the queue so you can use the\ncommand in your webapp without slowing down the request/response cycle too much.\nTo actually send them out, run ``python manage.py send_queued_mail``.\nYou can schedule this management command to run regularly via cron::\n\n    * * * * * (/usr/bin/python manage.py send_queued_mail >> send_mail.log 2>&1)\n\nor, if you use uWSGI_ as application server, add this short snipped  to the\nproject's ``wsgi.py`` file:\n\n.. code-block:: python\n\n    from django.core.wsgi import get_wsgi_application\n\n    application = get_wsgi_application()\n\n    # add this block of code\n    try:\n        import uwsgidecorators\n        from django.core.management import call_command\n\n        @uwsgidecorators.timer(10)\n        def send_queued_mail(num):\n            \"\"\"Send queued mail every 10 seconds\"\"\"\n            call_command('send_queued_mail', processes=1)\n\n    except ImportError:\n        print(\"uwsgidecorators not found. Cron and timers are disabled\")\n\nAlternatively you can also use the decorator ``@uwsgidecorators.cron(minute, hour, day, month, weekday)``.\nThis will schedule a task at specific times. Use ``-1`` to signal any time, it corresponds to the ``*``\nin cron.\n\nPlease note that ``uwsgidecorators`` are available only, if the application has been started\nwith **uWSGI**. However, Django's internal ``./manange.py runserver`` also access this file,\ntherefore wrap the block into an exception handler as shown above.\n\nThis configuration is very useful in environments, such as Docker containers, where you\ndon't have a running cron-daemon.\n\n\nUsage\n=====\n\nmail.send()\n-----------\n\n``mail.send`` is the most important function in this library, it takes these\narguments:\n\n+--------------------+----------+--------------------------------------------------+\n| Argument           | Required | Description                                      |\n+--------------------+----------+--------------------------------------------------+\n| recipients         | Yes      | list of recipient email addresses                |\n+--------------------+----------+--------------------------------------------------+\n| sender             | No       | Defaults to ``settings.DEFAULT_FROM_EMAIL``,     |\n|                    |          | display name is allowed (``John <john@a.com>``)  |\n+--------------------+----------+--------------------------------------------------+\n| subject            | No       | Email subject (if ``template`` is not specified) |\n+--------------------+----------+--------------------------------------------------+\n| message            | No       | Email content (if ``template`` is not specified) |\n+--------------------+----------+--------------------------------------------------+\n| html_message       | No       | HTML content (if ``template`` is not specified)  |\n+--------------------+----------+--------------------------------------------------+\n| template           | No       | ``EmailTemplate`` instance or name               |\n+--------------------+----------+--------------------------------------------------+\n| language           | No       | Language in which you want to send the email in  |\n|                    |          | (if you have multilingual email templates.)      |\n+--------------------+----------+--------------------------------------------------+\n| cc                 | No       | list emails, will appear in ``cc`` field         |\n+--------------------+----------+--------------------------------------------------+\n| bcc                | No       | list of emails, will appear in `bcc` field       |\n+--------------------+----------+--------------------------------------------------+\n| attachments        | No       | Email attachments - A dictionary where the keys  |\n|                    |          | are the filenames and the values are either:     |\n|                    |          |                                                  |\n|                    |          | * files                                          |\n|                    |          | * file-like objects                              |\n|                    |          | * full path of the file                          |\n+--------------------+----------+--------------------------------------------------+\n| context            | No       | A dictionary, used to render templated email     |\n+--------------------+----------+--------------------------------------------------+\n| headers            | No       | A dictionary of extra headers on the message     |\n+--------------------+----------+--------------------------------------------------+\n| scheduled_time     | No       | A date/datetime object indicating when the email |\n|                    |          | should be sent                                   |\n+--------------------+----------+--------------------------------------------------+\n| priority           | No       | ``high``, ``medium``, ``low`` or ``now``         |\n|                    |          | (send_immediately)                               |\n+--------------------+----------+--------------------------------------------------+\n| backend            | No       | Alias of the backend you want to use.            |\n|                    |          | ``default`` will be used if not specified.       |\n+--------------------+----------+--------------------------------------------------+\n| render_on_delivery | No       | Setting this to ``True`` causes email to be      |\n|                    |          | lazily rendered during delivery. ``template``    |\n|                    |          | is required when ``render_on_delivery`` is True. |\n|                    |          | This way content is never stored in the DB.      |\n|                    |          | May result in significant space savings.         |\n+--------------------+----------+--------------------------------------------------+\n\n\nHere are a few examples.\n\nIf you just want to send out emails without using database templates. You can\ncall the ``send`` command without the ``template`` argument.\n\n.. code-block:: python\n\n    from post_office import mail\n\n    mail.send(\n        ['recipient1@example.com'],\n        'from@example.com',\n        subject='Welcome!',\n        message='Welcome home, {{ name }}!',\n        html_message='Welcome home, <b>{{ name }}</b>!',\n        headers={'Reply-to': 'reply@example.com'},\n        scheduled_time=date(2014, 1, 1),\n        context={'name': 'Alice'},\n    )\n\n``post_office`` is also task queue friendly. Passing ``now`` as priority into\n``send_mail`` will deliver the email right away (instead of queuing it),\nregardless of how many emails you have in your queue:\n\n.. code-block:: python\n\n    from post_office import mail\n\n    mail.send(\n        ['recipient1@example.com'],\n        'from@example.com',\n        template='welcome_email',\n        context={'foo': 'bar'},\n        priority='now',\n    )\n\nThis is useful if you already use something like `django-rq <https://github.com/ui/django-rq>`_\nto send emails asynchronously and only need to store email related activities and logs.\n\nIf you want to send an email with attachments:\n\n.. code-block:: python\n\n    from django.core.files.base import ContentFile\n    from post_office import mail\n\n    mail.send(\n        ['recipient1@example.com'],\n        'from@example.com',\n        template='welcome_email',\n        context={'foo': 'bar'},\n        priority='now',\n        attachments={\n            'attachment1.doc': '/path/to/file/file1.doc',\n            'attachment2.txt': ContentFile('file content'),\n        }\n    )\n\nTemplate Tags and Variables\n---------------------------\n\n``post-office`` supports Django's template tags and variables.\nFor example, if you put \"Hello, {{ name }}\" in the subject line and pass in\n``{'name': 'Alice'}`` as context, you will get \"Hello, Alice\" as subject:\n\n.. code-block:: python\n\n    from post_office.models import EmailTemplate\n    from post_office import mail\n\n    EmailTemplate.objects.create(\n        name='morning_greeting',\n        subject='Morning, {{ name|capfirst }}',\n        content='Hi {{ name }}, how are you feeling today?',\n        html_content='Hi <strong>{{ name }}</strong>, how are you feeling today?',\n    )\n\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        template='morning_greeting',\n        context={'name': 'alice'},\n    )\n\n    # This will create an email with the following content:\n    subject = 'Morning, Alice',\n    content = 'Hi alice, how are you feeling today?'\n    content = 'Hi <strong>alice</strong>, how are you feeling today?'\n\n\nMultilingual Email Templates\n----------------------------\n\nYou can easily create email templates in various different languanges.\nFor example:\n\n.. code-block:: python\n\n    template = EmailTemplate.objects.create(\n        name='hello',\n        subject='Hello world!',\n    )\n\n    # Add an Indonesian version of this template:\n    indonesian_template = template.translated_templates.create(\n        language='id',\n        subject='Halo Dunia!'\n    )\n\nSending an email using template in a non default languange is\nalso similarly easy:\n\n.. code-block:: python\n\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        template=template, # Sends using the default template\n    )\n\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        template=template,\n        language='id', # Sends using Indonesian template\n    )\n\nCustom Email Backends\n---------------------\n\nBy default, ``post_office`` uses django's ``smtp.EmailBackend``. If you want to\nuse a different backend, you can do so by configuring ``BACKENDS``.\n\nFor example if you want to use `django-ses <https://github.com/hmarr/django-ses>`_::\n\n    POST_OFFICE = {\n        'BACKENDS': {\n            'default': 'smtp.EmailBackend',\n            'ses': 'django_ses.SESBackend',\n        }\n    }\n\nYou can then choose what backend you want to use when sending mail:\n\n.. code-block:: python\n\n    # If you omit `backend_alias` argument, `default` will be used\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        subject='Hello',\n    )\n\n    # If you want to send using `ses` backend\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        subject='Hello',\n        backend='ses',\n    )\n\n\nManagement Commands\n-------------------\n\n* ``send_queued_mail`` - send queued emails, those aren't successfully sent\n  will be marked as ``failed``. Accepts the following arguments:\n\n+---------------------------+--------------------------------------------------++\n| Argument                  | Description                                      ||\n+---------------------------+--------------------------------------------------++\n| ``--processes`` or ``-p`` | Number of parallel processes to send email.      ||\n|                           | Defaults to 1                                    ||\n+---------------------------+--------------------------------------------------++\n| ``--lockfile`` or ``-L``  | Full path to file used as lock file. Defaults to ||\n|                           | ``/tmp/post_office.lock``                        ||\n+---------------------------+--------------------------------------------------++\n\n\n* ``cleanup_mail`` - delete all emails created before an X number of days\n  (defaults to 90).\n\nYou may want to set these up via cron to run regularly::\n\n    * * * * * (cd $PROJECT; python manage.py send_queued_mail --processes=1 >> $PROJECT/cron_mail.log 2>&1)\n    0 1 * * * (cd $PROJECT; python manage.py cleanup_mail --days=30 >> $PROJECT/cron_mail_cleanup.log 2>&1)\n\nSettings\n========\nThis section outlines all the settings and configurations that you can put\nin Django's ``settings.py`` to fine tune ``post-office``'s behavior.\n\nBatch Size\n----------\n\nIf you may want to limit the number of emails sent in a batch (sometimes useful\nin a low memory environment), use the ``BATCH_SIZE`` argument to limit the\nnumber of queued emails fetched in one batch.\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'BATCH_SIZE': 5000\n    }\n\nDefault Priority\n----------------\n\nThe default priority for emails is ``medium``, but this can be altered by\nsetting ``DEFAULT_PRIORITY``. Integration with asynchronous email backends\n(e.g. based on Celery) becomes trivial when set to ``now``.\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'DEFAULT_PRIORITY': 'now'\n    }\n\nLog Level\n---------\n\nThe default log level is 2 (logs both successful and failed deliveries)\nThis behavior can be changed by setting ``LOG_LEVEL``.\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'LOG_LEVEL': 1 # Log only failed deliveries\n    }\n\nThe different options are:\n\n* ``0`` logs nothing\n* ``1`` logs only failed deliveries\n* ``2`` logs everything (both successful and failed delivery attempts)\n\n\nSending Order\n-------------\n\nThe default sending order for emails is ``-priority``, but this can be altered by\nsetting ``SENDING_ORDER``. For example, if you want to send queued emails in FIFO order :\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'SENDING_ORDER': ['created']\n    }\n\nContext Field Serializer\n------------------------\n\nIf you need to store complex Python objects for deferred rendering\n(i.e. setting ``render_on_delivery=True``), you can specify your own context\nfield class to store context variables. For example if you want to use\n`django-picklefield <https://github.com/gintas/django-picklefield/tree/master/src/picklefield>`_:\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'CONTEXT_FIELD_CLASS': 'picklefield.fields.PickledObjectField'\n    }\n\n``CONTEXT_FIELD_CLASS`` defaults to ``jsonfield.JSONField``.\n\nLogging\n-------\n\nYou can configure ``post-office``'s logging from Django's ``settings.py``. For\nexample:\n\n.. code-block:: python\n\n    LOGGING = {\n        \"version\": 1,\n        \"disable_existing_loggers\": False,\n        \"formatters\": {\n            \"post_office\": {\n                \"format\": \"[%(levelname)s]%(asctime)s PID %(process)d: %(message)s\",\n                \"datefmt\": \"%d-%m-%Y %H:%M:%S\",\n            },\n        },\n        \"handlers\": {\n            \"post_office\": {\n                \"level\": \"DEBUG\",\n                \"class\": \"logging.StreamHandler\",\n                \"formatter\": \"post_office\"\n            },\n            # If you use sentry for logging\n            'sentry': {\n                'level': 'ERROR',\n                'class': 'raven.contrib.django.handlers.SentryHandler',\n            },\n        },\n        'loggers': {\n            \"post_office\": {\n                \"handlers\": [\"post_office\", \"sentry\"],\n                \"level\": \"INFO\"\n            },\n        },\n    }\n\nPerformance\n===========\n\nCaching\n-------\n\nif Django's caching mechanism is configured, ``post_office`` will cache\n``EmailTemplate`` instances . If for some reason you want to disable caching,\nset ``POST_OFFICE_CACHE`` to ``False`` in ``settings.py``:\n\n.. code-block:: python\n\n    ## All cache key will be prefixed by post_office:template:\n    ## To turn OFF caching, you need to explicitly set POST_OFFICE_CACHE to False in settings\n    POST_OFFICE_CACHE = False\n\n    ## Optional: to use a non default cache backend, add a \"post_office\" entry in CACHES\n    CACHES = {\n        'post_office': {\n            'BACKEND': 'django.core.cache.backends.memcached.PyLibMCCache',\n            'LOCATION': '127.0.0.1:11211',\n        }\n    }\n\n\nsend_many()\n-----------\n\n``send_many()`` is much more performant (generates less database queries) when\nsending a large number of emails. ``send_many()`` is almost identical to ``mail.send()``,\nwith the exception that it accepts a list of keyword arguments that you'd\nusually pass into ``mail.send()``:\n\n.. code-block:: python\n\n    from post_office import mail\n\n    first_email = {\n        'sender': 'from@example.com',\n        'recipients': ['alice@example.com'],\n        'subject': 'Hi!',\n        'message': 'Hi Alice!'\n    }\n    second_email = {\n        'sender': 'from@example.com',\n        'recipients': ['bob@example.com'],\n        'subject': 'Hi!',\n        'message': 'Hi Bob!'\n    }\n    kwargs_list = [first_email, second_email]\n\n    mail.send_many(kwargs_list)\n\nAttachments are not supported with ``mail.send_many()``.\n\n\nRunning Tests\n=============\n\nTo run the test suite::\n\n    `which django-admin.py` test post_office --settings=post_office.test_settings --pythonpath=.\n\nYou can run the full test suite with::\n\n    tox\n\nor::\n\n    python setup.py test\n\n\nChangelog\n=========\n\nVersion 2.0.8\n-------------\n* Django 1.10 compatibility fixes. Thanks @hockeybuggy!\n* Fixed an issue where Django would sometimes create migration files for post-office. Thanks @fizista!\n\nVersion 2.0.7\n-------------\n* Fixed an issue with sending email to recipients with display name. Thanks @yprez!\n\nVersion 2.0.6\n-------------\n* Fixes Django 1.10 deprecation warnings and other minor improvements. Thanks @yprez!\n* Email.subject can now accept up to 989 characters. This should also fix minor migration issues. Thanks @yprez!\n\nVersion 2.0.5\n-------------\n* Fixes more Django 1.8 deprecation warnings.\n* `Email.dispatch()` now closes backend connection by default. Thanks @zwack\n* Compatibility fixes for Django 1.9. Thanks @yprez!\n\nVersion 2.0.1\n-------------\n* Fixes migration related packaging issues.\n* Fixes deprecation warning in Django 1.8.\n\nVersion 2.0\n-----------\n* Added multi backend support. Now you can use multiple email backends with ``post-office``!\n* Added multi language support. Thanks @jrief!\n\nVersion 1.1.2\n-------------\n* Adds Django 1.8 compatibility.\n\nVersion 1.1.1\n-------------\n* Fixes a migration error. Thanks @garry-cairns!\n\nVersion 1.1.0\n-------------\n* Support for Django 1.7 migrations. If you're still on Django < 1.7,\n  South migration files are stored in ``south_migrations`` directory.\n\nVersion 1.0.0\n-------------\n* **IMPORTANT**: in older versions, passing multiple ``recipients`` into\n  ``mail.send()`` will create multiple emails, each addressed to one recipient.\n  Starting from ``1.0.0``, only one email with multiple recipients will be created.\n* Added ``LOG_LEVEL`` setting.\n* ``mail.send()`` now supports ``cc`` and ``bcc``.\n  Thanks Ștefan Daniel Mihăilă (@stefan-mihaila)!\n* Improvements to ``admin`` interface; you can now easily requeue multiple emails.\n* ``Log`` model now stores the type of exception caught during sending.\n* ``send_templated_mail`` command is now deprecated.\n* Added ``EMAIL_BACKEND`` setting to the new dictionary-styled settings.\n\n\nFull changelog can be found `here <https://github.com/ui/django-post_office/blob/master/CHANGELOG.md>`_.\n\n\nCreated and maintained by the cool guys at `Stamps <https://stamps.co.id>`_,\nIndonesia's most elegant CRM/loyalty platform.\n\n\n.. |Build Status| image:: https://travis-ci.org/ui/django-post_office.png?branch=master\n   :target: https://travis-ci.org/ui/django-post_office\n\n.. _uWSGI: https://uwsgi-docs.readthedocs.org/en/latest/",
    "description_content_type": null,
    "docs_url": null,
    "download_url": "UNKNOWN",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/ui/django-post_office",
    "keywords": null,
    "license": "MIT",
    "maintainer": null,
    "maintainer_email": null,
    "name": "django-post-office",
    "package_url": "https://pypi.org/project/django-post-office/",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/django-post-office/",
    "project_urls": {
      "Download": "UNKNOWN",
      "Homepage": "https://github.com/ui/django-post_office"
    },
    "release_url": "https://pypi.org/project/django-post-office/2.0.8/",
    "requires_dist": null,
    "requires_python": null,
    "summary": "A Django app to monitor and send mail asynchronously, complete with template support.",
    "version": "2.0.8",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 15548824,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "1473681af2cd03cf18006855249a725a486677a5a3547d58ec693dbf12679597",
        "md5": "0d63d29a069b5ee159d8182c4c1dd4c6",
        "sha256": "7f085df53f28beb9420d0a9828a40882f3ade3f8ce589928e6369d98a4eec9e9"
      },
      "downloads": -1,
      "filename": "django_post_office-2.0.8-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "0d63d29a069b5ee159d8182c4c1dd4c6",
      "packagetype": "bdist_wheel",
      "python_version": "2.7",
      "requires_python": null,
      "size": 69454,
      "upload_time": "2016-08-28T11:11:10",
      "upload_time_iso_8601": "2016-08-28T11:11:10.581628Z",
      "url": "https://files.pythonhosted.org/packages/14/73/681af2cd03cf18006855249a725a486677a5a3547d58ec693dbf12679597/django_post_office-2.0.8-py2.py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "5225cc0cfe923f183d7c19b162cac3bf8430ddaed7bad28202b8f93a97d248a4",
        "md5": "437bf62cef06381d346ae2bc087c0e3c",
        "sha256": "bfb3ff26de5b668c91453ee8d930ff0bfe397849fd5508ff3e1216c3b46d6449"
      },
      "downloads": -1,
      "filename": "django-post_office-2.0.8.tar.gz",
      "has_sig": false,
      "md5_digest": "437bf62cef06381d346ae2bc087c0e3c",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 49688,
      "upload_time": "2016-08-28T11:11:07",
      "upload_time_iso_8601": "2016-08-28T11:11:07.045289Z",
      "url": "https://files.pythonhosted.org/packages/52/25/cc0cfe923f183d7c19b162cac3bf8430ddaed7bad28202b8f93a97d248a4/django-post_office-2.0.8.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}