{
  "info": {
    "author": "Selwin Ong",
    "author_email": "selwin.ong@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Environment :: Web Environment",
      "Framework :: Django",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 2",
      "Programming Language :: Python :: 2.6",
      "Programming Language :: Python :: 2.7",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.3",
      "Topic :: Internet :: WWW/HTTP",
      "Topic :: Software Development :: Libraries :: Python Modules"
    ],
    "description": "==================\nDjango Post Office\n==================\n\nDjango Post Office is a simple app to send and manage your emails in Django.\nSome awesome features are:\n\n* Allows you to send email asynchronously\n* Multi backend support\n* Supports HTML email\n* Supports database based email templates\n* Built in scheduling support\n* Works well with task queues like `RQ <http://python-rq.org>`_ or `Celery <http://www.celeryproject.org>`_\n* Uses multiprocessing (and threading) to send a large number of emails in parallel\n* Supports multilingual email templates (i18n)\n\n\nDependencies\n============\n\n* `django >= 1.8 <http://djangoproject.com/>`_\n* `django-jsonfield <https://github.com/bradjasper/django-jsonfield>`_\n\n\nInstallation\n============\n\n|Build Status|\n\n\n* Install from PyPI (or you `manually download from PyPI <http://pypi.python.org/pypi/django-post_office>`_)::\n\n    pip install django-post_office\n\n* Add ``post_office`` to your INSTALLED_APPS in django's ``settings.py``:\n\n.. code-block:: python\n\n    INSTALLED_APPS = (\n        # other apps\n        \"post_office\",\n    )\n\n* Run ``migrate``::\n\n    python manage.py migrate\n\n* Set ``post_office.EmailBackend`` as your ``EMAIL_BACKEND`` in django's ``settings.py``::\n\n    EMAIL_BACKEND = 'post_office.EmailBackend'\n\n\nQuickstart\n==========\n\nSend a simple email is really easy:\n\n.. code-block:: python\n\n    from post_office import mail\n\n    mail.send(\n        'recipient@example.com', # List of email addresses also accepted\n        'from@example.com',\n        subject='My email',\n        message='Hi there!',\n        html_message='Hi <strong>there</strong>!',\n    )\n\n\nIf you want to use templates, ensure that Django's admin interface is enabled. Create an\n``EmailTemplate`` instance via ``admin`` and do the following:\n\n.. code-block:: python\n\n    from post_office import mail\n\n    mail.send(\n        'recipient@example.com', # List of email addresses also accepted\n        'from@example.com',\n        template='welcome_email', # Could be an EmailTemplate instance or name\n        context={'foo': 'bar'},\n    )\n\nThe above command will put your email on the queue so you can use the\ncommand in your webapp without slowing down the request/response cycle too much.\nTo actually send them out, run ``python manage.py send_queued_mail``.\nYou can schedule this management command to run regularly via cron::\n\n    * * * * * (/usr/bin/python manage.py send_queued_mail >> send_mail.log 2>&1)\n\nor, if you use uWSGI_ as application server, add this short snipped  to the\nproject's ``wsgi.py`` file:\n\n.. code-block:: python\n\n    from django.core.wsgi import get_wsgi_application\n\n    application = get_wsgi_application()\n\n    # add this block of code\n    try:\n        import uwsgidecorators\n        from django.core.management import call_command\n\n        @uwsgidecorators.timer(10)\n        def send_queued_mail(num):\n            \"\"\"Send queued mail every 10 seconds\"\"\"\n            call_command('send_queued_mail', processes=1)\n\n    except ImportError:\n        print(\"uwsgidecorators not found. Cron and timers are disabled\")\n\nAlternatively you can also use the decorator ``@uwsgidecorators.cron(minute, hour, day, month, weekday)``.\nThis will schedule a task at specific times. Use ``-1`` to signal any time, it corresponds to the ``*``\nin cron.\n\nPlease note that ``uwsgidecorators`` are available only, if the application has been started\nwith **uWSGI**. However, Django's internal ``./manange.py runserver`` also access this file,\ntherefore wrap the block into an exception handler as shown above.\n\nThis configuration is very useful in environments, such as Docker containers, where you\ndon't have a running cron-daemon.\n\n\nUsage\n=====\n\nmail.send()\n-----------\n\n``mail.send`` is the most important function in this library, it takes these\narguments:\n\n+--------------------+----------+--------------------------------------------------+\n| Argument           | Required | Description                                      |\n+--------------------+----------+--------------------------------------------------+\n| recipients         | Yes      | list of recipient email addresses                |\n+--------------------+----------+--------------------------------------------------+\n| sender             | No       | Defaults to ``settings.DEFAULT_FROM_EMAIL``,     |\n|                    |          | display name is allowed (``John <john@a.com>``)  |\n+--------------------+----------+--------------------------------------------------+\n| subject            | No       | Email subject (if ``template`` is not specified) |\n+--------------------+----------+--------------------------------------------------+\n| message            | No       | Email content (if ``template`` is not specified) |\n+--------------------+----------+--------------------------------------------------+\n| html_message       | No       | HTML content (if ``template`` is not specified)  |\n+--------------------+----------+--------------------------------------------------+\n| template           | No       | ``EmailTemplate`` instance or name               |\n+--------------------+----------+--------------------------------------------------+\n| language           | No       | Language in which you want to send the email in  |\n|                    |          | (if you have multilingual email templates.)      |\n+--------------------+----------+--------------------------------------------------+\n| cc                 | No       | list emails, will appear in ``cc`` field         |\n+--------------------+----------+--------------------------------------------------+\n| bcc                | No       | list of emails, will appear in `bcc` field       |\n+--------------------+----------+--------------------------------------------------+\n| attachments        | No       | Email attachments - A dictionary where the keys  |\n|                    |          | are the filenames and the values are either:     |\n|                    |          |                                                  |\n|                    |          | * files                                          |\n|                    |          | * file-like objects                              |\n|                    |          | * full path of the file                          |\n+--------------------+----------+--------------------------------------------------+\n| context            | No       | A dictionary, used to render templated email     |\n+--------------------+----------+--------------------------------------------------+\n| headers            | No       | A dictionary of extra headers on the message     |\n+--------------------+----------+--------------------------------------------------+\n| scheduled_time     | No       | A date/datetime object indicating when the email |\n|                    |          | should be sent                                   |\n+--------------------+----------+--------------------------------------------------+\n| priority           | No       | ``high``, ``medium``, ``low`` or ``now``         |\n|                    |          | (send_immediately)                               |\n+--------------------+----------+--------------------------------------------------+\n| backend            | No       | Alias of the backend you want to use.            |\n|                    |          | ``default`` will be used if not specified.       |\n+--------------------+----------+--------------------------------------------------+\n| render_on_delivery | No       | Setting this to ``True`` causes email to be      |\n|                    |          | lazily rendered during delivery. ``template``    |\n|                    |          | is required when ``render_on_delivery`` is True. |\n|                    |          | This way content is never stored in the DB.      |\n|                    |          | May result in significant space savings.         |\n+--------------------+----------+--------------------------------------------------+\n\n\nHere are a few examples.\n\nIf you just want to send out emails without using database templates. You can\ncall the ``send`` command without the ``template`` argument.\n\n.. code-block:: python\n\n    from post_office import mail\n\n    mail.send(\n        ['recipient1@example.com'],\n        'from@example.com',\n        subject='Welcome!',\n        message='Welcome home, {{ name }}!',\n        html_message='Welcome home, <b>{{ name }}</b>!',\n        headers={'Reply-to': 'reply@example.com'},\n        scheduled_time=date(2014, 1, 1),\n        context={'name': 'Alice'},\n    )\n\n``post_office`` is also task queue friendly. Passing ``now`` as priority into\n``send_mail`` will deliver the email right away (instead of queuing it),\nregardless of how many emails you have in your queue:\n\n.. code-block:: python\n\n    from post_office import mail\n\n    mail.send(\n        ['recipient1@example.com'],\n        'from@example.com',\n        template='welcome_email',\n        context={'foo': 'bar'},\n        priority='now',\n    )\n\nThis is useful if you already use something like `django-rq <https://github.com/ui/django-rq>`_\nto send emails asynchronously and only need to store email related activities and logs.\n\nIf you want to send an email with attachments:\n\n.. code-block:: python\n\n    from django.core.files.base import ContentFile\n    from post_office import mail\n\n    mail.send(\n        ['recipient1@example.com'],\n        'from@example.com',\n        template='welcome_email',\n        context={'foo': 'bar'},\n        priority='now',\n        attachments={\n            'attachment1.doc': '/path/to/file/file1.doc',\n            'attachment2.txt': ContentFile('file content'),\n            'attachment3.txt': { 'file': ContentFile('file content'), 'mimetype': 'text/plain'},\n        }\n    )\n\nTemplate Tags and Variables\n---------------------------\n\n``post-office`` supports Django's template tags and variables.\nFor example, if you put \"Hello, {{ name }}\" in the subject line and pass in\n``{'name': 'Alice'}`` as context, you will get \"Hello, Alice\" as subject:\n\n.. code-block:: python\n\n    from post_office.models import EmailTemplate\n    from post_office import mail\n\n    EmailTemplate.objects.create(\n        name='morning_greeting',\n        subject='Morning, {{ name|capfirst }}',\n        content='Hi {{ name }}, how are you feeling today?',\n        html_content='Hi <strong>{{ name }}</strong>, how are you feeling today?',\n    )\n\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        template='morning_greeting',\n        context={'name': 'alice'},\n    )\n\n    # This will create an email with the following content:\n    subject = 'Morning, Alice',\n    content = 'Hi alice, how are you feeling today?'\n    content = 'Hi <strong>alice</strong>, how are you feeling today?'\n\n\nMultilingual Email Templates\n----------------------------\n\nYou can easily create email templates in various different languanges.\nFor example:\n\n.. code-block:: python\n\n    template = EmailTemplate.objects.create(\n        name='hello',\n        subject='Hello world!',\n    )\n\n    # Add an Indonesian version of this template:\n    indonesian_template = template.translated_templates.create(\n        language='id',\n        subject='Halo Dunia!'\n    )\n\nSending an email using template in a non default languange is\nalso similarly easy:\n\n.. code-block:: python\n\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        template=template, # Sends using the default template\n    )\n\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        template=template,\n        language='id', # Sends using Indonesian template\n    )\n\nCustom Email Backends\n---------------------\n\nBy default, ``post_office`` uses django's ``smtp.EmailBackend``. If you want to\nuse a different backend, you can do so by configuring ``BACKENDS``.\n\nFor example if you want to use `django-ses <https://github.com/hmarr/django-ses>`_::\n\n    POST_OFFICE = {\n        'BACKENDS': {\n            'default': 'smtp.EmailBackend',\n            'ses': 'django_ses.SESBackend',\n        }\n    }\n\nYou can then choose what backend you want to use when sending mail:\n\n.. code-block:: python\n\n    # If you omit `backend_alias` argument, `default` will be used\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        subject='Hello',\n    )\n\n    # If you want to send using `ses` backend\n    mail.send(\n        ['recipient@example.com'],\n        'from@example.com',\n        subject='Hello',\n        backend='ses',\n    )\n\n\nManagement Commands\n-------------------\n\n* ``send_queued_mail`` - send queued emails, those aren't successfully sent\n  will be marked as ``failed``. Accepts the following arguments:\n\n+---------------------------+--------------------------------------------------+\n| Argument                  | Description                                      |\n+---------------------------+--------------------------------------------------+\n| ``--processes`` or ``-p`` | Number of parallel processes to send email.      |\n|                           | Defaults to 1                                    |\n+---------------------------+--------------------------------------------------+\n| ``--lockfile`` or ``-L``  | Full path to file used as lock file. Defaults to |\n|                           | ``/tmp/post_office.lock``                        |\n+---------------------------+--------------------------------------------------+\n\n\n* ``cleanup_mail`` - delete all emails created before an X number of days\n  (defaults to 90).\n\nYou may want to set these up via cron to run regularly::\n\n    * * * * * (cd $PROJECT; python manage.py send_queued_mail --processes=1 >> $PROJECT/cron_mail.log 2>&1)\n    0 1 * * * (cd $PROJECT; python manage.py cleanup_mail --days=30 >> $PROJECT/cron_mail_cleanup.log 2>&1)\n\nSettings\n========\nThis section outlines all the settings and configurations that you can put\nin Django's ``settings.py`` to fine tune ``post-office``'s behavior.\n\nBatch Size\n----------\n\nIf you may want to limit the number of emails sent in a batch (sometimes useful\nin a low memory environment), use the ``BATCH_SIZE`` argument to limit the\nnumber of queued emails fetched in one batch.\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'BATCH_SIZE': 50\n    }\n\nDefault Priority\n----------------\n\nThe default priority for emails is ``medium``, but this can be altered by\nsetting ``DEFAULT_PRIORITY``. Integration with asynchronous email backends\n(e.g. based on Celery) becomes trivial when set to ``now``.\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'DEFAULT_PRIORITY': 'now'\n    }\n\nLog Level\n---------\n\nThe default log level is 2 (logs both successful and failed deliveries)\nThis behavior can be changed by setting ``LOG_LEVEL``.\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'LOG_LEVEL': 1 # Log only failed deliveries\n    }\n\nThe different options are:\n\n* ``0`` logs nothing\n* ``1`` logs only failed deliveries\n* ``2`` logs everything (both successful and failed delivery attempts)\n\n\nSending Order\n-------------\n\nThe default sending order for emails is ``-priority``, but this can be altered by\nsetting ``SENDING_ORDER``. For example, if you want to send queued emails in FIFO order :\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'SENDING_ORDER': ['created']\n    }\n\nContext Field Serializer\n------------------------\n\nIf you need to store complex Python objects for deferred rendering\n(i.e. setting ``render_on_delivery=True``), you can specify your own context\nfield class to store context variables. For example if you want to use\n`django-picklefield <https://github.com/gintas/django-picklefield/tree/master/src/picklefield>`_:\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'CONTEXT_FIELD_CLASS': 'picklefield.fields.PickledObjectField'\n    }\n\n``CONTEXT_FIELD_CLASS`` defaults to ``jsonfield.JSONField``.\n\nLogging\n-------\n\nYou can configure ``post-office``'s logging from Django's ``settings.py``. For\nexample:\n\n.. code-block:: python\n\n    LOGGING = {\n        \"version\": 1,\n        \"disable_existing_loggers\": False,\n        \"formatters\": {\n            \"post_office\": {\n                \"format\": \"[%(levelname)s]%(asctime)s PID %(process)d: %(message)s\",\n                \"datefmt\": \"%d-%m-%Y %H:%M:%S\",\n            },\n        },\n        \"handlers\": {\n            \"post_office\": {\n                \"level\": \"DEBUG\",\n                \"class\": \"logging.StreamHandler\",\n                \"formatter\": \"post_office\"\n            },\n            # If you use sentry for logging\n            'sentry': {\n                'level': 'ERROR',\n                'class': 'raven.contrib.django.handlers.SentryHandler',\n            },\n        },\n        'loggers': {\n            \"post_office\": {\n                \"handlers\": [\"post_office\", \"sentry\"],\n                \"level\": \"INFO\"\n            },\n        },\n    }\n\n\nThreads\n-------\n\n``post-office`` >= 3.0 allows you to use multiple threads to dramatically speed up\nthe speed at which emails are sent. By default, ``post-office`` uses 5 threads per process.\nYou can tweak this setting by changing ``THREADS_PER_PROCESS`` setting.\n\nThis may dramatically increase the speed of bulk email delivery, depending on which email\nbackends you use. In my tests, multi threading speeds up email backends that use HTTP based\n(REST) delivery mechanisms but doesn't seem to help SMTP based backends.\n\n.. code-block:: python\n\n    # Put this in settings.py\n    POST_OFFICE = {\n        'THREADS_PER_PROCESS': 10\n    }\n\n\nPerformance\n===========\n\nCaching\n-------\n\nif Django's caching mechanism is configured, ``post_office`` will cache\n``EmailTemplate`` instances . If for some reason you want to disable caching,\nset ``POST_OFFICE_CACHE`` to ``False`` in ``settings.py``:\n\n.. code-block:: python\n\n    ## All cache key will be prefixed by post_office:template:\n    ## To turn OFF caching, you need to explicitly set POST_OFFICE_CACHE to False in settings\n    POST_OFFICE_CACHE = False\n\n    ## Optional: to use a non default cache backend, add a \"post_office\" entry in CACHES\n    CACHES = {\n        'post_office': {\n            'BACKEND': 'django.core.cache.backends.memcached.PyLibMCCache',\n            'LOCATION': '127.0.0.1:11211',\n        }\n    }\n\n\nsend_many()\n-----------\n\n``send_many()`` is much more performant (generates less database queries) when\nsending a large number of emails. ``send_many()`` is almost identical to ``mail.send()``,\nwith the exception that it accepts a list of keyword arguments that you'd\nusually pass into ``mail.send()``:\n\n.. code-block:: python\n\n    from post_office import mail\n\n    first_email = {\n        'sender': 'from@example.com',\n        'recipients': ['alice@example.com'],\n        'subject': 'Hi!',\n        'message': 'Hi Alice!'\n    }\n    second_email = {\n        'sender': 'from@example.com',\n        'recipients': ['bob@example.com'],\n        'subject': 'Hi!',\n        'message': 'Hi Bob!'\n    }\n    kwargs_list = [first_email, second_email]\n\n    mail.send_many(kwargs_list)\n\nAttachments are not supported with ``mail.send_many()``.\n\n\nRunning Tests\n=============\n\nTo run the test suite::\n\n    `which django-admin.py` test post_office --settings=post_office.test_settings --pythonpath=.\n\nYou can run the full test suite with::\n\n    tox\n\nor::\n\n    python setup.py test\n\n\nChangelog\n=========\n\nVersion 3.0.2\n-------------\n- `_send_bulk` now properly catches exceptions when preparing email messages.\n\n\nVersion 3.0.1\n-------------\n- Fixed an infinite loop bug in `send_queued_mail` management command.\n\n\nVersion 3.0.0\n-------------\n* `_send_bulk` now allows each process to use multiple threads to send emails. Allowing \n* Added support for mimetypes in email attachments. Thanks @clickonchris!\n* An `EmailTemplate` can now be used as defaults multiple times in one language. Thanks @sac7e!\n* `send_queued_mail` management command will now check whether there are more queued emails to be sent before exiting.\n* Drop support for Django < 1.8. Thanks @fendyh!\n\n\nFull changelog can be found `here <https://github.com/ui/django-post_office/blob/master/CHANGELOG.md>`_.\n\n\nCreated and maintained by the cool guys at `Stamps <https://stamps.co.id>`_,\nIndonesia's most elegant CRM/loyalty platform.\n\n\n.. |Build Status| image:: https://travis-ci.org/ui/django-post_office.png?branch=master\n   :target: https://travis-ci.org/ui/django-post_office\n\n.. _uWSGI: https://uwsgi-docs.readthedocs.org/en/latest/\n",
    "description_content_type": null,
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/ui/django-post_office",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-post-office",
    "package_url": "https://pypi.org/project/django-post-office/",
    "platform": "",
    "project_url": "https://pypi.org/project/django-post-office/",
    "project_urls": {
      "Homepage": "https://github.com/ui/django-post_office"
    },
    "release_url": "https://pypi.org/project/django-post-office/3.0.2/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "A Django app to monitor and send mail asynchronously, complete with template support.",
    "version": "3.0.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 15548824,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "8d03ce3e85b5252b0bb7df69105ca10398079d748c6846b9c580ee681b27054a",
        "md5": "83660d59ccdbf88f470039196e471885",
        "sha256": "7598d998055e356728879fe4fe5be451a8efbb416900782c9f24438d3c76109c"
      },
      "downloads": -1,
      "filename": "django_post_office-3.0.2-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "83660d59ccdbf88f470039196e471885",
      "packagetype": "bdist_wheel",
      "python_version": "2.7",
      "requires_python": null,
      "size": 71094,
      "upload_time": "2017-07-29T12:07:31",
      "upload_time_iso_8601": "2017-07-29T12:07:31.477250Z",
      "url": "https://files.pythonhosted.org/packages/8d/03/ce3e85b5252b0bb7df69105ca10398079d748c6846b9c580ee681b27054a/django_post_office-3.0.2-py2.py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "0f88ad81cfa83b736c161d6fb022a99fa035519128a0ddb40145b64c995d6590",
        "md5": "abed96861c12ac50b55938a366cf8427",
        "sha256": "fabf202a04374046792b1a5e0317511130b79ce15621082ef4f0ea6ad9a9ffae"
      },
      "downloads": -1,
      "filename": "django-post_office-3.0.2.tar.gz",
      "has_sig": false,
      "md5_digest": "abed96861c12ac50b55938a366cf8427",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 46273,
      "upload_time": "2017-07-29T12:07:26",
      "upload_time_iso_8601": "2017-07-29T12:07:26.789899Z",
      "url": "https://files.pythonhosted.org/packages/0f/88/ad81cfa83b736c161d6fb022a99fa035519128a0ddb40145b64c995d6590/django-post_office-3.0.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}