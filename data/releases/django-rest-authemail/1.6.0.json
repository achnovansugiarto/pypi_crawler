{
  "info": {
    "author": "Celia Oakley",
    "author_email": "celia.oakley@alumni.stanford.edu",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Framework :: Django",
      "Intended Audience :: Developers",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Topic :: Software Development",
      "Topic :: Utilities"
    ],
    "description": "django-rest-authemail\n=====================\n\n![Python package](https://github.com/celiao/django-rest-authemail/workflows/build/badge.svg)\n![pypi](https://img.shields.io/pypi/pyversions/django-rest-authemail)\n![pypi](https://img.shields.io/pypi/v/django-rest-authemail)\n\n`django-rest-authemail` is a Django/Python application that provides a RESTful API interface for user signup and authentication.  Email addresses are used for authentication, rather than usernames.  Because the authentication user model is based on Django's `AbstractBaseUser` and is itself abstract, the model can be extended without the need for additional database tables.  Token authentication allows the API to be accessed from a variety of front ends, including Django, React and AngularJS clients, and iOS and Android mobile apps.\n\n\nFeatures\n--------\n\n- Supports and tested with Django 1.11.\n- API endpoints for signup, signup email verification, login, logout, password reset, password reset verification, password change, and user detail.\n- Extensible abstract user model.\n- Perform password confirmation and other client-side validation on the front end for a better user experience.\n- Token authentication.\n- User models in the admin interface include inlines for signup and password reset codes.\n- Uses the Django REST Framework.\n- An example project is included and contains example UI templates.\n- Supports and tested under Python 3.6.\n\n\nInstallation\n------------\n\n`django-rest-authemail` is available on the Python Package Index (PyPI) at https://pypi.python.org/pypi/django-rest-authemail.\n\nInstall `django-rest-authemail` using one of the following techniques.\n\n- Use pip:\n\n```\npip install django-rest-authemail\n```\n\n- Download the .tar.gz file from PyPI and install it yourself.\n- Download the [source from Github](http://github.com/celiao/django-rest-authemai) and install it yourself.\n\nIf you install it yourself, also install the [Django](https://www.djangoproject.com/), [Django REST Framework](http://www.django-rest-framework.org), and [requests](http://www.python-requests.org/en/latest).  Install [South](http://south.readthedocs.org/en/latest/index.html) if you are using Django < 1.7.\n\nUsage\n-----\n\nIn the `settings.py` file of your project, include `rest_framework` and `rest_framework.authtoken` in `INSTALLED_APPS`. Set the authentication scheme for the Django REST Framework to `TokenAuthentication`.\n\n```python\n    INSTALLED_APPS = (\n        ...\n        #'south',        # Remove comment if you're using South for migrations.\n        'rest_framework',\n        'rest_framework.authtoken',\n        ...\n    )\n\n    REST_FRAMEWORK = {\n        'DEFAULT_AUTHENTICATION_CLASSES': (\n            'rest_framework.authentication.TokenAuthentication',\n        )\n    }\n```\n\nOptionally, you may add an `AUTH_EMAIL_VERIFICATION` setting to specify whether to enable email verification for new users on account registration/signup. Setting this to `False` will automatically verify newly created users.\n\nCreate a Django application for your user data.  For example,\n\n```python\n    python manage.py startapp accounts\n```\n\nIn the `models.py` file of your application, extend `EmailAbstractUser`, add custom fields, and assign `objects` to `EmailUserManager()`.  For example,\n\n```python\n    from django.db import models\n    from authemail.models import EmailUserManager, EmailAbstractUser\n\n    class MyUser(EmailAbstractUser):\n        # Custom fields\n        date_of_birth = models.DateField('Date of birth', null=True, blank=True)\n\n        # Required\n        objects = EmailUserManager()\n```\n\nIn the `settings.py` file of your project, include `authemail` and your application in `INSTALLED_APPS`. Set `AUTH_USER_MODEL` to the class of your user model.  For example,\n\n```python\n    AUTH_USER_MODEL = 'accounts.MyUser'\n\n    INSTALLED_APPS = (\n        ...\n        #'south',        # Remove comment if you're using South for migrations.\n        'rest_framework',\n        'rest_framework.authtoken',\n        'authemail',\n        'accounts',\n        ...\n    )\n```\n\nIn the `admin.py` file of your application, extend `EmailUserAdmin` to add your custom fields.  For example,\n\n```python\n    from django.contrib import admin\n    from django.contrib.auth import get_user_model\n    from authemail.admin import EmailUserAdmin\n\n    class MyUserAdmin(EmailUserAdmin):\n        fieldsets = (\n            (None, {'fields': ('email', 'password')}),\n            ('Personal Info', {'fields': ('first_name', 'last_name')}),\n            ('Permissions', {'fields': ('is_active', 'is_staff', \n                                           'is_superuser', 'is_verified', \n                                           'groups', 'user_permissions')}),\n            ('Important dates', {'fields': ('last_login', 'date_joined')}),\n            ('Custom info', {'fields': ('date_of_birth',)}),\n        )\n\n    admin.site.unregister(get_user_model())\n    admin.site.register(get_user_model(), MyUserAdmin)\n```\n\nUse one of the following steps to create the database tables:\n\n1. For Django >= 1.7, create the database tables with Django's `makemigrations`, `migrate`, and create a superuser with `createsuperuser`.\n\n```python\n    python manage.py makemigrations\n    python manage.py migrate\n    python manage.py createsuperuser\n```\n\n2. For Django < 1.7, create the database tables with `syncdb` and South's `migrate`.  Set up a superuser when prompted by `syncdb`.  Convert your `accounts` application to South.  You will receive an error message from South, so fake the initial migration as a workaround (see http://south.aeracode.org/ticket/1179).\n\n```python\n    python manage.py syncdb\n    python manage.py migrate\n    python manage.py convert_to_south accounts\n    python manage.py migrate accounts 0001 --fake\n```\n\n3. To migrate from Django 1.6.X to 1.7, upgrade `django-rest-authemail`, uninstall `south`, and bring the migrations up-to-date with `migrate`.\n\n```python\n    pip install --upgrade django-rest-authemail\n    pip uninstall south\n    python manage.py migrate\n```\n\nCheck your setup by starting a Web server on your local machine:\n\n```python\n    python manage.py runserver\n```\n\n\nDirect your browser to the `Django` `/admin` and log in.\n\n```python\n    127.0.0.1:8000/admin\n```\n\nYou should see `Users`, `Groups`, `Password reset codes`, `Signup codes`, and `Tokens`.  If you click on `Users`, you should see your superuser account.\n\nAdd the `authemail` API endpoints to your project's `urls.py` file.  For example,\n\n```python\n    from accounts import views\n\n    urlpatterns = [\n        url(r'^admin/', include(admin.site.urls)),\n\n        url(r'^api/accounts/', include('authemail.urls')),\n    ]\n```\n\nWhen users signup or reset their password, they will be sent an email with a link and verification code.  Include email settings as environment variables or in your project's `settings.py` file.  See https://docs.djangoproject.com/en/dev/ref/settings/#email-host for more information.  For example,\n\n```python\n\t# Email settings\n\timport os\n\n\tEMAIL_FROM = os.environ.get('AUTHEMAIL_DEFAULT_EMAIL_FROM') or '<YOUR DEFAULT_EMAIL_FROM HERE>'\n\tEMAIL_BCC = os.environ.get('AUTHEMAIL_DEFAULT_EMAIL_BCC') or '<YOUR DEFAULT_EMAIL_BCC HERE>'\n\n\tEMAIL_HOST = os.environ.get('AUTHEMAIL_EMAIL_HOST') or '<YOUR EMAIL_HOST HERE>'\n\tEMAIL_PORT = os.environ.get('AUTHEMAIL_EMAIL_PORT') or 0\n\tEMAIL_HOST_USER = os.environ.get('AUTHEMAIL_EMAIL_HOST_USER') or '<YOUR EMAIL_HOST_USER HERE>'\n\tEMAIL_HOST_PASSWORD = os.environ.get('AUTHEMAIL_EMAIL_HOST_PASSWORD') or '<YOUR EMAIL_HOST_PASSWORD HERE>'\n\tEMAIL_USE_TLS = True\n\tEMAIL_USE_SSL = False\n\n\tSERVER_EMAIL = os.environ.get('AUTHEMAIL_SERVER_EMAIL') or '<YOUR SERVER_EMAIL HERE>'\n```\n\nTry out `authemail` API calls by firing up `python` and using the `authemail` wrapper methods (`runserver` should still be executing).  For example,\n\n```python\n    python\n    >>> from authemail import wrapper\n    >>> account = wrapper.Authemail()\n    >>> first_name = 'Your first name'\n    >>> last_name = 'Your last name'\n    >>> email = 'your_email@gmail.com'\n    >>> password = 'Your password'\n    >>> response = account.signup(first_name=first_name, last_name=last_name,\n    ... email=email, password=password)\n```\n\nIn the `Django` `/admin`, you should see a new user (not verified) and a new signup code.  You should receive an email at `your_email@gmail.com`.  Use the code in the email to verify your email address using the wrapper (normally, the link in the email would point to the front end, which would issue the signup verify request to the API):\n\n```python\n    >>> code = '7f31e7a515df266532df4e00e0cf1967a7de7d17'\n    >>> response = account.signup_verify(code=code)\n```\n\nIn the `Django` `/admin`, the new user is now verified and the signup code is absent.  The new user can now login and you can inspect the associated login token:\n\n```python\n    >>> response = account.login(email=email, password=password)\n    >>> account.token\n    u'a84d062c1b60a36e6740eb60c6f9da8d1f709322'\n```\n\nYou will find the same token for the user in the `Token` table in the `Django` `/admin`.  Find out more information about the user (insert your token):\n\n```python\n    >>> token = 'a84d062c1b60a36e6740eb60c6f9da8d1f709322'\n    >>> response = account.users_me(token=token)\n    >>> response\n    {u'first_name': u'Your first name', u'last_name': u'Your last name', u'email': u'your_email@gmail.com'}\n```\n\nUse the authentication token to logout:\n\n```python\n    >>> response = account.logout(token=token)\n    >>> response\n    {u'success': u'User logged out.'}\n```\n\nPlay with password reset and change!\n\nIf you are having trouble getting your code to execute, or are just curious, try out the Django REST Framework Browsable API.  If you type an `authemail` API endpoint into your browser, the Browsable API should appear (`runserver` should still be executing).  For example,\n\n```python\n    127.0.0.1/api/accounts/signup\n```\n\nIn the `Content:` field of the Browsable API, type:\n\n```python\n    {\n        \"first_name\": \"Your first name\",\n        \"last_name\": \"Your last name\",\n        \"email\": \"your_email@gmail.com\",\n        \"password\": \"Your password\"\n    }\n```\n\nThen click on `POST`.  You will either receive an error message to help in your debugging, or, if your signup was successful:\n\n```python\n    {\n        \"first_name\": \"Your first name\",\n        \"last_name\": \"Your last name\",\n        \"email\": \"your_email@gmail.com\",\n    }\n```\n\nTry out the other `authemail` API endpoints with the Django REST Framework Browsable API.\n\nMake `authemail` API calls with front end code.  To get started, follow the steps in the `README.md` for the `example_project`.  Enhance the Django code in the `example_project` or extend the concepts to React, AngularJS, iOS, and Android front ends.\n\nWhen calling endpoints from the front end that require authentication (`logout`, `password/change`, and `users/me`), include the authorization token key in the HTTP header.  For example,\n\n```python\n    Authorization: Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b\n```\n\nHere's an example using ``curl``,\n\n```python\n    curl -X GET 'http://127.0.0.1:8000/accounts/logout' \\\n         -H 'Authorization: Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b'\n```\n\n\nAuthemail API Endpoints\n-----------------------\nFor the endpoints that follow, the base path is shown as `/api/accounts`.  This path is for example purposes.  It can be customized in your project's `urls.py` file.\n\n**POST /api/accounts/signup**\n\nCall this endpoint to sign up a new user and send a verification email.  Sample email templates are found in `authemail/templates/authemail`.  To override the email templates, copy and modify the sample templates, or create your own, in `your_app/templates/authemail`.\n\nYour front end should handle password confirmation, and if desired, require the visitor to input their first and last names.\n\nUnverified users can sign up multiple times, but only the latest signup code will be active.\n\n- Payload\n\n    - email (required)\n    - password (required)\n    - first_name (optional)\n    - last_name (optional)\n\n- Possible responses\n\n```python\n    201 (Created)\n    Content-Type: application/json\n    {\n        \"email\": \"amelia.earhart@boeing.com\"\n        \"first_name\": \"Amelia\", \n        \"last_name\": \"Earhart\", \n    }\n\n    400 (Bad Request)\n    Content-Type: application/json\n    {\n        \"email\": [\n            \"This field is required.\"\n        ], \n        \"password\": [\n            \"This field is required.\"\n        ] \n    }\n\n    {\n        \"email\": [\n            \"Enter a valid email address.\"\n        ]\n    }\n\n    {\n        \"detail\": \"User with this Email address already exists.\"\n    }\n```\n\n**GET /api/accounts/signup/verify/?code=\\<code\\>**\n\nWhen the user clicks the link in the verification email, the front end should call this endpoint to verify the user.\n\n- Parameters\n\n    - code (required)\n\n- Possible responses\n\n```python\n    200 (OK)\n    Content-Type: application/json\n    {\n        \"success\": \"User verified.\"\n    }\n\n    400 (Bad Request)\n    Content-Type: application/json\n    {\n        \"detail\": \"Unable to verify user.\"\n    }\n```\n\n**POST /api/accounts/login**\n\nCall this endpoint to log in a user.  Use the authentication token in future calls to identify the user.\n\n- Payload\n\n    - email (required)\n    - password (required)\n\n- Possible responses\n\n\n```python\n    200 (OK)\n    Content-Type: application/json\n    {\n        \"token\": \"91ec67d093ded89e0a752f35188802c261899013\"\n    }\n\n    400 (Bad Request)\n    Content-Type: application/json\n    {\n        \"password\": [\n            \"This field is required.\"\n        ], \n        \"email\": [\n            \"This field is required.\"\n        ]\n    }\n\n    {\n        \"email\": [\n            \"Enter a valid email address.\"\n        ]\n    }\n\n    401 (Unauthorized)\n    {\n        \"detail\": \"Authentication credentials were not provided.\"\n    }\n\n    {\n        \"detail\": \"Unable to login with provided credentials.\"\n    }\n```\n\n**GET /api/accounts/logout**\n\nCall this endpoint to log out an authenticated user.\n\n- HTTP Header\n\n```python\n    Authorization: Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b\n```\n\n- Possible responses\n\n```python\n    200 (OK)\n    Content-Type: application/json\n    {\n        \"success\": \"User logged out.\"\n    }\n\n    401 (Unauthorized)\n    Content-Type: application/json\n    {\n        \"detail\": \"Authentication credentials were not provided.\"\n    }\n\n    {\n        \"detail\": \"Invalid token\"\n    }\n\n```\n\n**POST /api/accounts/password/reset**\n\nCall this endpoint to send an email to a user so they can reset their password.   Similar to signup verification, the password reset email templates are found in `authemail/templates/authemail`.  Override the default templates by placing your similarly-named templates in `your_app/templates/authemail`.\n\n- Payload\n\n    - email (required)\n\n- Possible responses\n\n```python\n    201 (Created)\n    Content-Type: application/json\n    {\n        \"email\": \"amelia.earhart@boeing.com\"\n    }\n\n    400 (Bad Request)\n    Content-Type: application/json\n    {\n        \"email\": [\n            \"This field is required.\"\n        ]\n    }\n\n    {\n        \"email\": [\n            \"Enter a valid email address.\"\n        ]\n    }\n\n    {\n        \"detail\": \"Password reset not allowed.\"\n    }\n```\n\n**GET /api/accounts/password/reset/verify/?code=\\<code\\>**\n\nWhen the user clicks the link in the password reset email, call this endpoint to verify the password reset code.\n\n- Parameters\n\n    - code (required)\n\n- Possible responses\n\n```python\n    200 (OK)\n    Content-Type: application/json\n    {\n        \"success\": \"User verified.\"\n    }\n\n    400 (Bad Request)\n    Content-Type: application/json\n    {\n        \"password\": [\n            \"This field is required.\"\n        ] \n    }\n\n    400 (Bad Request)\n    Content-Type: application/json\n    {\n        \"detail\": \"Unable to verify user.\"\n    }\n\n**POST /api/accounts/password/reset/verified**\n\nCall this endpoint with the password reset code and the new password, to reset the user's password.  The front end should prompt the user for a confirmation password and give feedback if the passwords don't match.\n\n- Payload\n\n    - code (required)\n    - password (required)\n\n- Possible responses\n\n```python\n    200 (OK)\n    Content-Type: application/json\n    {\n        \"success\": \"Password reset.\"\n    }\n\n    400 (Bad Request)\n    Content-Type: application/json\n    {\n        \"password\": [\n            \"This field is required.\"\n        ] \n    }\n\n    400 (Bad Request)\n    Content-Type: application/json\n    {\n        \"detail\": \"Unable to verify user.\"\n    }\n```\n\n**POST /api/accounts/password/change**\n\nCall this endpoint to change a user's password.\n\n- HTTP Header\n\n```python\n    Authorization: Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b\n```\n\n- Payload\n\n    - password (required)\n\n- Possible responses\n\n```python\n    200 (OK)\n    Content-Type: application/json\n    {\n        \"success\": \"Password changed.\"\n    }\n\n    400 (Bad Request)\n    Content-Type: application/json\n    {\n        \"password\": [\n            \"This field is required.\"\n        ] \n    }\n\n    401 (Unauthorized)\n    Content-Type: application/json\n    {\n        \"detail\": \"Authentication credentials were not provided.\"\n    }\n\n    {\n        \"detail\": \"Invalid token\"\n    }\n```\n\n**GET /api/accounts/users/me**\n\nCall this endpoint after logging in and obtaining an authorization token to learn more about the user.\n\n- HTTP Header\n\n```python\n    Authorization: Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b\n```\n\n- Possible responses\n\n```python\n    200 (OK)\n    Content-Type: application/json\n    {\n        \"id\": 1,\n        \"email\": \"amelia.earhart@boeing.com\",\n        \"first_name\": \"Amelia\",\n        \"last_name\": \"Earhart\",\n    }\n\n    401 (Unauthorized)\n    Content-Type: application/json\n    {\n        \"detail\": \"Authentication credentials were not provided.\"\n    }\n\n    {\n        \"detail\": \"Invalid token\"\n    }\n```\n\n\nWrapper\n-------\nA wrapper is available to access the Authemail API with Python code.  First create an instance of the Authemail class, then call methods to access the API.  There is a one-to-one mapping between the endpoints and instance methods.  For example,\n\n```python\n    from authemail import wrapper\n\n    account = wrapper.Authemail()\n    response = account.signup(first_name=first_name, last_name=last_name,\n        email=email, password=password)\n\n    if 'detail' in response:\n        # Handle error condition\n    else:\n        # Handle good response\n```\n\nSee `example_project/views.py` for more sample usage.\n\n\nInspiration and Ideas\n---------------------\nInspiration and ideas for `django-rest-authemail` were derived from:\n\n- [django-rest-framework](http://www.django-rest-framework.org/)\n- [django-email-as-username](https://pypi.python.org/pypi/django-email-as-username/1.6.7)\n- [django-registration](http://django-registration.readthedocs.org/en/latest/)\n- [django-rest-auth](https://pypi.python.org/pypi/django-rest-auth)\n- [tmdbsimple](https://pypi.python.org/pypi/tmdbsimple)\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "https://github.com/celiao/django-rest-authemail/tarball/1.6.0",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "http://github.com/celiao/django-rest-authemail",
    "keywords": "django,python,rest,rest-framework,api,auth,authentication,email,user,username,registration,signup,login,logout,password,django-rest-framework,djangorestframework,django-registration,django-email-as-username",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-rest-authemail",
    "package_url": "https://pypi.org/project/django-rest-authemail/",
    "platform": "",
    "project_url": "https://pypi.org/project/django-rest-authemail/",
    "project_urls": {
      "Download": "https://github.com/celiao/django-rest-authemail/tarball/1.6.0",
      "Homepage": "http://github.com/celiao/django-rest-authemail"
    },
    "release_url": "https://pypi.org/project/django-rest-authemail/1.6.0/",
    "requires_dist": [
      "Django (==1.11.17)",
      "djangorestframework (==3.7.0)",
      "requests (>=2.3.0)"
    ],
    "requires_python": "",
    "summary": "A RESTful API for user signup and authentication using email addresses",
    "version": "1.6.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17488524,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "5f42e21e83ab65a24a8a71a8cdfd3e81b7d27f8f9995fdefe557c8b054d53723",
        "md5": "d62707365a141eb9baafff666be30a6c",
        "sha256": "0d8c663947514018310efcab76c9a25e8c3e7eb784f1d5564f0b416ec5368c9c"
      },
      "downloads": -1,
      "filename": "django_rest_authemail-1.6.0-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "d62707365a141eb9baafff666be30a6c",
      "packagetype": "bdist_wheel",
      "python_version": "py2.py3",
      "requires_python": null,
      "size": 48510,
      "upload_time": "2020-08-22T18:19:03",
      "upload_time_iso_8601": "2020-08-22T18:19:03.686779Z",
      "url": "https://files.pythonhosted.org/packages/5f/42/e21e83ab65a24a8a71a8cdfd3e81b7d27f8f9995fdefe557c8b054d53723/django_rest_authemail-1.6.0-py2.py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "ec2f46b29feed80860ced994f48f956119229594f216824b2ecbe6c99272c633",
        "md5": "dc1b8b49699ea95b70bd1779c97132d7",
        "sha256": "57f500e674bc5492a2bbab56f53a852bd9be8bc7d9e2a3c6116fb3258a1a916e"
      },
      "downloads": -1,
      "filename": "django-rest-authemail-1.6.0.tar.gz",
      "has_sig": false,
      "md5_digest": "dc1b8b49699ea95b70bd1779c97132d7",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 41123,
      "upload_time": "2020-08-22T18:19:05",
      "upload_time_iso_8601": "2020-08-22T18:19:05.974790Z",
      "url": "https://files.pythonhosted.org/packages/ec/2f/46b29feed80860ced994f48f956119229594f216824b2ecbe6c99272c633/django-rest-authemail-1.6.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}