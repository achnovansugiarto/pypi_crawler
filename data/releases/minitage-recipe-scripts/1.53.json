{
  "info": {
    "author": "Mathieu Pasquet",
    "author_email": "kiorky@cryptelium.net",
    "bugtrack_url": null,
    "classifiers": [
      "Framework :: Buildout",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: BSD License",
      "Topic :: Software Development :: Build Tools",
      "Topic :: Software Development :: Libraries :: Python Modules"
    ],
    "description": "******************************************************************************\nRecipe for compiling and installing software with or without minitage\n******************************************************************************\n\n.. contents::\n\n=======================\nIntroduction\n=======================\n\nThis is a collection of recipe which can be use inside or outside a minitage environment.\nWhat is interresting in using them in minitage is that you ll have all your system dependencies in\nthe build environment automaticly.\n\nThe egg has those entry point:\n    - *cmmi*: install configure/make/make install softwares\n    - *fetch*: fetch something, somewhere, with git, http, frp, static, hg, svn or bzr.\n    - *egg*: install python eggs / packages 'setuptoolisables'\n    - *printer*: print or dump to a file all versions needed to achieve eggs\n      requirements (versions.cfg made easy)\n    - *scripts*: install scripts from an egg and install egg dependencies if they\n      are not already in the cache\n    - *wsgi*: Make a Python paste configuration file eatable by mod_wsgi with\n      all the eggs dependencies you need.\n\nThe reasons why i have rewrite yet another buildout recipes builder are:\n    - Support for downloading stuff\n    - Do not rely on easy_install dependency system\n    - Support on the fly patchs for eggs and other distribution.\n    - Support multiple hooks at each stage of the build system.\n    - Support for distutils\n    - Robust offline mode\n    - We like pypi, but offer a mode to scan for eggs without need to check\n      the index,\n    - Support malformed or not indexed distributions.\n      In other terms, we provide an url, and the recipe builds it, that's all.\n    - All recipes must support automaticly minitage dependencies and rpath linking.\n\nYou can browse the code on minitage's following resources:\n\n    - http://git.minitage.org/git/minitage/eggs/minitage.recipe/\n    - http://www.minitage.org/trac/browser/minitage/eggs/minitage.recipe\n\nYou can migrate your buldouts without any effort with buildout.minitagificator:\n\n    * http://pypi.python.org/pypi/buildout.minitagificator\n\n======================================\nMakina Corpus sponsored software\n======================================\n|makinacom|_\n\n* `Planet Makina Corpus <http://www.makina-corpus.org>`_\n* `Contact us <mailto:python@makina-corpus.org>`_\n\n  .. |makinacom| image:: http://depot.makina-corpus.org/public/logo.gif\n  .. _makinacom:  http://www.makina-corpus.com\n\n\n\n\n\n===============================================\nminitage.recipe.scripts\n===============================================\n\n\nAbstract\n-----------------\n    - This recipe intends to install eggs and python software and on top of installed stuff, generating scripts and envrionment files.\n    - This recipe inherit from minitage;recipe:egg.\n    - Its heavilly inspired by zc.recipe.eggs* and try to completly replace it whereas be API compatbile.\n    - You can use it in conjunction with the buildout.minitagificator extension which monkey patch zc.buildout to use minitage recipes.\n    - What we can do that zc.recipe.egg wouldnt do, either at all or not in the way we want to:\n\n        * All scripts support initialisation code\n        * The 'scripts' egg metadata is also handled\n    - You can use it as you would use minitage.recipe:egg, use patch facility and etc.\n    - Ths recipe is also declared under those entry points:\n\n        * minitage.recipe:eggs\n        * minitage.recipe:script\n\nSpecific options\n-----------------\n\n    * All the shared options and the options from minitage.recipe:egg +\n    * scripts\n\n        - Scripts to generate, if empty, generate scripts for all the working set.\n        - If your egg have an old 'scripts' metadata, and old scripts where you want wrappers to be generated, just add the egg name to the scripts entry.\n        - If you want to rename a script, just enter something like entrypoint|scriptname=NewName::\n\n            s=NewName\n\n    * zap\n      If you do not want to a script, just enter a line separated list of not wanted scripts\n\n    * entry-points\n        A list of entry-point identifiers of the form:::\n\n            name=module:attrs\n\n        where name is a script name, module is a dotted name resolving to a module name, and attrs is a dotted name resolving to a callable object within a module.\n        This option is useful when working with distributions that don't declare entry points, such as distributions not written to work with setuptools.\n\n    * interpreter\n        The name of a script to generate that allow access to the Python interpreter with the PYTHONPATH set with all the working set entries.\n    * dependent-scripts\n      When set to true, scripts will be generated for all required eggs in addition to the eggs named specifically. This idea came from two forks of this recipe, repoze.recipe.egg and pylons_sandbox, but the option name is spelled with a dash instead of underscore and it defaults to false.\n    * (script-name|interpretername-)arguments\n        Specify some arguments to be passed to entry points as Python source.\n    * (script-name|interpretername-)initialization\n        Python code to run prior to call the entry point\n    * env_initialization\n\t     run code after initialization of env (shell)\n    * template-replacements\n\n        * replacements for variables values in templates to override buildout's strip mecanism  (initialization, env_initialization, arguments)\n        * Spaces before and after => are important:\n        * Pattern are in the form::\n\n\t\t\tre-pattern => value\n\n\n\n\nDetailled documentation\n-------------------------\n\nGenerating all scripts\n+++++++++++++++++++++++++++\nThus by not specifying any scripts entry in the buildout part.\n::\n\n    >>> init_env()\n    >>> index_url = start_server(os.path.sep.join(tempdir))     \n    >>> data = \"\"\"\n    ... [buildout]\n    ... eggs-directory =${buildout:directory}/eggs\n    ... download-cache=${buildout:directory}/dl\n    ... parts = part\n    ... [part]\n    ... recipe=minitage.recipe.scripts\n    ... find-links=%(index)s\n    ... eggs=foo\n    ... \"\"\"%{'index': index_url}\n    >>> touch('buildout.cfg', data=data)\n    >>> noecho = [remove(os.path.join('eggs', egg)) for egg in os.listdir('eggs') if 'foo' in egg]\n    >>> sh('bin/buildout -vvvvv install')\n    b...\n    minitage.recipe: Generated scripts: 's', 'toto.py'...\n\nLook at what have been generated.\n::\n\n    >>> cat('bin', 'toto.py')\n    #!...\n    # ! GENERATED BY minitage.recipe !\n    import os\n    import sys\n    import subprocess...\n    sys.path[0:0] = ['/tmp/buildout.test/eggs/foo-1.0-py....egg' ]...\n    # EXEC ORGINAL CODE WITHOUT SHEBANG\n    __doc__  = 'I am generated by minitage.recipe.script recipe'...\n    os.environ['PYTHONPATH'] = ':'.join(sys.path + os.environ.get('PYTHONPATH', '').split(':'))\n    sys.argv.pop(0)\n    sys.exit(\n        subprocess.Popen(\n            [sys.executable, '/tmp/buildout.test/eggs/foo-1.0-py....egg/EGG-INFO/scripts/toto.py']+sys.argv,\n            env=os.environ\n        ).wait()\n    )...\n    >>> cat('bin', 's')\n    #!...\n    #!!! #GENERATED VIA MINITAGE.recipe !!!...\n    import sys...\n    sys.path[0:0] = [ '/tmp/buildout.test/eggs/foo-1.0-py....egg' ]...\n    import toto.toto...\n    if __name__ == '__main__':\n        toto.toto.f()...\n\n\n\nSelecting scripts to install\n+++++++++++++++++++++++++++++++\nInstalling only s.\n::\n\n    >>> init_env()\n    >>> index_url = start_server(os.path.sep.join(tempdir))    \n    >>> data = \"\"\"\n    ... [buildout]\n    ... eggs-directory =${buildout:directory}/eggs\n    ... download-cache=${buildout:directory}/dl\n    ... parts = part\n    ... [part]\n    ... recipe=minitage.recipe.scripts\n    ... find-links=%(index)s\n    ... scripts =\n    ...     s\n    ... eggs=foo\n    ... \"\"\"%{'index': index_url}\n    >>> touch('buildout.cfg', data=data)\n    >>> sh('bin/buildout -vvvvv install')\n    b...\n    minitage.recipe: Generated scripts: 's'...\n\nInstalling only toto.py.\n::\n\n    >>> data = \"\"\"\n    ... [buildout]\n    ... eggs-directory =${buildout:directory}/eggs\n    ... download-cache=${buildout:directory}/dl\n    ... parts = part\n    ... [part]\n    ... recipe=minitage.recipe.scripts\n    ... find-links=%(index)s\n    ... scripts =\n    ...     toto.py\n    ... eggs=foo\n    ... \"\"\"%{'index': index_url}\n    >>> touch('buildout.cfg', data=data)\n    >>> sh('bin/buildout -vvvvv install')\n    b...\n    minitage.recipe: Generated scripts: 'toto.py'....\n\n.. desactivated because caused more harm than good... too much scripts no filtered\n.. Installing scripts from the foo distribution.\n..\n..     >>> data = \"\"\"\n..     ... [buildout]\n..     ... download-cache=${buildout:directory}/dl\n..     ... parts = part\n..     ... [part]\n..     ... recipe=minitage.recipe.scripts\n..     ... find-links=%(index)s\n..     ... scripts =\n..     ...     foo\n..     ... eggs=foo\n..     ... \"\"\"%{'index': index_url}\n..     >>> touch('buildout.cfg', data=data)\n..     >>> sh('bin/buildout -vvvvv install')\n..     b...\n..     minitage.recipe: Generated scripts: 's', 'toto.py'....\n\n\nDeclaring entry-points\n+++++++++++++++++++++++\nWe ll add an entry point 't' to be generated.\n::\n\n    >>> init_env()\n    >>> index_url = start_server(os.path.sep.join(tempdir))    \n    >>> data = \"\"\"\n    ... [buildout]\n    ... eggs-directory =${buildout:directory}/eggs\n    ... download-cache=${buildout:directory}/dl\n    ... parts = part\n    ... [part]\n    ... recipe=minitage.recipe.scripts\n    ... find-links=%(index)s\n    ... entry-points=t=toto.toto:f\n    ... eggs=foo\n    ... \"\"\"%{'index': index_url}\n    >>> touch('buildout.cfg', data=data)\n    >>> sh('bin/buildout -vvvvv install')\n    b...\n    minitage.recipe: Generated scripts: 't'...\n    >>> cat('bin', 't') #doctest: +REPORT_NDIFF\n    #!...\n    #!!! #GENERATED VIA MINITAGE.recipe !!!\n    <BLANKLINE>\n    import sys\n    <BLANKLINE>\n    <BLANKLINE>\n    <BLANKLINE>\n    sys.path[0:0] = [ '/tmp/buildout.test/eggs/foo-1.0-...\n    ...]\n    <BLANKLINE>\n    <BLANKLINE>\n    <BLANKLINE>\n    import toto.toto\n    <BLANKLINE>\n    if __name__ == '__main__':\n        toto.toto.f()\n    <BLANKLINE>\n\n\nAdding initialization code\n++++++++++++++++++++++++++++\nWhat about adding environment variables for gis env.\n::\n\n    >>> init_env()\n    >>> index_url = start_server(os.path.sep.join(tempdir))   \n    >>> data = \"\"\"\n    ... [buildout]\n    ... eggs-directory =${buildout:directory}/eggs\n    ... download-cache=${buildout:directory}/dl\n    ... parts = part\n    ... [part]\n    ... recipe=minitage.recipe.scripts\n    ... find-links=%(index)s\n    ... entry-points=t=toto.toto:f\n    ... eggs=foo\n    ... initialization = import os;os.environ.set('GDAL', 'TRUE')\n    ... \"\"\"%{'index': index_url}\n    >>> touch('buildout.cfg', data=data)\n    >>> sh('bin/buildout -vvvvv install')\n    b...\n\n::\n\n    >>> \"import os;os.environ.set('GDAL', 'TRUE')\" in open(os.path.join('bin', 't')).read()\n    True\n\n\n\nAdding arguments\n++++++++++++++++++\nWhat about adding arguments to our launchers.\n::\n\n    >>> init_env()\n    >>> index_url = start_server(os.path.sep.join(tempdir))   \n    >>> data = \"\"\"\n    ... [buildout]\n    ... eggs-directory =${buildout:directory}/eggs\n    ... download-cache=${buildout:directory}/dl\n    ... parts = part\n    ... [part]\n    ... recipe=minitage.recipe.scripts\n    ... find-links=%(index)s\n    ... eggs = foo\n    ... entry-points=t=toto.toto:f\n    ... arguments = ['a', 'b']\n    ... \"\"\"%{'index': index_url}\n    >>> touch('buildout.cfg', data=data)\n    >>> sh('bin/buildout -vvvvv install')\n    b...\n\n::\n\n    >>> \"toto.toto.f(['a', 'b'])\" in open(os.path.join('bin', 't')).read()\n    True\n\n\nGenerating a python interpreter\n++++++++++++++++++++++++++++++++++\nHere is how you can generate a specific python interpreter will all the environement of the working set.\n::\n\n    >>> init_env()\n    >>> index_url = start_server(os.path.sep.join(tempdir))  \n    >>> data = \"\"\"\n    ... [buildout]\n    ... eggs-directory =${buildout:directory}/eggs\n    ... download-cache=${buildout:directory}/dl\n    ... parts = part\n    ... [part]\n    ... recipe=minitage.recipe.scripts\n    ... find-links=%(index)s\n    ... interpreter = mypy\n    ... arguments = ['a', 'b']\n    ... eggs=foo\n    ... \"\"\"%{'index': index_url}\n    >>> touch('buildout.cfg', data=data)\n    >>> sh('bin/buildout -vvvvv install')\n    b...\n    minitage.recipe: Generated scripts: 'mypy',...\n\n::\n\n    >>> cat('bin', 'mypy')\n    #!...\n    #!!! #GENERATED VIA MINITAGE.recipe !!!...\n    sys.path[0:0] = [ '/tmp/buildout.test/eggs/foo-1.0-py....egg' ]...\n    if _interactive:\n        import code\n        code.interact(banner=\"\", local=globals())...\n\n\n\nGenerating an envrionment file\n++++++++++++++++++++++++++++++++++\nHere is how you can generate a specific envrionment file that you can source from to get the PYTHONPATH populated with eggs that you have configured.\n::\n\n    >>> init_env()\n    >>> index_url = start_server(os.path.sep.join(tempdir)) \n    >>> data = \"\"\"\n    ... [buildout]\n    ... download-cache=${buildout:directory}/dl\n    ... eggs-directory =${buildout:directory}/eggs\n    ... parts = part\n    ... [part]\n    ... recipe=minitage.recipe.scripts\n    ... find-links=%(index)s\n    ... env-file = mypy\n    ... eggs=foo\n    ... \"\"\"%{'index': index_url}\n    >>> touch('buildout.cfg', data=data)\n    >>> sh('bin/buildout -vvvvv install')\n    b...\n    >>> cat('bin', 'mypy')\n    #!/usr/bin/env sh\n    <BLANKLINE>\n    PYTHONPATH=\"/tmp/buildout.test/eggs/foo-1.0...\"\n    export PYTHONPATH\n    <BLANKLINE>\n    <BLANKLINE>\n    <BLANKLINE>\n    <BLANKLINE>\n\n\n=======================\nCHANGELOG\n=======================\n\nUP\n----\n\n    - Split tests\n    - Fix type 'list'and pattern replacement code\n\n1.50\n------\n\n    - workaround to install when there are conflicts from versions pinned in setup.py and different ones in buildout\n\n\n1.47\n------\n\n    - Added the dependent-scripts option to stick to zc.recipe.egg\n\n1.45\n----\n\n\t- better handle of entrypoints/console script conflict options (cs. prefix, see code)\n\t- add per script options (initialization, argurments, python)\n\n1.44\n-----\n\n\t- when both EntryPoint and Script have the same name, it's the EP which wins.\n\n\n1.41\n-----\n\n    - fix a special case where all scripts were filtered out\n\n1.39\n--------\n\n    -   do not preerve PYTHONPATH on env.file generation\n\n1.37\n-------\n\n    - Decorator helper\n\n\n1.36\n-----\n\n    - fix develop link\n\n1.35\n---------\n\n    - splitted out from minitage.recipe",
    "description_content_type": null,
    "docs_url": null,
    "download_url": "UNKNOWN",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "http://cheeseshop.python.org/pypi/minitage.recipe.scripts",
    "keywords": "development buildout recipe",
    "license": "BSD",
    "maintainer": null,
    "maintainer_email": null,
    "name": "minitage.recipe.scripts",
    "package_url": "https://pypi.org/project/minitage.recipe.scripts/",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/minitage.recipe.scripts/",
    "project_urls": {
      "Download": "UNKNOWN",
      "Homepage": "http://cheeseshop.python.org/pypi/minitage.recipe.scripts"
    },
    "release_url": "https://pypi.org/project/minitage.recipe.scripts/1.53/",
    "requires_dist": null,
    "requires_python": null,
    "summary": "zc.buildout recipes to compile and install software or python packages and generate scripts or configuration files sponsored by Makina Corpus.",
    "version": "1.53",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 794820,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "3f88e023b04d572f0ba9c82a2f8309149656a25f4f4df9c7bead7bec98f479f9",
        "md5": "498f623b83a510794a67a4eba6bcd7d7",
        "sha256": "fa6287dfd8faae634466afe83e295bebfbd875b190bc2fb6249f3ef86ce2e95f"
      },
      "downloads": -1,
      "filename": "minitage.recipe.scripts-1.53.zip",
      "has_sig": false,
      "md5_digest": "498f623b83a510794a67a4eba6bcd7d7",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 32372,
      "upload_time": "2010-04-11T18:07:30",
      "upload_time_iso_8601": "2010-04-11T18:07:30.041613Z",
      "url": "https://files.pythonhosted.org/packages/3f/88/e023b04d572f0ba9c82a2f8309149656a25f4f4df9c7bead7bec98f479f9/minitage.recipe.scripts-1.53.zip",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}