{
  "info": {
    "author": "Droptica",
    "author_email": "admin@droptica.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "Application that improves and speeds up web development process using Docker.\n\n|\n\n=========\n**Setup**\n=========\n\n|\n\n**docker-console package installation**\n=======================================\n\nRequirements for docker-console:\n\n* python-pip package::\n\n    sudo apt-get update && sudo apt-get -y install python-yaml python-setuptools python-pip python-dev build-essential\n\n|\n\n* docker\n* docker-compose\n\n\nWhen this requirements are satisfied, you can install docker-console through pip using command::\n\n    sudo pip install docker-console\n\n|\n\nAll other dependencies will be automatically installed during docker-console installation process.\n\n|\n\n\n**docker-console package update**\n=================================\nTo update docker-console package, you need to run the same command as for installation with additional option **--upgrade**::\n\n    sudo pip install docker-console --upgrade\n\n|\n\n**Autocomplete activation**\n===========================\n\nDuring package installation, bash completion scripts are placed in::\n\n    /usr/share/bash-completion/completions/docker-console\n\n|\n\nTo activate docker-console commands and options completion, you need to logout and login again, or type::\n\n    exec bash\n\nwithout logging out.\n\n|\n|\n\n==================================\n**Available commands and options**\n==================================\n\nNote that **docker-console** can be also run by **dcon**. This commands are equivalent.\n\n|\n\n**Commands that can be run from anywhere**\n==========================================\n\n- default:\n    Default action if no command spefified. This command is equivalent to::\n\n        docker-console\n\n    and::\n\n        docker-console help\n\n|\n\n- help:\n    Print available options, aliases AND commands including commands added locally for project in dc_overrides.py (if you are running this command in project wrapper).\n    If you use --help option, you will not see available commands, but you can always use::\n\n        docker-console <tab><tab>\n\n    to see this available commands. Note that autocomplete mechanism is not working for commands added locally for project in dc_overrides.py.\n\n    |\n\n    This command is equivalent to::\n\n        docker-console\n\n    and::\n\n        docker-console default\n\n|\n\n- init:\n- init-tests:\n    This commands are copying files from selected template directory to project wrapper.\n\n    Default **docker init** template is:\n        - drupal7\n\n    Default **tests init** template is:\n        - drupal7\n\n\n    To **init docker** in drupal7 project, you need to run::\n\n        docker-console init --tpl drupal7\n\n    To **init tests** in drupal7 project, you need to run::\n\n        docker-console init-tests --tpl drupal7\n\n    You can also create own custom docker init and tests init templates.\n\n    Custom **docker init** templates have to be placed in::\n\n        ~/.docker_console/custom_docker_init_templates/\n\n\n    Custom **tests init** templates have to be placed in::\n\n        ~/.docker_console/custom_tests_init_templates/\n\n    Each template should be separate directory that contains files which will be copied to project wrapper.\n    Init template can have any directory structure and can contain any type of files.\n    Files in init template that ends with '-tpl' will be processed during init and '{{HOST}}' variable will be replaced by host name generated based on project dir name (eg. examplesite.dev).\n    Custom init template directory name will be init template name.\n\n    Eg. when custom **docker init** template directory will be::\n\n        ~/.docker_console/custom_docker_init_templates/example_custom_init_template\n\n    then in project wrapper you can run::\n\n        docker-console init --tpl example_custom_init_template\n\n    When custom **tests init** template directory will be::\n\n        ~/.docker_console/custom_tests_init_templates/example_custom_tests_init_template\n\n    then in project wrapper you can run::\n\n        docker-console init-tests --tpl example_custom_tests_init_template\n\n\n    Files existing in project wrapper localization, by default will not be replaced. If you want to force replace files, you need to use '-f' or '--force-replace-conf' option.\n\n    |\n\n    Options:\n\n    \\--tpl\n        This is required param that specifies the template that is used to init docker in project wrapper.\n\n    \\-f, \\--force-replace-conf\n        Set if you want force replace your existing wrapper files with this from template.\n        All your changes in wrapper files will be irrevocably lost. Other files in wrapper folder and 'docker' folder will stay unchanged.\n\n|\n\n- cleanup:\n    | This command is running three commands that are cleaning up unneeded docker containers, images and volumes.\n    | See http://blog.yohanliyanage.com/2015/05/docker-clean-up-after-yourself/ for precise description.\n\n|\n\n- refresh-autocomplete:\n    Recreates bash completion script. It can be used if you want add support for autocomplete of newly added project aliases, or new custom project commands.\n    After that command you need to logout and login again, or run::\n\n        exec bash\n\n    command to apply autocomplete changes.\n\n|\n\n**Commands that needs to be run from project wrapper with docker-compose.yml file**\n===================================================================================\n\n- shell:\n    Print docker command that runs shell inside docker.\n\n    |\n\n    Options:\n\n    \\-c, \\--docker-container\n        Set container name to run bash in it.\n\n    |\n\n    \\-s, \\--docker-shell-run\n        Set if you want to run docker shell.\n\n|\n\n- add-host-to-docker-compose:\n    Add custom host to docker-compose.yml file.\n\n|\n\n- add-host-to-etc-hosts:\n    | Add config entry for project to /etc/hosts depending on VIRTUAL_HOST variable for web and phpmyadmin containers configuration in docker-compose.yml.\n\n    Example of /etc/hosts entry for project::\n\n        172.17.0.2\t\tproject.dev www.project.dev phpmyadmin.project.dev\n\n|\n\n- up:\n    Start all containers defined in docker-compose.yml\n\n    |\n\n    This command is equivalent to::\n\n        docker-console start\n\n|\n\n- start:\n    Start all containers defined in docker-compose.yml\n\n    |\n\n    This command is equivalent to::\n\n        docker-console up\n\n|\n\n- update-images:\n    Stop and remove project containers, pull and build images from docker-compose.yml, DEV_DOCKER_IMAGES and TESTS['IMAGES'] configs. Then starts containers from docker-compose.yml.\n\n|\n\n- stop:\n    Stops all containers that were started for current project, without removing containers.\n\n|\n\n- rm:\n    Stops all containers that were started for current project and removes related containers.\n\n|\n\n- rmi:\n    Stops all containers that were started for current project, removes related containers and related images.\n\n|\n\n- restart:\n    This command is equivalent to following two commands running one after another in order such as below::\n\n        1. docker-console stop\n        2. docker-console start/up\n\n|\n\n- codecept:\n    This command allows to run any codeception command.\n\n|\n\n- test:\n    This command runs all tests available in tests location.\n    You can also run single test files using argument like **testSuite/testName**. By default tests are run with options --xml --html (codeception run command options).\n    Tests can also be run by command::\n\n        docker-console codecept run\n\n|\n\n- config-prepare:\n    This command copies the docker-compose-template.yml to docker-compose.yml with replaced variables from .env file.\n\n|\n\n- show-ip:\n    Shows web container IP address.\n\n|\n\n- show-nginx-proxy-ip:\n    Shows nginx container IP address.\n\n|\n\n- dump:\n    This command exports project database to DUMP_EXPORT_LOCATION in DB setting.\n\n|\n\n\n**Commands for drupal web engine**\n==================================\n\n- drush:\n    Allows for running any drush command inside docker.\n\n    |\n\n    Options:\n\n    \\-e, \\--drush-eval-run-code\n        Set if you want run code in drush eval.\n\n|\n\n- build:\n    This command is running::\n\n        docker-console build-in-docker\n\n    command inside docker and some commands to set proper files permissions.\n\n|\n\n- up-and-build:\n    This command is equivalent to following two commands running one after another in order such as below::\n\n        1. docker-console up\n        2. docker-console build\n\n|\n\n- build-in-docker,\n    This command is responsible for building Drupal application inside docker and it will be not working locally.\n    It is used in::\n\n        docker-console build\n\n    command as one of building step.\n\n|\n\n**Global options**\n==================\n- \\--v, \\--version\n    See application version\n\n|\n\n- \\--help\n    See help for docker-console, you can also use::\n\n        docker-console help\n\n    command\n\n|\n\n- \\-p, \\--docker-run-path\n    Set path do drupal wrapper with 'docker-compose.yml' files and 'docker' folder\n\n|\n\n- \\-y\n    Yes to all questions where 'confirm_action' is used in command action steps\n\n|\n\n- \\--db\n    Set the database you want to work on.\n\n|\n|\n\n\n**Drupal engine specific global options**\n=========================================\n\n- \\--site\n    Set the drupal site you want to work on.\n\n\n|\n|\n\n==============\n**DB drivers**\n==============\nBy default, there is available mysql DB driver. This is set in DRIVER param in DB config in <project_name>/docker_console/dc_settings.py::\n\n    DB = {\n        'default': {\n            'DRIVER': 'mysql',\n            ...\n        ...\n\n|\n|\n\n===============\n**Web engines**\n===============\nBy default, there is available drupal7 web engine. New custom engines can be created locally in user home directory. Custom web engines have to be placed in::\n\n    ~/.docker_console/custom_web_engines/\n\nCustom web engine have to contain following files:\n    - config/default.py, containing at least line with importing of default config from base engine::\n\n        from docker_console.web.engines.base.conf.default import *\n\n    - builder.py, containing at least Builder class that inherits BaseBuilder class from base engine::\n\n        class Builder(BaseBuilder):\n            def __init__(self, config):\n                super(Builder, self).__init__(config)\n\n    - commands.py, containing at least line with importing of default commands from base engine::\n\n        from docker_console.web.engines.base.commands import commands\n\nWeb engines are python modules, therefore on each directory level you need to add empty files __init__.py. For basic custom web engine this would be::\n\n    ~/.docker_console/custom_web_engines/custom_engine_name/__init__.py\n    ~/.docker_console/custom_web_engines/custom_engine_name/conf/__init__.py\n\nIf you would like to create custom web engine that overrides other default classes like 'BaseDocker' or 'BaseTests', please look at drupal7 default web engine as an example.\n\n|\n\nTo use custom web engine you need to:\n    - at the top of <project_name>/docker_console/dc_settings.py, replace line::\n\n        from docker_console.web.engines.{default_engine_name}.conf.default import *\n\n      with::\n\n        from custom_web_engines.{custom_engine_name}.conf.default import *\n\n    - set ENGINE param in WEB config in <project_name>/docker_console/dc_settings.py to your web engine name,\n    - set USE_CUSTOM_ENGINE param in WEB config in <project_name>/docker_console/dc_settings.py to True, eg::\n\n        WEB = {\n            'ENGINE': 'custom_engine_name',\n            'USE_CUSTOM_ENGINE': True,\n            ...\n\n    - if you would like to override something from your custom web engine in <project_name>/docker_console/dc_overrides.py, you need to remember to import classes from this custom engine, so import lines should looks like::\n\n        from custom_web_engines.{custom_engine_name}.builder import Builder\n\n\nNote that this is possible to have custom web engine with the same name as default ones.\nIf you will have such custom web engine but for some projects you would like to use default engine just set USE_CUSTOM_ENGINE param in WEB config to False.\n\n|\n|\n\n======================\n**Usage with project**\n======================\n\n|\n\n**docker-console initialization in drupal project**\n===================================================\n\nTo initialize docker-console in drupal project you should use command::\n\n    docker-console init --tpl init_template_name\n\nThis command will copy init template files to project wrapper. See description of '- init' command for details.\n\n|\n\nAfter that, if needed, you should adjust settings for your project in::\n\n    <project_name>/docker_console/dc_settings.py\n\n|\n\n**Adding config entry for project to /etc/hosts**\n=================================================\n\nTo add config entry for project to /etc/hosts you need to run::\n\n    docker-console add-host-to-etc-hosts\n\nThis command adds entry to /etc/hosts with IP Address taken from nginx-proxy container\nand hosts names taken from VIRTUAL_HOST variable for web and phpmyadmin containers configuration in docker-compose.yml\n\n|\n\n**Adding project aliases**\n==========================\n\ndocker-console application allows for defining project aliases like in drush. In alias configuration there is only project wrapper path configuration. This path should be absolute.\n\n|\n\nAlias files have to be placed in::\n\n    ~/.docker_console/aliases/\n\nfolder. This folder is automatically created during installation. You can place here as many aliases files as you need, with any number of aliases in each file.\n\n|\n\nExample alias.py file::\n\n    project_1_alias = {\n        'path': '/path/to/project1/wrapper/'\n    }\n\n    project_2_alias = {\n        'path': '/path/to/project2/wrapper/'\n    }\n\n    __all__ = ['project_1_alias', 'project_2_alias']\n\n|\n\nIf you will create alias for project you will be able to run docker-console from anywhere with project path given in alias::\n\n    docker-console @project_1_alias\n\n|\n\nAfter adding new aliases, you need to run::\n\n    docker-console refresh-autocomplete\n\nto add autocomplete support for new aliases.\n\n\n|\n\n**Adjusting default, global configuration options, classes methods and commands to specific project needs, using custom overriding files**\n==========================================================================================================================================\n\n|\n\n**Adjusting configuration options**\n-----------------------------------\n\nTo adjust configuration options you need to modify::\n\n    <project_name>/docker_console/dc_settings.py\n\nfile.\n\n|\n\nYou can either modify default options values or add new options.\n\n|\n\nExample dc_settings.py file for drupal7 web engine::\n\n    # import default values from drupal7 engine (required)\n    from docker_console.web.engines.drupal7.conf.default import *\n\n    #################\n    # BASE SETTINGS #\n    #################\n\n    WEB = {\n        'ENGINE': 'drupal7',\n        'USE_CUSTOM_ENGINE': False, # True/False - useful when we have default and custom engine with the same name\n        'APP_LOCATION': 'app',\n        'APP_CONF_LOCATION': 'app_conf',\n        'APP_DATA_LOCATION': 'app_data',\n        'TMP_PATH': '/tmp'\n    }\n\n    DB = {\n        'default': {\n            'DRIVER': 'mysql',\n            'HOST': 'mysql',\n            'NAME': 'db',\n            'USER': 'user',\n            'PASS': 'pass',\n            'ROOT_USER': 'root',\n            'ROOT_PASS': '123',\n            'DUMP_IMPORT_FILE': 'app_databases/database.sql.tar.gz',\n            'DUMP_EXPORT_LOCATION': 'app_databases/',\n        }\n    }\n\n    TESTS = {\n        'IMAGES': {\n            'selenium_image': ('selenium/standalone-chrome', None),\n            'codecept_image': ('droptica/codecept', None)\n        },\n        'LOCATION': \"tests\"\n    }\n\n    ENV = None\n\n    ####################\n    # DRUPAL7 SETTINGS #\n    ####################\n\n    DEV_DOCKER_IMAGES = {\n        'default': ('droptica/drupal-dev', None),\n        'additional_images': [\n    #     ('vendor/image_name', None), # image from dockerhub\n    #     ('vendor/image_name', 'path_to_dockerfile') # custom image from Dockerfile\n        ]\n    }\n\n    DRUPAL = {\n        'default': {\n            'ADMIN_USER': 'admin',\n            'ADMIN_PASS': '123',\n            'SITE_URI': 'default.dev',\n            'SITE_DIRECTORY': 'default',\n            'FILES_DST': 'sites/default/',\n            'PRIVATE_FILES_DST': 'sites/default/files/',\n            'FILES_ARCHIVE': 'app_files/files.tar.gz',\n            'PRIVATE_FILES_ARCHIVE': 'app_files/private.tar.gz',\n            'SETTINGS_TEMPLATE_SUBDIR': None,\n            'STAGE_FILE_PROXY_URL': None\n        }\n    }\n\n|\n\n**Adjusting classes methods and commands**\n------------------------------------------\n\nTo adjust classes methods or commands you need to modify::\n\n    <project_name>/docker_console/dc_overrides.py\n\nfile.\n\nYou can either replace existing classes methods or add new methods. Methods from classes can be used create new or replace existing commands locally in project context.\n\nExample dc_overrides.py file for drupal7 web engine::\n\n\n    # import classes to override\n    from docker_console.web.engines.drupal7.drush import Drush\n    from docker_console.web.engines.drupal7.builder import Builder\n\n    # add new methods\n    class DrushLocal:\n        def localtest(self, text):\n            print text\n\n    Drush.__bases__ += (DrushLocal,)\n\n    class BuilderLocal:\n        def printlocal(self):\n            self.drush.localtest('printlocal')\n\n    Builder.__bases__ += (BuilderLocal,)\n\n    # override existing method\n    def drush_uli_local(self):\n        print self.config.DRUPAL[self.config.drupal_site]['ADMIN_USER']\n\n    Drush.uli = drush_uli_local\n\n\n    # replace/add new commands\n    commands_overrides = {\n        'localtest': [\n            'confirm_action',\n            'drush.localtest(\"upwd %s --password=123\" % self.config.DRUPAL[self.config.drupal_site][\"ADMIN_USER\"])'\n        ],\n        'drush_uli': [\n            'confirm_action(\"no\")',\n            'drush.uli'\n        ],\n    }",
    "description_content_type": null,
    "docs_url": null,
    "download_url": "https://github.com/droptica/docker-console/archive/v1.0.10.tar.gz",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/droptica/docker-console",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "docker-console",
    "package_url": "https://pypi.org/project/docker-console/",
    "platform": "UNKNOWN",
    "project_url": "https://pypi.org/project/docker-console/",
    "project_urls": {
      "Download": "https://github.com/droptica/docker-console/archive/v1.0.10.tar.gz",
      "Homepage": "https://github.com/droptica/docker-console"
    },
    "release_url": "https://pypi.org/project/docker-console/1.0.10/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "Application that improves and speeds up web development process using Docker",
    "version": "1.0.10",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 15581613,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "35a760c468dd3fa56b6c9007fa19d8fc93ef0f4c25892494c5a250a39441a913",
        "md5": "095a24490fe05cac8e9cc999ac05db00",
        "sha256": "9672281dca9f49c327ac38c84c25ffa808a1a8a5ed7f811f438789066bb7e62a"
      },
      "downloads": -1,
      "filename": "docker-console-1.0.10.tar.gz",
      "has_sig": false,
      "md5_digest": "095a24490fe05cac8e9cc999ac05db00",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 67393,
      "upload_time": "2017-03-30T11:15:24",
      "upload_time_iso_8601": "2017-03-30T11:15:24.674044Z",
      "url": "https://files.pythonhosted.org/packages/35/a7/60c468dd3fa56b6c9007fa19d8fc93ef0f4c25892494c5a250a39441a913/docker-console-1.0.10.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}