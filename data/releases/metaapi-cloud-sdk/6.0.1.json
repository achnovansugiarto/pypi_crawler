{
  "info": {
    "author": "Agilium Labs LLC",
    "author_email": "agiliumtrade@agiliumtrade.ai",
    "bugtrack_url": null,
    "classifiers": [
      "License :: Other/Proprietary License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3"
    ],
    "description": "metaapi.cloud SDK for Python\n############################\n\nMetaApi is a powerful, fast, cost-efficient, easy to use and standards-driven cloud forex trading API for MetaTrader 4 and MetaTrader 5 platform designed for traders, investors and forex application developers to boost forex application development process. MetaApi can be used with any broker and does not require you to be a brokerage.\n\nMetaApi is a paid service, but API access to one MetaTrader account is free of charge.\n\nThe `MetaApi pricing <https://metaapi.cloud/#pricing>`_ was developed with the intent to make your charges less or equal to what you would pay\nfor hosting your own infrastructure. This is possible because over time we managed to heavily optimize\nour MetaTrader infrastructure. And with MetaApi you can save significantly on application development and\nmaintenance costs and time thanks to high-quality API, open-source SDKs and convenience of a cloud service.\n\nOfficial REST and websocket API documentation: https://metaapi.cloud/docs/client/\n\nPlease note that this SDK provides an abstraction over REST and websocket API to simplify your application logic.\n\nFor more information about SDK APIs please check docstring documentation in source codes located inside lib folder of this package.\n\nInstallation\n============\n.. code-block:: bash\n\n    pip install metaapi-cloud-sdk\n\nWorking code examples\n=====================\nYou can find code examples at `examples folder of our github repo <https://github.com/agiliumtrade-ai/metaapi-python-sdk/tree/master/examples>`_ or in the examples folder of the pip package.\n\nWe have composed a `short guide explaining how to use the example code <https://metaapi.cloud/docs/client/usingCodeExamples>`_\n\nConnecting to MetaApi\n=====================\nPlease use one of these ways:\n\n1. https://app.metaapi.cloud/token web UI to obtain your API token.\n2. An account access token which grants access to a single account. See section below on instructions on how to retrieve account access token.\n\nSupply token to the MetaApi class constructor.\n\n.. code-block:: python\n\n    from metaapi_cloud_sdk import MetaApi\n\n    token = '...'\n    api = MetaApi(token)\n\nRetrieving account access token\n===============================\nAccount access token grants access to a single account. You can retrieve account access token via API:\n\n.. code-block:: python\n\n    account_id = '...'\n    account = await api.metatrader_account_api.get_account(account_id)\n    account_access_token = account.access_token\n    print(account_access_token)\n\nAlternatively, you can retrieve account access token via web UI on https://app.metaapi.cloud/accounts page (see `this video <https://youtu.be/PKYiDns6_xI>`_).\n\nManaging MetaTrader accounts (API servers for MT accounts)\n==========================================================\nBefore you can use the API you have to add an MT account to MetaApi and start an API server for it.\n\nHowever, before you can create an account, you have to create a provisioning profile.\n\nManaging provisioning profiles via web UI\n-----------------------------------------\nYou can manage provisioning profiles here: https://app.metaapi.cloud/provisioning-profiles\n\nCreating a provisioning profile via API\n---------------------------------------\n.. code-block:: python\n\n    # if you do not have created a provisioning profile for your broker,\n    # you should do it before creating an account\n    provisioningProfile = await api.provisioning_profile_api.create_provisioning_profile({\n        'name': 'My profile',\n        'version': 5\n    })\n    # servers.dat file is required for MT5 profile and can be found inside\n    # config directory of your MetaTrader terminal data folder. It contains\n    # information about available broker servers\n    await provisioningProfile.upload_file('servers.dat', '/path/to/servers.dat')\n    # for MT4, you should upload an .srv file instead\n    await provisioningProfile.upload_file('broker.srv', '/path/to/broker.srv')\n\nRetrieving existing provisioning profiles via API\n-------------------------------------------------\n.. code-block:: python\n\n    provisioningProfiles = await api.provisioning_profile_api.get_provisioning_profiles()\n    provisioningProfile = await api.provisioning_profile_api.get_provisioning_profile('profileId')\n\nUpdating a provisioning profile via API\n---------------------------------------\n.. code-block:: python\n\n    await provisioningProfile.update({'name': 'New name'})\n    # for MT5, you should upload a servers.dat file\n    await provisioningProfile.upload_file('servers.dat', '/path/to/servers.dat')\n    # for MT4, you should upload an .srv file instead\n    await provisioningProfile.upload_file('broker.srv', '/path/to/broker.srv')\n\nRemoving a provisioning profile\n-------------------------------\n.. code-block:: python\n\n    await provisioningProfile.remove()\n\nManaging MetaTrader accounts (API servers) via web UI\n-----------------------------------------------------\nYou can manage MetaTrader accounts here: https://app.metaapi.cloud/accounts\n\nCreate a MetaTrader account (API server) via API\n------------------------------------------------\n.. code-block:: python\n\n    account = await api.metatrader_account_api.create_account({\n      'name': 'Trading account #1',\n      'type': 'cloud',\n      'login': '1234567',\n      # password can be investor password for read-only access\n      'password': 'qwerty',\n      'server': 'ICMarketsSC-Demo',\n      # synchronizationMode can be 'automatic' for RPC access or 'user' if you\n      # want to keep track of terminal state in real-time (e.g. if you are\n      # developing a EA or trading strategy)\n      'synchronizationMode': 'automatic',\n      'provisioningProfileId': provisioningProfile.id,\n      # algorithm used to parse your broker timezone. Supported values are\n      # icmarkets for America/New_York DST switch and roboforex for EET\n      # DST switch (the values will be changed soon)\n      'timeConverter': 'roboforex',\n      'application': 'MetaApi',\n      'magic': 123456\n    })\n\nRetrieving existing accounts via API\n------------------------------------\n.. code-block:: python\n\n    # filter and paginate accounts, see esdoc for full list of filter options available\n    accounts = await api.metatraderAccountApi.getAccounts({\n        'limit': 10,\n        'offset': 0,\n        'query': 'ICMarketsSC-MT5',\n        'state': ['DEPLOYED']\n    })\n    # get accounts without filter (returns 1000 accounts max)\n    accounts = await api.metatraderAccountApi.getAccounts();\n\nUpdating an existing account via API\n------------------------------------\n.. code-block:: python\n\n    await account.update({\n        'name': 'Trading account #1',\n        'login': '1234567',\n        # password can be investor password for read-only access\n        'password': 'qwerty',\n        'server': 'ICMarketsSC-Demo',\n        # synchronizationMode can be 'automatic' for RPC access or 'user' if you\n        # want to keep track of terminal state in real-time (e.g. if you are\n        # developing a EA or trading strategy)\n        'synchronizationMode': 'automatic'\n    })\n\nRemoving an account\n-------------------\n.. code-block:: python\n\n    await account.remove()\n\nDeploying, undeploying and redeploying an account (API server) via API\n----------------------------------------------------------------------\n.. code-block:: python\n\n    await account.deploy()\n    await account.undeploy()\n    await account.redeploy()\n\nAccess MetaTrader account via RPC API\n=====================================\nRPC API let you query the trading terminal state. You should use\nRPC API if you develop trading monitoring apps like myfxbook or other\nsimple trading apps.\n\nYou should create your account with automatic synchronization mode if\nall you need is RPC API.\n\nQuery account information, positions, orders and history via RPC API\n--------------------------------------------------------------------\n.. code-block:: python\n\n    connection = await account.connect()\n\n    await connection.wait_synchronized()\n\n    # retrieve balance and equity\n    print(await connection.get_account_information())\n    # retrieve open positions\n    print(await connection.get_positions())\n    # retrieve a position by id\n    print(await connection.get_position('1234567'))\n    # retrieve pending orders\n    print(await connection.get_orders())\n    # retrieve a pending order by id\n    print(await connection.get_order('1234567'))\n    # retrieve history orders by ticket\n    print(await connection.get_history_orders_by_ticket('1234567'))\n    # retrieve history orders by position id\n    print(await connection.get_history_orders_by_position('1234567'))\n    # retrieve history orders by time range\n    print(await connection.get_history_orders_by_time_range(start_time, end_time))\n    # retrieve history deals by ticket\n    print(await connection.get_deals_by_ticket('1234567'))\n    # retrieve history deals by position id\n    print(await connection.get_deals_by_position('1234567'))\n    # retrieve history deals by time range\n    print(await connection.get_deals_by_time_range(start_time, end_time))\n\nQuery contract specifications and quotes via RPC API\n----------------------------------------------------\n.. code-block:: python\n\n    connection = await account.connect()\n\n    await connection.wait_synchronized()\n\n    # first, subscribe to market data\n    await connection.subscribe_to_market_data('GBPUSD')\n\n    # read contract specification\n    print(await connection.get_symbol_specification('GBPUSD'))\n    # read current price\n    print(await connection.get_symbol_price('GBPUSD'))\n\nUse real-time streaming API\n---------------------------\nReal-time streaming API is good for developing trading applications like trade copiers or automated trading strategies.\nThe API synchronizes the terminal state locally so that you can query local copy of the terminal state really fast.\n\nIn order to use this API you need to create an account with `user` synchronization mode.\n\nSynchronizing and reading terminal state\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.. code-block:: python\n\n    account = await api.metatrader_account_api.get_account('accountId')\n\n    # account.synchronization_mode must be equal to 'user' at this point\n\n    # access local copy of terminal state\n    terminalState = connection.terminal_state\n\n    # wait until synchronization completed\n    await connection.wait_synchronized()\n\n    print(terminalState.connected)\n    print(terminalState.connected_to_broker)\n    print(terminalState.account_information)\n    print(terminalState.positions)\n    print(terminalState.orders)\n    # symbol specifications\n    print(terminalState.specifications)\n    print(terminalState.specification('EURUSD'))\n    print(terminalState.price('EURUSD'))\n\n    # access history storage\n    historyStorage = connection.history_storage\n\n    # both orderSynchronizationFinished and dealSynchronizationFinished\n    # should be true once history synchronization have finished\n    print(historyStorage.order_synchronization_finished)\n    print(historyStorage.deal_synchronization_finished)\n\nOverriding local history storage\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nBy default history is stored in memory only. You can override history storage to save trade history to a persistent storage like MongoDB database.\n\n.. code-block:: python\n\n    from metaapi_cloud_sdk import HistoryStorage\n\n    class MongodbHistoryStorage(HistoryStorage):\n        # implement the abstract methods, see MemoryHistoryStorage for sample\n        # implementation\n\n    historyStorage = MongodbHistoryStorage()\n\n    # Note: if you will not specify history storage, then in-memory storage\n    # will be used (instance of MemoryHistoryStorage)\n    connection = await account.connect(historyStorage)\n\n    # access history storage\n    historyStorage = connection.history_storage;\n\n    # invoke other methods provided by your history storage implementation\n    print(await historyStorage.yourMethod())\n\nReceiving synchronization events\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nYou can override SynchronizationListener in order to receive synchronization event notifications, such as account/position/order/history updates or symbol quote updates.\n\n.. code-block:: python\n\n    from metaapi_cloud_sdk import SynchronizationListener\n\n    # receive synchronization event notifications\n    # first, implement your listener\n    class MySynchronizationListener(SynchronizationListener):\n        # override abstract methods you want to receive notifications for\n\n    # now add the listener\n    listener = MySynchronizationListener()\n    connection.add_synchronization_listener(listener)\n\n    # remove the listener when no longer needed\n    connection.remove_synchronization_listener(listener)\n\nRetrieve contract specifications and quotes via streaming API\n-------------------------------------------------------------\n.. code-block:: python\n\n    connection = await account.connect()\n\n    await connection.wait_synchronized()\n\n    # first, subscribe to market data\n    await connection.subscribe_to_market_data('GBPUSD')\n\n    # read constract specification\n    print(terminalState.specification('EURUSD'))\n\n    # read current price\n    print(terminalState.price('EURUSD'))\n\nExecute trades (both RPC and streaming APIs)\n--------------------------------------------\n.. code-block:: python\n\n    connection = await account.connect()\n\n    await connection.wait_synchronized()\n\n    # trade\n    print(await connection.create_market_buy_order('GBPUSD', 0.07, 0.9, 2.0, {'comment': 'comment',\n                                                                              'clientId': 'TE_GBPUSD_7hyINWqAl'}))\n    print(await connection.create_market_sell_order('GBPUSD', 0.07, 2.0, 0.9, {'comment': 'comment',\n                                                                               'clientId': 'TE_GBPUSD_7hyINWqAl'}))\n    print(await connection.create_limit_buy_order('GBPUSD', 0.07, 1.0, 0.9, 2.0, {'comment': 'comment',\n                                                                                  'clientId': 'TE_GBPUSD_7hyINWqAl'}))\n    print(await connection.create_limit_sell_order('GBPUSD', 0.07, 1.5, 2.0, 0.9, {'comment': 'comment',\n                                                                                   'clientId': 'TE_GBPUSD_7hyINWqAl'}))\n    print(await connection.create_stop_buy_order('GBPUSD', 0.07, 1.5, 0.9, 2.0, {'comment': 'comment',\n                                                                                 'clientId': 'TE_GBPUSD_7hyINWqAl'}))\n    print(await connection.create_stop_sell_order('GBPUSD', 0.07, 1.0, 2.0, 0.9, {'comment': 'comment',\n                                                                                  'clientId': 'TE_GBPUSD_7hyINWqAl'}))\n    print(await connection.modify_position('46870472', 2.0, 0.9))\n    print(await connection.close_position_partially('46870472', 0.9))\n    print(await connection.close_position('46870472'))\n    print(await connection.close_positions_by_symbol('EURUSD'))\n    print(await connection.modify_order('46870472', 1.0, 2.0, 0.9))\n    print(await connection.cancel_order('46870472'))\n\n    # if you need to, check the extra result information in stringCode and numericCode properties of the response\n    result = await connection.create_market_buy_order('GBPUSD', 0.07, 0.9, 2.0, {'comment': 'comment',\n                                                                                 'clientId': 'TE_GBPUSD_7hyINWqAl'})\n    print('Trade successful, result code is ' + result['stringCode'])\n\nKeywords: MetaTrader API, MetaTrader REST API, MetaTrader websocket API,\nMetaTrader 5 API, MetaTrader 5 REST API, MetaTrader 5 websocket API,\nMetaTrader 4 API, MetaTrader 4 REST API, MetaTrader 4 websocket API,\nMT5 API, MT5 REST API, MT5 websocket API, MT4 API, MT4 REST API,\nMT4 websocket API, MetaTrader SDK, MetaTrader SDK, MT4 SDK, MT5 SDK,\nMetaTrader 5 SDK, MetaTrader 4 SDK, MetaTrader python SDK, MetaTrader 5\npython SDK, MetaTrader 4 python SDK, MT5 python SDK, MT4 python SDK,\nFX REST API, Forex REST API, Forex websocket API, FX websocket API, FX\nSDK, Forex SDK, FX python SDK, Forex python SDK, Trading API, Forex\nAPI, FX API, Trading SDK, Trading REST API, Trading websocket API,\nTrading SDK, Trading python SDK",
    "description_content_type": "text/x-rst",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/agiliumtrade-ai/metaapi-python-sdk",
    "keywords": "metaapi.cloud,MetaTrader,MetaTrader 5,MetaTrader 4,MetaTrader5,MetaTrader4,MT,MT4,MT5,forex,trading,API,REST,websocket,client,sdk,cloud",
    "license": "SEE LICENSE IN LICENSE",
    "maintainer": "",
    "maintainer_email": "",
    "name": "metaapi-cloud-sdk",
    "package_url": "https://pypi.org/project/metaapi-cloud-sdk/",
    "platform": "",
    "project_url": "https://pypi.org/project/metaapi-cloud-sdk/",
    "project_urls": {
      "Homepage": "https://github.com/agiliumtrade-ai/metaapi-python-sdk"
    },
    "release_url": "https://pypi.org/project/metaapi-cloud-sdk/6.0.1/",
    "requires_dist": null,
    "requires_python": ">=3.6",
    "summary": "SDK for MetaApi, a professional cloud forex API which includes MetaTrader REST API and MetaTrader websocket API. Supports both MetaTrader 5 (MT5) and MetaTrader 4 (MT4). (https://metaapi.cloud)",
    "version": "6.0.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16973035,
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "7dfb6057daa0e3e39d1de4cdbef49ded335a02bd93b5634cad9bb4e633934be0",
        "md5": "ecbf2544b86f635d58c2ffc157c74c2a",
        "sha256": "5d4087f6aa6995188d8eeefb43470ab39acd1cd0d58310d3fb59d864d579d108"
      },
      "downloads": -1,
      "filename": "metaapi_cloud_sdk-6.0.1.tar.gz",
      "has_sig": false,
      "md5_digest": "ecbf2544b86f635d58c2ffc157c74c2a",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 939143,
      "upload_time": "2020-08-22T00:30:04",
      "upload_time_iso_8601": "2020-08-22T00:30:04.098471Z",
      "url": "https://files.pythonhosted.org/packages/7d/fb/6057daa0e3e39d1de4cdbef49ded335a02bd93b5634cad9bb4e633934be0/metaapi_cloud_sdk-6.0.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}