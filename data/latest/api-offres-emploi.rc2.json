{
  "info": {
    "author": "Etienne Kintzler",
    "author_email": "etienne.kintzler@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3"
    ],
    "description": "# api-offres-emploi \nA python wrapper for [API Offres d'emploi v2](https://www.emploi-store-dev.fr/portail-developpeur-cms/home/catalogue-des-api/documentation-des-api/api/api-offres-demploi-v2.html) available on [Emploi Store](https://www.emploi-store.fr/portail/accueil) (Pole Emploi).\n\n### Table of content\n\n- [1. Setting up](#1-setting-up)\n- [2. Usage](#2-usage)\n  - [Installation](#21-installation)\n  - [Authentification](#22-authentification)\n- [3. Examples](#3-examples)\n  - [3.1. search](#31-search)\n  - [3.2. referentiel](#32-referentiel)\n- [4. Analysis of the search output](#4-analysis-of-the-search-output)\n  - [4.1. Aggregate view of job offers](#41-aggregate-view-of-job-offers)\n  - [4.2. Detailed view of job offers](#42-detailed-view-of-job-offers)\n\n## 1. Setting up\nTo use the API, you need to subscribe to the _Api Offres d'emploi v2_. Here are the steps:\n- Create an account on [Emploi store](https://www.emploi-store-dev.fr/)\n- Go to the dashboard (*Tableau de bord*) and create an application. You should then have the client ID (_Identifiant_) and client secret key (_Clé secrète_).\n- Go to [catalogue](https://www.emploi-store-dev.fr/portail-developpeur/catalogueapi) and subscribe to _Api Offres d'emploi v2_\n\n## 2. Usage\n\n### 2.1. Installation\nThe package can be installed via pip:\n```python\npip install api-offres-emploi\n```\n\n### 2.2. Authentification\nTo authentificate, create an instance of `Api` with your client id and secrets (you might want to access these two variables through environment variables instead of hardcoding them):\n\n```python\nfrom offres_emploi import Api\nclient = Api(client_id=\"<your client id>\", \n             client_secret=\"<your client secret>\")\n```\n\n### 2.3. Methods exposed by the API 'Offres d'emploi v2'\nThe API _Offres d'emploi v2_ has two methods : \n- `search` : return aggregate count (named _filtresPossibles_) of the job offers along with the detailed list of these job offers (named _resultats_). A lot of parameters are available : date, keywords, localization, etc. Extensive information on the website page [Rechercher par critères](https://www.emploi-store-dev.fr/portail-developpeur-cms/home/catalogue-des-api/documentation-des-api/api/api-offres-demploi-v2/rechercher-par-criteres.html).\n- `referentiel` : return reference source (more information on the website page [Référentiels](https://www.emploi-store-dev.fr/portail-developpeur-cms/home/catalogue-des-api/documentation-des-api/api/api-offres-demploi-v2/referentiels.html)).\n\n**About range and pagination**: In the method `search`, only the first 150 job offers are returned by default by the API (since the default `range` value is `0-149`). There are three constraints regarding the `range` parameter ([see the reference for the parameter 'range'](https://www.emploi-store-dev.fr/portail-developpeur-cms/home/catalogue-des-api/documentation-des-api/api/api-offres-demploi-v2/rechercher-par-criteres.html)):\n- the maximal value for the first element of range is 1000 \n- the maximal value for the second element of range is 1149\n- the number of result for a given requests must be inferior or equals to 150 \n\nHence for a given search, it is possible to get up to 1150 job offers, by modifying the value of the parameter `range` for each request (`0-149` then `150-299`, `300-449`, etc.). However some `search` might have much more than 1150 job offers. In this case one has to narrow down the search using additional parameters (for instance: by playing with the parameters `minCreationDate` and `maxCreationDate` of the request). \n\n**Limit rate** : The API limit rate is set to 3 requests per second.\n\n**Equivalence between the *API Offres d'emploi v2* methods and this module methods**: The 2 main methods from *Api Offres d'emploi v2* have the same name in the python module (`search` and `referentiel`) and are methods of the module class `Api`. One notable difference is that the output of `search` of this module has an additional `Content-Range` entry (describe hereafter).\n\n## 3. Examples\n### 3.1. Search\n#### Minimal example of search\nThe _API Offres d'emploi v2_ has default parameters, so we can make a requests without parameters (will return the latest job offers) :\n```python\nbasic_search = client.search()\n```\nThe output of the module's `Api.search` method is the same as the _Api Offres d'emploi v2_ (dictionnary with entries `filtresPossibles` and `resultats`) with an additional entry, `Content-Range`, that gives the first and last index used for the `range` parameter along with the total number of available job offers for this request. For instance : \n```python\nbasic_search['Content-Range']\n```\nwill output :\n```python\n{'first_index': '0', 'last_index': '149', 'max_results': '300749'}\n```\nThe other fields (`filtresPossibles` and `resultats`) are explored further the [section 4](#4-analysis-of-the-search-output).\n\n#### A more complex search\nA more sensible approach would be to search for special keyword over a certain period, for instance the job offers with that include the keyword _big data_ since 2020-03-01 at 12h30. \n```python\nfrom offres_emploi.utils import dt_to_str_iso\nimport datetime\n\nstart_dt = datetime.datetime(2020, 3, 1, 12, 30)\nend_dt = datetime.datetime.today()\nparams = {\n    \"motsCles\": \"data science\",\n    'minCreationDate': dt_to_str_iso(start_dt),\n    'maxCreationDate': dt_to_str_iso(end_dt)\n}\nsearch_on_big_data = client.search(params=params)\n```\n\nThe full list of parameters for the `search` request are available in the page [Rechercher par critères](https://www.emploi-store-dev.fr/portail-developpeur-cms/home/catalogue-des-api/documentation-des-api/api/api-offres-demploi-v2/rechercher-par-criteres.html). These parameters are passed as dictionary to the parameter `params`. Note that the keys of this dictionnary are in camelCase, as in the _API Offres d'emploi v2_ specification. Also, we feed a `datetime` object to the helper function `dt_to_str_iso` to convert it to a string with the appropriate [ISO-8601](https://www.w3.org/TR/NOTE-datetime) format required by the API.\n\n### 3.2. Referentiel\nGetting reference source (_referentiel_ in french) is more straightforward since it does not need any parameter ; one just need to specify the desired reference source:\n```python\nreferentiel_metiers = client.referentiel('metiers')\n```\nIt will output the following list of dictionnaries: \n```python\n[{'code': '1',\n  'libelle': \"Métiers de l'environnement et du développement durable\"},\n {'code': '2',\n  'libelle': 'Métiers de la défense et de la sécurité publique (hors logistique, santé, tertiaire, restauration)'},\n {'code': '3',\n  'libelle': \"Métiers du patrimoine et de la restauration d'oeuvres d'art\"},\n {'code': '4', 'libelle': \"Métiers de l'intelligence économique\"},\n {'code': '5', 'libelle': 'Métiers de la recherche'},\n ...\n ]\n```\n\nThe full list of *referentiel* is available in the docstring of the method or in the [Référentiel page](https://www.emploi-store-dev.fr/portail-developpeur-cms/home/catalogue-des-api/documentation-des-api/api/api-offres-demploi-v2/referentiels.html) of the API.\n\n## 4. Analysis of the search output\nThe output of the `Api.search` is a dictionary with three entries:\n\n- *filtresPossibles*\n- *resultats*\n- *Content-Range*\n\nThe breakdown of the available job offers into different categories (type of contract, experience, qualification, nature of contract) are available in the _filtresPossibles_ field and the detailed view of the job offers in _resultats_ field.\n\n```python\nfilters = search_on_big_data['filtresPossibles']\nresults =  search_on_big_data['resultats']\ncontent_range = search_on_big_data['Content-Range']\n```\n\nThe number of job offers available at this point in time for this search is given by:\n\n```python\ncontent_range['max_results']\n```\n\n### 4.1. Aggregate view of job offers\nThe helper function `filters_to_df` is used to convert the field `filtresPossibles` in a suitable format:\n\n```python\nfrom offres_emploi.utils import filters_to_df\nfilters_df = filters_to_df(filters)\n```\nIt will output:\n```python\n           filtre valeur_possible  nb_resultats\n0     typeContrat             CDD             3\n1     typeContrat             CDI           138\n2     typeContrat             LIB            37\n3      experience               0            15\n4      experience               1            96\n5      experience               2            47\n6      experience               3            20\n7   qualification               0             4\n8   qualification               9            76\n9   qualification               X            98\n10  natureContrat              E1           141\n11  natureContrat              NS            37\n```\n\nIt is then straightforward to plot these figures using the data visualization library [seaborn](https://seaborn.pydata.org/):\n\n```python\nimport seaborn as sns\ng = sns.FacetGrid(filters_df, col=\"filtre\", sharex=False, sharey=False)\ng = g.map(data=sns.barplot, row=\"valeur_possible\", col=\"nb_resultats\")\n```\n\n![barplot of the breakdown](/img/filters.png)\n\n\n### 4.2 Detailed view of job offers\nThe detailed view _resultats_ has a more friendly structure and can be pass directly to a `pandas.DataFrame` constructor. For example, to  know the salary offered by the enterprises for this search:\n\n```python\nimport pandas as pd\nresults_df = pd.DataFrame(results)\nsalary_by_enterprise = (\n results_df[['entreprise', 'salaire']]\n .dropna()\n .agg(dict(entreprise=lambda x: x.get('nom'),\n           salaire=lambda x: x.get('commentaire')))\n .dropna(subset=[\"salaire\"])\n .loc[lambda df: df.salaire.str.contains(\"\\d+\")]\n .sort_values(\"salaire\")\n)\n```\n\nIt will output:\n\n```python\n                                  entreprise                        salaire\n73                                CLEEVEN SE         25 - 45 k€ brut annuel\n112                                    ASTEK         30 - 40 k€ brut annuel\n113                                 ADSERVIO         30 - 50 k€ brut annuel\n15                                   REDLEAN         30 - 50 k€ brut annuel\n29                           EOLE CONSULTING         30 - 50 k€ brut annuel\n66                               PHOENIX ISI         32 - 35 k€ brut annuel\n12                          DGA DRH CPP SDCO         32 - 52 k€ brut annuel\n109                                EXPERTEAM         35 - 45 k€ brut annuel\n47                              GROUPE ASTEN         35 - 48 k€ brut annuel\n16                                 ENERGISME         35 - 60 k€ brut annuel\n90                                     VISEO         36 - 50 k€ brut annuel\n80   SOCIETE ALTRAN, Bat Teck - E. Golf Park         38 - 42 k€ brut annuel\n14                AINABL TECHNOLOGIES FRANCE         38 - 50 k€ brut annuel\n68   SOCIETE ALTRAN, Bat Teck - E. Golf Park         40 - 45 k€ brut annuel\n28                                   Katchme         40 - 50 k€ brut annuel\n124                                 HUMAINEA         42 - 45 k€ brut annuel\n79   SOCIETE ALTRAN, Bat Teck - E. Golf Park         45 - 48 k€ brut annuel\n86                          DGA DRH CPP FDCO  A partir de 34 k€ brut annuel\n114                     SILICOM REGION OUEST  A partir de 35 k€ brut annuel\n17                                      SNEF  A partir de 40 k€ brut annuel\n96                               NODYA GROUP  A partir de 40 k€ brut annuel\n89                       QUADRA INFORMATIQUE  A partir de 45 k€ brut annuel\n35                                   Hunteed  A partir de 49 k€ brut annuel\n```\nNow you know where to apply.\n\n\n\n\n\n\n\n\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/etiennekintzler/api-offres-emploi",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "api-offres-emploi",
    "package_url": "https://pypi.org/project/api-offres-emploi/",
    "platform": null,
    "project_url": "https://pypi.org/project/api-offres-emploi/",
    "project_urls": {
      "Homepage": "https://github.com/etiennekintzler/api-offres-emploi"
    },
    "release_url": "https://pypi.org/project/api-offres-emploi/0.0.2/",
    "requires_dist": null,
    "requires_python": ">=3.6",
    "summary": "Python interface to 'API Offres d'emploi v2' (Pole Emploi job search API)",
    "version": "0.0.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 14062505,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8c613d02dd7f030dc1225f02183d5bf1649cce491de087591e2260357b82c564",
          "md5": "bdcf1f9fff24bf9335b8ae3a8720f798",
          "sha256": "c004b1adba159a629982f55f6c3625d9ef91940170c7c99bf11b649ea6336670"
        },
        "downloads": -1,
        "filename": "api_offres_emploi-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "bdcf1f9fff24bf9335b8ae3a8720f798",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 9909,
        "upload_time": "2020-04-13T22:37:34",
        "upload_time_iso_8601": "2020-04-13T22:37:34.795280Z",
        "url": "https://files.pythonhosted.org/packages/8c/61/3d02dd7f030dc1225f02183d5bf1649cce491de087591e2260357b82c564/api_offres_emploi-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "493a5ba8dfd01d6adf2277962f6100d7fe9a567e83c7799268a8f24f3385b8ad",
          "md5": "2c6280323045260a402e62b7a168ccee",
          "sha256": "589c640ab86e63ddcf37f56c3486fb11a4ed91f48be915cd760dec9697245ac7"
        },
        "downloads": -1,
        "filename": "api-offres-emploi-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "2c6280323045260a402e62b7a168ccee",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 8791,
        "upload_time": "2020-04-13T22:37:36",
        "upload_time_iso_8601": "2020-04-13T22:37:36.798751Z",
        "url": "https://files.pythonhosted.org/packages/49/3a/5ba8dfd01d6adf2277962f6100d7fe9a567e83c7799268a8f24f3385b8ad/api-offres-emploi-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2b72bc0f35d4f1a206c7d12665ed9fa1370e328903b63dddd79aa87f6bfa661f",
          "md5": "dd6b799e0eefbe5fff039f00b2dd4529",
          "sha256": "970839a50be86a8587d69a2f2f70d268a40fcb20983831e9120f8d8beaa3c727"
        },
        "downloads": -1,
        "filename": "api_offres_emploi-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "dd6b799e0eefbe5fff039f00b2dd4529",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 9941,
        "upload_time": "2022-06-07T21:54:49",
        "upload_time_iso_8601": "2022-06-07T21:54:49.547027Z",
        "url": "https://files.pythonhosted.org/packages/2b/72/bc0f35d4f1a206c7d12665ed9fa1370e328903b63dddd79aa87f6bfa661f/api_offres_emploi-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "bd998dac5e20687840a02d250a0fddac91a691967eae8576a30c536d58378651",
          "md5": "0e180ca01822554693ea55f6978d5773",
          "sha256": "e1880970688ae0fd217e521e097039761677edbd6455e45b661fc1395c0a6da9"
        },
        "downloads": -1,
        "filename": "api-offres-emploi-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "0e180ca01822554693ea55f6978d5773",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 9213,
        "upload_time": "2022-06-07T21:54:52",
        "upload_time_iso_8601": "2022-06-07T21:54:52.499655Z",
        "url": "https://files.pythonhosted.org/packages/bd/99/8dac5e20687840a02d250a0fddac91a691967eae8576a30c536d58378651/api-offres-emploi-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "2b72bc0f35d4f1a206c7d12665ed9fa1370e328903b63dddd79aa87f6bfa661f",
        "md5": "dd6b799e0eefbe5fff039f00b2dd4529",
        "sha256": "970839a50be86a8587d69a2f2f70d268a40fcb20983831e9120f8d8beaa3c727"
      },
      "downloads": -1,
      "filename": "api_offres_emploi-0.0.2-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "dd6b799e0eefbe5fff039f00b2dd4529",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6",
      "size": 9941,
      "upload_time": "2022-06-07T21:54:49",
      "upload_time_iso_8601": "2022-06-07T21:54:49.547027Z",
      "url": "https://files.pythonhosted.org/packages/2b/72/bc0f35d4f1a206c7d12665ed9fa1370e328903b63dddd79aa87f6bfa661f/api_offres_emploi-0.0.2-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "bd998dac5e20687840a02d250a0fddac91a691967eae8576a30c536d58378651",
        "md5": "0e180ca01822554693ea55f6978d5773",
        "sha256": "e1880970688ae0fd217e521e097039761677edbd6455e45b661fc1395c0a6da9"
      },
      "downloads": -1,
      "filename": "api-offres-emploi-0.0.2.tar.gz",
      "has_sig": false,
      "md5_digest": "0e180ca01822554693ea55f6978d5773",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 9213,
      "upload_time": "2022-06-07T21:54:52",
      "upload_time_iso_8601": "2022-06-07T21:54:52.499655Z",
      "url": "https://files.pythonhosted.org/packages/bd/99/8dac5e20687840a02d250a0fddac91a691967eae8576a30c536d58378651/api-offres-emploi-0.0.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}