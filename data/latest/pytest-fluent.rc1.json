{
  "info": {
    "author": "Rohde & Schwarz GmbH & Co. KG",
    "author_email": "info@rohde-schwarz.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Framework :: Pytest",
      "Intended Audience :: Developers",
      "Intended Audience :: Science/Research",
      "License :: OSI Approved :: MIT License",
      "Operating System :: MacOS :: MacOS X",
      "Operating System :: Microsoft :: Windows",
      "Operating System :: POSIX :: Linux",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9",
      "Topic :: Scientific/Engineering :: Interface Engine/Protocol Translator",
      "Topic :: Software Development :: Libraries :: Python Modules"
    ],
    "description": "# pytest-fluent\n\nA Python package in order to extend pytest by fluentd logging\n\n## Description\n\nPytest is one of the most powerful testing suites with a lot of functionality and many plugins. Fluentd is a well-established log collector which is used in many modern web architectures. So, why not putting both worlds together in order to gain real-time log access to your distributed test runs.\n\npytest-fluent enables you to forward your test data immediately to your prefered log-sink from any node spread around your infrastructure. The streamed data are available for each pytest stage and formatted in JSON.\n\nEach pytest session gets an unique identifier (UID) assigned as well as each executed test case. With these UIDs, you can filter easily for sessions and testcase data entries, for instance in your favorite database.\n\n## Installation\n\nThe package is available at pypi.rsint.net and can be installed by typing\n\n```shell\npip install pytest-fluent\n```\n\n## Usage\n\npytest-fluent-logging forwards meta data from pytest to Fluentd for further processing. The meta data are \n* unique session ID\n* unique test ID\n* status of the session respectively test case\n* test case name\n* test results\n* `record_property` entries\n* custom testcase information\n* custom session information\n  \nFurthermore, the Python logging instance can be extended in order to forward test case runtime logging.\n\n```python\nfrom logging import getLogger\n\ndef test_my_runtime_log():\n    value = 1\n    getLogger().info(f\"Setting value to {value}\")\n    assert value == 1\n```\n\nor \n\n```python\nfrom logging import getLogger\n\ndef test_my_runtime_log():\n    value = 1\n    getLogger('fluent').info(f\"Setting value to {value}\")\n    assert value == 1\n```\n\n### Fixtures\n\nIn order to create your own logger, request the following fixture\n\n```python\ndef test_my_runtime_log(get_logger):\n    logger = get_logger('my.Logger')\n    value = 1\n    logger.info(f\"Setting value to {value}\")\n    assert value == 1\n```\n\nIf you want to get the current UIDs, use the following fixtures\n\n```python\ndef test_unique_identifier(session_uid, test_uid):\n    logger = get_logger('fluent')\n    logger.info(f\"Session ID: {session_uid}\")\n    logger.info(f\"Test ID: {test_uid}\")\n    value = 1\n    assert value == 1\n```\n\n### Callbacks\n\nIf you want to add custom data to the datasets of the `pytest_sessionstart` and `pytest_runtest_logstart` stages, decorate your callback functions with the following decorators.\n\n```python\nfrom pytest_fluent import (\n    additional_session_information_callback,\n    additional_test_information_callback\n)\n\n@additional_session_information_callback\ndef provide_more_session_information() -> dict:\n    return {\n        \"more\": \"session information\"\n    }\n\n@additional_test_information_callback\ndef provide_more_test_information() -> dict:\n    return {\n        \"more\": \"test information\"\n    }\n```\n\n### pytest CLI extensions\n\nThe pytest CLI can be called with the following arguments in order to configure fluent-logging.\n\n| argument         | description                                                                       | default  |\n| ---------------- | --------------------------------------------------------------------------------- | -------- |\n| --session-uuid   | Use a custom externally created UUID, e.g. link a CI job with the pytest session. |          |\n| --fluentd-host   | Fluentd host address. If not provided, a local Fluentd instance will be called.   |          |\n| --fluentd-port   | Fluent host port                                                                  | 24224    |\n| --fluentd-tag    | Set a custom Fluentd tag                                                          | 'test'   |\n| --fluentd-label  | Set a custom Fluentd label                                                        | 'pytest' |\n| --extend-logging | Extend the Python logging with a Fluent handler                                   | False    |\n\n### What data are sent?\n\npytest-fluent sends any information, e.g. stage information or logging from a test case, as a single chunk. For instance, the data collection from `test_addoptions.py` test looks as following\n\n```json\n[\n    {\n        \"status\": \"start\",\n        \"stage\": \"session\",\n        \"sessionId\": \"d8f01de3-8416-4801-9406-0ea3d5cfe3c0\"\n    },\n    {\n        \"status\": \"start\",\n        \"stage\": \"testcase\",\n        \"sessionId\": \"d8f01de3-8416-4801-9406-0ea3d5cfe3c0\",\n        \"testId\": \"6b444275-4450-4eff-b5d9-8355f0f99ab0\",\n        \"name\": \"test_fluentd_logged_parameters.py::test_base\"\n    },\n    {\n        \"type\": \"logging\",\n        \"host\": \"myComputer\",\n        \"where\": \"test_fluentd_logged_parameters.test_base\",\n        \"level\": \"INFO\",\n        \"stack_trace\": \"None\",\n        \"message\": \"Logged from test_base\",\n        \"sessionId\": \"d8f01de3-8416-4801-9406-0ea3d5cfe3c0\",\n        \"testId\": \"6b444275-4450-4eff-b5d9-8355f0f99ab0\",\n        \"stage\": \"testcase\"\n    },\n    {\n        \"type\": \"logging\",\n        \"host\": \"myComputer\",\n        \"where\": \"test_fluentd_logged_parameters.test_base\",\n        \"level\": \"INFO\",\n        \"stack_trace\": \"None\",\n        \"message\": \"Logged from test_base\",\n        \"sessionId\": \"d8f01de3-8416-4801-9406-0ea3d5cfe3c0\",\n        \"testId\": \"6b444275-4450-4eff-b5d9-8355f0f99ab0\",\n        \"stage\": \"testcase\"\n    },\n    {\n        \"name\": \"test_fluentd_logged_parameters.py::test_base\",\n        \"outcome\": \"passed\",\n        \"duration\": 0.0013457999999999526,\n        \"markers\": {\n            \"test_base\": 1,\n            \"test_fluentd_logged_parameters.py\": 1,\n            \"test_fluentd_logged_parameters0\": 1\n        },\n        \"stage\": \"testcase\",\n        \"when\": \"call\",\n        \"sessionId\": \"d8f01de3-8416-4801-9406-0ea3d5cfe3c0\",\n        \"testId\": \"6b444275-4450-4eff-b5d9-8355f0f99ab0\"\n    },\n    {\n        \"status\": \"finish\",\n        \"stage\": \"testcase\",\n        \"sessionId\": \"d8f01de3-8416-4801-9406-0ea3d5cfe3c0\",\n        \"testId\": \"6b444275-4450-4eff-b5d9-8355f0f99ab0\",\n        \"name\": \"test_fluentd_logged_parameters.py::test_base\"\n    },\n    {\n        \"status\": \"finish\",\n        \"stage\": \"session\",\n        \"sessionId\": \"d8f01de3-8416-4801-9406-0ea3d5cfe3c0\"\n    }\n]\n```\n\nwhereat each object in the array is sent independently via Fluentd.\n\n\n## Changelog\n\nThe changelog.\n\n## Contributing\n\nWe welcome any contributions, enhancements, and bug-fixes. Open an [issue](https://github.com/Rohde-Schwarz/pytest-fluent/issues) on [Github](https://github.com) and [submit a pull request](https://github.com/Rohde-Schwarz/pytest-fluent/pulls).\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/Rohde-Schwarz/pytest-fluent",
    "keywords": "pytest,logging,fluent",
    "license": "MIT",
    "maintainer": "Carsten Sauerbrey",
    "maintainer_email": "carsten.sauerbrey@rohde-schwarz.com",
    "name": "pytest-fluent",
    "package_url": "https://pypi.org/project/pytest-fluent/",
    "platform": "Unix",
    "project_url": "https://pypi.org/project/pytest-fluent/",
    "project_urls": {
      "Homepage": "https://github.com/Rohde-Schwarz/pytest-fluent"
    },
    "release_url": "https://pypi.org/project/pytest-fluent/0.1.0/",
    "requires_dist": [
      "pytest",
      "msgpack",
      "six",
      "fluent-logger",
      "importlib-metadata ; python_version < \"3.8\"",
      "sphinx ; extra == 'docs'",
      "sphinx-rtd-theme ; extra == 'docs'",
      "myst-parser ; extra == 'docs'",
      "pytest ; extra == 'test'",
      "coverage[toml] ; extra == 'test'",
      "pytest-cov ; extra == 'test'",
      "pytest-xdist[psutil] ; extra == 'test'",
      "six ; extra == 'test'"
    ],
    "requires_python": ">=3.6",
    "summary": "A pytest plugin in order to provide logs via fluentd",
    "version": "0.1.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 14409654,
  "releases": {
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "cd641aed9d17407ab01f5c82711f8183f683b7b86f4f242032f4bcc96208e706",
          "md5": "4d41aea2080d8ee2a6934894ad5f5abb",
          "sha256": "8f05662fb2e9738c667cab6339b215ca0ca97219429c3472d5713bba5b276c69"
        },
        "downloads": -1,
        "filename": "pytest_fluent-0.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "4d41aea2080d8ee2a6934894ad5f5abb",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 10087,
        "upload_time": "2022-07-12T10:37:09",
        "upload_time_iso_8601": "2022-07-12T10:37:09.463545Z",
        "url": "https://files.pythonhosted.org/packages/cd/64/1aed9d17407ab01f5c82711f8183f683b7b86f4f242032f4bcc96208e706/pytest_fluent-0.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8ddb5d807f39ec0d169d79ee7bc358e99a75be8547f8f1437db55621a95cf070",
          "md5": "2ca33f32ae0ed7bb6f2f4ac8c68ef007",
          "sha256": "5c6806d18b194283c6ac8d5095299eaaee1015259b89decdf90408ad126a0de8"
        },
        "downloads": -1,
        "filename": "pytest-fluent-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "2ca33f32ae0ed7bb6f2f4ac8c68ef007",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 18291,
        "upload_time": "2022-07-12T10:37:12",
        "upload_time_iso_8601": "2022-07-12T10:37:12.554869Z",
        "url": "https://files.pythonhosted.org/packages/8d/db/5d807f39ec0d169d79ee7bc358e99a75be8547f8f1437db55621a95cf070/pytest-fluent-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "cd641aed9d17407ab01f5c82711f8183f683b7b86f4f242032f4bcc96208e706",
        "md5": "4d41aea2080d8ee2a6934894ad5f5abb",
        "sha256": "8f05662fb2e9738c667cab6339b215ca0ca97219429c3472d5713bba5b276c69"
      },
      "downloads": -1,
      "filename": "pytest_fluent-0.1.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "4d41aea2080d8ee2a6934894ad5f5abb",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6",
      "size": 10087,
      "upload_time": "2022-07-12T10:37:09",
      "upload_time_iso_8601": "2022-07-12T10:37:09.463545Z",
      "url": "https://files.pythonhosted.org/packages/cd/64/1aed9d17407ab01f5c82711f8183f683b7b86f4f242032f4bcc96208e706/pytest_fluent-0.1.0-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "8ddb5d807f39ec0d169d79ee7bc358e99a75be8547f8f1437db55621a95cf070",
        "md5": "2ca33f32ae0ed7bb6f2f4ac8c68ef007",
        "sha256": "5c6806d18b194283c6ac8d5095299eaaee1015259b89decdf90408ad126a0de8"
      },
      "downloads": -1,
      "filename": "pytest-fluent-0.1.0.tar.gz",
      "has_sig": false,
      "md5_digest": "2ca33f32ae0ed7bb6f2f4ac8c68ef007",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 18291,
      "upload_time": "2022-07-12T10:37:12",
      "upload_time_iso_8601": "2022-07-12T10:37:12.554869Z",
      "url": "https://files.pythonhosted.org/packages/8d/db/5d807f39ec0d169d79ee7bc358e99a75be8547f8f1437db55621a95cf070/pytest-fluent-0.1.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}