{
  "info": {
    "author": "",
    "author_email": "luxuncang <luxuncang@qq.com>",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "<div align=\"center\">\n\n# Lacia\n\n_A modern `Json-Rpc/Bson-Rpc` implementation, compatible with `Json-Rpc 2.0` and `Json-Rpc X`, supports multiple network protocols and backend frameworks and supports bidirectional calls.._\n\n> 人间总有一两风，填我十万八千梦\n\n [![CodeFactor](https://www.codefactor.io/repository/github/luxuncang/lacia/badge)](https://www.codefactor.io/repository/github/luxuncang/lacia)\n [![GitHub](https://img.shields.io/github/license/luxuncang/lacia)](https://github.com/luxuncang/lacia/blob/master/LICENSE)\n [![CodeQL](https://github.com/luxuncang/lacia/workflows/CodeQL/badge.svg)](https://github.com/luxuncang/lacia/blob/master/.github/workflows/codeql-analysis.yml)\n\n</div>\n\n## 安装\n\n```bash\npip install lacia\n```\n\n```bash\npdm add lacia\n```\n\n## 特性\n\n* [X] 跨语言\n  * [X] `Python3`\n  * [ ] `JavaScript`\n  * [ ] `Go`\n  * [ ] `C/C++`\n  * [ ] `Java`\n  * [ ] `Rust`\n* [X] 多种网络协议支持\n  * [X] `HTTP`\n  * [X] `WebSocket`\n* [X] 兼容 Json-Rpc 2.0 规范\n* [X] 兼容 Json-Rpc X 规范\n* [X] 支持完备的链式调用\n* [X] 自动 Json-Rpc 规范转换\n* [X] 双向流式传输\n* [X] 支持 BSON\n* [ ] IDE 支持 ([#1](https://github.com/luxuncang/lacia/issues/1))\n* [ ] 分布式Server\n\n## 使用\n\n### 入门\n\n**Server 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioServer\n\nexpose = {\n    'add': lambda a, b: a + b,\n    'sub': lambda a, b: a - b,\n    'value': 'jsonrpc Server 0.0.1'\n}\n\nloop = asyncio.new_event_loop()\n\nrpc = JsonRpc('/test', namespace=expose, loop=loop)\n\nrpc.run_server(AioServer())\n```\n\n**Client 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioClient, logger\n\nloop = asyncio.new_event_loop()\n\nrpc = JsonRpc('/test', loop=loop)\n\nasync def main():\n    await rpc.run_client(AioClient())\n    res1 = await rpc.value\n    res2 = await rpc.add(4, 4)\n\n    logger.info(res1)\n    logger.info(res2)\n\nloop.run_until_complete(main())\nloop.run_forever()\n```\n\n### 链式调用\n\n**Server 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioServer\n\nclass number:\n\n    def __init__(self) -> None:\n        self.value = 0\n  \n    def add(self, i: int):\n        self.value += i\n        return self\n\n    def sub(self, i: int):\n        self.value -= i\n        return self\n\nexpose = {'number': number}\n\nloop = asyncio.new_event_loop()\n\nrpc = JsonRpc('/test', namespace=expose, loop=loop)\n\nrpc.run_server(AioServer())\n```\n\n**Client 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioClient, logger\n\nloop = asyncio.new_event_loop()\n\nrpc = JsonRpc('/test', loop=loop)\n\nasync def main():\n    await rpc.run_client(AioClient())\n    res3 = await rpc.number().add(10).sub(10).value\n    logger.info(res3)\n\nloop.run_until_complete(main())\nloop.run_forever()\n```\n\n### 反向调用\n\n**Server 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioServer\n\nexpose = {'value': 'jsonrpc Server 0.0.1'}\n\nloop = asyncio.new_event_loop()\n\nrpc = JsonRpc('/test', namespace=expose, loop=loop)\n\nasync def repeat():\n    res = await rpc.value\n    return res\n\nrpc.add_namespace('repeat', repeat)\n\nrpc.run_server(AioServer())\n\n```\n\n**Client 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioClient, logger\n\nexpose = {'value': 'jsonrpc Client 0.0.1'}\n\nloop = asyncio.new_event_loop()\n\nrpc = JsonRpc('/test', namespace=expose, loop=loop)\n\nasync def main():\n    await rpc.run_client(AioClient())\n    res4 = await rpc.repeat()\n    logger.info(res4)\n\nloop.run_until_complete(main())\nloop.run_forever()\n```\n\n### 流式调用\n\n**Server 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioServer\n\nasync def async_generator(i = 10):\n    for i in range(i):\n        await asyncio.sleep(0.5)\n        yield i\n\nexpose = {'async_generator': async_generator}\n\nloop = asyncio.new_event_loop()\n\nrpc = JsonRpc('/test', namespace=expose, loop=loop)\n\nrpc.run_server(AioServer())\n```\n\n**Client 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioClient, logger\n\nloop = asyncio.new_event_loop()\n\nrpc = JsonRpc('/test', loop=loop)\n\nasync def main():\n    await rpc.run_client(AioClient())\n\n    async for i in rpc.async_generator(5): # type: ignore\n        logger.info(i)\n\nloop.run_until_complete(main())\nloop.run_forever()\n```\n\n### IDE 支持(实验性)\n\n**Server 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioServer\n\nasync def async_generator(i: int = 10):\n    for i in range(i):\n        await asyncio.sleep(0.5)\n        yield i\n\nexpose = {'async_generator': async_generator}\n\nloop = asyncio.new_event_loop()\n\nrpc = JsonRpc('/test', namespace=expose, loop=loop)\n\nrpc.rpc.generate_pyi('CustomSchema') # Generate Pyi file in ./laciaschema/CustomSchema.pyi\n\nrpc.run_server(AioServer())\n```\n\n**Client 端**\n\n```python\nimport asyncio\nfrom lacia import JsonRpc, AioClient, logger\nfrom laciaschema.CustomSchema import CustomSchema\n\nloop = asyncio.new_event_loop()\n\nirpc = JsonRpc('/test', loop=loop)\nrpc = irpc.with_schema(CustomSchema) # Use CustomSchema as schema and \n\nasync def main():\n    await irpc.run_client(AioClient())\n\n    async for i in rpc.async_generator(5): # type: ignore\n        logger.info(i)\n\nloop.run_until_complete(main())\nloop.run_forever()\n```\n\n![1655481388512](image/README/1655481388512.png)\n\n> IDE 现只支持函数和基础类型, Class 正在重构中\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "lacia",
    "package_url": "https://pypi.org/project/lacia/",
    "platform": null,
    "project_url": "https://pypi.org/project/lacia/",
    "project_urls": null,
    "release_url": "https://pypi.org/project/lacia/0.0.5/",
    "requires_dist": [
      "aiohttp>=3.8.1",
      "bson>=0.5.10",
      "nest-asyncio>=1.5.5",
      "orjson>=3.7.7",
      "pydantic>=1.9.1",
      "richuru>=0.1.1",
      "typing-extensions>=4.2.0"
    ],
    "requires_python": ">=3.9",
    "summary": "A modern `Json-Rpc/Bson-Rpc` implementation, compatible with `Json-Rpc 2.0` and `Json-Rpc X`, supports multiple network protocols and backend frameworks and supports bidirectional calls.",
    "version": "0.0.5",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 14608992,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a843fe46042e7187543ab190d0e7165ab12781afa55185594b17a76ca2fd9c2d",
          "md5": "4722fad6888b114f9d860c0e2e2af012",
          "sha256": "f23716b887be5f526e978fa3d5ffce026c1529bff71e13558d6fa95dd95c215c"
        },
        "downloads": -1,
        "filename": "lacia-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "4722fad6888b114f9d860c0e2e2af012",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.9",
        "size": 15740,
        "upload_time": "2022-06-15T17:31:48",
        "upload_time_iso_8601": "2022-06-15T17:31:48.564201Z",
        "url": "https://files.pythonhosted.org/packages/a8/43/fe46042e7187543ab190d0e7165ab12781afa55185594b17a76ca2fd9c2d/lacia-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "734887f5e6be96db70f2f3062cae6084233808298d68d8117595166ed73b792f",
          "md5": "dbfed52d34114cb584569195b4637b79",
          "sha256": "b186d8f122a0b172f2a77e02579591db3b49ff7e5f4165cb9e97b0394bd19e1e"
        },
        "downloads": -1,
        "filename": "lacia-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "dbfed52d34114cb584569195b4637b79",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.9",
        "size": 11099,
        "upload_time": "2022-06-15T17:31:51",
        "upload_time_iso_8601": "2022-06-15T17:31:51.048891Z",
        "url": "https://files.pythonhosted.org/packages/73/48/87f5e6be96db70f2f3062cae6084233808298d68d8117595166ed73b792f/lacia-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1b7a927a5021fb2396ec7f9624e03cdd01b3125b4d864e8a5a332fbd8d30405f",
          "md5": "ae337aaf98f458695f449705784ce64b",
          "sha256": "a835f46998675014c4bfc33471ba85fc917fd73d822d92078f4a1480634593aa"
        },
        "downloads": -1,
        "filename": "lacia-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "ae337aaf98f458695f449705784ce64b",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.9",
        "size": 18953,
        "upload_time": "2022-07-18T11:04:46",
        "upload_time_iso_8601": "2022-07-18T11:04:46.984845Z",
        "url": "https://files.pythonhosted.org/packages/1b/7a/927a5021fb2396ec7f9624e03cdd01b3125b4d864e8a5a332fbd8d30405f/lacia-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "9efe1b25fc33209be85fb57e4aa76fe4866b2bf4ceb8464b85c1c87396b49f37",
          "md5": "ec3b8dca7e5f82e3b53b4d98bbff1d4f",
          "sha256": "56437fd18dcaef3551b057596e75578df12d1366fdabdf5da6684cc5b1cfa216"
        },
        "downloads": -1,
        "filename": "lacia-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "ec3b8dca7e5f82e3b53b4d98bbff1d4f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.9",
        "size": 13816,
        "upload_time": "2022-07-18T11:04:49",
        "upload_time_iso_8601": "2022-07-18T11:04:49.337037Z",
        "url": "https://files.pythonhosted.org/packages/9e/fe/1b25fc33209be85fb57e4aa76fe4866b2bf4ceb8464b85c1c87396b49f37/lacia-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a703df0cb0b823d3e9d42917cc26adde671fd7b9e231540cdcbe881dd0084140",
          "md5": "1b4cfd78ee722b9d1cc4ecf0352ab198",
          "sha256": "675c485362930a9c6c58f7cc98ca24524ad4e0c1edb65fe4da1061e266d3708a"
        },
        "downloads": -1,
        "filename": "lacia-0.0.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "1b4cfd78ee722b9d1cc4ecf0352ab198",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.9",
        "size": 19389,
        "upload_time": "2022-07-25T05:33:14",
        "upload_time_iso_8601": "2022-07-25T05:33:14.308002Z",
        "url": "https://files.pythonhosted.org/packages/a7/03/df0cb0b823d3e9d42917cc26adde671fd7b9e231540cdcbe881dd0084140/lacia-0.0.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "9fd693588756705e2de973ab061662eaf3f15c928fcaceeef4b987f249f0297a",
          "md5": "86f46154532bd76a850e67939581f199",
          "sha256": "fc21c207b8605bf83d295cd03e139e7602cd59b37366330e6942db1fcbc81562"
        },
        "downloads": -1,
        "filename": "lacia-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "86f46154532bd76a850e67939581f199",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.9",
        "size": 14114,
        "upload_time": "2022-07-25T05:33:16",
        "upload_time_iso_8601": "2022-07-25T05:33:16.374390Z",
        "url": "https://files.pythonhosted.org/packages/9f/d6/93588756705e2de973ab061662eaf3f15c928fcaceeef4b987f249f0297a/lacia-0.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "24180971b67e8fec5319a18ff4da1db0f3480506bbdd1d7626cded80fe4063a4",
          "md5": "efccb7f48a7e8bb5d8ee1888ab4d6177",
          "sha256": "895c03eacb87f4ef7a9f81eee0698c5329a87875e93f38f1a88739b17876d8e8"
        },
        "downloads": -1,
        "filename": "lacia-0.0.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "efccb7f48a7e8bb5d8ee1888ab4d6177",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.9",
        "size": 19477,
        "upload_time": "2022-07-25T09:48:25",
        "upload_time_iso_8601": "2022-07-25T09:48:25.964923Z",
        "url": "https://files.pythonhosted.org/packages/24/18/0971b67e8fec5319a18ff4da1db0f3480506bbdd1d7626cded80fe4063a4/lacia-0.0.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "fc0f1d1829210c7e562c497193ef5852e16665cab866f42c78eb37e03f85fbe2",
          "md5": "b316d4df1bb47f7dab2a80d26a2058bc",
          "sha256": "ee281df0c64c5097c53bacd4c434e99d1172b68623967fe1a39112e4b8479355"
        },
        "downloads": -1,
        "filename": "lacia-0.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "b316d4df1bb47f7dab2a80d26a2058bc",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.9",
        "size": 14185,
        "upload_time": "2022-07-25T09:48:27",
        "upload_time_iso_8601": "2022-07-25T09:48:27.702326Z",
        "url": "https://files.pythonhosted.org/packages/fc/0f/1d1829210c7e562c497193ef5852e16665cab866f42c78eb37e03f85fbe2/lacia-0.0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "47ea4a171b02932b3c5bf3c8ce92bdad5216f2ba0179c519ea9034713be6efb8",
          "md5": "172828396e139410d5fac83e1507cc6d",
          "sha256": "03bdbc9706ed20e395a8a96038eb49e8a06f40317ed8432b2b6e6b9337fe334c"
        },
        "downloads": -1,
        "filename": "lacia-0.0.5-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "172828396e139410d5fac83e1507cc6d",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.9",
        "size": 19477,
        "upload_time": "2022-08-01T03:24:02",
        "upload_time_iso_8601": "2022-08-01T03:24:02.713859Z",
        "url": "https://files.pythonhosted.org/packages/47/ea/4a171b02932b3c5bf3c8ce92bdad5216f2ba0179c519ea9034713be6efb8/lacia-0.0.5-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2f94fdb6337c17dd425567a23d15b6aae0537abf53d2e088680839ad4fa527d9",
          "md5": "c330e0a66547b256de0b05b409c6c7dc",
          "sha256": "2a5cdbbfd25a55c4134ad2b8628b6758d0146dfefdd725dff3700ae31214f40a"
        },
        "downloads": -1,
        "filename": "lacia-0.0.5.tar.gz",
        "has_sig": false,
        "md5_digest": "c330e0a66547b256de0b05b409c6c7dc",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.9",
        "size": 14072,
        "upload_time": "2022-08-01T03:24:04",
        "upload_time_iso_8601": "2022-08-01T03:24:04.561929Z",
        "url": "https://files.pythonhosted.org/packages/2f/94/fdb6337c17dd425567a23d15b6aae0537abf53d2e088680839ad4fa527d9/lacia-0.0.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "47ea4a171b02932b3c5bf3c8ce92bdad5216f2ba0179c519ea9034713be6efb8",
        "md5": "172828396e139410d5fac83e1507cc6d",
        "sha256": "03bdbc9706ed20e395a8a96038eb49e8a06f40317ed8432b2b6e6b9337fe334c"
      },
      "downloads": -1,
      "filename": "lacia-0.0.5-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "172828396e139410d5fac83e1507cc6d",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.9",
      "size": 19477,
      "upload_time": "2022-08-01T03:24:02",
      "upload_time_iso_8601": "2022-08-01T03:24:02.713859Z",
      "url": "https://files.pythonhosted.org/packages/47/ea/4a171b02932b3c5bf3c8ce92bdad5216f2ba0179c519ea9034713be6efb8/lacia-0.0.5-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "2f94fdb6337c17dd425567a23d15b6aae0537abf53d2e088680839ad4fa527d9",
        "md5": "c330e0a66547b256de0b05b409c6c7dc",
        "sha256": "2a5cdbbfd25a55c4134ad2b8628b6758d0146dfefdd725dff3700ae31214f40a"
      },
      "downloads": -1,
      "filename": "lacia-0.0.5.tar.gz",
      "has_sig": false,
      "md5_digest": "c330e0a66547b256de0b05b409c6c7dc",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.9",
      "size": 14072,
      "upload_time": "2022-08-01T03:24:04",
      "upload_time_iso_8601": "2022-08-01T03:24:04.561929Z",
      "url": "https://files.pythonhosted.org/packages/2f/94/fdb6337c17dd425567a23d15b6aae0537abf53d2e088680839ad4fa527d9/lacia-0.0.5.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}