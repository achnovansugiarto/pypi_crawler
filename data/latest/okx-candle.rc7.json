{
  "info": {
    "author": "pyted",
    "author_email": "pyted@outlook.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: Implementation :: CPython",
      "Programming Language :: Python :: Implementation :: PyPy"
    ],
    "description": "\n# Okx_candle v1.0.7\n\n## 1 Okx_candle的设计目的？\n\n**1.为本地模拟交易提供历史数据**\n\n- 支持OKX交易所中：SPOT现货交易、SWAP永续合约、FUTURES交割合约、OPTION期权的历史K线下载、管理与快速读取。\n\n**2.为实盘交易决策依据**\n\n- 支持现货、合约与期权产品实时最新历史K线数据的缓存更新\n- 获取实时行情数据\n\n**与Binance_candle的使用方法95%以上相似，降低多平台量化交易者的学习成本**\n\n## 2 安装Okx_candle\n\nGITHUB：https://github.com/pyted/okx_candle\n\n```cmd\npip3 install okx_candle\n```\n\n## 3 快速开始\n\n### 3.1 维护产品实时历史K线数据candle_map\n\n\n以永续合约为例，运行run_candle_map函数后，会以多线程的方式维护candle_map属性，保证candle_map的时效性。\n\ncandle_map的格式：candle_map[\\<symbol:str\\>] = \\<candle:np.ndarray\\>\n\n```python\nfrom okx_candle import CandleServer\nfrom pprint import pprint\n\ncandleServer = CandleServer('SWAP')  # SWAP 永续合约\ncandleServer.run_candle_map()\npprint(candleServer.candle_map)\n```\n\n输出：\n\n```text\n>> {\n>>     'BTC-USD-SWAP': array([[1.67556558e+12, 2.33180000e+04, 2.33181000e+04, ...,\n>>             1.92990000e+00, 4.50000000e+04, 1.00000000e+00],\n>>             [1.67556564e+12, 2.33178000e+04, 2.33178000e+04, ...,\n>>             7.12200000e-01, 1.66000000e+04, 1.00000000e+00],\n>>             [1.67556570e+12, 2.33078000e+04, 2.33078000e+04, ...,\n>>             6.67600000e+00, 1.55600000e+05, 1.00000000e+00],\n>>             ...,\n>>             [1.67573820e+12, 2.28659000e+04, 2.28868000e+04, ...,\n>>             3.51203000e+01, 8.03500000e+05, 1.00000000e+00],\n>>             [1.67573826e+12, 2.28770000e+04, 2.28849000e+04, ...,\n>>             1.07466000e+01, 2.45900000e+05, 1.00000000e+00],\n>>             [1.67573832e+12, 2.28851000e+04, 2.28872000e+04, ...,\n>>             7.61250000e+00, 1.74200000e+05, 1.00000000e+00]]),\n>>     ... ...\n>> }\n```\n\n### 3.2 每日定时下载历史K线\n\n以现货交易为例，每天定时下载前一天的历史K线数据。\n\n```python\nfrom okx_candle import CandleServer\n\ncandleServer = CandleServer('SPOT')  # SPOT：现货交易\ncandleServer.download_daily()\n```\n\n### 3.3 获取实时全部产品的行情信息\n\n以SWAP永续合约为例，获取实时行情信息\n\n```python\nfrom okx_candle import CandleServer\nfrom pprint import pprint\n\ncandleServer = CandleServer('SWAP') # SWAP 永续合约\nbookTickerMap = candleServer.market.get_tickersMap()\npprint(bookTickerMap)\n```\n\n输出：\n\n```text\n>> {'code': '0',\n>>  'data': {'1INCH-USD-SWAP': {'askPx': '0.5533',\n>>                              'askSz': '25',\n>>                              'bidPx': '0.5529',\n>>                              'bidSz': '25',\n>>                              'high24h': '0.5731',\n>>                              'instId': '1INCH-USD-SWAP',\n>>                              'instType': 'SWAP',\n>>                              'last': '0.5534',\n>>                              'lastSz': '25',\n>>                              'low24h': '0.5449',\n>>                              'open24h': '0.5702',\n>>                              'sodUtc0': '0.5535',\n>>                              'sodUtc8': '0.5705',\n>>                              'ts': '1675746122612',\n>>                              'vol24h': '38496',\n>>                              'volCcy24h': '686356.4046'},\n>>           '1INCH-USDT-SWAP': {'askPx': '0.5529',\n>>                               'askSz': '602',\n>>                               'bidPx': '0.5528',\n>>                               'bidSz': '1309',\n>>                               'high24h': '0.5742',\n>>                               'instId': '1INCH-USDT-SWAP',\n>>                               'instType': 'SWAP',\n>>                               'last': '0.5528',\n>>                               'lastSz': '1',\n>>                               'low24h': '0.5447',\n>>                               'open24h': '0.5697',\n>>                               'sodUtc0': '0.5545',\n>>                               'sodUtc8': '0.5698',\n>>                               'ts': '1675746159138',\n>>                               'vol24h': '11849879',\n>>                               'volCcy24h': '11849879'},\n>>             ... ...\n>>         },\n>>  'msg': ''}\n```\n\n## 4 历史K线candle的数据说明\n\n### 4.1 K线的格式\n\n为了保证运算的速度，candle采用np.ndarray类型存储。\n\n|列索引|参数名|字段解释|例子|\n|:---|:---|:---|:---|\n|0|ts|开盘时间|1597026383085.0|\n|1|o|开盘价格|3.721|\n|2|h|最高价格|3.743|\n|3|l|最低价格|3.677|\n|4|c|收盘价格|3.708|\n|5|vol|交易量，以张为单位<br/>如果是衍生品合约，数值为合约的张数<br/>如果是币币/币币杠杆，数值为交易货币的数量|8422410.0|\n|6|volCcy|交易量，以币为单位<br/>如果是衍生品合约，数值为交易货币的数量<br/>如果是币币/币币杠杆，数值为计价货币的数量|22698348.04828491|\n|7|volCcyQuote|交易量，以计价货币为单位<br/>如：BTC-USDT和BTC-USDT-SWAP单位均是 USDT；<br/>BTC-USD-SWAP 单位是 USD|12698348.04828491|\n|8|confirm|K线状态<br/>0 代表 K 线未完结<br/>1 代表 K 线已完结|1.0|\n\n\n官方返回的字段类型均为字符串，但对于历史K线数据，Okx_candle中均以np.float64作为存储格式。\n\n注：Python对于数字精度的支持并不优秀，对于模拟运算或者实盘决策，使用浮点数是安全的，但对于交易接口，例如下单的数量和金额，采用字符串类型更为安全，在全部pyted的量化交易架构中，与订单相关的数字对象均采用字符串用于提交。\n\n### 4.2 K线的存储规则\n\n本地历史K线数据是按照日期拆分拆分存储，每个CSV文件保存指定日期指定产品的全部K线数据。\n\n每个CSV文件的时间跨度为：00:00:00 ~ 24:00:00 - \\<bar\\>\n\n如果保存ETH 2023年1月1日 时间粒度bar是1分钟的数据：CSV中的数据条数是1440条，起点为时间：00:00:00，终点时间为：23:59:00，同样如果保存时间粒度bar是1小时的数据，存储的数据时间终点是：23:00:00\n\n由于是按照日期分片存储，'2023-01-01'在美式日期与中国日期对应的时间戳并不相同，okx_candle默认采用'Asia/Shanghai'时区。\n\n![](vx_images/303611812278478.png)\n\n### 4.3 K线的安全性\n\nOkx_candle中的全部K线数据均会受到严格的验证，保证数据的安全性。\n\n- valid_interval 验证数据时间间隔 = \\<bar\\>\n- valid_start 验证数据时间起点 \n- valid_end 验证数据时间终点\n- valid_length 验证数据长度 （仅在维护实时历史K线数据服务的时候使用）\n\n## 5 产品类别instType代号\n\n在实例化CandlerServer时，需要可以传递两个参数，一个是instType产品类别，另一个是rule服务规则。\n\n|产品类别|代号|\n|:---|:---|\n|现货交易|SPOT|\n|永续合约|SWAP|\n|交割合约|FUTURES|\n|期权|OPTION|\n\n**注：Okx_candle的instType不支持Margin（现货杠杆）**\n\n## 6 K线服务规则CandleRule\n\n### 6.1 规则属性总览\n\nCandleRule是CandleServer的运行规则，用户可以自定义规则内容以适应不同的交易场景。\n\n```python\nfrom okx_candle import CandleServer, CandleRule\n\nCandleRule.BAR = '5m'  # K线的时间粒度调整为5分钟\ncandleServer = CandleServer('SPOT', CandleRule)\n```\n\n在CandleServer中，有两个重要的异步方法：\n\n- run_candle_map 异步的方式维护实时历史K线字典 candle_map\n- download_daily 异步的方式每日下载上一天的K线数据\n\n这两个方法均受到CandleRule的规则约束。下面是CandleRule中各个属性的作用规则。\n\n![](vx_images/227196503625093.png)\n\n\n### 6.2 产品名称条件\n\n#### 6.2.1 SYMBOLS 产品名称\n\n类型：Union[str,list]，默认值：'all'\n\n|例子|解释|\n|:---|:---|\n|SYMBOLS = 'all'|维护产品类型中的全部子产品|\n|SYMBOLS = ['BTC-USDT','ETC-USDT']|仅维护BTC-USDT与ETC-USDT|\n\n#### 6.2.2 SYMBOLS_FILTER 过滤产品\n\n类型：list，默认值：''\n\n|例如|解释|\n|:---|:---|\n|SYMBOLS = 'all' ; SYMBOLS_FILTER = ['BTC-USDT']|维护除了BTC-USDT之外全部的产品|\n\n#### 6.2.3 SYMBOL_CONTAINS 产品名称中需包含的内容\n\n类型：str，默认值：''\n\n过滤名称中不包含此内容的产品（区分大小写）。\n\n\n|例如|解释|\n|:---|:---|\n|SYMBOLS = 'all' ; SYMBOL_CONTAINS = 'BTC'|维护名称中包含'BTC'的全部产品|\n\n#### 6.2.4 SYMBOL_ENDSWITH 产品名称必须以何结尾\n\n类型：str，默认值：''\n\n过滤名称中不以此内容结尾的产品（区分大小写）。\n\n\n|例如|解释|\n|:---|:---|\n|SYMBOLS = 'all' ; SYMBOL_ENDSWITH = 'USDT'|维护名称以USDT结尾的全部产品|\n\n如果你仅要维护以USDT为交易货币的产品，可以设置：\n\n- SYMBOLS = 'all'\n- SYMBOLS_ENDSWITH = 'USDT'\n\n### 6.3 K线参数\n\n#### 6.3.1 BAR 时间粒度\n\n类型：str，默认值：candlelite.crypto.okx_lite.OKX_DEFAULT_BAR\n\n历史K线的时间粒度，目前仅支持以分m、小时h、天d为单位。\n\n|例子|解释|\n|:---|:---|\n|1m|1分钟|\n|5m|5分钟|\n|15m|15分钟|\n|1h|1小时|\n|4h|4小时|\n|1d|1天|\n|..|...|\n\n因为Okx_candle对于K线数据的读取使用的是candlelite，许多默认值使用的是candlelite中settings的配置内容。\n\n```python\n# 查看默认配置信息\ncandlelite show_settings \n# 在终端中修改默认配置\ncandlelite console_settings\n# 查看配置文件的路径->用编辑器自行编辑修改\ncandlelite settings_path\n```\n\n### 6.4 K线下载相关\n\n#### 6.4.1 TIMEZONE 时区\n\n类型：Union[str,None]，默认值：candlelite.crypto.okx_lite.OKX_TIMEZONE\n\nTIMEZONE所起的作用：\n\n- 数据存储路径中的文件夹命名\n- 划分一天的起始与终止时间戳\n\n#### 6.4.2 CANDLE_DIR 日期为分割存储的数据路径\n\n类型：str，默认值：candlelite.crypto.okx_lite.OKX_CANDLE_DATE_BASE_DIR\n\n#### 6.4.3 DOWNLOAD_TIME 每日下载昨日K线数据的时间\n\n类型：str，默认值：'00:10:00'\n\nDOWNLAOD_TIME可以决定每天的哪个时间点下载昨日的历史K线数据，作用于两个异步函数：\n\n- run_candle_map\n- download_daily\n\n这两个函数的下载方式不相同，run_candle_map函数会在DOWNLOAD_TIME时刻取出candle_map字典中昨日的K线数据，保存到本地。donwload_daily函数会在DOWNLOAD_TIME时刻向官方发送请求获取昨日K线数据，再保存到本地。\n\n\nDOWNLOAD_TIME的时间格式为：%H:%M:%S，例如DOWNLOAD_TIME = '01:00:00'。\n\nDOWNLOAD_TIME = None 表示禁用实时K线维护的每日下载功能。\n\n需要注意的问题：\n\n1. DOWNLOAD_TIME不应该过早，官方整合上一个单位时间的历史K线一般会有0~2分钟的延误，所以如果BAR='1m'，在'00:00:00'可能无法获取昨日'23:59:00'时刻的历史K线，这样会引发错误。\n\n2. DOWNLOAD_TIME对于run_candle_map异步线程来说，会从candle_map字典中获取昨日的K线数据，所以如果此时candle_map中昨日历史K线数据不足，也会引发异常，可以加大维护的K线长度LENGTH并调整合理的DOWNLOAD_TIME时刻。\n\n### 6.5 秘钥\n\n#### 6.5.1 KEY、SECRET与PASSPHRASE\n\n类型：str，默认值：''\n\nOKX获取行情数据，可以不填写秘钥。\n\n### 6.6 run_candle_map实时K线相关配置\n\n#### 6.6.1 LOCAL_CANDLE_DAYS 启动后下载近期多少日的历史K线数据\n\n类型：Union[int,None]，默认值：2（单位：天）\n\n在启动实时K线服务后，CandleServer将校验本地是否有最近的LOCAL_CANDLE_DAYS产品K线数据，如果没有，则会自动下载\n\nLOCAL_CANDLE_DAYS = None 表示禁用此功能\n\n#### 6.6.2 LENGTH 保留实时K线的长度\n\n类型：int，默认值：2880\n\n保留candle_map字典中各个产品的最新K线数据的行数。\n\n如果某产品刚刚上线，数据长度小于LENGTH，则会被过滤。\n\n#### 6.6.3 UPDATE_INTERVAL_SECONDS 实时K线的更新间隔\n\n类型：int，默认值：3（单位：秒）\n\n将candle_map中的历史K线数据更新到最新时间，每次更新的时间间隔。\n\n#### 6.6.4 CACHE_DELAY_SECONDS 实时K线本地缓存的时间间隔\n\n类型：Union[int,None]，默认值：3600（单位：秒）\n\n间隔多少秒，将candle_map保存到本地，这样可以在服务重启后，快速读取缓存数据，减少访问量与等待时间。\n\nCACHE_DELAY_SECONDS = None 表示禁用此功能\n\n#### 6.6.5 CACHE_DIR 缓存数据路径\n\n类型：str，默认值：'./OKX_CACHE'\n\ncandle_map缓存保存到的文件路径。\n\n### 6.7 日志\n\n#### 6.7.1 LOG_DIRPATH 日志文件夹路径\n\n类型：str，默认值：./OKX_CANDLE_SERVER_LOG_DATA'\n\nOkx_candle中的日志文件按照本地日期与级别分割存储在文件夹中。\n\n#### 6.7.2 LOG_FILE_LEVEL 日志文件级别\n\n类型：str，默认值：'INFO'\n\n储存在日志文件中的级别。\n\n#### 6.7.3 LOG_CONSOLE_LEVEL 日志打印级别\n\n类型：str，默认值：'DEBUG'\n\n终端打印日志的级别。\n\n## 7 维护实时K线字典 candle_map\n\n### 7.1 run_candle_map 方法\n\nCandleServer.run_candle_map先会以堵塞的模式等待第一次candle_map更新完毕，随后以异步多线程的方式实时更新candle_map，以保证数据的实效性与安全性。\n\n如果在更新candle_map中存在某个历史K线有错误，则会从candle_map字典中删除这个symbol的candle。\n\n更新candle_map中默认验证的内容有：\n\n- valid_interval 验证K线时间间隔需要与bar相同\n- valid_end 验证K线的最大时间戳要等于被更新时间\n- valid_length 验证K线的长度需要严格等于LENGTH\n\nrun_candle_map方法执行流程简图：\n\n![](vx_images/176016628950838.png)\n\n### 7.2 candle_map 实时K线字典属性\n\n格式：candle_map[\\<symbol:str\\>] = \\<candle:np.ndarray\\>\n\n- KEY：symbol 产品名称\n- VALUE：candle np.ndarray类型的K线数据\n\n### 7.3 get_candle_security 安全获取实时K线\n\n|参数|类型|说明|\n|:---|:---|:---|\n|symbol|str|产品名称|\n|security_seconds|int|安全间隔（单位：秒）|\n\n为什么要有这个方法：\n\ncandle_map会使用基准产品的历史K线最新时间点为基准更新，但是官方更新最近时间点的历史K线数据往往存在0~2分钟的时间差甚至更多，服务器访问更新也需要花费时间，get_candle_security可以验证candle_map中产品的K线最大时间与当前时间的差值，如果差值过大，视为不安全，返回空数组，如果满足在预设时间差值以内，则正常返回。\n\n\n以永续合约为例，实时更新全部产品的历史K线数据\n\n```python\nfrom okx_candle import CandleServer\nimport time\n\ncandleServer = CandleServer('SWAP')\ncandleServer.run_candle_map()\n\nwhile True:\n    for symbol in candleServer.candle_map.keys():\n        print(\n            symbol,\n            candleServer.get_candle_security(symbol, security_seconds=60)\n        )\n        time.sleep(1)\n```\n\n### 7.4 close_run_candle_map 关闭实时K线数据更新服务\n\nclose_run_candle_map仅作用于异步运行，为了保证异步的安全性，关闭方法会等待异步程序阶段性运行结束后关闭，例如避免在保存本地数据的时候发生了终止，造成数据错误。\n\n## 8 下载历史K线\n\n### 8.1 download_candles_by_date 方法\n\n下载从start日期到end日期（包括end），规则产品的历史K线数据。\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|start|Union[int,float,str,datetime.date]|无|起始日期|\n|end|Union[int,float,str,datetime.date,None]|None|终止日期 None表示昨日|\n|replace|bool|False|如果本地数据已存在，是否下载替换|\n\nstart与end支持整数与浮点数类型的**毫秒**时间戳、日期格式的字符串与日期类型。\n\n例如：\n\n```python\nstart = 1672502400000 # 毫秒时间戳（北京时间2023-01-01 00:00:00）\nstart = '2023-01-02' # 日期类型字符串(中国时间格式)\nstart = '01/02/2023' # 日期类型字符串(美国时间格式)\nstart = pendulum.yesterday('Asia/Shanghai') # 日期类型\nstart = datetime.date(2023,1,2) # 日期格式\n```\n\n如果start或end为日期形式的字符串，Okx_candle会将其转化为CandleRule中TIMEZONE对应的日期。所以中国时间格式与美国时间格式是等价的。\n\n下载从start~end的数据，数据终点是被包含的。\n\n例如：start = '2023-01-01' end = '2023-01-03'，会下载 ['2023-01-01','2023-01-02','2023-01-03'] 三天的数据。\n\n以日期为拆分存储，每一天的数据不会包含下一天的时间起点。\n\n例如：\n\n|BAR|每天数据的最后时刻K线的开盘时间|\n|:---|:---|  \n|1m|23:59:00|\n|5m|23:55:00|\n|1h|23:00:00|\n\n例子：\n\n下载现货BTC-USDT与ETC-USDT，从中国时间2023-01-01~2023-01-10，时间粒度为1m的K线数据。\n\n```python\nfrom okx_candle import CandleServer, CandleRule\n\nCandleRule.BAR = '1m'\nCandleRule.SYMBOLS = ['BTC-USDT', 'ETC-USDT']\nCandleRule.TIMEZONE = 'Asia/Shanghai'\n\ncandleServer = CandleServer('SPOT', CandleRule)\n\ncandleServer.download_candles_by_date(\n    start='2022-01-01',\n    end='2022-01-10',\n)\n```\n\n### 8.2 download_daily 方法\n\n每日定点下载昨日历史K线数据的服务，异步执行。\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|start|Union[int,float,str,datetime.date,None]|None|补充下载从start~yesterday的数据 start=None等价于start=yesterday|\n|replace|bool|False|本地已存在的数据是否重新下载替换|\n\ndownload_daily是完全异步执行的，先补充下载start~yesterday的历史K线数据，随后在每天的DOWNLOAD_TIME下载昨日的历史K线数据。\n\n例子：\n\n开启服务，每天定时下载现货产品的历史K线数据，K线参数与时区均等均选择默认值。\n\n```python\nfrom okx_candle import CandleServer\n\ncandleServer = CandleServer('SPOT')\ncandleServer.download_daily()\n```\n\n### 8.3 close_download_daily 关闭每日K线下载服务\n\n为了保证异步的安全性，关闭方法会等待异步程序阶段性运行结束后关闭，例如避免在保存本地数据的时候发生了终止，造成数据错误。\n\n## 9 行情数据\n\n### 9.1 行情数据的规则\n\n行情数据支持：SPOT现货、SWAP永续合约、FUTURES交割合约与OPTION期权。\n\n导入行情数据模块\n\n```python\nfrom okx_candle import Market\n\nmarket = Market(\n    instType='SPOT',  # 产品类型 SPOT | SWAP | FUTURES | OPTION\n    timezone='Asia/Shanghai'  # 时区\n)\n```\n\n也可以使用CandleServer中的market模块\n\n```python\nfrom okx_candle import CandleServer\n\ncandleServer = CandleServer('SPOT')\nmarket = candleServer.market\n```\n\n行情数据的返回格式均为：{'code':<状态码>, 'data':<主体数据>, 'msg':<提示信息>}\n\n状态码为'0'表示成功。\n\n### 9.2 行情信息\n\n#### 9.2.1 get_tickers 全部产品的行情列表\n\n例如获取现货交易全部的行情信息列表\n\n```python\nfrom okx_candle.market import Market\nfrom pprint import pprint\n\ntickers = Market('SPOT').get_tickers()\npprint(tickers)\n```\n\n输出：\n\n```text\n>> {'code': '0',\n>>  'data': [{'askPx': '0.00000727',\n>>            'askSz': '15.9952',\n>>            'bidPx': '0.00000719',\n>>            'bidSz': '36.1832',\n>>            'high24h': '0.00000725',\n>>            'instId': 'BCD-BTC',\n>>            'instType': 'SPOT',\n>>            'last': '0.00000725',\n>>            'lastSz': '7.0502',\n>>            'low24h': '0.00000644',\n>>            'open24h': '0.00000689',\n>>            'sodUtc0': '0.0000067',\n>>            'sodUtc8': '0.00000664',\n>>            'ts': '1675746511714',\n>>            'vol24h': '31478.67',\n>>            'volCcy24h': '0.2129'},\n>>            ... ...\n>>         ],\n>>  'msg': ''}\n```\n\n#### 9.2.2 get_tickersMap 全部产品的行情字典\n\n例如获取SWAP永续合约交易全部的行情信息字典\n\n```python\nfrom okx_candle.market import Market\nfrom pprint import pprint\n\ntickersMap = Market('SPOT').get_tickersMap()\npprint(tickersMap)\n```\n\n输出：\n\n```text\n>> {'code': '0',\n>>  'data': {'1INCH-USDC': {'askPx': '0.5543',\n>>                          'askSz': '488.759',\n>>                          'bidPx': '0.5532',\n>>                          'bidSz': '22.1968',\n>>                          'high24h': '0.5727',\n>>                          'instId': '1INCH-USDC',\n>>                          'instType': 'SPOT',\n>>                          'last': '0.5543',\n>>                          'lastSz': '94.4831',\n>>                          'low24h': '0.5467',\n>>                          'open24h': '0.57',\n>>                          'sodUtc0': '0.5487',\n>>                          'sodUtc8': '0.5704',\n>>                          'ts': '1675746666011',\n>>                          'vol24h': '12975.2687',\n>>                          'volCcy24h': '7331.7333'},\n>>           '1INCH-USDT': {'askPx': '0.5536',\n>>                          'askSz': '500.647097',\n>>                          'bidPx': '0.5534',\n>>                          'bidSz': '463.1052',\n>>                          'high24h': '0.5736',\n>>                          'instId': '1INCH-USDT',\n>>                          'instType': 'SPOT',\n>>                          'last': '0.5535',\n>>                          'lastSz': '36.127166',\n>>                          'low24h': '0.5444',\n>>                          'open24h': '0.5696',\n>>                          'sodUtc0': '0.5541',\n>>                          'sodUtc8': '0.5699',\n>>                          'ts': '1675746689411',\n>>                          'vol24h': '2620706.912348',\n>>                          'volCcy24h': '1471994.111741'},\n>>             ... ...\n>>         },\n>>  'msg': ''}\n```\n\n#### 9.2.3 get_ticker单个产品的行情信息\n\n获取现货交易BTC-USDT的行情信息\n\n```python\nfrom okx_candle.market import Market\nfrom pprint import pprint\n\nticker= Market('SPOT').get_ticker('BTC-USDT')\npprint(ticker)\n```\n\n输出：\n\n```text\n>> {'code': '0',\n>>  'data': {'askPx': '22899',\n>>            'askSz': '2.33950433',\n>>            'bidPx': '22898.9',\n>>            'bidSz': '0.0158674',\n>>            'high24h': '23158.5',\n>>            'instId': 'BTC-USDT',\n>>            'instType': 'SPOT',\n>>            'last': '22899.1',\n>>            'lastSz': '0.0088645',\n>>            'low24h': '22617.6',\n>>            'open24h': '22873.4',\n>>            'sodUtc0': '22761.7',\n>>            'sodUtc8': '23044',\n>>            'ts': '1675746841912',\n>>            'vol24h': '4964.63889278',\n>>            'volCcy24h': '113460685.97182664'},\n>>  'msg': ''}\n```\n\n### 9.3 深度信息\n\n\n#### 9.3.1 get_books 获取指定数量的交易深度\n\n获取BTC-USDT数量为10的交易深度\n\n```python\nfrom okx_candle.market import Market\nfrom pprint import pprint\n\n# 获取BTC-USDT数量为10的交易深度\nbooks = Market('SPOT').get_books(symbol='BTC-USDT', sz=10)\npprint(books)\n```\n\n输出：\n\n```text\n>> {'code': '0',\n>>  'data': {'asks': [['22984.1', '0.04262762', '0', '1'],\n>>                     ['22984.4', '0.00001418', '0', '1'],\n>>                     ['22984.6', '0.00122351', '0', '1'],\n>>                     ['22984.7', '0.18242595', '0', '1'],\n>>                     ['22984.8', '0.43504989', '0', '1'],\n>>                     ['22984.9', '0.02', '0', '1'],\n>>                     ['22985', '0.00073602', '0', '2'],\n>>                     ['22985.2', '0.00027888', '0', '2'],\n>>                     ['22985.6', '0.06865', '0', '1'],\n>>                     ['22986', '0.2', '0', '1']],\n>>            'bids': [['22984', '2.39785187', '0', '6'],\n>>                     ['22983.9', '0.50376', '0', '1'],\n>>                     ['22983.8', '0.50376', '0', '1'],\n>>                     ['22983.3', '0.52508576', '0', '3'],\n>>                     ['22983.2', '0.70027528', '0', '3'],\n>>                     ['22982.4', '0.28512292', '0', '1'],\n>>                     ['22982.2', '0.48940938', '0', '2'],\n>>                     ['22982.1', '0.14110164', '0', '3'],\n>>                     ['22981.7', '0.405', '0', '1'],\n>>                     ['22981.4', '1.07226237', '0', '1']],\n>>            'ts': '1675751273508'},\n>>  'msg': ''}\n```\n\n#### 9.3.2 get_books_lite 获取产品轻量深度\n\n获取BTC-USDT产品轻量深度\n\n```python\nfrom okx_candle.market import Market\nfrom pprint import pprint\n\n# 获取BTC-USDT产品轻量深度\nbooks_lite = Market('SPOT').get_books_lite(symbol='BTC-USDT')\npprint(books_lite)\n```\n\n输出：\n\n```text\n>> {'code': '0',\n>>  'data': {'asks': [['22971.9', '0.71286', '0', '2'],\n>>                     ['22973.5', '0.23401145', '0', '1'],\n>>                     ['22973.6', '0.081', '0', '1'],\n>>                     ['22973.7', '0.43499859', '0', '1'],\n>>                     ['22974', '0.06903', '0', '1'],\n>>                     ['22974.4', '0.004', '0', '1'],\n>>                     ['22974.5', '0.5', '0', '1'],\n>>                     ['22974.6', '0.43564805', '0', '1'],\n>>                     ['22974.7', '1.08912', '0', '1'],\n>>                     ['22975.2', '0.47865', '0', '1'],\n>>                     ['22975.7', '1.00070534', '0', '2'],\n>>                     ['22975.8', '1.19917196', '0', '2'],\n>>                     ['22976.1', '0.89389485', '0', '2'],\n>>                     ['22976.3', '1.02', '0', '1'],\n>>                     ['22976.5', '1.23', '0', '1'],\n>>                     ['22976.9', '0.522369', '0', '1'],\n>>                     ['22977', '0.06903', '0', '1'],\n>>                     ['22977.2', '0.459716', '0', '2'],\n>>                     ['22977.6', '0.19495', '0', '1'],\n>>                     ['22977.7', '0.69824', '0', '3'],\n>>                     ['22978.4', '0.04353153', '0', '1'],\n>>                     ['22978.6', '0.03101096', '0', '1'],\n>>                     ['22978.8', '0.19495', '0', '1'],\n>>                     ['22979.8', '0.10400006', '0', '1'],\n>>                     ['22979.9', '0.21753307', '0', '2']],\n>>            'bids': [['22971.8', '0.46432166', '0', '9'],\n>>                     ['22971.7', '0.21764725', '0', '1'],\n>>                     ['22970.7', '0.25', '0', '1'],\n>>                     ['22970.5', '0.25', '0', '1'],\n>>                     ['22970.3', '0.45233576', '0', '1'],\n>>                     ['22970.2', '1.32413482', '0', '3'],\n>>                     ['22970.1', '0.26602378', '0', '1'],\n>>                     ['22970', '2.17468626', '0', '2'],\n>>                     ['22969.6', '0.06903', '0', '1'],\n>>                     ['22969.5', '0.405', '0', '1'],\n>>                     ['22969.1', '0.02829885', '0', '1'],\n>>                     ['22969', '0.01004368', '0', '1'],\n>>                     ['22968.9', '0.19497', '0', '1'],\n>>                     ['22968.7', '1.026129', '0', '2'],\n>>                     ['22968.6', '0.02211866', '0', '1'],\n>>                     ['22968.5', '0.004', '0', '1'],\n>>                     ['22968.4', '0.48971419', '0', '1'],\n>>                     ['22968.2', '0.43536205', '0', '1'],\n>>                     ['22968.1', '0.0131622', '0', '1'],\n>>                     ['22968', '0.19496', '0', '1'],\n>>                     ['22967.9', '0.10111929', '0', '1'],\n>>                     ['22967.8', '0.049236', '0', '1'],\n>>                     ['22967.6', '1.08912', '0', '1'],\n>>                     ['22967.4', '0.00229642', '0', '1'],\n>>                     ['22967.1', '15.97347853', '0', '1']],\n>>            'ts': '1675751401319'},\n>>  'msg': ''}\n```\n\n### 9.4 交易规范\n\n#### 9.4.1 缓存机制\n\n交易规范的返回信息内容较多，且本身改动频率较小，在Okx_candle中默认采用缓存的方式获取交易规范结果，以提高速度。\n\n第一次获取交易规范信息会向官方发送请求，将请求结果保存在缓存中，随后再次获取交易规范信息会验证上次缓存的数据是否符合过期，过期则重新访问，否则返回缓存数据。\n\n如果不使用缓存，可以将过期时间expire_seconds设置为0（单位：秒）。\n\n#### 9.4.2 get_exchangeInfos 完整的交易规范\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|expire_seconds|int|300|缓存过期时间|\n|uly|str|''|标的指数，仅适用于交割/永续/期权，期权必填|\n\n获取现货交易的交易规则信息。\n\n```python\nfrom okx_candle import Market\nfrom pprint import pprint\n\nexchangeInfos = Market('SPOT').get_exchangeInfos()\npprint(exchangeInfos)\n```\n\n输出：\n\n```text\n>> {'code': '0',\n>>  'data': [{'alias': '',\n>>            'baseCcy': 'BTC',\n>>            'category': '1',\n>>            'ctMult': '',\n>>            'ctType': '',\n>>            'ctVal': '',\n>>            'ctValCcy': '',\n>>            'expTime': '',\n>>            'instFamily': '',\n>>            'instId': 'BTC-USDT',\n>>            'instType': 'SPOT',\n>>            'lever': '10',\n>>            'listTime': '1548133413000',\n>>            'lotSz': '0.00000001',\n>>            'maxIcebergSz': '9999999999',\n>>            'maxLmtSz': '9999999999',\n>>            'maxMktSz': '1000000',\n>>            'maxStopSz': '1000000',\n>>            'maxTriggerSz': '9999999999',\n>>            'maxTwapSz': '9999999999',\n>>            'minSz': '0.00001',\n>>            'optType': '',\n>>            'quoteCcy': 'USDT',\n>>            'settleCcy': '',\n>>            'state': 'live',\n>>            'stk': '',\n>>            'tickSz': '0.1',\n>>            'uly': ''},\n>>            'state': 'live',\n>>            'stk': '',\n>>            'tickSz': '0.01',\n>>            'uly': ''},\n>>            ... ...\n>>         ],\n>>  'msg': ''}\n```\n\n#### 9.4.3 get_exchangeInfo 单个产品的交易规范\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|symbol|str|无|产品名称|\n|expire_seconds|int|300|缓存过期时间|\n|uly|str|''|标的指数，仅适用于交割/永续/期权，期权必填|\n\n\n获取永续合约中BTC-USDT-SWAP的交易规范\n\n```python\nfrom okx_candle import Market\nfrom pprint import pprint\n\nexchangeInfos = Market('SWAP').get_exchangeInfo(symbol='BTC-USDT-SWAP')\npprint(exchangeInfos)\n```\n\n输出：\n\n```text\n>> {'code': '0',\n>>  'data': {'alias': '',\n>>           'baseCcy': '',\n>>           'category': '1',\n>>           'ctMult': '1',\n>>           'ctType': 'linear',\n>>           'ctVal': '0.01',\n>>           'ctValCcy': 'BTC',\n>>           'expTime': '',\n>>           'instFamily': 'BTC-USDT',\n>>           'instId': 'BTC-USDT-SWAP',\n>>           'instType': 'SWAP',\n>>           'lever': '125',\n>>           'listTime': '1611916828000',\n>>           'lotSz': '1',\n>>           'maxIcebergSz': '100000000',\n>>           'maxLmtSz': '100000000',\n>>           'maxMktSz': '10000',\n>>           'maxStopSz': '10000',\n>>           'maxTriggerSz': '100000000',\n>>           'maxTwapSz': '100000000',\n>>           'minSz': '1',\n>>           'optType': '',\n>>           'quoteCcy': '',\n>>           'settleCcy': 'USDT',\n>>           'state': 'live',\n>>           'stk': '',\n>>           'tickSz': '0.1',\n>>           'uly': 'BTC-USDT'},\n>>  'msg': ''}\n```\n\n\n#### 9.4.4 get_symbols_trading_on 获取可以交易的产品名称\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|expire_seconds|int|300|缓存过期时间|\n|uly|str|''|标的指数，仅适用于交割/永续/期权，期权必填|\n\n获取交割合约正在交易的产品名称列表\n\n```python\nfrom okx_candle import Market\nfrom pprint import pprint\n\nexchangeInfos = Market('FUTURES').get_symbols_trading_on()\npprint(exchangeInfos)\n```\n\n输出：\n\n```text\n>> {'code': '0',\n>>  'data': ['BTC-USD-230210',\n>>           'BTC-USD-230217',\n>>           'BTC-USD-230331',\n>>           'BTC-USD-230630',\n>>           'ETH-USD-230210',\n>>           ... ...\n>>           ],\n>>  'msg': ''}\n```\n\n#### 9.4.5 get_symbols_trading_off 获取不可交易的产品名称\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|expire_seconds|int|300|缓存过期时间|\n|uly|str|''|标的指数，仅适用于交割/永续/期权，期权必填|\n\n获取交割合约不可交易产品名称列表\n\n```python\nfrom okx_candle import Market\nfrom pprint import pprint\n\nexchangeInfos = Market('FUTURES').get_symbols_trading_off()\npprint(exchangeInfos)\n```\n\n输出：\n\n```text\n>> {'code': '0', 'data': [], 'msg': ''}\n```\n\n## 10 历史K线管理\n\n### 10.1 OkxLite 简介\n\n\nOkxLite基于candlelite的IO为底层，用于维护本地OKX历史K线数据，由于OkxLite采用日期分割的CSV文件存储，不需要安装第三方数据库。并且由于默认系统路径的配置可以使不同路径的项目共享历史K线数据。\n\n```python\nfrom okx_candle import OkxLite\n\nokxLite = OkxLite()\ncandle = okxLite.load_candle_by_date(\n    instType='SPOT',\n    symbol='BTC-USDT',\n    start='2023-02-05',\n    end='2023-02-06',\n)\nprint(candle)\n```\n\n对于任何历史K线数据的读取，都需要时区timezone、时间粒度bar、数据位置base_dir，如果在调用函数的时候不指定这三个内容，将使用candlelite的默认配置。\n\n你可以在candlelite中查看OKX默认的配置内容。\n\n```cmd\ncandlelite show_settings # 查看配置信息\n```\n\n输出：\n\n```text\n>> # 历史K线数据根目录\n>> CANDLE_BASE_DIR = 'CANDLELITE_DATA'\n>> # OKX以日期为单位的存储目录\n>> OKX_DATE_DIRNAME = 'OKX'\n>> # OKX以文件为单位的存储目录\n>> OKX_FILE_DIRNAME = 'OKX_FILE'\n>> # OKX的默认时区\n>> OKX_TIMEZONE = 'Asia/Shanghai'\n>> # OKX的默认时间粒度\n>> OKX_DEFAULT_BAR = '1m'\n>> # BINANCE以日期为单位的存储目录\n>> BINANCE_DATE_DIRNAME = 'BINANCE'\n>> # BINANCE以文件为单位的存储目录\n>> BINANCE_FILE_DIRNAME = 'BINANCE_FILE'\n>> # BINANCE的默认时区\n>> BINANCE_TIMEZONE = 'America/New_York'\n>> # BINANCE的默认时间粒度\n>> BINANCE_DEFAULT_BAR = '1m'\n```\n\n修改配置内容\n\n```cmd\ncandlelite console_settings\n```\n\n为了让多个不同路径本地项目可以共享数据，可以将\"CANDLE_BASE_DIR\"设置为绝对路径，例如：'/root/CANDLELITE_DATA' 或 'd:\\CANDLELITE_DATA'。\n\n### 10.2 读取数据\n\n#### 10.2.1 load_candle_by_date \n\nload_candle_by_date 以日期为单位读取单个产品历史K线数据\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|instType|str|无|产品类别（现货：SPOT、永续合约：SWAP、交割合约：FUTURES、期权：OPTION）|\n|symbol|str|无|产品名称|\n|start|Union[int,float,str,datetime.date]|无|起始日期|\n|end|Union[int,float,str,datetime.date]|无|终止日期|\n|base_dir|Union[str,None]|None|数据根目录，None使用candlelite中Okx的默认根目录|\n|timezone|Union[str,None]|None|时区，None使用candlelite中Okx的默认时区|\n|bar|Union[str,None]|None|时间粒度，None使用candlelite中Okx的默认时间粒度|\n|valid_interval|bool|True|是否验证数据的时间间隔|\n|valid_start|bool|True|是否验证数据的时间起点|\n|valid_end|bool|True|是否验证数据的时间终点|\n\n\n读取永续合约中BTC-USDT-SWAP从2023-02-05 ~ 2023-02-06 的历史K线数据\n\n```python\nfrom okx_candle import OkxLite\nfrom okx_candle.utils import candle_to_df\n\nokxLite = OkxLite()\ncandle = okxLite.load_candle_by_date(\n    instType='SWAP',\n    symbol='BTC-USDT-SWAP',\n    start='2023-02-05',\n    end='2023-02-06',\n)\nprint(candle)\nprint(candle_to_df(candle))\n```\n\n输出：\n\n```text\n>> [[1.67552640e+12 2.34210000e+04 2.34210000e+04 ... 1.43600000e+01\n>>   3.36317906e+05 1.00000000e+00]\n>>  [1.67552646e+12 2.34180000e+04 2.34204000e+04 ... 1.14600000e+01\n>>   2.68392212e+05 1.00000000e+00]\n>>  [1.67552652e+12 2.34189000e+04 2.34189000e+04 ... 2.64600000e+01\n>>   6.19663133e+05 1.00000000e+00]\n>>  ...\n>>  [1.67569902e+12 2.30466000e+04 2.30646000e+04 ... 6.09610000e+02\n>>   1.40355779e+07 1.00000000e+00]\n>>  [1.67569908e+12 2.30215000e+04 2.30581000e+04 ... 2.97780000e+02\n>>   6.86059486e+06 1.00000000e+00]\n>>  [1.67569914e+12 2.30259000e+04 2.30500000e+04 ... 4.57730000e+02\n>>   1.05412472e+07 1.00000000e+00]]\n>>                        ts        o        h  ...   volCcy   volCcyQuote  confirm\n>> 0     2023-02-05 00:00:00  23421.0  23421.0  ...    14.36  3.363179e+05        1\n>> 1     2023-02-05 00:01:00  23418.0  23420.4  ...    11.46  2.683922e+05        1\n>> 2     2023-02-05 00:02:00  23418.9  23418.9  ...    26.46  6.196631e+05        1\n>> 3     2023-02-05 00:03:00  23418.9  23418.9  ...    29.65  6.943548e+05        1\n>> 4     2023-02-05 00:04:00  23418.8  23418.8  ...     9.19  2.152163e+05        1\n>> ...                   ...      ...      ...  ...      ...           ...      ...\n>> 2875  2023-02-06 23:55:00  22904.4  22926.9  ...   190.28  4.359824e+06        1\n>> 2876  2023-02-06 23:56:00  22905.9  23059.7  ...  2489.29  5.725731e+07        1\n>> 2877  2023-02-06 23:57:00  23046.6  23064.6  ...   609.61  1.403558e+07        1\n>> 2878  2023-02-06 23:58:00  23021.5  23058.1  ...   297.78  6.860595e+06        1\n>> 2879  2023-02-06 23:59:00  23025.9  23050.0  ...   457.73  1.054125e+07        1\n>> \n>> [2880 rows x 9 columns]\n```\n\n#### 10.2.1 load_candle_map_by_date\n\n load_candle_map_by_date 以日期为单位读取全部产品历史K线数据字典\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|instType|str|无|产品类别（现货：SPOT、永续合约：SWAP、交割合约：FUTURES、期权：OPTION）|\n|symbols|list|无|产品名称列表，如果为空列表，读取从start~end范围数据完整的全部产品|\n|start|Union[int,float,str,datetime.date]|无|起始日期|\n|end|Union[int,float,str,datetime.date]|无|终止日期|\n|base_dir|Union[str,None]|None|数据根目录，None使用candlelite中Okx的默认根目录|\n|timezone|Union[str,None]|None|时区，None使用candlelite中Okx的默认时区|\n|bar|Union[str,None]|None|时间粒度，None使用candlelite中Okx的默认时间粒度|\n|contains|str|''|产品名称中需包含的内容，不满足则过滤读取|\n|endswith|str|''|产品名称中需以何结尾，不满足则过滤读取|\n|p_num|int|4|使用多进程加速读取，进程个数|\n|valid_interval|bool|True|是否验证数据的时间间隔|\n|valid_start|bool|True|是否验证数据的时间起点|\n|valid_end|bool|True|是否验证数据的时间终点|\n\n\n\n\n读取SWAP永续合约从2023-02-05 ~ 2023-02-06 的历史K线数据字典\n\n```python\nfrom okx_candle import OkxLite\nfrom pprint import pprint\n\nokxLite = OkxLite()\ncandle_map = okxLite.load_candle_map_by_date(\n    instType='SWAP',\n    symbols=[],\n    start='2023-02-05',\n    end='2023-02-06',\n)\npprint(candle_map)\n```\n\n输出：\n\n```text\n>> {'1INCH-USD-SWAP': array([[1.67552640e+12, 5.93500000e-01, 5.93500000e-01, ...,\n>>         3.07623541e+04, 1.82200000e+04, 1.00000000e+00],\n>>        [1.67552646e+12, 5.91000000e-01, 5.91000000e-01, ...,\n>>         2.03057100e+02, 1.20000000e+02, 1.00000000e+00],\n>>        [1.67552652e+12, 5.89700000e-01, 5.89700000e-01, ...,\n>>         1.16300361e+04, 6.85000000e+03, 1.00000000e+00],\n>>        ...,\n>>        [1.67569902e+12, 5.69000000e-01, 5.69000000e-01, ...,\n>>         1.00271660e+03, 5.70000000e+02, 1.00000000e+00],\n>>        [1.67569908e+12, 5.69300000e-01, 5.69300000e-01, ...,\n>>         1.12456120e+03, 6.40000000e+02, 1.00000000e+00],\n>>        [1.67569914e+12, 5.69900000e-01, 5.69900000e-01, ...,\n>>         2.63204100e+02, 1.50000000e+02, 1.00000000e+00]]),\n>>  '1INCH-USDT-SWAP': array([[1.67552640e+12, 5.92800000e-01, 5.92800000e-01, ...,\n>>         2.85980000e+04, 1.69345529e+04, 1.00000000e+00],\n>>        [1.67552646e+12, 5.91600000e-01, 5.91900000e-01, ...,\n>>         6.96700000e+03, 4.12095040e+03, 1.00000000e+00],\n>>        [1.67552652e+12, 5.90800000e-01, 5.90800000e-01, ...,\n>>         4.13370000e+04, 2.43720806e+04, 1.00000000e+00],\n>>        ...,\n>>        [1.67569902e+12, 5.68500000e-01, 5.68900000e-01, ...,\n>>         1.28770000e+04, 7.31486060e+03, 1.00000000e+00],\n>>        [1.67569908e+12, 5.67900000e-01, 5.69400000e-01, ...,\n>>         1.89130000e+04, 1.07618407e+04, 1.00000000e+00],\n>>        [1.67569914e+12, 5.68900000e-01, 5.70200000e-01, ...,\n>>         8.65900000e+03, 4.93041580e+03, 1.00000000e+00]]),\n>> ... ...\n>> }\n```\n\n\n\n### 10.3 保存数据\n\n#### 10.3.1 save_candle_by_date\n\nsave_candle_by_date 以日期为单位保存单个产品历史K线数据\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|candle|np.ndarray|无|历史K线数据|\n|instType|str|无|产品类别（现货：SPOT、永续合约：SWAP、交割合约：FUTURES、期权：OPTION）|\n|symbol|str|无|产品名称|\n|start|Union[int,float,str,datetime.date]|无|起始日期|\n|end|Union[int,float,str,datetime.date]|无|终止日期|\n|base_dir|Union[str,None]|None|数据根目录，None使用candlelite中Okx的默认根目录|\n|timezone|Union[str,None]|None|时区，None使用candlelite中Okx的默认时区|\n|bar|Union[str,None]|None|时间粒度，None使用candlelite中Okx的默认时间粒度|\n|replace|bool|False|是否替换本地数据|\n|drop_duplicate|bool|True|是否去重|\n|sort|bool|True|是否按照时间戳排序|\n|valid_interval|bool|True|是否验证数据的时间间隔|\n|valid_start|bool|True|是否验证数据的时间起点|\n|valid_end|bool|True|是否验证数据的时间终点|\n\n读取永续合约中BTC-USDT-SWAP从 2023-02-01 ~ 2023-02-06 日的历史K线数据，截取2023-02-05日的数据，保存到指定文件夹。\n\n```python\nfrom okx_candle import OkxLite\n\ninstType = 'SWAP'\nsymbol = 'BTC-USDT-SWAP'\nokxLite = OkxLite()\n\n# 读取\ncandle = okxLite.load_candle_by_date(\n    instType=instType,\n    symbol=symbol,\n    start='2023-02-01',\n    end='2023-02-6',\n)\n\n# 保存\nokxLite.save_candle_by_date(\n    candle=candle,\n    instType=instType,\n    symbol=symbol,\n    start='2023-02-05',\n    end='2023-02-05',\n    base_dir='./target_dir'\n)\n```\n\n\n#### 10.3.2 save_candle_map_by_date\n\nsave_candle_by_date 以日期为单位保存产品历史K线数据字典\n\n|参数|类型|默认值|说明|\n|:---|:---|:---|:---|\n|candle_map|dict|无|历史K线数据字典|\n|instType|str|无|产品类别（现货：SPOT、永续合约：SWAP、交割合约：FUTURES、期权：OPTION）|\n|symbols|list|无|保存的产品名称，空列表表示candle_map中的全部产品|\n|start|Union[int,float,str,datetime.date]|无|起始日期|\n|end|Union[int,float,str,datetime.date]|无|终止日期|\n|base_dir|Union[str,None]|None|数据根目录，None使用candlelite中Okx的默认根目录|\n|timezone|Union[str,None]|None|时区，None使用candlelite中Okx的默认时区|\n|bar|Union[str,None]|None|时间粒度，None使用candlelite中Okx的默认时间粒度|\n|replace|bool|False|是否替换本地数据|\n|drop_duplicate|bool|True|是否去重|\n|sort|bool|True|是否按照时间戳排序|\n|valid_interval|bool|True|是否验证数据的时间间隔|\n|valid_start|bool|True|是否验证数据的时间起点|\n|valid_end|bool|True|是否验证数据的时间终点|\n\n读取现货从2023-01-01 ~ 2023-01-10 的历史K线数据字典，截取2023-01-05 ~ 2023-01-06 日期范围数据保存到指定文件夹中。\n\n```python\nfrom okx_candle import OkxLite\n\ninstType = 'SWAP'\nokxLite = OkxLite()\n\n# 读取\ncandle_map = okxLite.load_candle_map_by_date(\n    instType='SWAP',\n    symbols=[],\n    start='2023-01-01',\n    end='2023-01-10',\n)\n\n# 保存\nokxLite.save_candle_map_by_date(\n    candle_map=candle_map,\n    instType=instType,\n    symbols=[],\n    start='2023-01-05',\n    end='2023-01-06',\n    base_dir='./target_dir'\n)\n```\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/pyted/okx_candle",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "okx-candle",
    "package_url": "https://pypi.org/project/okx-candle/",
    "platform": null,
    "project_url": "https://pypi.org/project/okx-candle/",
    "project_urls": {
      "Homepage": "https://github.com/pyted/okx_candle"
    },
    "release_url": "https://pypi.org/project/okx-candle/1.0.7/",
    "requires_dist": [
      "pendulum",
      "numpy",
      "pandas",
      "requests",
      "candlelite",
      "okx-api",
      "paux"
    ],
    "requires_python": ">=3.6.0",
    "summary": "OKX local and real-time market candle server",
    "version": "1.0.7",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17169956,
  "releases": {
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4c4df264c20c03b04bfbaaf54fdcd55b2aa0744179fa7f34f3d5053b03a0ca58",
          "md5": "7bfcee3a9bdddfa85f76286fe7ea733b",
          "sha256": "bbb4080e3ece8100628c9fef6611c2429e42ac159c12d49f5faa8ae645795e98"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "7bfcee3a9bdddfa85f76286fe7ea733b",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.0",
        "size": 17629,
        "upload_time": "2023-02-06T12:20:39",
        "upload_time_iso_8601": "2023-02-06T12:20:39.829557Z",
        "url": "https://files.pythonhosted.org/packages/4c/4d/f264c20c03b04bfbaaf54fdcd55b2aa0744179fa7f34f3d5053b03a0ca58/okx_candle-1.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "0459bb167e270163cd208aef00fd8a2c073bc96d7060097e5279340cd6414337",
          "md5": "5eb59b77cf253395136871d5c6599930",
          "sha256": "b53e9be1cb97ced9de6391d64d43e879241e9a19fda7586aee895e02e0e3257c"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "5eb59b77cf253395136871d5c6599930",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.0",
        "size": 14183,
        "upload_time": "2023-02-06T12:20:41",
        "upload_time_iso_8601": "2023-02-06T12:20:41.836778Z",
        "url": "https://files.pythonhosted.org/packages/04/59/bb167e270163cd208aef00fd8a2c073bc96d7060097e5279340cd6414337/okx_candle-1.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "43cb6d3aa8012a4bf8f24583d6cea1b6e982542f0bc9700b34773e4720ad39ba",
          "md5": "399d7d38e1b21c70b09a7b77fc5592f3",
          "sha256": "505da7225745a989d89662fb01940503e90c2b126e895710c98f5200a6e65013"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "399d7d38e1b21c70b09a7b77fc5592f3",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.0",
        "size": 17775,
        "upload_time": "2023-02-07T07:39:35",
        "upload_time_iso_8601": "2023-02-07T07:39:35.239151Z",
        "url": "https://files.pythonhosted.org/packages/43/cb/6d3aa8012a4bf8f24583d6cea1b6e982542f0bc9700b34773e4720ad39ba/okx_candle-1.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "cfc90d7961db232fa28d506a15488355229e5a6b80eaae3498924f97d9e520d4",
          "md5": "c1d42eb44e9789d8733e664357ab538a",
          "sha256": "4491e484b245d5d2e587fce2621d71bd1fe2b2486b4e40179a43fe64570889dd"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "c1d42eb44e9789d8733e664357ab538a",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.0",
        "size": 14370,
        "upload_time": "2023-02-07T07:39:37",
        "upload_time_iso_8601": "2023-02-07T07:39:37.066896Z",
        "url": "https://files.pythonhosted.org/packages/cf/c9/0d7961db232fa28d506a15488355229e5a6b80eaae3498924f97d9e520d4/okx_candle-1.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "24e851f460a82f685442a7bddb4efe3542fa2ca1b70692408985234cb0aa075c",
          "md5": "0d10494a17b8b12677a1e0fb3b126979",
          "sha256": "24a20ad8be839bbeca569681e0ddd6b276fd67812cff449b4842fae587f9a9dc"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0d10494a17b8b12677a1e0fb3b126979",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.0",
        "size": 29099,
        "upload_time": "2023-02-07T07:44:02",
        "upload_time_iso_8601": "2023-02-07T07:44:02.008816Z",
        "url": "https://files.pythonhosted.org/packages/24/e8/51f460a82f685442a7bddb4efe3542fa2ca1b70692408985234cb0aa075c/okx_candle-1.0.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "fcb2414ed63ac841edc862348ff9f6509ce97aae403f26fe860cac7c319bf5fe",
          "md5": "4f7dbcd8aef9b241c1d35e1d789d4ad7",
          "sha256": "54cf616d61727850d40b7b0c1d6d767038d13c31787af7e22e64155a9458e345"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "4f7dbcd8aef9b241c1d35e1d789d4ad7",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.0",
        "size": 36560,
        "upload_time": "2023-02-07T07:44:05",
        "upload_time_iso_8601": "2023-02-07T07:44:05.067730Z",
        "url": "https://files.pythonhosted.org/packages/fc/b2/414ed63ac841edc862348ff9f6509ce97aae403f26fe860cac7c319bf5fe/okx_candle-1.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "41df5188251c7e7ffa6957abbbe29d4cfd988fd14139d617ab2236d73ece16f9",
          "md5": "0d19bcaa04519f1cbc1f96fe069222fd",
          "sha256": "17e66c81fb573d103b2d29a78d10a0ebc3390f9e354edf772f19970a1566f9d3"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0d19bcaa04519f1cbc1f96fe069222fd",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.0",
        "size": 29096,
        "upload_time": "2023-02-15T08:19:11",
        "upload_time_iso_8601": "2023-02-15T08:19:11.480473Z",
        "url": "https://files.pythonhosted.org/packages/41/df/5188251c7e7ffa6957abbbe29d4cfd988fd14139d617ab2236d73ece16f9/okx_candle-1.0.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8b64e98a6bdac37cbec902cbbcc02ddb4076ff73e9d94c307550975040a8c283",
          "md5": "b067f8dff334ebbffb4e38aca16ad486",
          "sha256": "06792ebdbc1b778d5eb213a9bcad4f90fd2a034d469b9ec8442b0b50bf5c2cb9"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "b067f8dff334ebbffb4e38aca16ad486",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.0",
        "size": 755084,
        "upload_time": "2023-02-15T08:19:14",
        "upload_time_iso_8601": "2023-02-15T08:19:14.877599Z",
        "url": "https://files.pythonhosted.org/packages/8b/64/e98a6bdac37cbec902cbbcc02ddb4076ff73e9d94c307550975040a8c283/okx_candle-1.0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "0881f5e7bad6e0dd19e3b963b0e47a8f1402a9912f9f07b4f7d5ad62a9a83e69",
          "md5": "3fd82aaa7da7dd412b12954c46a8a66e",
          "sha256": "48c7d481180b8e591d2584db24461420ae05e9a5a194961e98343b62531e8145"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.5-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "3fd82aaa7da7dd412b12954c46a8a66e",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.0",
        "size": 29127,
        "upload_time": "2023-02-16T02:12:55",
        "upload_time_iso_8601": "2023-02-16T02:12:55.759154Z",
        "url": "https://files.pythonhosted.org/packages/08/81/f5e7bad6e0dd19e3b963b0e47a8f1402a9912f9f07b4f7d5ad62a9a83e69/okx_candle-1.0.5-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "36d1906b2e4f489bcb675834925e4e05183ead60000938e542b96db95d3d15f1",
          "md5": "5a289a615e329a2c54b2275e8ffdae69",
          "sha256": "bf680e4c84869f8c3cdc97919b0458e93d7f9501d3ddf8c285404928b8edde94"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.5.tar.gz",
        "has_sig": false,
        "md5_digest": "5a289a615e329a2c54b2275e8ffdae69",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.0",
        "size": 755104,
        "upload_time": "2023-02-16T02:12:58",
        "upload_time_iso_8601": "2023-02-16T02:12:58.578625Z",
        "url": "https://files.pythonhosted.org/packages/36/d1/906b2e4f489bcb675834925e4e05183ead60000938e542b96db95d3d15f1/okx_candle-1.0.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.6": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7d69950b592d27d899dbf58a84d1d13c9f0fb83a70d09bb8354949bd83b2260f",
          "md5": "56d9ad2370e6d66f859a0f53ab460f27",
          "sha256": "8f88642380fb6e1673dd4fe0baaacd7257d632db401f49c3a83601670dff71ee"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.6-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "56d9ad2370e6d66f859a0f53ab460f27",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.0",
        "size": 29095,
        "upload_time": "2023-02-22T09:22:21",
        "upload_time_iso_8601": "2023-02-22T09:22:21.575464Z",
        "url": "https://files.pythonhosted.org/packages/7d/69/950b592d27d899dbf58a84d1d13c9f0fb83a70d09bb8354949bd83b2260f/okx_candle-1.0.6-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "cec7af1fc6dd6d22565c48b1852c9592fceb2125f4de2ced71ef71954d005081",
          "md5": "3f60382232057098d9d9330bc05730e1",
          "sha256": "35ed85c2ccef9e7fedad7218dd421f1d6d9dc7f11b2a87e3e4eccf88ee17ff33"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.6.tar.gz",
        "has_sig": false,
        "md5_digest": "3f60382232057098d9d9330bc05730e1",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.0",
        "size": 755070,
        "upload_time": "2023-02-22T09:22:25",
        "upload_time_iso_8601": "2023-02-22T09:22:25.834156Z",
        "url": "https://files.pythonhosted.org/packages/ce/c7/af1fc6dd6d22565c48b1852c9592fceb2125f4de2ced71ef71954d005081/okx_candle-1.0.6.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.7": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "83e296c84b9da6418a875b7d0fa75f62e31c20b758aa3a860997f4b9103aa4d1",
          "md5": "fe4a091d149dc4249c16eb4b45cbe79f",
          "sha256": "1891866fdab5f842bd533f60a89f4fef414b924028f5da2bacaf78ba0f2d7fac"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.7-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "fe4a091d149dc4249c16eb4b45cbe79f",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.0",
        "size": 29205,
        "upload_time": "2023-03-06T04:21:30",
        "upload_time_iso_8601": "2023-03-06T04:21:30.534915Z",
        "url": "https://files.pythonhosted.org/packages/83/e2/96c84b9da6418a875b7d0fa75f62e31c20b758aa3a860997f4b9103aa4d1/okx_candle-1.0.7-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "824d0eed3ccfc25c7f36bb76b71a1c48148ca3c8a406eb063ba9bb42b79bd5fa",
          "md5": "9d16b1b118c762b7c1c741dfacf1f6f3",
          "sha256": "152c7cb36bdb4854e839cd95c771241b98f71b87da6b7523eb35eece1e7e8b05"
        },
        "downloads": -1,
        "filename": "okx_candle-1.0.7.tar.gz",
        "has_sig": false,
        "md5_digest": "9d16b1b118c762b7c1c741dfacf1f6f3",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.0",
        "size": 755153,
        "upload_time": "2023-03-06T04:21:34",
        "upload_time_iso_8601": "2023-03-06T04:21:34.616237Z",
        "url": "https://files.pythonhosted.org/packages/82/4d/0eed3ccfc25c7f36bb76b71a1c48148ca3c8a406eb063ba9bb42b79bd5fa/okx_candle-1.0.7.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "83e296c84b9da6418a875b7d0fa75f62e31c20b758aa3a860997f4b9103aa4d1",
        "md5": "fe4a091d149dc4249c16eb4b45cbe79f",
        "sha256": "1891866fdab5f842bd533f60a89f4fef414b924028f5da2bacaf78ba0f2d7fac"
      },
      "downloads": -1,
      "filename": "okx_candle-1.0.7-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "fe4a091d149dc4249c16eb4b45cbe79f",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6.0",
      "size": 29205,
      "upload_time": "2023-03-06T04:21:30",
      "upload_time_iso_8601": "2023-03-06T04:21:30.534915Z",
      "url": "https://files.pythonhosted.org/packages/83/e2/96c84b9da6418a875b7d0fa75f62e31c20b758aa3a860997f4b9103aa4d1/okx_candle-1.0.7-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "824d0eed3ccfc25c7f36bb76b71a1c48148ca3c8a406eb063ba9bb42b79bd5fa",
        "md5": "9d16b1b118c762b7c1c741dfacf1f6f3",
        "sha256": "152c7cb36bdb4854e839cd95c771241b98f71b87da6b7523eb35eece1e7e8b05"
      },
      "downloads": -1,
      "filename": "okx_candle-1.0.7.tar.gz",
      "has_sig": false,
      "md5_digest": "9d16b1b118c762b7c1c741dfacf1f6f3",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6.0",
      "size": 755153,
      "upload_time": "2023-03-06T04:21:34",
      "upload_time_iso_8601": "2023-03-06T04:21:34.616237Z",
      "url": "https://files.pythonhosted.org/packages/82/4d/0eed3ccfc25c7f36bb76b71a1c48148ca3c8a406eb063ba9bb42b79bd5fa/okx_candle-1.0.7.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}