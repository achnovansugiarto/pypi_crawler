{
  "info": {
    "author": "",
    "author_email": "",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: Apache Software License"
    ],
    "description": "# Synapse Domain Rule Checker\n\nA module to prevent invites and joins to Matrix rooms by checking the involved server(s)'\ndomain.\n\n\n## Installation\n\nFrom the virtual environment that you use for Synapse, install this module with:\n```shell\npip install synapse-domain-rule-checker\n```\n(If you run into issues, you may need to upgrade `pip` first, e.g. by running\n`pip install --upgrade pip`)\n\nThen alter your homeserver configuration, adding to your `modules` configuration:\n```yaml\nmodules:\n  - module: synapse_domain_rule_checker.DomainRuleChecker\n    config:\n      # A mapping describing which servers a server can invite into a room.\n      # Default is any server can invite any other server.\n      domain_mapping:\n        \"inviter_domain\": [ \"invitee_domain_permitted\", \"other_domain_permitted\" ]\n        \"other_inviter_domain\": [ \"invitee_domain_permitted\" ]\n\n      # Whether an invite should be allowed through if the inviting server doesn't appear\n      # in the domain_mapping.\n      # Required.\n      can_invite_if_not_in_domain_mapping: false\n\n      # Whether a user on this server needs to be invited to be allowed into a room,\n      # regardless of the room's settings.\n      # Defaults to false.\n      can_only_join_rooms_with_invite: false\n\n      # Whether a user on this server can only invite when creating a room.\n      # Default is false.\n      can_only_invite_during_room_creation: false\n\n      # List of servers that can't be invited to rooms that have been published to the\n      # public room directory. This setting only really works in a closed federation in\n      # which every server agrees on the list.\n      # Defaults to all servers being allowed.\n      domains_prevented_from_being_invited_to_published_rooms: []\n\n      # Whether a local user can invite another user using a third-party identifier (e.g.\n      # an email address).\n      # Defaults to true.\n      can_invite_by_third_party_id: true\n```\n\nNote that you need to consider invites between two local users when defining values for\n`domain_mapping` and `domains_prevented_from_being_invited_to_published_rooms`.\n\n## Development\n\nIn a virtual environment with pip â‰¥ 21.1, run\n```shell\npip install -e .[dev]\n```\n\nTo run the unit tests, you can either use:\n```shell\ntox -e py\n```\nor\n```shell\ntrial tests\n```\n\nTo run the linters and `mypy` type checker, use `./scripts-dev/lint.sh`.\n\n\n## Releasing\n\nThe exact steps for releasing will vary; but this is an approach taken by the\nSynapse developers (assuming a Unix-like shell):\n\n 1. Set a shell variable to the version you are releasing (this just makes\n    subsequent steps easier):\n    ```shell\n    version=X.Y.Z\n    ```\n\n 2. Update `setup.cfg` so that the `version` is correct.\n\n 3. Stage the changed files and commit.\n    ```shell\n    git add -u\n    git commit -m v$version -n\n    ```\n\n 4. Push your changes.\n    ```shell\n    git push\n    ```\n\n 5. When ready, create a signed tag for the release:\n    ```shell\n    git tag -s v$version\n    ```\n    Base the tag message on the changelog.\n\n 6. Push the tag.\n    ```shell\n    git push origin tag v$version\n    ```\n\n 7. Create a source distribution and upload it to PyPI:\n    ```shell\n    python -m build\n    twine upload dist/synapse_domain_rule_checker-$version*\n    ```\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "synapse-domain-rule-checker",
    "package_url": "https://pypi.org/project/synapse-domain-rule-checker/",
    "platform": "",
    "project_url": "https://pypi.org/project/synapse-domain-rule-checker/",
    "project_urls": null,
    "release_url": "https://pypi.org/project/synapse-domain-rule-checker/1.0.0/",
    "requires_dist": [
      "attrs",
      "matrix-synapse ; extra == 'dev'",
      "tox ; extra == 'dev'",
      "twisted ; extra == 'dev'",
      "aiounittest ; extra == 'dev'",
      "mypy (==0.910) ; extra == 'dev'",
      "black (==21.9b0) ; extra == 'dev'",
      "flake8 (==4.0.1) ; extra == 'dev'",
      "isort (==5.9.3) ; extra == 'dev'"
    ],
    "requires_python": ">=3.7",
    "summary": "\"A module to prevent invites to Matrix rooms based on the invitee's domain.\"",
    "version": "1.0.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16317860,
  "releases": {
    "1.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "eba2805dbbe10d4e29046d92f944c16240d4e0d241c3fb30d78b71d14bdb35fb",
          "md5": "ac8eebcdc85a63227ccbc27b65280d3e",
          "sha256": "3cb8b2bf8a82c5fc193b7d0866c5889e956f2da74bdf468e233621b01463cef2"
        },
        "downloads": -1,
        "filename": "synapse_domain_rule_checker-1.0.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "ac8eebcdc85a63227ccbc27b65280d3e",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 6523,
        "upload_time": "2021-12-03T10:33:01",
        "upload_time_iso_8601": "2021-12-03T10:33:01.995454Z",
        "url": "https://files.pythonhosted.org/packages/eb/a2/805dbbe10d4e29046d92f944c16240d4e0d241c3fb30d78b71d14bdb35fb/synapse_domain_rule_checker-1.0.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a06d7ac41e68d6cca97ca9f0b55ed631aef2d60cab2a22378f3dfcdab71902ca",
          "md5": "37e94c9434d6921282ccccdf5e008921",
          "sha256": "553b392c01ca1cc168e8ad0f79c6d58933f533f833edf4e18f2656e52c03f8ed"
        },
        "downloads": -1,
        "filename": "synapse_domain_rule_checker-1.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "37e94c9434d6921282ccccdf5e008921",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 6283,
        "upload_time": "2021-12-03T10:33:03",
        "upload_time_iso_8601": "2021-12-03T10:33:03.299003Z",
        "url": "https://files.pythonhosted.org/packages/a0/6d/7ac41e68d6cca97ca9f0b55ed631aef2d60cab2a22378f3dfcdab71902ca/synapse_domain_rule_checker-1.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "eba2805dbbe10d4e29046d92f944c16240d4e0d241c3fb30d78b71d14bdb35fb",
        "md5": "ac8eebcdc85a63227ccbc27b65280d3e",
        "sha256": "3cb8b2bf8a82c5fc193b7d0866c5889e956f2da74bdf468e233621b01463cef2"
      },
      "downloads": -1,
      "filename": "synapse_domain_rule_checker-1.0.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "ac8eebcdc85a63227ccbc27b65280d3e",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.7",
      "size": 6523,
      "upload_time": "2021-12-03T10:33:01",
      "upload_time_iso_8601": "2021-12-03T10:33:01.995454Z",
      "url": "https://files.pythonhosted.org/packages/eb/a2/805dbbe10d4e29046d92f944c16240d4e0d241c3fb30d78b71d14bdb35fb/synapse_domain_rule_checker-1.0.0-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "a06d7ac41e68d6cca97ca9f0b55ed631aef2d60cab2a22378f3dfcdab71902ca",
        "md5": "37e94c9434d6921282ccccdf5e008921",
        "sha256": "553b392c01ca1cc168e8ad0f79c6d58933f533f833edf4e18f2656e52c03f8ed"
      },
      "downloads": -1,
      "filename": "synapse_domain_rule_checker-1.0.0.tar.gz",
      "has_sig": false,
      "md5_digest": "37e94c9434d6921282ccccdf5e008921",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.7",
      "size": 6283,
      "upload_time": "2021-12-03T10:33:03",
      "upload_time_iso_8601": "2021-12-03T10:33:03.299003Z",
      "url": "https://files.pythonhosted.org/packages/a0/6d/7ac41e68d6cca97ca9f0b55ed631aef2d60cab2a22378f3dfcdab71902ca/synapse_domain_rule_checker-1.0.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}