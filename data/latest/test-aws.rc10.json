{
  "info": {
    "author": "Noah Birnel",
    "author_email": "noah.birnel@coalfire.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 3 - Alpha",
      "Environment :: Console",
      "Intended Audience :: Information Technology",
      "Intended Audience :: System Administrators",
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3",
      "Topic :: Software Development :: Testing",
      "Topic :: System :: Networking"
    ],
    "description": "test-aws\n========\n\nHelper functions for writing pytest against AWS infrastructure.\n\n``test-aws`` includes terraform helpers to look up \nvariables, data sources, and other terraform objects.\n\n``test-aws`` has been in use for a few years now,\nbut you should not consider it stable (yet).\nPin your version in your ``requirements.txt``,\nplease, or be prepared to rewrite some of your tests on occasion.\n\nComplete documentation is at\nhttps://testaws.readthedocs.io/en/latest/index.html.\n\nusage\n~~~~~\n\nCreate a ``test`` directory.\n\nIn ``test/conftest.py``, place:\n\n.. code-block:: python\n\n    import testaws as t\n\n    @pytest.fixture(scope=\"session\")\n    def my_vpc_instances():\n        filters = tuple([{\"Name\": \"vpc-id\", \"Values\": [\"vpc-0123456789abcdef0\"]}])\n        return t.get_instances(filters)\n\nWrite some tests for all of your instances in ``test/test_all.py``:\n\n.. code-block:: python\n\n    import pytest\n\n    import testaws as t\n\n    def test_none_accept_ssh_from_world(my_vpc_instances):\n        ssh_ingress_rules = t.instances_ingress_rules_for_port(my_vpc_instances, 22)\n        actual = t.rules_cidrs_and_security_groups(ssh_ingress_rules)\n        assert \"0.0.0.0/0\" not in actual[\"cidrs\"]\n\n\nRun ``pytest``.\n\nPerhaps you would like to test that your internally reachable web instances\nare only reachable from your offices,\nand that they can only be ssh'ed to from your developer offices.\n\nIf you have terraform like this:\n\n.. code-block:: terraform\n\n    variable \"cidr\" {\n      default = {\n        cidr.adelaide      = \"10.10.0.0/24\"\n        cidr.buenos_aires  = \"10.10.0.0/24\"\n        cidr.cairo         = \"10.10.0.0/24\"\n        cidr.djakarta      = \"10.10.0.0/24\"\n        cidr.new_york      = \"10.10.0.0/24\"\n        cidr.paris         = \"10.10.0.0/24\"\n\n        cidr.mumbai        = \"10.10.0.0/24\"\n        cidr.san_francisco = \"10.10.0.0/24\"\n      }\n    }\n\n\nthen you can place this is your ``test/conftest.py``:\n\n.. code-block:: python\n\n    @pytest.fixture(scope=\"session\")\n    def my_offices():\n        return {\n            t.terraform_variable(\"cidr.adelaide\"),\n            t.terraform_variable(\"cidr.buenos_aires\"),\n            t.terraform_variable(\"cidr.cairo\"),\n            t.terraform_variable(\"cidr.djakarta\"),\n            t.terraform_variable(\"cidr.new_york\"),\n            t.terraform_variable(\"cidr.paris\"),\n        }\n\n    @pytest.fixture(scope=\"session\")\n    def developers():\n        return {\n            t.terraform_variable(\"cidr.mumbai\"),\n            t.terraform_variable(\"cidr.san_francisco\"),\n        }\n\n\nand write tests for your web instances in ``tests/test_web.py``:\n\n.. code-block:: python\n\n    import pytest\n\n    import testaws as t\n\n\n    @pytest.fixture(scope=\"module\", name=\"web\")\n    def web_instances(my_vpc_instances):\n        # prod-web-03 stage-web-01 test-web-01\n        return t.match_env_type_num_name_scheme(my_vpc_instances, r\"web\")\n\n    def test_has_public_ip(web):\n        public_ips = [instance.get('PublicIpAddress') for instance in web]\n        assert all(public_ips)\n\n    def test_has_elastic_ip(web):\n        eips = t.instances_elastic_ips(web)\n        assert all(eips)\n\n    def test_accepts_only_ssh_and_web(web):\n        actual = tests.instances_ingress_ports(web)\n        assert actual == {22, 443}\n\n    def test_accepts_ssh_from_devs_only(web, developers):\n        actual = t.instances_port_ingress_sources(web, port=443)\n        assert actual[\"cidrs\"] == developers\n        assert actual[\"sgids\"] == set()\n\n    def test_accepts_web_from_offices_only(web, my_offices):\n        actual = t.instances_port_ingress_sources(web, port=443)\n        assert actual[\"cidrs\"] == my_offices\n        assert actual[\"sgids\"] == set()\n\n    def test_sends_only_web(web):\n        actual = tests.instances_egress_ports(web)\n        assert actual == {443}\n\n    def test_is_type_t3_medium(web):\n        instance_types = [instance.get('InstanceType') for instance in web]\n        assert all(i_type == \"t3.medium\" for i_type in instance_types)\n\n    def test_has_api_termination_disabled(web):\n        disabled = t.instances_attribute(web, 'disableApiTermination')\n        assert disabled\n        assert all(disabled)\n\n\nphilosophy and alternatives\n---------------------------\n\n``test-aws`` has some guiding principals:\n\n* test deployed resources, not the deploy code.\n* make broad assertions about the state of your infrastructure - for instance:\n\n   * nothing has 22 open from the world.\n   * web instances only allow 443 in.\n\n* test in production.\n\n   * It's not that we are *not* going to test before we go to prod.\n   * It is that we are going to *continue* testing once we reach prod.\n\n* use existing testing tools (in this case pytest and Python)\n  rather than having new tools specific to Infrastructure-as-Code.\n* ``test-aws`` is only one of many tools for testing Infrastructure-as-Code.\n* we don't think other Infrastructure-as-Code philosphies are wrong,\n  but these are what ``test-aws`` is trying to accomplish.\n\n\nSome other tools you might consider are:\n\n* https://terratest.gruntwork.io/\n\n* https://github.com/newcontext-oss/kitchen-terraform\n\n* https://community.chef.io/tools/chef-inspec\n\n* https://serverspec.org/\n\ndevelopment\n------------\n\nWe need tests, \nand we need more docstrings.\n\nFunction names could do with a thorough review and setting a standard format.\n\n.. code-block:: shell\n\n    make help",
    "description_content_type": "text/x-rst",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/coalfire/test-aws",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "test-aws",
    "package_url": "https://pypi.org/project/test-aws/",
    "platform": "",
    "project_url": "https://pypi.org/project/test-aws/",
    "project_urls": {
      "Homepage": "https://github.com/coalfire/test-aws"
    },
    "release_url": "https://pypi.org/project/test-aws/0.0.10/",
    "requires_dist": null,
    "requires_python": ">=3.6",
    "summary": "tools for testing AWS cloud resources",
    "version": "0.0.10",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 11469271,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d8e145e6a90d5b31cd1439f49ef86997823d21c985a3651b2588263c1bc182f4",
          "md5": "43409390880365bc2cf2ffabbb3eb514",
          "sha256": "4ca88436db193a95624c699e2ffeea685b880b61ed0995ec0bf00e5908c499f3"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "43409390880365bc2cf2ffabbb3eb514",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 5707,
        "upload_time": "2021-09-14T21:13:16",
        "upload_time_iso_8601": "2021-09-14T21:13:16.968600Z",
        "url": "https://files.pythonhosted.org/packages/d8/e1/45e6a90d5b31cd1439f49ef86997823d21c985a3651b2588263c1bc182f4/test-aws-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.10": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5c7c47f6c22a42c658d0e242466ad05d8651c4627936b3bec112d52e8c6c17a7",
          "md5": "0a455d378ef77d62330db7d72992477f",
          "sha256": "cbdd8598e1684591b60f4f8756b514173fe1786722bb35ffe3cbcadd65b22e01"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.10.tar.gz",
        "has_sig": false,
        "md5_digest": "0a455d378ef77d62330db7d72992477f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 7080,
        "upload_time": "2021-09-16T15:49:42",
        "upload_time_iso_8601": "2021-09-16T15:49:42.015987Z",
        "url": "https://files.pythonhosted.org/packages/5c/7c/47f6c22a42c658d0e242466ad05d8651c4627936b3bec112d52e8c6c17a7/test-aws-0.0.10.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c74a1159a19766d27661606659b2cafde1ee50572c3b1a5cb01c2a91d8b6bc44",
          "md5": "401527e9e9fa3c0f3ce7f5010e1b21e0",
          "sha256": "574bd1c0f3c786a445ac060392b01ab3e5991e07d950f251363f9c6a412d893a"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "401527e9e9fa3c0f3ce7f5010e1b21e0",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 5713,
        "upload_time": "2021-09-14T21:23:48",
        "upload_time_iso_8601": "2021-09-14T21:23:48.630522Z",
        "url": "https://files.pythonhosted.org/packages/c7/4a/1159a19766d27661606659b2cafde1ee50572c3b1a5cb01c2a91d8b6bc44/test-aws-0.0.2.tar.gz",
        "yanked": true,
        "yanked_reason": "duplicate relase"
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "cf62963312183171df1419c9191884d69e70bcdd4888acdcea3fe12b13e9242b",
          "md5": "2131475f1c39d6d5be352feb832ac8cb",
          "sha256": "16c60c08f91bfdf744ec6d6100d7ff5fe0e2683b2f2f800cca5c48aa20da9bc1"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "2131475f1c39d6d5be352feb832ac8cb",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 5708,
        "upload_time": "2021-09-14T21:23:50",
        "upload_time_iso_8601": "2021-09-14T21:23:50.199628Z",
        "url": "https://files.pythonhosted.org/packages/cf/62/963312183171df1419c9191884d69e70bcdd4888acdcea3fe12b13e9242b/test-aws-0.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "33d83c30765000cc51c4ae8f5975e55080fdd62e3052659531099c6c5d321ac6",
          "md5": "17fe6782c08ec589b5c486c241930db2",
          "sha256": "9ab7fc70ced4ad86d1a8e887aee5d191d525874d8268608677873734c1f2f6d5"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "17fe6782c08ec589b5c486c241930db2",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 6005,
        "upload_time": "2021-09-14T23:17:50",
        "upload_time_iso_8601": "2021-09-14T23:17:50.817236Z",
        "url": "https://files.pythonhosted.org/packages/33/d8/3c30765000cc51c4ae8f5975e55080fdd62e3052659531099c6c5d321ac6/test-aws-0.0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "3a478422a572ad0c78ba70513499f0bf07768329970bc866118fed176dc8810b",
          "md5": "01d0d72ca8732e1456e0b31da0115229",
          "sha256": "bc3d6f28d91fd83715e35194723107f53e6d18d78be48a0e883bfcd56373963b"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.5.tar.gz",
        "has_sig": false,
        "md5_digest": "01d0d72ca8732e1456e0b31da0115229",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 6086,
        "upload_time": "2021-09-14T23:20:30",
        "upload_time_iso_8601": "2021-09-14T23:20:30.671190Z",
        "url": "https://files.pythonhosted.org/packages/3a/47/8422a572ad0c78ba70513499f0bf07768329970bc866118fed176dc8810b/test-aws-0.0.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.6": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1208ce0f6f8af507e7a2f30cc4583f7322641488d20860add7f2cfc6f3cb27ba",
          "md5": "73d9d300fe6bf94e77a06d3cc4884e84",
          "sha256": "497633fdf307493a99f1ef15ab555e0874e2fb5492595f8441c767b7a514c615"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.6.tar.gz",
        "has_sig": false,
        "md5_digest": "73d9d300fe6bf94e77a06d3cc4884e84",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 6179,
        "upload_time": "2021-09-15T16:58:46",
        "upload_time_iso_8601": "2021-09-15T16:58:46.998013Z",
        "url": "https://files.pythonhosted.org/packages/12/08/ce0f6f8af507e7a2f30cc4583f7322641488d20860add7f2cfc6f3cb27ba/test-aws-0.0.6.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.7": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6b9f2336af238fa823c4dff658146833b0f96c9f9b5dea49d97179e15b295f35",
          "md5": "4dd2ab5a17310cdaf7158f313be0b85e",
          "sha256": "f9ce0e1894c8fe89196633b241b8261c4846c56b098eaf25eeaf81647a39ce9b"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.7.tar.gz",
        "has_sig": false,
        "md5_digest": "4dd2ab5a17310cdaf7158f313be0b85e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 6227,
        "upload_time": "2021-09-15T16:58:49",
        "upload_time_iso_8601": "2021-09-15T16:58:49.011414Z",
        "url": "https://files.pythonhosted.org/packages/6b/9f/2336af238fa823c4dff658146833b0f96c9f9b5dea49d97179e15b295f35/test-aws-0.0.7.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.8": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a75c1e9c3ead5164900a8e3a5aee472b3c3c7ef558dd7a70879f7c2e0174e7a9",
          "md5": "533edb309ac8e59e7a29909edd08fe93",
          "sha256": "5bca71420996a5cbf71575b4faaefb0e8303e590a0c2b56886545fdd6ea4e34f"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.8.tar.gz",
        "has_sig": false,
        "md5_digest": "533edb309ac8e59e7a29909edd08fe93",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 6245,
        "upload_time": "2021-09-16T15:36:10",
        "upload_time_iso_8601": "2021-09-16T15:36:10.445148Z",
        "url": "https://files.pythonhosted.org/packages/a7/5c/1e9c3ead5164900a8e3a5aee472b3c3c7ef558dd7a70879f7c2e0174e7a9/test-aws-0.0.8.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.9": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "52d553722b9da17cb5bf22f5f4cfacf1087c076a910b5d0ccbc141e73ae5fae0",
          "md5": "49131039e3438901c6b7a29e96159908",
          "sha256": "87ce29c6727464408bd2fd264ab382da01a84179ab973996f65933b667a85e6f"
        },
        "downloads": -1,
        "filename": "test-aws-0.0.9.tar.gz",
        "has_sig": false,
        "md5_digest": "49131039e3438901c6b7a29e96159908",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 7075,
        "upload_time": "2021-09-16T15:43:33",
        "upload_time_iso_8601": "2021-09-16T15:43:33.537098Z",
        "url": "https://files.pythonhosted.org/packages/52/d5/53722b9da17cb5bf22f5f4cfacf1087c076a910b5d0ccbc141e73ae5fae0/test-aws-0.0.9.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "5c7c47f6c22a42c658d0e242466ad05d8651c4627936b3bec112d52e8c6c17a7",
        "md5": "0a455d378ef77d62330db7d72992477f",
        "sha256": "cbdd8598e1684591b60f4f8756b514173fe1786722bb35ffe3cbcadd65b22e01"
      },
      "downloads": -1,
      "filename": "test-aws-0.0.10.tar.gz",
      "has_sig": false,
      "md5_digest": "0a455d378ef77d62330db7d72992477f",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 7080,
      "upload_time": "2021-09-16T15:49:42",
      "upload_time_iso_8601": "2021-09-16T15:49:42.015987Z",
      "url": "https://files.pythonhosted.org/packages/5c/7c/47f6c22a42c658d0e242466ad05d8651c4627936b3bec112d52e8c6c17a7/test-aws-0.0.10.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}