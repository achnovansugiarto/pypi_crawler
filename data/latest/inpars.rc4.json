{
  "info": {
    "author": "Hugo Abonizio",
    "author_email": "hugo.abonizio@gmail.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "<h1 align=\"center\">InPars</h1>\n<div align=\"center\">\n  <strong>Inquisitive Parrots for Search</strong>\n</div>\n<div align=\"center\">\n  A toolkit for end-to-end synthetic data generation using LLMs for IR\n</div>\n<div align=\"center\">\n\t<a href=\"https://pypi.org/project/inpars/\">\n\t\t<img src=\"https://img.shields.io/pypi/v/inpars?style=flat-square\">\n\t</a>\n\t<a href=\"\">\n\t\t<img src=\"https://img.shields.io/github/contributors/zetaalphavector/inpars?style=flat-square\">\n\t</a>\n</div>\n\n<div align=\"center\">\n  <h3>\n    <a href=\"#Installation\">Installation</a>\n    <span> | </span>\n    <a href=\"#Usage\">Usage</a>\n    <span> | </span>\n    <a href=\"#Resources\">Resources</a>\n    <span> | </span>\n    <a href=\"#Contributing\">Contributing</a>\n    <span> | </span>\n    <a href=\"#References\">References</a>\n  </h3>\n</div>\n\n\n## Installation\n\nUse pip package manager to install InPars toolkit.\n\n```bash\npip install inpars\n```\n\n## Usage\n\nTo generate data for one of the [BEIR datasets](https://github.com/beir-cellar/beir), you can use the following command:\n\n```bash\npython -m inpars.generate \\\n        --prompt=\"inpars\" \\\n        --dataset=\"trec-covid\" \\\n        --dataset_source=\"ir_datasets\" \\\n        --base_model=\"EleutherAI/gpt-j-6B\" \\\n        --output=\"trec-covid-queries.jsonl\" \n```\n\nAdditionally, you can use your own custom dataset by specifying the `corpus` and `queries` arguments to local files.\n\nThese generated queries might be noisy, thus a filtering step is highly recommended:\n\n```bash\npython -m inpars.filter \\\n        --input=\"trec-covid-queries.jsonl\" \\\n        --dataset=\"trec-covid\" \\\n        --filter_strategy=\"scores\" \\\n        --keep_top_k=\"10_000\" \\\n        --output=\"trec-covid-queries-filtered.jsonl\"\n```\n\nThere are currently two filtering strategies available: scores, which uses probability scores from the LLM itself, and reranker, which uses an auxiliary reranker to filter queries as introduced by [InPars-v2](https://arxiv.org/abs/2301.01820).\n\nTo prepare the training file, negative examples are mined by retrieving candidate documents with BM25 using the generated queries and sampling from these candidates. This is done using the following command:\n\n```bash\npython -m inpars.generate_triples \\\n        --input=\"trec-covid-queries-filtered.jsonl\" \\\n        --dataset=\"trec-covid\" \\\n        --output=\"trec-covid-triples.tsv\"\n```\n\nWith the generated triples file, you can train the model using the following command:\n\n```bash\npython -m inpars.train \\\n        --triples=\"trec-covid-triples.tsv\" \\\n        --base_model=\"castorini/monot5-3b-msmarco-10k\" \\\n        --output_dir=\"./reranker/\" \\\n        --max_steps=\"156\"\n```\n\nYou can choose different base models, hyperparameters, and training strategies that are supported by [HuggingFace Trainer](https://huggingface.co/docs/transformers/main_classes/trainer).\n\nAfter finetuning the reranker, you can rerank prebuilt runs from the BEIR benchmark or specify a custom run using the following command:\n\n```bash\npython -m inpars.rerank \\\n        --model=\"./reranker/\" \\\n        --dataset=\"trec-covid\" \\\n        --output_run=\"trec-covid-run.txt\"\n```\n\nFinally, you can evaluate the reranked run using the following command:\n\n```bash\npython -m inpars.evaluate \\\n        --dataset=\"trec-covid\" \\\n        --run=\"trec-covid-run.txt\"\n```\n\n## Resources\n\n#### Generated datasets\n\nDownload synthetic datasets generated by InPars-v1:\n\n- [MS-MARCO / TREC-DL](https://zav-public.s3.amazonaws.com/inpars/msmarco_synthetic_queries_100k.jsonl)\n- [Robust04](https://zav-public.s3.amazonaws.com/inpars/robust04_synthetic_queries_100k.jsonl)\n- [Natural Questions](https://zav-public.s3.amazonaws.com/inpars/nq_synthetic_queries_100k.jsonl)\n- [TREC-COVID](https://zav-public.s3.amazonaws.com/inpars/trec_covid_synthetic_queries_100k.jsonl)\n- [FiQA](https://zav-public.s3.amazonaws.com/inpars/fiqa_synthetic_queries_100k.jsonl)\n- [DBPedia](https://zav-public.s3.amazonaws.com/inpars/dbpedia_synthetic_queries_100k.jsonl)\n- [SCIDOCS](https://zav-public.s3.amazonaws.com/inpars/scidocs_synthetic_queries_100k.jsonl)\n- [SciFact](https://zav-public.s3.amazonaws.com/inpars/scifacts_synthetic_queries_100k.jsonl)\n- [ArguAna](https://zav-public.s3.amazonaws.com/inpars/arguana_synthetic_queries_100k.jsonl)\n- [BioASQ](https://zav-public.s3.amazonaws.com/inpars/bioasq_synthetic_queries_100k.jsonl)\n- [Climate Fever](https://zav-public.s3.amazonaws.com/inpars/climate_fever_synthetic_queries_100k.jsonl)\n- [CQADupstack](https://zav-public.s3.amazonaws.com/inpars/cqadupstack_synthetic_queries_100k.jsonl)\n- [Fever](https://zav-public.s3.amazonaws.com/inpars/fever_synthetic_queries_100k.jsonl)\n- [Hotpotqa](https://zav-public.s3.amazonaws.com/inpars/hotpotqa_synthetic_queries_100k.jsonl)\n- [NFCorpus](https://zav-public.s3.amazonaws.com/inpars/nfcorpus_synthetic_queries_100k.jsonl)\n- [Quora](https://zav-public.s3.amazonaws.com/inpars/quora_synthetic_queries_100k.jsonl)\n- [Signal-1M](https://zav-public.s3.amazonaws.com/inpars/signal_synthetic_queries_100k.jsonl)\n- [Touche-2020](https://zav-public.s3.amazonaws.com/inpars/touche_synthetic_queries_100k.jsonl)\n- [TREC-NEWS](https://zav-public.s3.amazonaws.com/inpars/trec_news_synthetic_queries_100k.jsonl)\n\n#### Finetuned models\n\nDownload finetuned models from InPars-v2 on [HuggingFace Hub](https://huggingface.co/models?search=zeta-alpha-ai/monot5-3b-inpars-v2-).\n\n## Contributing\n\nPull requests are welcome. For major changes, please open an issue first\nto discuss what you would like to change.\n\nPlease make sure to update tests as appropriate.\n\n\n## References\n\nCurrently, if you use this tool you can cite the original [InPars paper published at SIGIR](https://dl.acm.org/doi/10.1145/3477495.3531863) or [InPars-v2](https://arxiv.org/abs/2301.01820).\n\n```\n@inproceedings{inpars,\n  author = {Bonifacio, Luiz and Abonizio, Hugo and Fadaee, Marzieh and Nogueira, Rodrigo},\n  title = {{InPars}: Unsupervised Dataset Generation for Information Retrieval},\n  year = {2022},\n  isbn = {9781450387323},\n  publisher = {Association for Computing Machinery},\n  address = {New York, NY, USA},\n  url = {https://doi.org/10.1145/3477495.3531863},\n  doi = {10.1145/3477495.3531863},\n  booktitle = {Proceedings of the 45th International ACM SIGIR Conference on Research and Development in Information Retrieval},\n  pages = {2387â€“2392},\n  numpages = {6},\n  keywords = {generative models, large language models, question generation, synthetic datasets, few-shot models, multi-stage ranking},\n  location = {Madrid, Spain},\n  series = {SIGIR '22}\n}\n```\n\n```\n@misc{inparsv2,\n  doi = {10.48550/ARXIV.2301.01820},\n  url = {https://arxiv.org/abs/2301.01820},\n  author = {Jeronymo, Vitor and Bonifacio, Luiz and Abonizio, Hugo and Fadaee, Marzieh and Lotufo, Roberto and Zavrel, Jakub and Nogueira, Rodrigo},\n  title = {{InPars-v2}: Large Language Models as Efficient Dataset Generators for Information Retrieval},\n  publisher = {arXiv},\n  year = {2023},\n  copyright = {Creative Commons Attribution 4.0 International}\n}\n```\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/zetaalphavector/InPars",
    "keywords": "",
    "license": "LICENSE.txt",
    "maintainer": "",
    "maintainer_email": "",
    "name": "inpars",
    "package_url": "https://pypi.org/project/inpars/",
    "platform": null,
    "project_url": "https://pypi.org/project/inpars/",
    "project_urls": {
      "Homepage": "https://github.com/zetaalphavector/InPars"
    },
    "release_url": "https://pypi.org/project/inpars/0.2.1/",
    "requires_dist": [
      "torch",
      "pyserini (>=0.19)",
      "transformers (>=4.0)",
      "pyyaml (>=6.0)",
      "ir-datasets (>=0.5)",
      "ftfy (>=6.0)",
      "accelerate (>=0.15)"
    ],
    "requires_python": "",
    "summary": "InPars",
    "version": "0.2.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17468452,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "252dc14278196ad037eeff22ef5a0f129bb9eb1bc5af4cdd82af6f3b93abad94",
          "md5": "b2857bcaac88296c2dda95594ad1819d",
          "sha256": "d9ea979a2fb87b14e92b4c2da7e7fc0c3ff1c39faf1ef26ce62ca49fb509bc79"
        },
        "downloads": -1,
        "filename": "inpars-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "b2857bcaac88296c2dda95594ad1819d",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 1270,
        "upload_time": "2022-10-30T21:35:07",
        "upload_time_iso_8601": "2022-10-30T21:35:07.594219Z",
        "url": "https://files.pythonhosted.org/packages/25/2d/c14278196ad037eeff22ef5a0f129bb9eb1bc5af4cdd82af6f3b93abad94/inpars-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "665fd9c9b093ff1d37f24011c5af637f530f1c459d7861af14f0c8a329bcb982",
          "md5": "26ed16dcce4c6e20bba4014ab8889829",
          "sha256": "a8af5bfeff1ea32f511d7028caf0c21a6ebd52d4b7f955c45ef33892602153ed"
        },
        "downloads": -1,
        "filename": "inpars-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "26ed16dcce4c6e20bba4014ab8889829",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 1351,
        "upload_time": "2022-10-30T21:35:09",
        "upload_time_iso_8601": "2022-10-30T21:35:09.421750Z",
        "url": "https://files.pythonhosted.org/packages/66/5f/d9c9b093ff1d37f24011c5af637f530f1c459d7861af14f0c8a329bcb982/inpars-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "f90a1628d8920e05aeb226a14a497fb9f7b3bf16d73a45a87e8972d3db3c28db",
          "md5": "37c585a08999d20dd1bf069ef5a39bd0",
          "sha256": "040e70a40e70444d31194fb511b17548ca1d2ac1efd959684697a10c936c586f"
        },
        "downloads": -1,
        "filename": "inpars-0.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "37c585a08999d20dd1bf069ef5a39bd0",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 5246,
        "upload_time": "2023-02-21T15:08:49",
        "upload_time_iso_8601": "2023-02-21T15:08:49.137219Z",
        "url": "https://files.pythonhosted.org/packages/f9/0a/1628d8920e05aeb226a14a497fb9f7b3bf16d73a45a87e8972d3db3c28db/inpars-0.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "95af3de68cd4678be97320c00b0ca4353e11afd278630d8e51a20a5d7153fe16",
          "md5": "cc1248636a08452557b26c8ef0069b62",
          "sha256": "2c89a8a2a35c310aacae8eb7159ebe49723b9f7361f8451a8739e2121c674031"
        },
        "downloads": -1,
        "filename": "inpars-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "cc1248636a08452557b26c8ef0069b62",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 4948,
        "upload_time": "2023-02-21T15:08:50",
        "upload_time_iso_8601": "2023-02-21T15:08:50.453242Z",
        "url": "https://files.pythonhosted.org/packages/95/af/3de68cd4678be97320c00b0ca4353e11afd278630d8e51a20a5d7153fe16/inpars-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "20092b03b4f2b08a45ea72fc47b4b429d6bbbe0648b03db8bd0ab0af44617226",
          "md5": "7a522bb815c880e8707f79893d958a72",
          "sha256": "fa9a8f3b8b6fa6d7e72c4464d5f50db964cdb8e696e0174d3b6007e4ef9f7cd9"
        },
        "downloads": -1,
        "filename": "inpars-0.2.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "7a522bb815c880e8707f79893d958a72",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 7603,
        "upload_time": "2023-03-27T21:40:16",
        "upload_time_iso_8601": "2023-03-27T21:40:16.823798Z",
        "url": "https://files.pythonhosted.org/packages/20/09/2b03b4f2b08a45ea72fc47b4b429d6bbbe0648b03db8bd0ab0af44617226/inpars-0.2.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "619c992c37a6abcd0132fb130f4580045dbd560ec9230aaf3af126eca22f9d4f",
          "md5": "a75f4d14d0bd230e7ee89c130cb61dc6",
          "sha256": "f2195c02138f669f785a8fa7635bdddaaa2109585775dbd4973c8b390f87f126"
        },
        "downloads": -1,
        "filename": "inpars-0.2.0.tar.gz",
        "has_sig": false,
        "md5_digest": "a75f4d14d0bd230e7ee89c130cb61dc6",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 7356,
        "upload_time": "2023-03-27T21:40:18",
        "upload_time_iso_8601": "2023-03-27T21:40:18.400081Z",
        "url": "https://files.pythonhosted.org/packages/61/9c/992c37a6abcd0132fb130f4580045dbd560ec9230aaf3af126eca22f9d4f/inpars-0.2.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "e5a48ce52b19b273fe8ef18427f2754aa310402924cdada90d8715e0aa030ac5",
          "md5": "5073b51874a46eb489fcf0843acc1397",
          "sha256": "035fb08fdeff6d3e7b89a08588c6dd1001167b0ee3e42a6a67ff339a80d1e895"
        },
        "downloads": -1,
        "filename": "inpars-0.2.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "5073b51874a46eb489fcf0843acc1397",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 21648,
        "upload_time": "2023-03-27T21:51:55",
        "upload_time_iso_8601": "2023-03-27T21:51:55.932000Z",
        "url": "https://files.pythonhosted.org/packages/e5/a4/8ce52b19b273fe8ef18427f2754aa310402924cdada90d8715e0aa030ac5/inpars-0.2.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "47d093fdb8796d5ec1e842e2fed773aa1acea1a530475089e1ecb1f1a1cc03b7",
          "md5": "9e99e8c263869e8fc4e1090282a08c93",
          "sha256": "86d7c0367eca13a6d701598619ce57849db218f7b2b4a2ad91aa9afc55401ad6"
        },
        "downloads": -1,
        "filename": "inpars-0.2.1.tar.gz",
        "has_sig": false,
        "md5_digest": "9e99e8c263869e8fc4e1090282a08c93",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 19134,
        "upload_time": "2023-03-27T21:51:59",
        "upload_time_iso_8601": "2023-03-27T21:51:59.127462Z",
        "url": "https://files.pythonhosted.org/packages/47/d0/93fdb8796d5ec1e842e2fed773aa1acea1a530475089e1ecb1f1a1cc03b7/inpars-0.2.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "e5a48ce52b19b273fe8ef18427f2754aa310402924cdada90d8715e0aa030ac5",
        "md5": "5073b51874a46eb489fcf0843acc1397",
        "sha256": "035fb08fdeff6d3e7b89a08588c6dd1001167b0ee3e42a6a67ff339a80d1e895"
      },
      "downloads": -1,
      "filename": "inpars-0.2.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "5073b51874a46eb489fcf0843acc1397",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 21648,
      "upload_time": "2023-03-27T21:51:55",
      "upload_time_iso_8601": "2023-03-27T21:51:55.932000Z",
      "url": "https://files.pythonhosted.org/packages/e5/a4/8ce52b19b273fe8ef18427f2754aa310402924cdada90d8715e0aa030ac5/inpars-0.2.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "47d093fdb8796d5ec1e842e2fed773aa1acea1a530475089e1ecb1f1a1cc03b7",
        "md5": "9e99e8c263869e8fc4e1090282a08c93",
        "sha256": "86d7c0367eca13a6d701598619ce57849db218f7b2b4a2ad91aa9afc55401ad6"
      },
      "downloads": -1,
      "filename": "inpars-0.2.1.tar.gz",
      "has_sig": false,
      "md5_digest": "9e99e8c263869e8fc4e1090282a08c93",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 19134,
      "upload_time": "2023-03-27T21:51:59",
      "upload_time_iso_8601": "2023-03-27T21:51:59.127462Z",
      "url": "https://files.pythonhosted.org/packages/47/d0/93fdb8796d5ec1e842e2fed773aa1acea1a530475089e1ecb1f1a1cc03b7/inpars-0.2.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}