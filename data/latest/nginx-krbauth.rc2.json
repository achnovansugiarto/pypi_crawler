{
  "info": {
    "author": "quantum",
    "author_email": "quantum2048@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Environment :: Web Environment",
      "Framework :: Flask",
      "Intended Audience :: System Administrators",
      "License :: OSI Approved :: MIT License",
      "Operating System :: POSIX :: Linux",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.5",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9",
      "Topic :: Internet :: WWW/HTTP :: HTTP Servers",
      "Topic :: Internet :: WWW/HTTP :: WSGI :: Application",
      "Topic :: Security",
      "Topic :: System :: Systems Administration :: Authentication/Directory :: LDAP"
    ],
    "description": "# nginx-krbauth [![PyPI](https://img.shields.io/pypi/v/nginx-krbauth.svg)](https://pypi.org/project/nginx-krbauth/) [![PyPI - Format](https://img.shields.io/pypi/format/nginx-krbauth.svg)](https://pypi.org/project/nginx-krbauth/) [![PyPI - Python Version](https://img.shields.io/pypi/pyversions/nginx-krbauth.svg)](https://pypi.org/project/nginx-krbauth/)\nLDAP + Kerberos authenticator for nginx's auth_request module.\n\n## Installation\n\n```sh\npip install nginx-krbauth\n```\n\nIf, for some reason, you want to use the latest code from git:\n\n```sh\npip install git+https://github.com/quantum5/nginx-krbauth.git\n```\n\n## Usage\n\nLoad `nginx_krbauth:app` into any WSGI compatible server.\nConfiguration is done through environment variables.\n\nExample:\n\n```ini\n[uwsgi]\nprotocol = uwsgi\nsocket = /tmp/krbauth.sock\nmodule = nginx_krbauth:app\nenv = KRB5_KTNAME=FILE:/home/krbauth/.keytab\nenv = KRBAUTH_HMAC_KEY=hunter2\nenv = KRBAUTH_LDAP_SERVER=ldapi:///\nenv = KRBAUTH_LDAP_BIND_DN=cn=http,ou=Apps,dc=example,dc=com\nenv = KRBAUTH_LDAP_BIND_AUTHTOK=hunter2\nenv = KRBAUTH_LDAP_SEARCH_BASE=dc=example,dc=com\n```\n\n`nginx_krbauth` exports two HTTP endpoints:\n\n* `/krbauth`: This endpoint performs SPNEGO authentication. When done, it\n  sets a session cookie and generates a 307 redirect to the URL in the `next`\n  GET parameter.\n* `/krbauth/check`: The endpoint checks the validity of the session cookie. If\n  valid, it returns 200. Otherwise, it returns 401.\n\nThe intention is to use `/krbauth/check` as `auth_request` in your `nginx`\nconfiguration. On 401, `nginx` should be configured to generate a redirect to\n`/krbauth`.\n\n## Configuration\n\n* `KRB5_KTNAME`: This is actually a Kerberos setting. It should point to a\n  keytab file that only the user running `nginx_krbauth` can read containing\n  the Kerberos host principals.\n* `KRBAUTH_HMAC_KEY` (required): This is the HMAC key used to sign cookies. It\n  should be a long random string. Keep it secret!\n* `KRBAUTH_KEY_DURATION`: The duration (in seconds) for which the session cookie\n  is valid. Default: 1 hour.\n* `KRBAUTH_RANDOM_SIZE`: The length of the nonce in the session cookie in bytes.\n  Default: 32.\n* `KRBAUTH_GSSAPI_NAME`: The GSSAPI name for the service. Leave blank if any\n  name in the keytab is fine.\n* `KRBAUTH_SECURE_COOKIE`: This controls whether the session cookie is marked as\n  HTTPS-only. Default: yes. Set to `0` or `no` to disable.\n\n### LDAP\n\n`nginx_krbauth` can also optionally check LDAP group membership. It does so by\nlooking up the groups of the LDAP entity whose `krbPrincipalName` attribute\nmatches the name of the Kerberos principal used to authenticate.\n\nThe group is specified through the WSGI environment variable\n`KRBAUTH_LDAP_GROUP`. This could be set through `uwsgi_param`, for example.\n\nThe following environment variables are used to configure `nginx_krbauth`'s\nLDAP support:\n\n* `KRBAUTH_LDAP_SERVER`: The LDAP URI used to connect to the LDAP server.\n* `KRBAUTH_LDAP_SEARCH_BASE`: The root of the subtree to search for LDAP\n  entities for `krbPrincipalName` and group membership.\n* `KRBAUTH_LDAP_BIND_DN`: The DN used to bind to the LDAP server. Leave blank\n  for anonymous bind.\n* `KRBAUTH_LDAP_BIND_AUTHTOK`: The password used to bind to the LDAP server.\n  Leave blank for anonymous bind.\n\nLDAP binding can also be used as a fallback authentication mechanism through\nHTTP Basic authentication. This is useful when SPNEGO is not supported, or when\nthe client does not support Kerberos. To use this, configure:\n\n* `KRBAUTH_LDAP_USER_DN`: A string template to convert usernames into LDAP DNs.\n  There should be one `%s` symbol in this string, which will be replaced by the\n  username.\n\n## Example `nginx.conf`\n\n```nginx\nauth_request /krbauth/check;\nerror_page 401 = @krbauth;\nlocation @krbauth {\n    return 307 /krbauth?next=$request_uri;\n}\n\nlocation /krbauth {\n    auth_request off;\n    error_page 527 error.html; # To cancel out error_page 401 outside.\n    uwsgi_pass unix:/tmp/krbauth.sock;\n    uwsgi_pass_request_body off;\n    uwsgi_param KRBAUTH_LDAP_GROUP \"cn=group,dc=example,dc=com\";\n    include uwsgi_params;\n}\n```\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/quantum5/nginx-krbauth",
    "keywords": "ldap kerberos nginx",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "nginx-krbauth",
    "package_url": "https://pypi.org/project/nginx-krbauth/",
    "platform": "",
    "project_url": "https://pypi.org/project/nginx-krbauth/",
    "project_urls": {
      "Homepage": "https://github.com/quantum5/nginx-krbauth"
    },
    "release_url": "https://pypi.org/project/nginx-krbauth/0.0.2/",
    "requires_dist": [
      "flask",
      "gssapi",
      "python-ldap"
    ],
    "requires_python": "",
    "summary": "LDAP + Kerberos authenticator for nginx's auth_request module.",
    "version": "0.0.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 11241633,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a712d9c9419bda0a264f5a2231b40619df4a4dd73879eed5a8a2f63b56104250",
          "md5": "ed536b578431efc5a5d638f0733ef6ad",
          "sha256": "de8c5d1401fc3920e2e88bc121923a83ef9d1048da3c17ab33f33548838d12c3"
        },
        "downloads": -1,
        "filename": "nginx_krbauth-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "ed536b578431efc5a5d638f0733ef6ad",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 6147,
        "upload_time": "2021-04-25T09:20:52",
        "upload_time_iso_8601": "2021-04-25T09:20:52.810743Z",
        "url": "https://files.pythonhosted.org/packages/a7/12/d9c9419bda0a264f5a2231b40619df4a4dd73879eed5a8a2f63b56104250/nginx_krbauth-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7cae04a815e12e16600483a56d5fea5f2c22b90a352baeadc19b209d9c4b36d0",
          "md5": "518546bbe6595d9a93c5b97e4c5e8784",
          "sha256": "ad301dbce5c923cc9a2307f4f3e79b025da9bb3463393b2438e3046b9492da45"
        },
        "downloads": -1,
        "filename": "nginx_krbauth-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "518546bbe6595d9a93c5b97e4c5e8784",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 6001,
        "upload_time": "2021-04-25T09:20:54",
        "upload_time_iso_8601": "2021-04-25T09:20:54.242084Z",
        "url": "https://files.pythonhosted.org/packages/7c/ae/04a815e12e16600483a56d5fea5f2c22b90a352baeadc19b209d9c4b36d0/nginx_krbauth-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b1a5d7ec139191b0f5c66ab8dad5c418298cfdad9d48d4d17bb977c299e6957e",
          "md5": "0362232c7e347878d4722f1d811e00ec",
          "sha256": "e5de4d7d823015181754dcf6893837bfaa43a2fbcbeac77185fff99d3f6f0042"
        },
        "downloads": -1,
        "filename": "nginx_krbauth-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0362232c7e347878d4722f1d811e00ec",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 6289,
        "upload_time": "2021-08-21T21:22:36",
        "upload_time_iso_8601": "2021-08-21T21:22:36.939396Z",
        "url": "https://files.pythonhosted.org/packages/b1/a5/d7ec139191b0f5c66ab8dad5c418298cfdad9d48d4d17bb977c299e6957e/nginx_krbauth-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8cd34081712b05cf58d5c5b10b3e7231d98621815fec57a38e2fbf3b3d7c2c2f",
          "md5": "ac1ddeffeb2fe35a8c1c1b53a70390f2",
          "sha256": "f41891479715ae4af8a0f0490c62f2cc5c3ec9f6d324d11e93e3ed565f590506"
        },
        "downloads": -1,
        "filename": "nginx_krbauth-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "ac1ddeffeb2fe35a8c1c1b53a70390f2",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 6148,
        "upload_time": "2021-08-21T21:22:38",
        "upload_time_iso_8601": "2021-08-21T21:22:38.282172Z",
        "url": "https://files.pythonhosted.org/packages/8c/d3/4081712b05cf58d5c5b10b3e7231d98621815fec57a38e2fbf3b3d7c2c2f/nginx_krbauth-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "b1a5d7ec139191b0f5c66ab8dad5c418298cfdad9d48d4d17bb977c299e6957e",
        "md5": "0362232c7e347878d4722f1d811e00ec",
        "sha256": "e5de4d7d823015181754dcf6893837bfaa43a2fbcbeac77185fff99d3f6f0042"
      },
      "downloads": -1,
      "filename": "nginx_krbauth-0.0.2-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "0362232c7e347878d4722f1d811e00ec",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 6289,
      "upload_time": "2021-08-21T21:22:36",
      "upload_time_iso_8601": "2021-08-21T21:22:36.939396Z",
      "url": "https://files.pythonhosted.org/packages/b1/a5/d7ec139191b0f5c66ab8dad5c418298cfdad9d48d4d17bb977c299e6957e/nginx_krbauth-0.0.2-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "8cd34081712b05cf58d5c5b10b3e7231d98621815fec57a38e2fbf3b3d7c2c2f",
        "md5": "ac1ddeffeb2fe35a8c1c1b53a70390f2",
        "sha256": "f41891479715ae4af8a0f0490c62f2cc5c3ec9f6d324d11e93e3ed565f590506"
      },
      "downloads": -1,
      "filename": "nginx_krbauth-0.0.2.tar.gz",
      "has_sig": false,
      "md5_digest": "ac1ddeffeb2fe35a8c1c1b53a70390f2",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 6148,
      "upload_time": "2021-08-21T21:22:38",
      "upload_time_iso_8601": "2021-08-21T21:22:38.282172Z",
      "url": "https://files.pythonhosted.org/packages/8c/d3/4081712b05cf58d5c5b10b3e7231d98621815fec57a38e2fbf3b3d7c2c2f/nginx_krbauth-0.0.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}