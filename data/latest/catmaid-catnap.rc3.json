{
  "info": {
    "author": "Chris L. Barnes",
    "author_email": "cb619@cam.ac.uk",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 3 - Alpha",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3 :: Only",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8"
    ],
    "description": "# catnap\n\nView [CATMAID](https://catmaid.org) data using [napari](https://napari.org), primarily for generating ground truth pixel label data for neuronal reconstructions.\n\n`catnap` is optimised for datasets which fit comfortably into RAM - i.e. for dense labelling in a small volume.\n\nFor more complex tasks, consider\n\n- [BigCAT](https://github.com/saalfeldlab/bigcat)\n- [Paintera](https://github.com/saalfeldlab/paintera)\n- [TrakEM2](https://imagej.net/TrakEM2)\n- [Ilastik](https://www.ilastik.org/)\n\n## Usage\n\n1. Use `catnap-create` to convert hdf5/zarr/n5 image data, plus CATMAID skeleton annotations, into catnap's hdf5 format\n2. Use `catnap` to create or edit pixel labels\n3. Use `catnap-assess` to check the labels for false merges and splits\n\n### catnap GUI\n\nThis is basically just a napari window.\nAt time of writing, this is not particularly well documented, although `Help -> Key bindings` is useful for keyboard shortcuts.\n\nMake sure you select the `labels` layer before trying to edit.\nThere is a button for whether labelling and paint filling should flow through onto different slices\n(I recommend against it unless you're doing a merge you understand well).\n\nViewing in 3D (and related functions like rolling dimensions) is not supported.\n\nMore advanced features, including exporting labels, are available in the ipython console built into napari.\nIn the `napari` console, the CatnapViewer is available as the `cviewer` variable.\n\n```python\n>>> # Save your labels. The timestamp will be included as a dataset attribute.\n>>> cviewer.export_labels(\"path/to/labels.hdf5\", \"my_labels\")\n>>> # Include the original raw and annotation data (changes to these are not saved).\n>>> # By default, internal structure is compatible with CatnapIO.from_hdf5\n>>> cviewer.export_labels(\"path/to/full_labels.hdf5\", with_source=True)\n>>> # You can navigate in \"real-world\" coordinates with\n>>> cviewer.jump_to(z=19.8, y=19355)\n>>> # ... or in pixel space with\n>>> cviewer.jump_to_px(y=10, x=5)\n>>> # get more information on available functionality with\n>>> help(cviewer)\n```\n\nIt is recommended that you export your labels regularly, because it's the only way to save your work.\n\n### Command line\n\n#### `catnap-create`: Data preparation\n\nCreate a file for use with catnap using an existing raw image dataset, fetching annotation data from CATMAID, and creating a volume for labels with seed labels around treenodes.\n\n```_catnap_create\nusage: catnap-create [-h] [-v] [-V] [-o OFFSET] [-r RESOLUTION] [-f] [-t]\n                     [--label LABEL] [-s SEED_RADIUS] [--base-url BASE_URL]\n                     [--project-id PROJECT_ID] [--token TOKEN]\n                     [--auth-name AUTH_NAME] [--auth-pass AUTH_PASS]\n                     [-c CREDENTIALS]\n                     input output\n\npositional arguments:\n  input                 Path to HDF5 dataset containing raw data, in the form\n                        '{file_path}:{dataset_path}'\n  output                Path to HDF5 group to write raw, annotation, and label\n                        data, in the form'{file_path}:{group_path}'. If the\n                        group path is not given, it will default to the file's\n                        root.\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -v, --verbose         Increase logging verbosity\n  -V, --version         show program's version number and exit\n  -o OFFSET, --offset OFFSET\n                        Offset, in world units, of the raw data's (0, 0, 0)\n                        from the CATMAID project's (0, 0, 0), in the form\n                        'z,y,x'. Will default to the raw dataset's 'offset'\n                        attribute if applicable, or '0,0,0' otherwise\n  -r RESOLUTION, --resolution RESOLUTION\n                        Size, in word units, of voxels in the raw data, in the\n                        form 'z,y,x'. Will default to the raw dataset's\n                        'resolution' attribute if applicable, or '1,1,1'\n                        otherwise\n  -f, --force           Force usage of the given offset and arguments, even if\n                        the dataset has its own which do not match\n  -t, --transpose-attrs\n                        Reverse offset and resolution attributes read from the\n                        source (may be necessary in some N5 datasets)\n  --label LABEL, -l LABEL\n                        If there is existing label data, give it here in the\n                        same format as for 'input'. Offset and resolution are\n                        assumed to be identical to the raw (conflicting\n                        attributes will raise an error).\n  -s SEED_RADIUS, --seed-radius SEED_RADIUS\n                        Radius of the label seed squares placed at each\n                        treenode, in px\n\ncatmaid connection details:\n  --base-url BASE_URL   Base CATMAID URL to make requests to\n  --project-id PROJECT_ID\n  --token TOKEN         CATMAID user auth token\n  --auth-name AUTH_NAME\n                        Username for HTTP auth, if necessary\n  --auth-pass AUTH_PASS\n                        Password for HTTP auth, if necessary\n  -c CREDENTIALS, --credentials CREDENTIALS\n                        Path to JSON file containing credentials (command line\n                        arguments will take precedence)\n```\n\ne.g.\n\n```sh\ncatnap-create existing_data.hdf5:/raw catnap_format.hdf5 --credentials my_credentials.json --seed-radius=3\n```\n\n#### `catnap`: Label editing\n\nOpen a napari window viewing the pre-formatted data for label annotation.\n\n```_catnap\nusage: catnap [-h] [-v] [-V] [-l LABEL] input\n\npositional arguments:\n  input                 Path to HDF5 group containing catnap-formatted data,\n                        in the form '{file_path}:{group_path}'. If the group\n                        path is not given, it will default to the file's root.\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -v, --verbose         Increase logging verbosity\n  -V, --version         show program's version number and exit\n  -l LABEL, --label LABEL\n                        Path to HDF5 dataset containing label data (if it's\n                        not in the expected place in the input HDF5), in the\n                        form '{file_path}:{group_path}'. If the file path is\n                        not given, uses the 'input' file.\n```\n\ne.g.\n\n```sh\ncatnap catnap_format.hdf5\n```\n\n#### `catnap-assess`: Segmentation assessment\n\nWrite CSVs of false splits and merges.\n\n```_catnap_assess\nusage: catnap-assess [-h] [-V] [-v] [-m FALSE_MERGE] [-s FALSE_SPLIT]\n                     [-u UNTRACED] [-r] [-l LABEL]\n                     input\n\nMerges are assessed before splits regardless of argument order.\n\npositional arguments:\n  input                 Path to HDF5 group containing catnap-formatted data,\n                        in the form '{file_path}:{group_path}'. If the group\n                        path is not given, it will default to the file's root.\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -V, --version         show program's version number and exit\n  -v, --verbose         Increase logging verbosity\n  -m FALSE_MERGE, --false-merge FALSE_MERGE\n                        Assess false merges and write to CSV file. If '-' is\n                        given, write to stdout.\n  -s FALSE_SPLIT, --false-split FALSE_SPLIT\n                        Assess false splits and write to CSV file. If '-' is\n                        given, write to stdout.\n  -u UNTRACED, --untraced UNTRACED\n                        Write labels of segments with no treenodes in them. If\n                        '-' is given, write to stdout.\n  -r, --relabel         Assign each connected component a new label. Useful to\n                        assess whether there are skeletons which correctly\n                        share labels around their treenodes, but those\n                        labelled regions are not contiguous.\n  -l LABEL, --label LABEL\n                        Path to HDF5 dataset containing labels, in the form\n                        '{file_path}:{group_path}'. Must have compatible\n                        resolution and offset with 'input'.\n```\n\ne.g.\n\n```sh\ncatnap-assess catnap_format.hdf5 --false-split splits.csv --false-merge merges.csv\n```\n\nSee `catnap-assess --help` for more information.\n\n### Library\n\nAssuming you have a chunk of image data as a numpy array in ZYX,\nwith a given resolution and offset inside a CATMAID project,\nand a [catpy-style JSON credentials file](https://catpy.readthedocs.io/en/latest/catpy.client.html#catpy.client.CatmaidClient.from_json) for your CATMAID instance:\n\n```python\nfrom catnap import Image, Catmaid, CatnapIO, CatnapViewer, gui_qt\n\n# attach the necessary metadata to our plain numpy array\nimg = Image(my_image_data, resolution=my_resolution, offset=my_offset)\n\n# fetch the skeleton and connector data for our subvolume\ncio = CatnapIO.from_catmaid(Catmaid.from_json(my_credentials_path), img)\n\n# generate a seed label volume where every treenode has a small patch of label\n# unique to the skeleton ID\ncio.make_labels(set_labels=True)\n\n# save all this to an HDF5 file\ncio.to_hdf5(\"path/to/cdata.hdf5\")\n\n# you can retrieve it later with\ncio_2 = CatnapIO.from_hdf5(\"path/to/cdata.hdf5\")\n\nwith gui_qt():  # this is a re-export from napari\n    my_cviewer = CatnapViewer(cio)\n    my_cviewer.show()\n\n```\n\nThen make your labels, using the color picker to select the labels underneath treenodes.\nViewing in 3D is not supported.\n\n## Notes\n\nThe package name is `catmaid-catnap` (use this for e.g. `pip install`ing), to disambiguate this project from the unrelated [REST API testing utility](https://pypi.org/project/Catnap/) of the same name.\nThe module name is `catnap` (use this for e.g. `import`).\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/clbarnes/catmaid-catnap",
    "keywords": "neuroscience,connectomics,image,graph",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "catmaid-catnap",
    "package_url": "https://pypi.org/project/catmaid-catnap/",
    "platform": "",
    "project_url": "https://pypi.org/project/catmaid-catnap/",
    "project_urls": {
      "Homepage": "https://github.com/clbarnes/catmaid-catnap"
    },
    "release_url": "https://pypi.org/project/catmaid-catnap/0.4.0/",
    "requires_dist": [
      "catpy (>=2020.9.3)",
      "coordinates",
      "h5py",
      "napari[all] (~=0.4.6)",
      "numpy",
      "pandas",
      "scipy",
      "scikit-image",
      "StrEnum",
      "tables",
      "tqdm",
      "zarr"
    ],
    "requires_python": ">=3.7, <4",
    "summary": "Experiments working with CATMAID and napari",
    "version": "0.4.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 10118800,
  "releases": {
    "0.3.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "89c309ba91cbacdab06a595be18f370b963c9afae972f9c89c6bf88d49f905cf",
          "md5": "ac7e17dfe29e579a245976fca59f0d63",
          "sha256": "97e4719e4d959ed53ad1c2e61bf7faa73c7aa75cd7c1d61c51bb6b92e235762f"
        },
        "downloads": -1,
        "filename": "catmaid_catnap-0.3.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "ac7e17dfe29e579a245976fca59f0d63",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7, <4",
        "size": 30451,
        "upload_time": "2021-04-07T17:20:30",
        "upload_time_iso_8601": "2021-04-07T17:20:30.313033Z",
        "url": "https://files.pythonhosted.org/packages/89/c3/09ba91cbacdab06a595be18f370b963c9afae972f9c89c6bf88d49f905cf/catmaid_catnap-0.3.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "0bde7b47697d260f5f8c5af3ed5ff66ed158f6c5fb59677dd5af18a3f67ff4b5",
          "md5": "913060dfef101b0bbc1a98dd59d7c8a7",
          "sha256": "eedaf8418110c91b19af8b6b2f80f228f6deadf99c099e05effcb283007f91fb"
        },
        "downloads": -1,
        "filename": "catmaid-catnap-0.3.4.tar.gz",
        "has_sig": false,
        "md5_digest": "913060dfef101b0bbc1a98dd59d7c8a7",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7, <4",
        "size": 29631,
        "upload_time": "2021-04-07T17:20:31",
        "upload_time_iso_8601": "2021-04-07T17:20:31.693209Z",
        "url": "https://files.pythonhosted.org/packages/0b/de/7b47697d260f5f8c5af3ed5ff66ed158f6c5fb59677dd5af18a3f67ff4b5/catmaid-catnap-0.3.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1b99e52de5f01e530c474c0d671d22c4b3a164c209039a0b6c2413a8e76cc8f4",
          "md5": "5abf0f11a6f63787055da25fc3a2493a",
          "sha256": "c8af6056fbf1183fc8bd8ef2aa84d524458c9255b98ca58efd13dbed7e2084e0"
        },
        "downloads": -1,
        "filename": "catmaid_catnap-0.3.5-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "5abf0f11a6f63787055da25fc3a2493a",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7, <4",
        "size": 30498,
        "upload_time": "2021-04-20T09:43:02",
        "upload_time_iso_8601": "2021-04-20T09:43:02.434242Z",
        "url": "https://files.pythonhosted.org/packages/1b/99/e52de5f01e530c474c0d671d22c4b3a164c209039a0b6c2413a8e76cc8f4/catmaid_catnap-0.3.5-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c62d63fc791e82c0002f5ff3c59c8d3b8def2271c7169c24a66bcd8df12378fd",
          "md5": "52142d9a400acb22d8126debefb6869f",
          "sha256": "23d2b5d6efef8a45ea1e7d9e417219adac0a6ca6bad636008f01ddbe8328529c"
        },
        "downloads": -1,
        "filename": "catmaid-catnap-0.3.5.tar.gz",
        "has_sig": false,
        "md5_digest": "52142d9a400acb22d8126debefb6869f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7, <4",
        "size": 29730,
        "upload_time": "2021-04-20T09:43:03",
        "upload_time_iso_8601": "2021-04-20T09:43:03.676376Z",
        "url": "https://files.pythonhosted.org/packages/c6/2d/63fc791e82c0002f5ff3c59c8d3b8def2271c7169c24a66bcd8df12378fd/catmaid-catnap-0.3.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "e5a3e7cd4ddc94d9fd66e8e4c0e2fe238c5f50310b925245bcbda02c1b83aa5f",
          "md5": "8d3d08773dc61ec408cae0959fc6ef2e",
          "sha256": "f699de1ce0e0603242388c814516c3c536c6effad7eb59bd73fcca9baf615d60"
        },
        "downloads": -1,
        "filename": "catmaid_catnap-0.4.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "8d3d08773dc61ec408cae0959fc6ef2e",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7, <4",
        "size": 30395,
        "upload_time": "2021-04-20T13:23:04",
        "upload_time_iso_8601": "2021-04-20T13:23:04.028991Z",
        "url": "https://files.pythonhosted.org/packages/e5/a3/e7cd4ddc94d9fd66e8e4c0e2fe238c5f50310b925245bcbda02c1b83aa5f/catmaid_catnap-0.4.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7d22d4338e936a2294cba859d309947714e17583aa695a2a5db33c1efac29c14",
          "md5": "b875974653bf7a44a4e30c4d68bb8230",
          "sha256": "d98d9c0ebc2cfa410e02d4cec86f0126e895244fbbee6d231ad89e12d50dc7c6"
        },
        "downloads": -1,
        "filename": "catmaid-catnap-0.4.0.tar.gz",
        "has_sig": false,
        "md5_digest": "b875974653bf7a44a4e30c4d68bb8230",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7, <4",
        "size": 29650,
        "upload_time": "2021-04-20T13:23:04",
        "upload_time_iso_8601": "2021-04-20T13:23:04.957593Z",
        "url": "https://files.pythonhosted.org/packages/7d/22/d4338e936a2294cba859d309947714e17583aa695a2a5db33c1efac29c14/catmaid-catnap-0.4.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "e5a3e7cd4ddc94d9fd66e8e4c0e2fe238c5f50310b925245bcbda02c1b83aa5f",
        "md5": "8d3d08773dc61ec408cae0959fc6ef2e",
        "sha256": "f699de1ce0e0603242388c814516c3c536c6effad7eb59bd73fcca9baf615d60"
      },
      "downloads": -1,
      "filename": "catmaid_catnap-0.4.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "8d3d08773dc61ec408cae0959fc6ef2e",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.7, <4",
      "size": 30395,
      "upload_time": "2021-04-20T13:23:04",
      "upload_time_iso_8601": "2021-04-20T13:23:04.028991Z",
      "url": "https://files.pythonhosted.org/packages/e5/a3/e7cd4ddc94d9fd66e8e4c0e2fe238c5f50310b925245bcbda02c1b83aa5f/catmaid_catnap-0.4.0-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "7d22d4338e936a2294cba859d309947714e17583aa695a2a5db33c1efac29c14",
        "md5": "b875974653bf7a44a4e30c4d68bb8230",
        "sha256": "d98d9c0ebc2cfa410e02d4cec86f0126e895244fbbee6d231ad89e12d50dc7c6"
      },
      "downloads": -1,
      "filename": "catmaid-catnap-0.4.0.tar.gz",
      "has_sig": false,
      "md5_digest": "b875974653bf7a44a4e30c4d68bb8230",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.7, <4",
      "size": 29650,
      "upload_time": "2021-04-20T13:23:04",
      "upload_time_iso_8601": "2021-04-20T13:23:04.957593Z",
      "url": "https://files.pythonhosted.org/packages/7d/22/d4338e936a2294cba859d309947714e17583aa695a2a5db33c1efac29c14/catmaid-catnap-0.4.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}