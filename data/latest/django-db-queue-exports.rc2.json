{
  "info": {
    "author": "DabApps",
    "author_email": "engineering@dabapps.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# django-db-queue-exports\n\n**An extension to [django-db-queue](https://github.com/dabapps/django-db-queue) for monitoring long running task statuses.\nThe aim of this extension is to simplify the execution of long running tasks, and allow for polling of tasks statuses during execution.**\n\n[![Build Status](https://travis-ci.com/dabapps/django-db-queue-exports.svg?token=gFw2G3a8PohgNBo8f8Nm&branch=master)](https://travis-ci.com/dabapps/django-db-queue-exports)\n[![pypi release](https://img.shields.io/pypi/v/django-db-queue-exports.svg)](https://pypi.python.org/pypi/django-db-queue-exports)\n\nSupported and tested against:\n- Django 2.2\n- django-db-queue 1.3.0\n- Python 3.6, 3.7 and 3.8\n\n## What and why?\nHave you ever been in a position where you need to run a report, or email several thousand users without blocking your main process? `django-db-queue` can handle this perfectly for you through the use of a seperate `worker` process and a queue of `tasks`. However, it's difficult to determine the state of your task. This package aims to address this. Through the use of a pre-configured view, url and generic task, you can use a single endpoint to create new exports and query their statuses.\n\n## Getting started\n### Installation\n```\npip install django-db-queue-exports\n```\nAdd `django_dbq_exports` to the installed apps, found inside your settings.py\n```\nINSTALLED_APPS = (\n    ...\n    'django_dbq_exports',\n)\n```\nAdd `django_dbq_exports.tasks.export_task` to django-dbq JOBS list in settings.py\n```\nJOBS = {\n    ...\n    'export': {\n        'tasks': ['django_dbq_exports.tasks.export_task'],\n    },\n}\n```\nConfigure the url, something like this:\n```\nurlpatterns = [\n    ...\n    url(r'^export/', include(\"django_dbq_exports.urls\")),\n]\n```\nRemember to run your migrations\n```\npython manage.py migrate\n```\n## Usage\n### Describing your export\nAn `export` is a standard python function. It must take an `export_params` dictionary parameter. This can be utilised for any parameters required within your export.\nThe export can also optionally return a string value which will be stored in `Export.result_reference`. This is best used for file paths or URLs when you need to download or access the results of the export.\nHere's an example task:\n```\nimport random\n\ndef generate_example_report(export_params):\n    output_file = 'myfile.csv'\n    array_length = export_params.get(\"length\", None)\n    x = []\n\n    for i in range(array_length if array_length else 99):\n        x.append(random.randint(1, 10))\n\n    x.sort()\n    with open(output_file, 'w') as f:\n        f.write(\",\".join(str(y) for y in x))\n\n    return output_file\n```\n\nConfigure your task in settings.py\n```\nEXPORTS = {\n    \"my_export\": \"my_project.tasks.generate_example_report\",\n}\n```\n\n### Running the task\nSimply `POST` to the pre-configured endpoint with the following json.\nThe `export_type` should map to a configured key within the `settings.EXPORTS` dictionary.\n```\n{\n    \"export_type\" : \"my_export\"\n} \n```\nWith optional parameters to be received by your previously created export task\n```\n{\n    \"export_type\" : \"my_export\",\n    \"export_params\" : {\n        \"length\": 256\n    }\n}\n```\n### Querying the task status\n`GET` the same endpoint with a url parameter = to the export `id` field returned from the POST request.\nOr `GET` the same endpoint with no parameters to return a list of all exports.\n\n\n### Creating a custom view\nIf you don't wish to use the built in views and urls to trigger exports, create your own! To trigger an export yourself simply create an export object like so:\n```\nExport.objects.create(export_type=\"my_export\")\n```\nThe newly created export object will handle the `django-db-queue` job creation. \n\n### Overriding priority\nBy default all exports will be created with a priority of 1. This is passed through to `django-db-queue`. If you wish to override this you can do so via the POST method.\n```\n{\n    \"export_type\" : \"my_export\",\n    \"priority\" : 3\n} \n```\nOr through the Export creation directly.\n```\nExport.objects.create(export_type=\"my_export\", priority=3)\n```\n\n## Code of conduct\n\nFor guidelines regarding the code of conduct when contributing to this repository please review [https://www.dabapps.com/open-source/code-of-conduct/](https://www.dabapps.com/open-source/code-of-conduct/)\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://www.dabapps.com/",
    "keywords": "",
    "license": "BSD",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-db-queue-exports",
    "package_url": "https://pypi.org/project/django-db-queue-exports/",
    "platform": "",
    "project_url": "https://pypi.org/project/django-db-queue-exports/",
    "project_urls": {
      "Homepage": "https://www.dabapps.com/",
      "Source": "https://github.com/dabapps/django-db-queue-exports"
    },
    "release_url": "https://pypi.org/project/django-db-queue-exports/0.0.3/",
    "requires_dist": [
      "django-db-queue (==1.3.0)",
      "django-model-utils (==2.3.1)",
      "django-uuidfield (==0.5.0)",
      "jsonfield (==2.0.2)",
      "Django (>=2.2)",
      "djangorestframework (==3.9.2)"
    ],
    "requires_python": "",
    "summary": "An extension to django-db-queue for monitoring long running jobs",
    "version": "0.0.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 7806251,
  "releases": {
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8a76ae53ea66caa65f50dd88366c128f9a82a7be232ee13a6b31d2a9cce46172",
          "md5": "5a022a2338d3b4eebc5d8cec125655ed",
          "sha256": "99f253d2bbf08638d8462fccbfd40be93083291f8a4973edb9a4d10b6a8b01d5"
        },
        "downloads": -1,
        "filename": "django_db_queue_exports-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "5a022a2338d3b4eebc5d8cec125655ed",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 26461,
        "upload_time": "2020-07-27T11:08:27",
        "upload_time_iso_8601": "2020-07-27T11:08:27.478779Z",
        "url": "https://files.pythonhosted.org/packages/8a/76/ae53ea66caa65f50dd88366c128f9a82a7be232ee13a6b31d2a9cce46172/django_db_queue_exports-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "46cdf6aee8e4fa58429b43ac5df0eed64b06b250801e8f166b0d9d5c86550372",
          "md5": "01e4b7eb7722f22e0c3ccde43f9403b3",
          "sha256": "0a142e345f845f85bda454858582d68e9297a7e6d04e893b8d9e6d0e3f8db6a4"
        },
        "downloads": -1,
        "filename": "django-db-queue-exports-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "01e4b7eb7722f22e0c3ccde43f9403b3",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 5861,
        "upload_time": "2020-07-27T11:08:38",
        "upload_time_iso_8601": "2020-07-27T11:08:38.562778Z",
        "url": "https://files.pythonhosted.org/packages/46/cd/f6aee8e4fa58429b43ac5df0eed64b06b250801e8f166b0d9d5c86550372/django-db-queue-exports-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6be803e4c10480b4b6be38e9b62bba3adc85203c36b78957783a3c21cccbf1c2",
          "md5": "747b0fab50415f31c75f77c77cc5c389",
          "sha256": "9717701b84460a84ef102045624fe2ec6b68ca551b9bdea42b50cb345e1af4e9"
        },
        "downloads": -1,
        "filename": "django_db_queue_exports-0.0.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "747b0fab50415f31c75f77c77cc5c389",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 26738,
        "upload_time": "2020-07-28T09:56:53",
        "upload_time_iso_8601": "2020-07-28T09:56:53.706785Z",
        "url": "https://files.pythonhosted.org/packages/6b/e8/03e4c10480b4b6be38e9b62bba3adc85203c36b78957783a3c21cccbf1c2/django_db_queue_exports-0.0.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "3dd1fd1453303fccd3cacde47be69fbaa1bdf71e5678f4d60851a517f8253473",
          "md5": "7468a27f9c03c5332053772c2b4468ea",
          "sha256": "ce96ae0e7de882e98ae28127abb6fb68c860f38d7460b58de61f8d4ebd7a3156"
        },
        "downloads": -1,
        "filename": "django-db-queue-exports-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "7468a27f9c03c5332053772c2b4468ea",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 6157,
        "upload_time": "2020-07-28T09:56:56",
        "upload_time_iso_8601": "2020-07-28T09:56:56.145548Z",
        "url": "https://files.pythonhosted.org/packages/3d/d1/fd1453303fccd3cacde47be69fbaa1bdf71e5678f4d60851a517f8253473/django-db-queue-exports-0.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "6be803e4c10480b4b6be38e9b62bba3adc85203c36b78957783a3c21cccbf1c2",
        "md5": "747b0fab50415f31c75f77c77cc5c389",
        "sha256": "9717701b84460a84ef102045624fe2ec6b68ca551b9bdea42b50cb345e1af4e9"
      },
      "downloads": -1,
      "filename": "django_db_queue_exports-0.0.3-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "747b0fab50415f31c75f77c77cc5c389",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 26738,
      "upload_time": "2020-07-28T09:56:53",
      "upload_time_iso_8601": "2020-07-28T09:56:53.706785Z",
      "url": "https://files.pythonhosted.org/packages/6b/e8/03e4c10480b4b6be38e9b62bba3adc85203c36b78957783a3c21cccbf1c2/django_db_queue_exports-0.0.3-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "3dd1fd1453303fccd3cacde47be69fbaa1bdf71e5678f4d60851a517f8253473",
        "md5": "7468a27f9c03c5332053772c2b4468ea",
        "sha256": "ce96ae0e7de882e98ae28127abb6fb68c860f38d7460b58de61f8d4ebd7a3156"
      },
      "downloads": -1,
      "filename": "django-db-queue-exports-0.0.3.tar.gz",
      "has_sig": false,
      "md5_digest": "7468a27f9c03c5332053772c2b4468ea",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 6157,
      "upload_time": "2020-07-28T09:56:56",
      "upload_time_iso_8601": "2020-07-28T09:56:56.145548Z",
      "url": "https://files.pythonhosted.org/packages/3d/d1/fd1453303fccd3cacde47be69fbaa1bdf71e5678f4d60851a517f8253473/django-db-queue-exports-0.0.3.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}