{
  "info": {
    "author": "Vanessa Sochat",
    "author_email": "vsoch@users.noreply.github.com",
    "bugtrack_url": null,
    "classifiers": [
      "Intended Audience :: Developers",
      "Intended Audience :: Science/Research",
      "License :: OSI Approved :: Mozilla Public License 2.0 (MPL 2.0)",
      "Operating System :: Unix",
      "Programming Language :: C",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3.8",
      "Topic :: Scientific/Engineering",
      "Topic :: Software Development"
    ],
    "description": "# CSS Clean!\n\n[![PyPI version](https://badge.fury.io/py/cssclean.svg)](https://badge.fury.io/py/cssclean)\n\nThis is a library for cleaning up css based on styles that are actually used in html files.\nAlthough there are [libraries that use npm](https://www.keycdn.com/blog/remove-unused-css)\nI am not a fan so I wanted something in Python.\n\n<img src=\"https://raw.githubusercontent.com/vsoch/cssclean/main/docs/img/logo.jpg\" width=\"500px\">\n\n## Approach\n\nWe take a conservative approach to filtering, meaning:\n\n - for any style block, one matching class or identifier is sufficient for inclusion\n - multiple levels selectors are not combined (e.g., using \"button\" is sufficient to add `.button. red`.\n - we always keep keyframes and imports. Additional parsing could be added to support checking, but they are fairly rare (imho).\n - The library is **new** and I may have missed a case! Please [open an issue](https://github.com/vsoch/cssclean/issues) if you find something.\n\nOf course this could be improved upon but we would need more careful token parsing!\nPlease [open an issue](https://github.com/vsoch/cssclean/issues) if you are interested. \n\n## Usage\n\n### Install\n\nFirst, clone and install.\n\n```bash\n$ git clone https://github.com/vsoch/cssclean\n$ cd cssclean\n$ pip install -e .\n```\n\nor install from pip.\n\n```bash\n$ pip install cssclean\n```\n\nAnd then try running an example! \n\n### Clean Directory\n\nBelow we ask cssclean to automatically detect files (css and html) under the same test directory:\n\n```bash\n$ cssclean clean --css cssclean/tests/testdata/1 --html cssclean/tests/testdata/1\nSheet style.css has 124 rules.\nSheet style.css filtered down to 43 rules.\n1 files written:\n  style.css => /home/vanessa/Desktop/Code/unused-css/cssclean/tests/testdata/1/style.clean.css\n```\n\nAs you can see, by default, it will write the updated css files alongside the old files but with .clean added.\nNote that you can provide individual files, one at a time too, for both of ``--css``\nand ``--html``.\n\n```bash\n$ cssclean clean --css cssclean/tests/testdata/1 --html cssclean/tests/testdata/1/home.html --html cssclean/tests/testdata/1/table.html\n```\n\n### Dry Run\n\nYou can also do a dry run to print the filtered style to the screen:\n\n```bash\n$ cssclean clean --css cssclean/tests/testdata/1 --html cssclean/tests/testdata/1 --dry-run\n...\n.card.yellow {\n  background-color: var(--color-yellow);\n}\ntr {\n  background-color: white;\n}\n```\n\n### SCSS\n\nWe have support for cleaning of scss files, meaning that you will generate a final cleaned\ncss file from a potential directory of inputs. As an example, we can use the hierarchy under\ntest data, where the main style file is ``style.scss`` that includes all the others:\n\n```bash\n$ cssclean clean --css cssclean/tests/testdata/3/style.scss --html cssclean/tests/testdata/3/index.html\n```\n```bash\nSheet style.css has 638 rules.\nSheet style.css filtered down to 298 rules.\n1 files written:\n  style.css => cssclean/tests/testdata/3/style.clean.css\n```\n\nAll imports are required to exist since we are actually rendering the sass into css\nin the library.\n\n\n### Minify\n\nAnd you can ask for the same preview, but minified:\n\n```bash\n$ cssclean clean --css cssclean/tests/testdata/1 --html cssclean/tests/testdata/1 --dry-run --minify\n```\n\nOr a non-preview minified:\n\n```bash\n$ cssclean clean --css cssclean/tests/testdata/1 --html cssclean/tests/testdata/1 --outdir ./out --minify\n```\n```bash\nSheet style.css has 124 rules.\nSheet style.css filtered down to 43 rules.\n1 files written:\n  style.css => ./out/style.clean.min.css\n```\n\nNote that \"min\" is added to the saved filename, and also note that this is experimental - I'll need to do\nsome more tests and reading to figure out what exactly the process is.\n\n### Output Directory\n\nYou can also ask for a custom output directory:\n\n```bash\n$ mkdir out\n$ cssclean clean --css cssclean/tests/testdata/1 --html cssclean/tests/testdata/1 --outdir ./out\n```\n```bash\nSheet style.css has 124 rules.\nSheet style.css filtered down to 43 rules.\n1 files written:\n  style.css => ./out/style.clean.css\n```\n\n## Example\n\nAs an example, I tested against the usrse site. We can render the site into ``_site``:\n\n```bash\n$ bundle exec jekyll build\n```\n\nand then run the clean in place. Here is the original style file:\n\n```bash\n$ ls -l style.css \n-rw-rw-r-- 1 dinosaur dinosaur 263390 Jun  4 20:57 style.css\n```\nWe can then run the clean in place:\n\n```bash\n$ cssclean clean --css assets/css/style.css --html _site/ --in-place\nSheet style.css has 4080 rules.\nSheet style.css filtered down to 1380 rules.\n1 files written:\n  style.css => assets/css/style.css\n```\n\nAnd what is the new size?\n\n```bash\n$ ls -l style.css \n-rw-rw-r-- 1 dinosaur dinosaur 201347 Jun  5 15:11 style.css\n```\n\nSo there is a huge reduction in size when we first remove unused stuff (-62043 bytes)!\nTo summarize:\n\n - original: ~263KB\n - cleaned: ~201KB\n\nAnd importantly, the site looks the same!\n\n![docs/img/usrse-site.png](docs/img/usrse-site.png)\n\nSo personally, I don't have issue with the size differences between minified and cleaned - my preference is not to\nminify so I can easily read it, but I can also imagine a workflow where you minify just for the production\nsite and the development version is just cleaned. It's really up to you!\n\n## GitHub Action\n\nYou can use this tool as a GitHub action! Here's how.\n\n```yaml\n  - name: Test CSS Clean\n    uses: vsoch/cssclean/action/clean@main\n    with:\n      css: cssclean/tests/testdata/1/style.css\n      html: cssclean/tests/testdata/1/table.html cssclean/tests/testdata/1/home.html\n      in_place: true\n```\n\nSee the [action](action) folder, action.yml file for more parameters and descriptions.\n\n## Contributors\n\nWe use the [all-contributors](https://github.com/all-contributors/all-contributors) \ntool to generate a contributors graphic below.\n\n<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->\n<!-- prettier-ignore-start -->\n<!-- markdownlint-disable -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"https://vsoch.github.io\"><img src=\"https://avatars.githubusercontent.com/u/814322?v=4?s=100\" width=\"100px;\" alt=\"\"/><br /><sub><b>Vanessasaurus</b></sub></a><br /><a href=\"https://github.com/vsoch/cssclean/commits?author=vsoch\" title=\"Code\">ðŸ’»</a></td>\n  </tr>\n</table>\n\n<!-- markdownlint-restore -->\n<!-- prettier-ignore-end -->\n\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n\n## Thanks!\n\nThis library wouldn't be possible without these fantastic other libraries!\n\n - [libsass-python](https://github.com/sass/libsass-python/blob/main/sass.py)\n - [tinycss2](https://github.com/Kozea/tinycss2)\n - [BeautifulSoup4](https://www.crummy.com/software/BeautifulSoup/)\n\n\n## TODO\n\n - add tests for different cases\n - create GitHub action to detect (fail if unused)\n - automated release\n - some kind of summary command that shows used/unused styles, or the count\n - can we use asp to determine used rules?\n \n## License\n\nThis code is licensed under the MPL 2.0 [LICENSE](LICENSE).\n\n<img src=\"https://raw.githubusercontent.com/vsoch/cssclean/main/docs/img/vsoch.jpg\" width=\"100px\">\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/vsoch/cssclean",
    "keywords": "css,cleaner",
    "license": "LICENSE",
    "maintainer": "Vanessa Sochat",
    "maintainer_email": "",
    "name": "cssclean",
    "package_url": "https://pypi.org/project/cssclean/",
    "platform": null,
    "project_url": "https://pypi.org/project/cssclean/",
    "project_urls": {
      "Homepage": "https://github.com/vsoch/cssclean"
    },
    "release_url": "https://pypi.org/project/cssclean/0.0.12/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "remove un-used css from a file",
    "version": "0.0.12",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 14051204,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8c8a0dcf48d003ce527da54343315098fb4637d2b44fa0a70d428a02296f4153",
          "md5": "669caa3fc6e03e39e24bcf3faa4cc005",
          "sha256": "5f7c4a46cf41812111005af1c223ce8c03b03ef3de73e30bac202b59f984b866"
        },
        "downloads": -1,
        "filename": "cssclean-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "669caa3fc6e03e39e24bcf3faa4cc005",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 14501,
        "upload_time": "2022-06-05T18:56:29",
        "upload_time_iso_8601": "2022-06-05T18:56:29.138748Z",
        "url": "https://files.pythonhosted.org/packages/8c/8a/0dcf48d003ce527da54343315098fb4637d2b44fa0a70d428a02296f4153/cssclean-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.11": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "61dba0e501bbd571ee443d2602b2244dd38b761a6d250c862220d9db31718902",
          "md5": "4f9f437b072410d575d59593dc6c645f",
          "sha256": "f3640b4543649fc210a9c2ca436ffc4cf6613a50fe8032d7c79c3356beffb001"
        },
        "downloads": -1,
        "filename": "cssclean-0.0.11.tar.gz",
        "has_sig": false,
        "md5_digest": "4f9f437b072410d575d59593dc6c645f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 16125,
        "upload_time": "2022-06-06T00:00:19",
        "upload_time_iso_8601": "2022-06-06T00:00:19.981616Z",
        "url": "https://files.pythonhosted.org/packages/61/db/a0e501bbd571ee443d2602b2244dd38b761a6d250c862220d9db31718902/cssclean-0.0.11.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.12": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "43c1063d34a99bcc52afc2fd91d2f5e6c0e4ce2d69bc47e1777c296e0f3684d8",
          "md5": "c4931116d198e76c468f0edd0c2b8ad1",
          "sha256": "6dc427ac559ecb216cd7b5894b2f4471ce649a66dd796783d570483653f582ef"
        },
        "downloads": -1,
        "filename": "cssclean-0.0.12.tar.gz",
        "has_sig": false,
        "md5_digest": "c4931116d198e76c468f0edd0c2b8ad1",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 17334,
        "upload_time": "2022-06-07T00:02:22",
        "upload_time_iso_8601": "2022-06-07T00:02:22.926334Z",
        "url": "https://files.pythonhosted.org/packages/43/c1/063d34a99bcc52afc2fd91d2f5e6c0e4ce2d69bc47e1777c296e0f3684d8/cssclean-0.0.12.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "43c1063d34a99bcc52afc2fd91d2f5e6c0e4ce2d69bc47e1777c296e0f3684d8",
        "md5": "c4931116d198e76c468f0edd0c2b8ad1",
        "sha256": "6dc427ac559ecb216cd7b5894b2f4471ce649a66dd796783d570483653f582ef"
      },
      "downloads": -1,
      "filename": "cssclean-0.0.12.tar.gz",
      "has_sig": false,
      "md5_digest": "c4931116d198e76c468f0edd0c2b8ad1",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 17334,
      "upload_time": "2022-06-07T00:02:22",
      "upload_time_iso_8601": "2022-06-07T00:02:22.926334Z",
      "url": "https://files.pythonhosted.org/packages/43/c1/063d34a99bcc52afc2fd91d2f5e6c0e4ce2d69bc47e1777c296e0f3684d8/cssclean-0.0.12.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}