{
  "info": {
    "author": "Hyunwoong Ko",
    "author_email": "gusdnd852@naver.com",
    "bugtrack_url": null,
    "classifiers": [
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.2",
      "Programming Language :: Python :: 3.3",
      "Programming Language :: Python :: 3.4",
      "Programming Language :: Python :: 3.5",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9",
      "Topic :: Scientific/Engineering :: Artificial Intelligence",
      "Topic :: Software Development :: Libraries"
    ],
    "description": "# Stop Sequencer\n- Implementation of stop sequencer for Huggingface Transformers.\n- Note post-processing must be used together because limitation of transformers implementation.\n<br><br>\n  \n## 1. Installation\n```console\npip install stop-sequencer\n```\n<br>\n\n## 2. Usage\n### 2.1. Generation without StopSequencer\n```python\nfrom transformers import AutoModelForCausalLM, AutoTokenizer\n\nmodel = AutoModelForCausalLM.from_pretrained(\"gpt2\")\ntokenizer = AutoTokenizer.from_pretrained(\"gpt2\")\ntokens = tokenizer(\n    \"Kevin: Hello \"\n    \"Ryan: Hi \"\n    \"Kevin: What are you doing? \"\n    \"Ryan: I am watching TV. you? \"\n    \"Kevin: \",\n    return_tensors=\"pt\",\n)[\"input_ids\"]\n\noutputs = model.generate(\n    tokens,\n    num_beams=5,\n    no_repeat_ngram_size=4,\n    repetition_penalty=1.5,\n    max_length=100,\n)\n\noutputs = tokenizer.batch_decode(outputs[:, tokens.size(-1):], skip_special_tokens=True)[0]\nprint(outputs)\n```\n```\nive been watching TV for a long time. Ryan: I have been watching TV since I was 12 years old. Kevin: So what do you want me to do? Ryan: Well, I want you to watch TV. You know what I mean? I'm going to be watching TV. I'm not going to sit down and watch TV. I don't want to\n```\n<br><br>\n\n### 2.2. Generation with StopSequencer\n\n```python\nfrom stop_sequencer import StopSequencer\n\nstop_texts = [\"Ryan:\", \"Kevin:\"]\n\nstop_sequencer = StopSequencer(\n    model,\n    model_type=\"causal\",  # or seq2seq\n    tokenizer=tokenizer,\n)\n\nmodel = stop_sequencer.register_stop_texts(\n    stop_texts=stop_texts,\n    input_length=tokens.size(-1),\n)\n\noutputs = model.generate(\n    tokens,\n    num_beams=5,\n    no_repeat_ngram_size=4,\n    repetition_penalty=1.5,\n    max_length=100,\n)\n\noutputs = tokenizer.batch_decode(outputs[:, tokens.size(-1):], skip_special_tokens=True)[0]\nprint(outputs)\n```\n```\nive been watching TV for a long time. Ryan: I have\n```\nYou can see that `Ryan: I have` is contained in the generation result and then generation is finished. The generation can be terminated after stop text (`Ryan:`) is generated because of the limitation of Huggingface Transformers.\n<br><br>\n\n### 3. Generation with StopSequencer + post-processing\nTherefore, post-processing must be performed to completely exclude stop texts from generated text.\n```python\nfor s in stop_texts:\n    outputs = outputs.split(s)[0].strip()\n    \nprint(outputs)\n```\n```\nive been watching TV for a long time.\n```\n<br><br>\n\n## License\n```\nCopyright 2021 Hyunwoong Ko.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n```",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/hyunwoongko/stop-sequencer",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "stop-sequencer",
    "package_url": "https://pypi.org/project/stop-sequencer/",
    "platform": null,
    "project_url": "https://pypi.org/project/stop-sequencer/",
    "project_urls": {
      "Homepage": "https://github.com/hyunwoongko/stop-sequencer"
    },
    "release_url": "https://pypi.org/project/stop-sequencer/1.2.2/",
    "requires_dist": null,
    "requires_python": ">=3",
    "summary": "Implementation of stop sequencer for Huggingface Transformers",
    "version": "1.2.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16754557,
  "releases": {
    "1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c948fb922bcff6eeed0e4463dbd8b012b7a1f561d0729f6e2d07ad5ce078ade4",
          "md5": "5f319552b886bfb4e68496f2d3815bb4",
          "sha256": "c99b543a9f1fb4e407e265e5f76eb060a66af3393c3fa7cf916ec82dc67e1bd1"
        },
        "downloads": -1,
        "filename": "stop_sequencer-1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "5f319552b886bfb4e68496f2d3815bb4",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3",
        "size": 2630,
        "upload_time": "2021-07-07T00:49:12",
        "upload_time_iso_8601": "2021-07-07T00:49:12.081282Z",
        "url": "https://files.pythonhosted.org/packages/c9/48/fb922bcff6eeed0e4463dbd8b012b7a1f561d0729f6e2d07ad5ce078ade4/stop_sequencer-1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "53989397a53ef6c7be69eee0c117e35ccd6d3bb9cebf0ba5060505a27e8aa85d",
          "md5": "9cb608721e12ae539f7daf777d630940",
          "sha256": "6f7a71341bfaa19447625d7613cca68e2ef552b2d44761cf736d79a92a12b3d6"
        },
        "downloads": -1,
        "filename": "stop_sequencer-1.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "9cb608721e12ae539f7daf777d630940",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3",
        "size": 5154,
        "upload_time": "2021-07-07T03:33:17",
        "upload_time_iso_8601": "2021-07-07T03:33:17.298335Z",
        "url": "https://files.pythonhosted.org/packages/53/98/9397a53ef6c7be69eee0c117e35ccd6d3bb9cebf0ba5060505a27e8aa85d/stop_sequencer-1.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "aded81564056c3cf82c7295fc143ee7586a6306ecc5a2cec9ec6b88be2609c08",
          "md5": "10a43fc86935393cc304774da4d0b5e2",
          "sha256": "14c83bf52e3a8ee08bb0a7f96d71c027ba8f8d0980c6c6efa14a365be182e301"
        },
        "downloads": -1,
        "filename": "stop_sequencer-1.2.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "10a43fc86935393cc304774da4d0b5e2",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3",
        "size": 5123,
        "upload_time": "2021-07-07T03:44:28",
        "upload_time_iso_8601": "2021-07-07T03:44:28.211928Z",
        "url": "https://files.pythonhosted.org/packages/ad/ed/81564056c3cf82c7295fc143ee7586a6306ecc5a2cec9ec6b88be2609c08/stop_sequencer-1.2.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.2.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "34a7de1bcb0c4bc37fd016d480fb7e9e835bdab802f57ac42472d97f81967deb",
          "md5": "ca56fe730545a13a6b51a9f40b1692ff",
          "sha256": "a7e46603e258883f4db0057d8b3995591f260e4864d4898019fc074d5ec3861d"
        },
        "downloads": -1,
        "filename": "stop-sequencer-1.2.1.tar.gz",
        "has_sig": false,
        "md5_digest": "ca56fe730545a13a6b51a9f40b1692ff",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3",
        "size": 3632,
        "upload_time": "2022-01-25T10:36:27",
        "upload_time_iso_8601": "2022-01-25T10:36:27.145394Z",
        "url": "https://files.pythonhosted.org/packages/34/a7/de1bcb0c4bc37fd016d480fb7e9e835bdab802f57ac42472d97f81967deb/stop-sequencer-1.2.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.2.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "be0ad7415abdba905e994938f647bdd5d87e08e46b62de7fa69104ffd97d53a0",
          "md5": "f458ce27ef18ddadd3d072bf0e39650f",
          "sha256": "b08e8b83fe712bd284502f2c9ccdd09a8a697cb0108f82515c3ddfc9235120b8"
        },
        "downloads": -1,
        "filename": "stop-sequencer-1.2.2.tar.gz",
        "has_sig": false,
        "md5_digest": "f458ce27ef18ddadd3d072bf0e39650f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3",
        "size": 3605,
        "upload_time": "2023-02-08T19:16:54",
        "upload_time_iso_8601": "2023-02-08T19:16:54.987496Z",
        "url": "https://files.pythonhosted.org/packages/be/0a/d7415abdba905e994938f647bdd5d87e08e46b62de7fa69104ffd97d53a0/stop-sequencer-1.2.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "be0ad7415abdba905e994938f647bdd5d87e08e46b62de7fa69104ffd97d53a0",
        "md5": "f458ce27ef18ddadd3d072bf0e39650f",
        "sha256": "b08e8b83fe712bd284502f2c9ccdd09a8a697cb0108f82515c3ddfc9235120b8"
      },
      "downloads": -1,
      "filename": "stop-sequencer-1.2.2.tar.gz",
      "has_sig": false,
      "md5_digest": "f458ce27ef18ddadd3d072bf0e39650f",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3",
      "size": 3605,
      "upload_time": "2023-02-08T19:16:54",
      "upload_time_iso_8601": "2023-02-08T19:16:54.987496Z",
      "url": "https://files.pythonhosted.org/packages/be/0a/d7415abdba905e994938f647bdd5d87e08e46b62de7fa69104ffd97d53a0/stop-sequencer-1.2.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}