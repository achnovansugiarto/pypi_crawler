{
  "info": {
    "author": "cj-mills",
    "author_email": "millscj.mills2@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: Apache Software License",
      "Natural Language :: English",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "cjm-diffusers-utils\n================\n\n<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->\n\n## Install\n\n``` sh\npip install cjm_diffusers_utils\n```\n\n## How to use\n\n``` python\nimport torch\nfrom cjm_pytorch_utils.core import get_torch_device\ndevice = get_torch_device()\ndtype = torch.float16 if device == 'cuda' else torch.float16\ndevice, dtype\n```\n\n    ('cuda', torch.float16)\n\n### pil_to_latent\n\n``` python\nfrom cjm_diffusers_utils.core import pil_to_latent\nfrom PIL import Image\nfrom diffusers import AutoencoderKL\n```\n\n``` python\nmodel_name = \"stabilityai/stable-diffusion-2-1\"\nvae = AutoencoderKL.from_pretrained(model_name, subfolder=\"vae\").to(device=device, dtype=dtype)\n```\n\n``` python\nimg_path = img_path = '../images/cat.jpg'\nsrc_img = Image.open(img_path).convert('RGB')\nprint(f\"Source Image Size: {src_img.size}\")\n\nimg_latents = pil_to_latent(src_img, vae)\nprint(f\"Latent Dimensions: {img_latents.shape}\")\n```\n\n    Source Image Size: (768, 512)\n    Latent Dimensions: torch.Size([1, 4, 64, 96])\n\n### latent_to_pil\n\n``` python\nfrom cjm_diffusers_utils.core import latent_to_pil\n```\n\n``` python\ndecoded_img = latent_to_pil(img_latents, vae)\nprint(f\"Decoded Image Size: {decoded_img.size}\")\n```\n\n    Decoded Image Size: (768, 512)\n\n### text_to_emb\n\n``` python\nfrom cjm_diffusers_utils.core import text_to_emb\nfrom transformers import CLIPTextModel, CLIPTokenizer\n```\n\n``` python\n# Load the tokenizer for the specified model\ntokenizer = CLIPTokenizer.from_pretrained(model_name, subfolder=\"tokenizer\")\n# Load the text encoder for the specified model\ntext_encoder = CLIPTextModel.from_pretrained(model_name, subfolder=\"text_encoder\").to(device=device, dtype=dtype)\n```\n\n``` python\nprompt = \"A cat sitting on the floor.\"\ntext_emb = text_to_emb(prompt, tokenizer, text_encoder)\ntext_emb.shape\n```\n\n    torch.Size([2, 77, 1024])\n\n### prepare_noise_scheduler\n\n``` python\nfrom cjm_diffusers_utils.core import prepare_noise_scheduler\nfrom diffusers import DEISMultistepScheduler\n```\n\n``` python\nnoise_scheduler = DEISMultistepScheduler.from_pretrained(model_name, subfolder='scheduler')\nprint(f\"Number of timesteps: {len(noise_scheduler.timesteps)}\")\nprint(noise_scheduler.timesteps[:10])\n\nnoise_scheduler = prepare_noise_scheduler(noise_scheduler, 70, 1.0)\nprint(f\"Number of timesteps: {len(noise_scheduler.timesteps)}\")\nprint(noise_scheduler.timesteps[:10])\n```\n\n    Number of timesteps: 1000\n    tensor([999., 998., 997., 996., 995., 994., 993., 992., 991., 990.])\n    Number of timesteps: 70\n    tensor([999, 985, 970, 956, 942, 928, 913, 899, 885, 871])\n\n### prepare_depth_mask\n\n``` python\nfrom cjm_diffusers_utils.core import prepare_depth_mask\n```\n\n``` python\ndepth_map_path = '../images/depth-cat.png'\ndepth_map = Image.open(depth_map_path)\nprint(f\"Depth map size: {depth_map.size}\")\n\ndepth_mask = prepare_depth_mask(depth_map).to(device=device, dtype=dtype)\ndepth_mask.shape, depth_mask.min(), depth_mask.max()\n```\n\n    Depth map size: (768, 512)\n\n    (torch.Size([1, 1, 64, 96]),\n     tensor(-1., device='cuda:0', dtype=torch.float16),\n     tensor(1., device='cuda:0', dtype=torch.float16))\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/cj-mills/cjm-diffusers-utils",
    "keywords": "nbdev jupyter notebook python",
    "license": "Apache Software License 2.0",
    "maintainer": "",
    "maintainer_email": "",
    "name": "cjm-diffusers-utils",
    "package_url": "https://pypi.org/project/cjm-diffusers-utils/",
    "platform": null,
    "project_url": "https://pypi.org/project/cjm-diffusers-utils/",
    "project_urls": {
      "Homepage": "https://github.com/cj-mills/cjm-diffusers-utils"
    },
    "release_url": "https://pypi.org/project/cjm-diffusers-utils/0.0.3/",
    "requires_dist": [
      "fastcore",
      "tqdm",
      "torch",
      "torchvision",
      "diffusers",
      "transformers",
      "accelerate",
      "cjm-pytorch-utils"
    ],
    "requires_python": ">=3.7",
    "summary": "Some utility functions I frequently use with ðŸ¤— diffusers.",
    "version": "0.0.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16778418,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8ead05996b116d86f7f4c6b1594af69cf240f83d6968b001d147a1318e73d248",
          "md5": "597b0705dfb1fdf894c61f312f877f06",
          "sha256": "7e0e40ba414c2452ae6b776b733000e33a1a0c4438027fc9a3e67bd3c7be0529"
        },
        "downloads": -1,
        "filename": "cjm_diffusers_utils-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "597b0705dfb1fdf894c61f312f877f06",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 8245,
        "upload_time": "2023-01-24T20:08:35",
        "upload_time_iso_8601": "2023-01-24T20:08:35.439206Z",
        "url": "https://files.pythonhosted.org/packages/8e/ad/05996b116d86f7f4c6b1594af69cf240f83d6968b001d147a1318e73d248/cjm_diffusers_utils-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "71a94a829206ae5d2441815b6219abb6621108e29b82a594e99427e4feb0e32e",
          "md5": "d970d75fc3135132bf63129f4aba0176",
          "sha256": "17a5dc87a57d204be6b8cc1201994452b191994f9f482054f4872db80dfb4bbc"
        },
        "downloads": -1,
        "filename": "cjm-diffusers-utils-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "d970d75fc3135132bf63129f4aba0176",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 7062,
        "upload_time": "2023-01-24T20:08:37",
        "upload_time_iso_8601": "2023-01-24T20:08:37.799523Z",
        "url": "https://files.pythonhosted.org/packages/71/a9/4a829206ae5d2441815b6219abb6621108e29b82a594e99427e4feb0e32e/cjm-diffusers-utils-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ccd2abd35477605496300e4472557bd24eb9d4d398a9a9d4d65bf468daf8af8f",
          "md5": "c6842db1fb3be571f7398e8029715e03",
          "sha256": "af13da7fd3dfaf832de3c43cfbe074c5e235a462b82cb97f1cd75646f4e4df2a"
        },
        "downloads": -1,
        "filename": "cjm_diffusers_utils-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "c6842db1fb3be571f7398e8029715e03",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 8778,
        "upload_time": "2023-02-09T23:09:46",
        "upload_time_iso_8601": "2023-02-09T23:09:46.278830Z",
        "url": "https://files.pythonhosted.org/packages/cc/d2/abd35477605496300e4472557bd24eb9d4d398a9a9d4d65bf468daf8af8f/cjm_diffusers_utils-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "198a421ce2614e4f7bb7704f89342984d0f627130574775360987a379113b405",
          "md5": "5f7b4603ff5fcbf883c337cfe9a5c1db",
          "sha256": "23ee0a9ada803fa9501541a5ffbc46471da39d45e0251c5bbd63ae2aa056c6ef"
        },
        "downloads": -1,
        "filename": "cjm-diffusers-utils-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "5f7b4603ff5fcbf883c337cfe9a5c1db",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 8351,
        "upload_time": "2023-02-09T23:09:48",
        "upload_time_iso_8601": "2023-02-09T23:09:48.893064Z",
        "url": "https://files.pythonhosted.org/packages/19/8a/421ce2614e4f7bb7704f89342984d0f627130574775360987a379113b405/cjm-diffusers-utils-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "02f168b5f173b88db8691821582b2ee3da04e8c6e20dab94adf74dbc0c236c47",
          "md5": "6954f8a8af9e436140ada69431391360",
          "sha256": "116643f1294b45aa2a11bb7816be9010545795aa7c66237727f9761476bb61d9"
        },
        "downloads": -1,
        "filename": "cjm_diffusers_utils-0.0.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "6954f8a8af9e436140ada69431391360",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 8796,
        "upload_time": "2023-02-09T23:19:30",
        "upload_time_iso_8601": "2023-02-09T23:19:30.361771Z",
        "url": "https://files.pythonhosted.org/packages/02/f1/68b5f173b88db8691821582b2ee3da04e8c6e20dab94adf74dbc0c236c47/cjm_diffusers_utils-0.0.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5bc08a3f0e75172b23d60905f9a0e3ab11cb1e0ed648999974627aef30a7a54a",
          "md5": "ec8f1ebea9a5bc28e03f4dc284c2c101",
          "sha256": "ac9ccdc081720ffd717b21cf5ff3e992e16adacb3b62d6ad21b83e603dded7f0"
        },
        "downloads": -1,
        "filename": "cjm-diffusers-utils-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "ec8f1ebea9a5bc28e03f4dc284c2c101",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 8415,
        "upload_time": "2023-02-09T23:19:32",
        "upload_time_iso_8601": "2023-02-09T23:19:32.100722Z",
        "url": "https://files.pythonhosted.org/packages/5b/c0/8a3f0e75172b23d60905f9a0e3ab11cb1e0ed648999974627aef30a7a54a/cjm-diffusers-utils-0.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "02f168b5f173b88db8691821582b2ee3da04e8c6e20dab94adf74dbc0c236c47",
        "md5": "6954f8a8af9e436140ada69431391360",
        "sha256": "116643f1294b45aa2a11bb7816be9010545795aa7c66237727f9761476bb61d9"
      },
      "downloads": -1,
      "filename": "cjm_diffusers_utils-0.0.3-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "6954f8a8af9e436140ada69431391360",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.7",
      "size": 8796,
      "upload_time": "2023-02-09T23:19:30",
      "upload_time_iso_8601": "2023-02-09T23:19:30.361771Z",
      "url": "https://files.pythonhosted.org/packages/02/f1/68b5f173b88db8691821582b2ee3da04e8c6e20dab94adf74dbc0c236c47/cjm_diffusers_utils-0.0.3-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "5bc08a3f0e75172b23d60905f9a0e3ab11cb1e0ed648999974627aef30a7a54a",
        "md5": "ec8f1ebea9a5bc28e03f4dc284c2c101",
        "sha256": "ac9ccdc081720ffd717b21cf5ff3e992e16adacb3b62d6ad21b83e603dded7f0"
      },
      "downloads": -1,
      "filename": "cjm-diffusers-utils-0.0.3.tar.gz",
      "has_sig": false,
      "md5_digest": "ec8f1ebea9a5bc28e03f4dc284c2c101",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.7",
      "size": 8415,
      "upload_time": "2023-02-09T23:19:32",
      "upload_time_iso_8601": "2023-02-09T23:19:32.100722Z",
      "url": "https://files.pythonhosted.org/packages/5b/c0/8a3f0e75172b23d60905f9a0e3ab11cb1e0ed648999974627aef30a7a54a/cjm-diffusers-utils-0.0.3.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}