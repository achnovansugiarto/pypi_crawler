{
  "info": {
    "author": "",
    "author_email": "",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# Chii\n \nA minimal marketplace bot maker.\n\n## Installation\n\n```shell\npip install chii\n```\n\n## Usage\n\nImport and initialize the `Chii` object:\n\n```py\nfrom chii.main import Chii\n\nchii = Chii(\"<bot_token>\")\n```\n\n### Add decorators to the following callback functions:\n\nThis function takes in a query and must return an iterable of search results from the query (e.g. a `List` of result `Dict`s).\n\n```py\n@chii.query\ndef make_query(query: str):\n```\n\nThis function takes in a result (an element of the iterable returned by `make_query`) and returns a string containing the desired formatted message to be sent out to the user.\n\n```py\n@chii.message\ndef get_message(result) -> str:\n```\n\nThis function takes in a result and must return a uniquely identifiable attribute of the result to use as the 'primary key'.\n\n```py\n@chii.key\ndef get_key(result):\n```\n\nThis function takes in a result and must return the image url of the result.\n\n```py\n@chii.image\ndef get_image(result) -> str:\n```\n\nStart the bot:\n\n```py\nif __name__ == \"__main__\":\n    chii.start()\n```\n\n## Bot Usage\n\nAdd a query\n\n```\n/add <query>\n```\n\nRemove a query\n\n```\n/rm <query>\n```\n\nList queries\n\n```\n/ls\n```\n\nFetch queries\n\n```\n/fetch\n```\n\n## Example\n\nBelow is a complete example made for the Yahoo! Auctions marketplace.\n\n```py\nimport re\nimport requests\nimport urllib\nfrom bs4 import BeautifulSoup\nfrom datetime import datetime\n\nfrom chii.main import Chii\n\nYAHUOKU_SEARCH_TEMPLATE = r\"https://auctions.yahoo.co.jp/search/search?p={query}&b={start}&n={count}&s1=new&o1=d\"\n\nPOST_TIMESTAMP_REGEX = r\"^.*i-img\\d+x\\d+-(\\d{10}).*$\"\nAUCTION_TIMESTAMP_REGEX = r\"^.*etm=(\\d{10}),stm=(\\d{10}).*$\"\n\nKEY_TITLE = \"title\"\nKEY_URL = \"url\"\nKEY_IMAGE = \"img\"\nKEY_POST_TIMESTAMP = \"post_ts\"\nKEY_END_TIMESTAMP = \"end_ts\"\nKEY_START_TIMESTAMP = \"start_ts\"\nKEY_BUYNOW_PRICE = \"buynow_price\"\nKEY_CURRENT_PRICE = \"curr_price\"\nKEY_START_PRICE = \"start_price\"\nKEY_ITEM_ID = \"item_id\"\n\nchii = Chii(\"<bot_token>\")\n\n\n@chii.image\ndef get_image(result):\n    return result[KEY_IMAGE]\n\n\n@chii.key\ndef get_key(result):\n    return result[KEY_ITEM_ID]\n\n\n@chii.message\ndef get_message(result):\n    return f\"{result[KEY_URL]}\\n`{result[KEY_TITLE]}`\\n_{datetime.fromtimestamp(result[KEY_POST_TIMESTAMP]).strftime('%d/%m/%Y %I:%M:%S %p')}_\\n*{result[KEY_START_PRICE]}å††*\"\n\n\n@chii.query\ndef make_query(query: str):\n    url = YAHUOKU_SEARCH_TEMPLATE.format(query=urllib.parse.quote_plus(query), start=1, count=100)\n    r = requests.get(url)\n\n    return parse_raw_results(r.text)\n\n\ndef parse_raw_results(raw: str):\n    results = []\n    soup = BeautifulSoup(raw, \"lxml\")\n\n    product_details = soup.find_all(\"div\", class_=\"Product__detail\")\n    for product_detail in product_details:\n        product_bonuses = product_detail.find_all(\"div\", class_=\"Product__bonus\")\n        product_titlelinks = product_detail.find_all(\"a\", class_=\"Product__titleLink\")\n\n        if not product_bonuses or not product_titlelinks:\n            continue\n\n        product_bonus = product_bonuses[0]\n        product_titlelink = product_titlelinks[0]\n\n        auction_title = product_titlelink[\"data-auction-title\"]\n        auction_img = product_titlelink[\"data-auction-img\"]\n        href = product_titlelink[\"href\"]\n        cl_params = product_titlelink[\"data-cl-params\"]\n\n        match = re.match(POST_TIMESTAMP_REGEX, auction_img)\n        if not match:\n            continue\n\n        post_timestamp = int(match.group(1))\n\n        match = re.match(AUCTION_TIMESTAMP_REGEX, cl_params)\n        if not match:\n            continue\n\n        end_timestamp = int(match.group(1))\n        start_timestamp = int(match.group(2))\n\n        auction_id = product_bonus[\"data-auction-id\"]\n        auction_buynowprice = product_bonus[\"data-auction-buynowprice\"]\n        auction_price = product_bonus[\"data-auction-price\"]\n        auction_startprice = product_bonus[\"data-auction-startprice\"]\n\n        result = {\n            KEY_TITLE: auction_title,\n            KEY_IMAGE: auction_img,\n            KEY_URL: href,\n            KEY_POST_TIMESTAMP: post_timestamp,\n            KEY_END_TIMESTAMP: end_timestamp,\n            KEY_START_TIMESTAMP: start_timestamp,\n            KEY_ITEM_ID: auction_id,\n            KEY_BUYNOW_PRICE: auction_buynowprice,\n            KEY_CURRENT_PRICE: auction_price,\n            KEY_START_PRICE: auction_startprice,\n        }\n\n        results.append(result)\n\n    return results\n\n\nif __name__ == \"__main__\":\n    chii.start()\n```\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "Chii",
    "package_url": "https://pypi.org/project/Chii/",
    "platform": null,
    "project_url": "https://pypi.org/project/Chii/",
    "project_urls": null,
    "release_url": "https://pypi.org/project/Chii/1.1.4/",
    "requires_dist": [
      "requests",
      "python-telegram-bot (==13.15)"
    ],
    "requires_python": "",
    "summary": "A minimal marketplace bot maker.",
    "version": "1.1.4",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16682385,
  "releases": {
    "1.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "470218f7449cad71df1deda0960097b0713fd001d131190344675264d9ad7dad",
          "md5": "bee8d1380540b5f8229b67964b42cd83",
          "sha256": "e8b687400269b626fe03fa681ac55152330e9a3bea55a0396a78f94aef653dcf"
        },
        "downloads": -1,
        "filename": "Chii-1.0.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "bee8d1380540b5f8229b67964b42cd83",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 2680,
        "upload_time": "2023-02-02T06:59:39",
        "upload_time_iso_8601": "2023-02-02T06:59:39.761354Z",
        "url": "https://files.pythonhosted.org/packages/47/02/18f7449cad71df1deda0960097b0713fd001d131190344675264d9ad7dad/Chii-1.0.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6cb4843fb0dfc1a629c0c7f8a645b7be3c4f627b5335dd5c169985546b0e1489",
          "md5": "5300fd69637a49b073824caed5d85c75",
          "sha256": "5764c72cc34a6f37ba67148d0316d07201a5c442d0a8f47d2c6bf667a25e9cd7"
        },
        "downloads": -1,
        "filename": "Chii-1.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "5300fd69637a49b073824caed5d85c75",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 2399,
        "upload_time": "2023-02-02T06:59:42",
        "upload_time_iso_8601": "2023-02-02T06:59:42.142964Z",
        "url": "https://files.pythonhosted.org/packages/6c/b4/843fb0dfc1a629c0c7f8a645b7be3c4f627b5335dd5c169985546b0e1489/Chii-1.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "0e33096ae9bcccaa0e5fa85624ad8907afb211c2bc999a15d894d3278ca6616f",
          "md5": "fde9226b075a8a1d46c0d5635f3804cc",
          "sha256": "e4c335a3385d77dbb3a62ce06c4b974526f93b4d377e00c43bd588b22b5f73ca"
        },
        "downloads": -1,
        "filename": "Chii-1.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "fde9226b075a8a1d46c0d5635f3804cc",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 4145,
        "upload_time": "2023-02-02T07:33:48",
        "upload_time_iso_8601": "2023-02-02T07:33:48.868813Z",
        "url": "https://files.pythonhosted.org/packages/0e/33/096ae9bcccaa0e5fa85624ad8907afb211c2bc999a15d894d3278ca6616f/Chii-1.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8e016d66291d4e3c6d539511808004a81acba20a26349f8457f22cb1ea60e38a",
          "md5": "e8a67b0a0f708006a7b85dd6049f78d8",
          "sha256": "1fa7202dc079a7511d6581823cf25f97c017e0928aef1870bff98048b0805290"
        },
        "downloads": -1,
        "filename": "Chii-1.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "e8a67b0a0f708006a7b85dd6049f78d8",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 4034,
        "upload_time": "2023-02-02T07:33:50",
        "upload_time_iso_8601": "2023-02-02T07:33:50.370360Z",
        "url": "https://files.pythonhosted.org/packages/8e/01/6d66291d4e3c6d539511808004a81acba20a26349f8457f22cb1ea60e38a/Chii-1.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "489a9b58405e86ac1a887ed7579e91ef2409f99c16aa88b249ffff0be1cd4005",
          "md5": "9d15ce4658a9dad937601cf3133345cf",
          "sha256": "8ddcfe4c1a04ad3d0ef98951676d75ff4ed5978c6d518d44ad16ce3f131d5c03"
        },
        "downloads": -1,
        "filename": "Chii-1.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "9d15ce4658a9dad937601cf3133345cf",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 4149,
        "upload_time": "2023-02-02T07:35:16",
        "upload_time_iso_8601": "2023-02-02T07:35:16.622491Z",
        "url": "https://files.pythonhosted.org/packages/48/9a/9b58405e86ac1a887ed7579e91ef2409f99c16aa88b249ffff0be1cd4005/Chii-1.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d2e713402d0d70e52c42d7ed4e0a3e1d0462ddff69eeed96f7012c56ef29ea21",
          "md5": "a61b051ab93d4180f9ef682b5a5dfa4f",
          "sha256": "49381335d8beb447b70016cd1e3c0606ec5a412bf065e27c1aa2733f2213b5a2"
        },
        "downloads": -1,
        "filename": "Chii-1.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "a61b051ab93d4180f9ef682b5a5dfa4f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 4040,
        "upload_time": "2023-02-02T07:35:18",
        "upload_time_iso_8601": "2023-02-02T07:35:18.024162Z",
        "url": "https://files.pythonhosted.org/packages/d2/e7/13402d0d70e52c42d7ed4e0a3e1d0462ddff69eeed96f7012c56ef29ea21/Chii-1.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.1.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1190160daa72d1dc652930345e4d1ab0de66f4da8fd2b436ecc39b3472d159f5",
          "md5": "be6f4d0807e0d6cc2115efa7af81bf2a",
          "sha256": "bb5e4ead9f7d32e2ba7dced16f99d96faf8240ac6501126ce5628e218d8bec98"
        },
        "downloads": -1,
        "filename": "Chii-1.1.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "be6f4d0807e0d6cc2115efa7af81bf2a",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 4173,
        "upload_time": "2023-02-02T13:18:19",
        "upload_time_iso_8601": "2023-02-02T13:18:19.753947Z",
        "url": "https://files.pythonhosted.org/packages/11/90/160daa72d1dc652930345e4d1ab0de66f4da8fd2b436ecc39b3472d159f5/Chii-1.1.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d14ca8ec716a8305b98680726e94d0a0c4513afb43af8512cf10a8d164d230cc",
          "md5": "ed7be0f0c1a224eda171255537d27f6f",
          "sha256": "d28a944aa1380335e9e4431ff0c7e54f8c790eea8ab9ba074445c4b347da0cfd"
        },
        "downloads": -1,
        "filename": "Chii-1.1.2.tar.gz",
        "has_sig": false,
        "md5_digest": "ed7be0f0c1a224eda171255537d27f6f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 4066,
        "upload_time": "2023-02-02T13:18:21",
        "upload_time_iso_8601": "2023-02-02T13:18:21.470100Z",
        "url": "https://files.pythonhosted.org/packages/d1/4c/a8ec716a8305b98680726e94d0a0c4513afb43af8512cf10a8d164d230cc/Chii-1.1.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.1.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "01d523716c8d1e8c56f26038b4a37fe925ee2e32b996968a4ac0e57f80f236ba",
          "md5": "8a9de945dc45299666e0584a9f28d2d8",
          "sha256": "b8e08eb02f6ac19e917b8841610d0b67441d20bbb1b83b5868f9d7c7586aa4b8"
        },
        "downloads": -1,
        "filename": "Chii-1.1.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "8a9de945dc45299666e0584a9f28d2d8",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 4217,
        "upload_time": "2023-02-03T09:11:44",
        "upload_time_iso_8601": "2023-02-03T09:11:44.555698Z",
        "url": "https://files.pythonhosted.org/packages/01/d5/23716c8d1e8c56f26038b4a37fe925ee2e32b996968a4ac0e57f80f236ba/Chii-1.1.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "f2ce838c92cfe8ab7d7698467401e0005018939e3b8dec9c57cd4d21833c8cfd",
          "md5": "fc827aff404dffb20293084d961974bd",
          "sha256": "308db4b49b6b178b0eb97068922364e7793106d648af276d5fd86d8cb862dcaa"
        },
        "downloads": -1,
        "filename": "Chii-1.1.3.tar.gz",
        "has_sig": false,
        "md5_digest": "fc827aff404dffb20293084d961974bd",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 4116,
        "upload_time": "2023-02-03T09:11:46",
        "upload_time_iso_8601": "2023-02-03T09:11:46.427487Z",
        "url": "https://files.pythonhosted.org/packages/f2/ce/838c92cfe8ab7d7698467401e0005018939e3b8dec9c57cd4d21833c8cfd/Chii-1.1.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.1.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8607a11817e75b3992fa13a59be7f41a7e4ac0f41e78d2260241f4a0983958c6",
          "md5": "9de03c0266d93742bdf803d28aef28db",
          "sha256": "6cc5b6f2c697c3691ecc20e3de05944b7cab02203cc24bd06ec540c931ec78b4"
        },
        "downloads": -1,
        "filename": "Chii-1.1.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "9de03c0266d93742bdf803d28aef28db",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 4212,
        "upload_time": "2023-02-03T14:24:26",
        "upload_time_iso_8601": "2023-02-03T14:24:26.507736Z",
        "url": "https://files.pythonhosted.org/packages/86/07/a11817e75b3992fa13a59be7f41a7e4ac0f41e78d2260241f4a0983958c6/Chii-1.1.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "44f87d6b58052650bc47217759aa626378b458527eef4bbf15d6615a500e61a3",
          "md5": "d47d55e14e9785fbcc91ad1c71d6321d",
          "sha256": "90aef0fd7e666e8791df068a363b5aa7c4dc970f3281bdc02af5b10aedb2ea30"
        },
        "downloads": -1,
        "filename": "Chii-1.1.4.tar.gz",
        "has_sig": false,
        "md5_digest": "d47d55e14e9785fbcc91ad1c71d6321d",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 4110,
        "upload_time": "2023-02-03T14:24:27",
        "upload_time_iso_8601": "2023-02-03T14:24:27.651687Z",
        "url": "https://files.pythonhosted.org/packages/44/f8/7d6b58052650bc47217759aa626378b458527eef4bbf15d6615a500e61a3/Chii-1.1.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "8607a11817e75b3992fa13a59be7f41a7e4ac0f41e78d2260241f4a0983958c6",
        "md5": "9de03c0266d93742bdf803d28aef28db",
        "sha256": "6cc5b6f2c697c3691ecc20e3de05944b7cab02203cc24bd06ec540c931ec78b4"
      },
      "downloads": -1,
      "filename": "Chii-1.1.4-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "9de03c0266d93742bdf803d28aef28db",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 4212,
      "upload_time": "2023-02-03T14:24:26",
      "upload_time_iso_8601": "2023-02-03T14:24:26.507736Z",
      "url": "https://files.pythonhosted.org/packages/86/07/a11817e75b3992fa13a59be7f41a7e4ac0f41e78d2260241f4a0983958c6/Chii-1.1.4-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "44f87d6b58052650bc47217759aa626378b458527eef4bbf15d6615a500e61a3",
        "md5": "d47d55e14e9785fbcc91ad1c71d6321d",
        "sha256": "90aef0fd7e666e8791df068a363b5aa7c4dc970f3281bdc02af5b10aedb2ea30"
      },
      "downloads": -1,
      "filename": "Chii-1.1.4.tar.gz",
      "has_sig": false,
      "md5_digest": "d47d55e14e9785fbcc91ad1c71d6321d",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 4110,
      "upload_time": "2023-02-03T14:24:27",
      "upload_time_iso_8601": "2023-02-03T14:24:27.651687Z",
      "url": "https://files.pythonhosted.org/packages/44/f8/7d6b58052650bc47217759aa626378b458527eef4bbf15d6615a500e61a3/Chii-1.1.4.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}