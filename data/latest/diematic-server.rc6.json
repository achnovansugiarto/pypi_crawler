{
  "info": {
    "author": "Ignacio Hernández-Ros",
    "author_email": "ignacio@hernandez-ros.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Environment :: No Input/Output (Daemon)",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: MIT License",
      "Operating System :: Unix",
      "Programming Language :: Python :: 3.7",
      "Topic :: Home Automation"
    ],
    "description": "# diematic\n\nA Unix service written in Python to monitor De Dietrich boiler equiped with Diematic system using Modbus RS-845 protocol.\nThe service reads data from the boiler and makes it available to be consumed in two ways:\nOptionally, the values fetched from the boiler are sent to an InfluxDB database.\nOptionally, a RESTful web server is installed and values can be obtained using GET and modified using POST requests.\n\n![Screenshot](images/web-requests.png?raw=true)\n![Screenshot](images/chronograf_screenshot.png?raw=true)\n\n## Hardware requirements\n\n * A De Dietrich boiler with Diematic regulation and a mini-din socket\n * A mini-din cable \n * A RS-845 to USB adapter\n * A nano-computer with a USB port and Python3 installed (Raspberry pi or similar)\n\nCheck tutorials in the \"references\" section below on how to do the hardware setup.\n\n## Installation\n```\ngit clone https://github.com/IgnacioHR/diematicd.git\ncd diematicd\npython3 -m venv venv\nsource venv/bin/activate\npip install -r requirements.txt\nmkdir /etc/diematic\ncp diematic.yaml /etc/diematic\ncp diematicd.service /etc/systemd/system\nsystemctl enable diematicd\nsystemctl start diematicd\n```\n\n## Test\nRun `python3 diematicd.py --help`\n```\nusage: diematicd.py [-h] [-b {none,influxdb}] [-d DEVICE] [-f]\n                    [-l {critical,error,warning,info,debug}] [-c CONFIG]\n                    [-w HOSTNAME] [-p PORT] [-s {loop,web,both}] [-a ADDRESS]\n                    [-t {Raw,DiematicOneDecimal,DiematicModeFlag,ErrorCode,DiematicCircType,DiematicProgram,bit0,bit1,bit2,bit3,bit4,bit5,bit6,bit7,bit8,bit9,bitA,bitB,bitC,bitD,bitE,bitF}]\n                    {status,start,stop,restart,reload,runonce,readregister}\n\npositional arguments:\n  {status,start,stop,restart,reload,runonce,readregister}\n                        action to take\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -b {none,influxdb}, --backend {none,influxdb}\n                        select data backend (default is influxdb)\n  -d DEVICE, --device DEVICE\n                        define modbus device\n  -f, --foreground      Run in the foreground do not detach process\n  -l {critical,error,warning,info,debug}, --logging {critical,error,warning,info,debug}\n                        define logging level (default is critical)\n  -c CONFIG, --config CONFIG\n                        alternate configuration file\n  -w HOSTNAME, --hostname HOSTNAME\n                        web server host name, defaults to 0.0.0.0\n  -p PORT, --port PORT  web server port, defaults to 8080\n  -s {loop,web,both}, --server {loop,web,both}\n                        servers to start\n  -a ADDRESS, --address ADDRESS\n                        register address to read whe action is readregister\n  -t {Raw,DiematicOneDecimal,DiematicModeFlag,ErrorCode,DiematicCircType,DiematicProgram,bit0,bit1,bit2,bit3,bit4,bit5,bit6,bit7,bit8,bit9,bitA,bitB,bitC,bitD,bitE,bitF}, --format {Raw,DiematicOneDecimal,DiematicModeFlag,ErrorCode,DiematicCircType,DiematicProgram,bit0,bit1,bit2,bit3,bit4,bit5,bit6,bit7,bit8,bit9,bitA,bitB,bitC,bitD,bitE,bitF}\n                        value format to apply for register read, default is\n                        Raw\n\n```\n\n## InfluxDB preparation\n### Minimal\n```\nCREATE DATABASE \"diematic\"\nCREATE USER \"diematic\" WITH PASSWORD 'mySecurePas$w0rd'\nGRANT ALL ON \"diematic\" TO \"diematic\"\nCREATE RETENTION POLICY \"one_week\" ON \"diematic\" DURATION 1w REPLICATION 1 DEFAULT\n```\n\n### Additionnal steps for down-sampling\n```\nCREATE RETENTION POLICY \"five_weeks\" ON \"diematic\" DURATION 5w REPLICATION 1\nCREATE RETENTION POLICY \"five_years\" ON \"diematic\" DURATION 260w REPLICATION 1\n\nCREATE CONTINUOUS QUERY \"cq_month\" ON \"diematic\" BEGIN\n  SELECT mean(/temperature/) AS \"mean_1h\", mean(/pressure/) AS \"mean_1h\", max(/temperature/) AS \"max_1h\", max(/pressure/) AS \"max_1h\"\n  INTO \"five_weeks\".:MEASUREMENT\n  FROM \"one_week\".\"diematic\"\n  GROUP BY time(1h),*\nEND\n\nCREATE CONTINUOUS QUERY \"cq_year\" ON \"diematic\" BEGIN\n  SELECT mean(/^mean_.*temperature/) AS \"mean_24h\", mean(/^mean_.*pressure/) AS \"mean_24h\", max(/^max_.*temperature/) AS \"max_24h\", max(/^max_.*pressure/) AS \"max_24h\"\n  INTO \"five_years\".:MEASUREMENT\n  FROM \"five_weeks\".\"diematic\"\n  GROUP BY time(24h),*\nEND\n```\n\n\n## References\n- https://github.com/gmasse/diematic.git\n- https://github.com/riptideio/pymodbus\n- (french) http://sarakha63-domotique.fr/chaudiere-de-dietrich-domotise-modbus/amp/\n- (french) https://www.dom-ip.com/wiki/Réalisation_d%27une_Interface_Web_pour_une_chaudière_De_Dietrich_équipée_d%27une_régulation_Diematic_3\n- (french forum) https://www.domotique-fibaro.fr/topic/5677-de-dietrich-diematic-isystem/\n- ~~(french forum) http://www.wit-square.fr/forum/topics/de-dietrich-communication-modbus-bi-ma-tre~~\n- (french, modbus registers sheets, copy from previous forum) https://drive.google.com/file/d/156qBsfRGJvOpJBJu5K4WMHUuwv34bZQN/view?usp=sharing\n\n\n",
    "description_content_type": "text/markdown; charset=UTF-8",
    "docs_url": null,
    "download_url": "https://github.com/IgnacioHR/diematic_server/archive/refs/tags/v2.2.tar.gz",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/IgnacioHR/diematic_server",
    "keywords": "python,home-automation,iot,influxdb,restful,modbus,de-dietrich,diematic",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "diematic-server",
    "package_url": "https://pypi.org/project/diematic-server/",
    "platform": null,
    "project_url": "https://pypi.org/project/diematic-server/",
    "project_urls": {
      "Download": "https://github.com/IgnacioHR/diematic_server/archive/refs/tags/v2.2.tar.gz",
      "Homepage": "https://github.com/IgnacioHR/diematic_server"
    },
    "release_url": "https://pypi.org/project/diematic-server/2.2/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "Unix daemon and supporting models for publishing data from Diematic DeDietrich boiler",
    "version": "2.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 13478056,
  "releases": {
    "1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a11d5f61bc1769ac1e7496a8b2c16ce4870fbbe6134bdeffe5d151d2acc1d307",
          "md5": "c6e3effffa91055753ba0f6da7cf8522",
          "sha256": "1adbf135e0a2c36a6c8a4cc4f32ff7c43baae4fcc5c4980d3fef9dc1f6b8b0a2"
        },
        "downloads": -1,
        "filename": "diematic-server-1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "c6e3effffa91055753ba0f6da7cf8522",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 17728,
        "upload_time": "2022-03-30T14:54:37",
        "upload_time_iso_8601": "2022-03-30T14:54:37.039626Z",
        "url": "https://files.pythonhosted.org/packages/a1/1d/5f61bc1769ac1e7496a8b2c16ce4870fbbe6134bdeffe5d151d2acc1d307/diematic-server-1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "60e06f919d1694a3befe9a09d8cd760e887d3fd4a408ff0309bb68ff84168ba9",
          "md5": "5ae48ff7239fd7a3c1bcb4f6e1c2d203",
          "sha256": "bb368c80f529fd05399a2ce472e1406ba0907fa915927c62fde6515d49d51e0e"
        },
        "downloads": -1,
        "filename": "diematic-server-1.1.tar.gz",
        "has_sig": false,
        "md5_digest": "5ae48ff7239fd7a3c1bcb4f6e1c2d203",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 17720,
        "upload_time": "2022-03-31T12:44:19",
        "upload_time_iso_8601": "2022-03-31T12:44:19.528452Z",
        "url": "https://files.pythonhosted.org/packages/60/e0/6f919d1694a3befe9a09d8cd760e887d3fd4a408ff0309bb68ff84168ba9/diematic-server-1.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "fdc70f4378655fc2e1cca5bcc025388f0aa455279c85166a6ac97dbde632b330",
          "md5": "646e5da23da1b3320f407958a027712b",
          "sha256": "5c44681aae995870fefbfafa7d3cd262272ea9edc393140bf73626c21ac4b93f"
        },
        "downloads": -1,
        "filename": "diematic_server-1.2.tar.gz",
        "has_sig": false,
        "md5_digest": "646e5da23da1b3320f407958a027712b",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 17711,
        "upload_time": "2022-03-31T14:09:38",
        "upload_time_iso_8601": "2022-03-31T14:09:38.792246Z",
        "url": "https://files.pythonhosted.org/packages/fd/c7/0f4378655fc2e1cca5bcc025388f0aa455279c85166a6ac97dbde632b330/diematic_server-1.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "e02ae637464b1a3f5a5eb01fe6c5992bd600d6a918868dc637216ffbc6adc434",
          "md5": "17bdcd1813f4bb5e39ae59ca3f65821b",
          "sha256": "00921a1b83b9cd26914378dd89a2b7a4fb075186b5a8c827655618f033da060d"
        },
        "downloads": -1,
        "filename": "diematic_server-2.0.tar.gz",
        "has_sig": false,
        "md5_digest": "17bdcd1813f4bb5e39ae59ca3f65821b",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 18240,
        "upload_time": "2022-04-02T15:58:20",
        "upload_time_iso_8601": "2022-04-02T15:58:20.192723Z",
        "url": "https://files.pythonhosted.org/packages/e0/2a/e637464b1a3f5a5eb01fe6c5992bd600d6a918868dc637216ffbc6adc434/diematic_server-2.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "2.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "720cd516cb285a20fce820c3a68c05312e39f968675694aa88259ca1ca1b2d57",
          "md5": "db0fe1b3dde7b639a9f41ddef25bb41c",
          "sha256": "26e403bccca0a2f664f27ac5ac9bf11f88eb02568c1f67c71b397d1ac62d4771"
        },
        "downloads": -1,
        "filename": "diematic_server-2.1.tar.gz",
        "has_sig": false,
        "md5_digest": "db0fe1b3dde7b639a9f41ddef25bb41c",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 18222,
        "upload_time": "2022-04-02T16:24:42",
        "upload_time_iso_8601": "2022-04-02T16:24:42.291559Z",
        "url": "https://files.pythonhosted.org/packages/72/0c/d516cb285a20fce820c3a68c05312e39f968675694aa88259ca1ca1b2d57/diematic_server-2.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "2.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c5e762f878993a2ee0b2e92032fc339577f942eacda68ca569cb6b800abc2908",
          "md5": "75472dacb384fe5afce62983ceca48e0",
          "sha256": "ccdbcc0cef9c15816a377d6783387b34d0f1b0fea68cc8bcfcdddfae64e1fbf3"
        },
        "downloads": -1,
        "filename": "diematic_server-2.2.tar.gz",
        "has_sig": false,
        "md5_digest": "75472dacb384fe5afce62983ceca48e0",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 20131,
        "upload_time": "2022-04-11T13:29:02",
        "upload_time_iso_8601": "2022-04-11T13:29:02.858666Z",
        "url": "https://files.pythonhosted.org/packages/c5/e7/62f878993a2ee0b2e92032fc339577f942eacda68ca569cb6b800abc2908/diematic_server-2.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "c5e762f878993a2ee0b2e92032fc339577f942eacda68ca569cb6b800abc2908",
        "md5": "75472dacb384fe5afce62983ceca48e0",
        "sha256": "ccdbcc0cef9c15816a377d6783387b34d0f1b0fea68cc8bcfcdddfae64e1fbf3"
      },
      "downloads": -1,
      "filename": "diematic_server-2.2.tar.gz",
      "has_sig": false,
      "md5_digest": "75472dacb384fe5afce62983ceca48e0",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 20131,
      "upload_time": "2022-04-11T13:29:02",
      "upload_time_iso_8601": "2022-04-11T13:29:02.858666Z",
      "url": "https://files.pythonhosted.org/packages/c5/e7/62f878993a2ee0b2e92032fc339577f942eacda68ca569cb6b800abc2908/diematic_server-2.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}