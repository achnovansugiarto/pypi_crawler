{
  "info": {
    "author": "",
    "author_email": "Jeff Dairiki <dairiki@dairiki.org>",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Environment :: Plugins",
      "Environment :: Web Environment",
      "Framework :: Lektor",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.11",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9",
      "Topic :: Text Processing"
    ],
    "description": "# Lektor Limit Dependencies\n\n[![PyPI version](https://img.shields.io/pypi/v/lektor-limit-dependencies.svg)](https://pypi.org/project/lektor-limit-dependencies/)\n[![PyPI Supported Python Versions](https://img.shields.io/pypi/pyversions/lektor-limit-dependencies.svg)](https://pypi.python.org/pypi/lektor-limit-dependencies/)\n[![GitHub license](https://img.shields.io/github/license/dairiki/lektor-limit-dependencies)](https://github.com/dairiki/lektor-limit-dependencies/blob/master/LICENSE)\n[![GitHub Actions (Tests)](https://github.com/dairiki/lektor-limit-dependencies/workflows/Tests/badge.svg)](https://github.com/dairiki/lektor-limit-dependencies)\n\n\nThis is an experimental [Lektor][] plugin which aims to provide tools (or,\nat least, a tool) to help keep Lektor’s dependency tracking under\ncontrol.\n\n[lektor]: <https://www.getlektor.com/>\n\n\n## Introduction\n\n### Motivating Example\n\nSuppose that you would like to list the three most recent blog posts\nin the sidebar of your Lektor-based site.  This can be done by adding\nsomething like to your site base template:\n\n```html+jinja\n<h3>Recent Posts</h3>\n<ul>\n  {% for post in site.query('/blog').order_by('-pub_date').limit(3) %}\n    <li><a href=\"{{ post|url }}\">{{ post.title }}</a></li>\n  {% endfor %}\n</ul>\n```\n\nThis is not without drawbacks, however.  To sort the post query by\ndate, Lektor iterates through ***all*** of the blog’s posts, then sorts\nthem.  In so doing, it records all of the blog posts as dependencies\n*of every page on which this most-recent-post query is used*.  If this\nis in the sidebar of every page on your site, *now every page on your\nsite will be rebuilt whenever any blog post at all* (not just one of\nthe three most recent posts) *is edited*.\n\nTechnically, it is true that all pages now depend on all posts.  You\nmight well edit the `pub_date` of one of your older posts, such that\nit should now appear in the most-recent listing.  However, it is not\ntrue that all pages need to be rebuilt for *any* edit of any post.\nUnfortunately, Lektor’s dependency tracking system is not elaborate\nenough to be able to express details about *how* pages are\ndependent on other pages; it only records that they *are*\ndependent, so Lektor has no option but to rebuild everything.\n\n### A Solution?\n\nThis plugin introduces a Jinja filter, `limit_dependencies`.  It\nexpects, as input, a Lektor [query][] instance.  It iterates through the\ninput query, and returns a new query instance which will yield the\nsame results.  While it is doing its iteration, it — essentially —\nmonkey-patches Lektor’s dependency tracking machinery to prevent it\nfrom recording any dependencies.\n\nAt the end, `limit_dependencies` records one dependency on a [virtual\nsource object][virtual] which depends only on the sequence of the identities\nof the records in the query result.  (Lektor provides a means by which\nvirtual source objects can report checksums.  The\ndependency tracking mechanism records those checksums, and will\ntrigger a rebuild should the checksum change.  `Limit_dependencies`\ngenerates a virtual source object whose checksum depends on the\nsequence of identities in the query result.)\n\nIn the above example, this is exactly what we want.  We only want to\ntrigger a rebuild if the order or composition of the most-recent three\nposts changes.  (Or if any of their titles change.  Note that this\ngets covered, too, since when the resulting query is iterated over in\nthe `{% for %}` loop, dependencies will be recorded on the three\nmost-recent posts.)\n\nThus, the example above, if replaced by:\n\n```html+jinja\n<h3>Recent Posts</h3>\n<ul>\n  {% for post in site.query('/blog').order_by('-pub_date').limit(3)|limit_dependencies %}\n    <li><a href=\"{{ post|url }}\">{{ post.title }}</a></li>\n  {% endfor %}\n</ul>\n```\n\nwill work in a much more efficient and sane manner.  Pages will be\nrebuilt only if there are changes in the order, composition or content\nof the three most recent posts.\n\n\n[virtual]: <https://www.getlektor.com/docs/api/db/obj/#virtual-source-objects>\n    \"Lektor documentation on Virtual Source Objects\"\n\n[query]: <https://www.getlektor.com/docs/api/db/query/>\n    \"Lektor documentation on the Query class\"\n\n## Installation\n\nAdd lektor-limit-dependencies to your project from command line:\n\n```\nlektor plugins add lektor-limit-dependencies\n```\n\nSee [the Lektor plugin documentation][plugins] for more information.\n\n[plugins]: <https://www.getlektor.com/docs/plugins/>\n\n## Author\n\nJeff Dairiki <dairiki@dairiki.org>\n\n## Changelog\n\n### Release 1.0.0 (2023-01-31)\n\nNo code changes from 1.0.0b1.\n\nTest under python 3.11.\n\n### Release 1.0.0b1 (2021-03-29)\n\nDrop support for python<3.7 and lektor<3.3.\n\n### Release 0.1 (2021-02-05)\n\nNo code changes.\n\nUpdate development status classifier to \"stable\".\n\nTest under python 3.9.  Stop testing under 3.5.\n\n### Release 0.1a1 (2020-05-19)\n\nInitial release.\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "",
    "keywords": "Lektor plugin",
    "license": "Copyright © 2020 Geoffrey T. Dairiki  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. ",
    "maintainer": "",
    "maintainer_email": "",
    "name": "lektor-limit-dependencies",
    "package_url": "https://pypi.org/project/lektor-limit-dependencies/",
    "platform": null,
    "project_url": "https://pypi.org/project/lektor-limit-dependencies/",
    "project_urls": {
      "Homepage": "https://github.com/dairiki/lektor-limit-dependencies"
    },
    "release_url": "https://pypi.org/project/lektor-limit-dependencies/1.0.0/",
    "requires_dist": [
      "lektorlib",
      "jinja2 (>=3.0.0)"
    ],
    "requires_python": ">=3.7",
    "summary": "Lektor plugin to limit dependencies created by queries",
    "version": "1.0.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16641439,
  "releases": {
    "0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c79b8cf68a4bf07a2aa4f9859b2a963d51479ac91747efd4856c9a4b22245742",
          "md5": "8da3ba48eafbcf6c8e76c193ac558028",
          "sha256": "391a613b3a0dcc30799cf463e8286d226b186e77c406604f5ba753a9259744ea"
        },
        "downloads": -1,
        "filename": "lektor_limit_dependencies-0.1-py2.py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "8da3ba48eafbcf6c8e76c193ac558028",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 6260,
        "upload_time": "2021-02-05T21:32:24",
        "upload_time_iso_8601": "2021-02-05T21:32:24.104781Z",
        "url": "https://files.pythonhosted.org/packages/c7/9b/8cf68a4bf07a2aa4f9859b2a963d51479ac91747efd4856c9a4b22245742/lektor_limit_dependencies-0.1-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2e0bdd0344144dc1223b3ce3d76f271e49c74b1c7701bf0c7bffda6fd3c99000",
          "md5": "d9ceccc6ee685ba4f466d9f09278c6b4",
          "sha256": "d7889641c7f5f5ea0d393687ab435a68be9848e1519d18fc7ab1bd7233aa8108"
        },
        "downloads": -1,
        "filename": "lektor-limit-dependencies-0.1.tar.gz",
        "has_sig": true,
        "md5_digest": "d9ceccc6ee685ba4f466d9f09278c6b4",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 12589,
        "upload_time": "2021-02-05T21:32:25",
        "upload_time_iso_8601": "2021-02-05T21:32:25.228101Z",
        "url": "https://files.pythonhosted.org/packages/2e/0b/dd0344144dc1223b3ce3d76f271e49c74b1c7701bf0c7bffda6fd3c99000/lektor-limit-dependencies-0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1a1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2556a8fc05ab8ca4f6d67a6c5be348b5bec6027f497e3fea498f902093241a80",
          "md5": "222b336105e48fa2e16d14acb3a1c999",
          "sha256": "823939b353113be9ef16a83a8d1fcfe39981afa0213ddab5670966e7aaaebcea"
        },
        "downloads": -1,
        "filename": "lektor_limit_dependencies-0.1a1-py2.py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "222b336105e48fa2e16d14acb3a1c999",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 6184,
        "upload_time": "2020-05-19T23:02:42",
        "upload_time_iso_8601": "2020-05-19T23:02:42.361812Z",
        "url": "https://files.pythonhosted.org/packages/25/56/a8fc05ab8ca4f6d67a6c5be348b5bec6027f497e3fea498f902093241a80/lektor_limit_dependencies-0.1a1-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4e096bb0991be7c5a7024d493bd22fe307c01d9c213b1de33f32beb07332ad19",
          "md5": "669a75d3096bc0495fc12b3ce0a19235",
          "sha256": "750c209c7ddc56703b79c17bcb4d69f61ea2294cb1ece51c15d736886867fcbb"
        },
        "downloads": -1,
        "filename": "lektor-limit-dependencies-0.1a1.tar.gz",
        "has_sig": true,
        "md5_digest": "669a75d3096bc0495fc12b3ce0a19235",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 12463,
        "upload_time": "2020-05-19T23:02:44",
        "upload_time_iso_8601": "2020-05-19T23:02:44.486254Z",
        "url": "https://files.pythonhosted.org/packages/4e/09/6bb0991be7c5a7024d493bd22fe307c01d9c213b1de33f32beb07332ad19/lektor-limit-dependencies-0.1a1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b5057a578a4831cafe39b4e8fa8db1442f0bf649234e379316a3e46c74ad3c71",
          "md5": "26a7456a5885de33f6a1ad3f2c9d8381",
          "sha256": "0bdc488176cc3ffb249df5cf071bc1b21cc19456232a08d7ac3af0017264fb90"
        },
        "downloads": -1,
        "filename": "lektor_limit_dependencies-1.0.0-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "26a7456a5885de33f6a1ad3f2c9d8381",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 6968,
        "upload_time": "2023-01-31T22:22:21",
        "upload_time_iso_8601": "2023-01-31T22:22:21.352445Z",
        "url": "https://files.pythonhosted.org/packages/b5/05/7a578a4831cafe39b4e8fa8db1442f0bf649234e379316a3e46c74ad3c71/lektor_limit_dependencies-1.0.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "44c2d3e52d93141f7f0f55f4226a6047416c0e9e26f92a0da2acd4809d391416",
          "md5": "80299ebc10a931f48d7ec55dcc4f91d5",
          "sha256": "ad3fb239eadcf97b81651669be0747d60cb9b137d738a706c5df67528b0fdd1d"
        },
        "downloads": -1,
        "filename": "lektor-limit-dependencies-1.0.0.tar.gz",
        "has_sig": true,
        "md5_digest": "80299ebc10a931f48d7ec55dcc4f91d5",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 11865,
        "upload_time": "2023-01-31T22:22:23",
        "upload_time_iso_8601": "2023-01-31T22:22:23.431924Z",
        "url": "https://files.pythonhosted.org/packages/44/c2/d3e52d93141f7f0f55f4226a6047416c0e9e26f92a0da2acd4809d391416/lektor-limit-dependencies-1.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.0b1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d87e33517082c91ee2f71f749e0134b9635fc38151e4ec8f632913c54c54e934",
          "md5": "a3997949e5303e6133209791ecc281a4",
          "sha256": "979f747c2f9193935b7a522a75669a742931f8dcd0046436558249cd89d06a02"
        },
        "downloads": -1,
        "filename": "lektor_limit_dependencies-1.0.0b1-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "a3997949e5303e6133209791ecc281a4",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 6349,
        "upload_time": "2022-03-30T04:05:06",
        "upload_time_iso_8601": "2022-03-30T04:05:06.534232Z",
        "url": "https://files.pythonhosted.org/packages/d8/7e/33517082c91ee2f71f749e0134b9635fc38151e4ec8f632913c54c54e934/lektor_limit_dependencies-1.0.0b1-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "98854b2abc5584c00518923c02d1a32c60102e6957a2e97f81143c3503c6e544",
          "md5": "d636d1b161039b02217ef186e4377696",
          "sha256": "ed559948b284a61f5ce64c2e045a710c3d9832dfc97818b5d94c7dfd280e65b1"
        },
        "downloads": -1,
        "filename": "lektor-limit-dependencies-1.0.0b1.tar.gz",
        "has_sig": false,
        "md5_digest": "d636d1b161039b02217ef186e4377696",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 12063,
        "upload_time": "2022-03-30T04:05:08",
        "upload_time_iso_8601": "2022-03-30T04:05:08.058100Z",
        "url": "https://files.pythonhosted.org/packages/98/85/4b2abc5584c00518923c02d1a32c60102e6957a2e97f81143c3503c6e544/lektor-limit-dependencies-1.0.0b1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "b5057a578a4831cafe39b4e8fa8db1442f0bf649234e379316a3e46c74ad3c71",
        "md5": "26a7456a5885de33f6a1ad3f2c9d8381",
        "sha256": "0bdc488176cc3ffb249df5cf071bc1b21cc19456232a08d7ac3af0017264fb90"
      },
      "downloads": -1,
      "filename": "lektor_limit_dependencies-1.0.0-py3-none-any.whl",
      "has_sig": true,
      "md5_digest": "26a7456a5885de33f6a1ad3f2c9d8381",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.7",
      "size": 6968,
      "upload_time": "2023-01-31T22:22:21",
      "upload_time_iso_8601": "2023-01-31T22:22:21.352445Z",
      "url": "https://files.pythonhosted.org/packages/b5/05/7a578a4831cafe39b4e8fa8db1442f0bf649234e379316a3e46c74ad3c71/lektor_limit_dependencies-1.0.0-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "44c2d3e52d93141f7f0f55f4226a6047416c0e9e26f92a0da2acd4809d391416",
        "md5": "80299ebc10a931f48d7ec55dcc4f91d5",
        "sha256": "ad3fb239eadcf97b81651669be0747d60cb9b137d738a706c5df67528b0fdd1d"
      },
      "downloads": -1,
      "filename": "lektor-limit-dependencies-1.0.0.tar.gz",
      "has_sig": true,
      "md5_digest": "80299ebc10a931f48d7ec55dcc4f91d5",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.7",
      "size": 11865,
      "upload_time": "2023-01-31T22:22:23",
      "upload_time_iso_8601": "2023-01-31T22:22:23.431924Z",
      "url": "https://files.pythonhosted.org/packages/44/c2/d3e52d93141f7f0f55f4226a6047416c0e9e26f92a0da2acd4809d391416/lektor-limit-dependencies-1.0.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}