{
  "info": {
    "author": "QuiNovas",
    "author_email": "pypi@quinovas.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: Apache Software License",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "# fastapi-cognito-security\n\nA micro-library that implements a [FastAPI security](https://github.com/tiangolo/fastapi/blob/master/fastapi/security/base.py) class for [AWS Cognito](https://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html) security.\n\nThis library supports receiving the Cogntio access (recommended) or id token in the HTTP `Authorization`\nheader using the standard `Bearer` mechansism (e.g. - `Authorization: Bearer <token>`).\n\n## Installation\n```bash\npip install fastapi-cognito-security\n```\n\n## Usage\n\n### Securing an individual route\n```python\nfrom fastapi import Depends, FastAPI\nfrom fastapi_cognito_security import CognitoBearer\n\napp = FastAPI()\nauth = CognitoBearer(\n    app_client_id=\"my_app_client_id\",\n    userpool_id=\"my_userpool_id\"\n)\n\n@app.get(\"/\", dependencies=[Depends(auth)])\nasync def root():\n    return {\"message\": \"Hello World\"}\n```\n\n### Securing a whole api\n```python\nfrom fastapi import Depends, FastAPI\nfrom fastapi_cognito_security import CognitoBearer\n\nauth = CognitoBearer(\n    app_client_id=\"my_app_client_id\",\n    userpool_id=\"my_userpool_id\"\n)\napp = FastAPI(dependencies=[Depends(auth)])\n\n@app.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello World\"}\n```\n\nWhen called, the `CognitoBearer` object will:\n1. Get the public keys from your AWS Cognito UserPool.\n    > NOTE - this will only happen once, and will be cached thereafter.\n2. Validate the JWT by verifying:\n    1. The JWT is correctly constructed and conforms to the public key.\n    2. The JWT has not expired.\n    3. The `client_id` (access token) or `aud` (id token) matches the `app_client_id`.\n3. Return either a `fastapi_cognito_security.AccessToken` or `fastapi_cognito_security.IdToken` that contains the claims.\n    > NOTE - you can use these claims for further verification either within your API or by subclassing `CognitoBearer`.\n\nAny failure in the above steps will result in a `fastapi.HTTPException` being raised.\n\n## Claims\nThe returned `AccessToken` or `IdToken` will have the standard Cognito claims converted to Python types.\n\n### `AccessToken` and `IdToken`\n|Claim|Python Type|\n|--|--|\n|auth_time|datetime.datetime|\n|exp|datetime.datetime|\n|iat|datetime.datetime|\n|iss|pydantic.HttpUrl|\n|jti|uuid.UUID|\n|origin_jti|uuid.UUID|\n|sub|uuid.UUID|\n\n- Username (`username` in access tokens and `cognito:username` in id tokens) is canonicalized to the claim `username`.\n- All additional claims will be converted directly to basic Python types. \n- All claim names will have `:` replaced with `_` (e.g. - `custom:thing` will become `custom_thing`)\n\n### `AccessToken` only\n|Claim|Python Type|\n|--|--|\n|device_key|uuid.UUID|\n|scope|list[str]|\n\n## Swagger/OpenAPI 3.0 Support\nBecause `CognitoBearer` is a `fastapi.HTTPBearer`, it will operate in the docs that are auotmatically\ngenerated by FastAPI in the same way as it's parent class.\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/QuiNovas/fastapi-cognito-security",
    "keywords": "fastapi,cognito",
    "license": "Apache 2.0",
    "maintainer": "",
    "maintainer_email": "",
    "name": "fastapi-cognito-security",
    "package_url": "https://pypi.org/project/fastapi-cognito-security/",
    "platform": null,
    "project_url": "https://pypi.org/project/fastapi-cognito-security/",
    "project_urls": {
      "Homepage": "https://github.com/QuiNovas/fastapi-cognito-security"
    },
    "release_url": "https://pypi.org/project/fastapi-cognito-security/0.0.2/",
    "requires_dist": [
      "cognitojwt[async]",
      "fastapi"
    ],
    "requires_python": ">=3.9",
    "summary": "A FastAPI Security object for AWS Cognito - supports both access and id tokens",
    "version": "0.0.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 13921443,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1b2341b60c45c7c16272c3c0ac07b46b21c4b707a9fb0373018d030ed347242a",
          "md5": "162add9f4132efcebbfff5ab184ea823",
          "sha256": "fcbdbad6a85e31e29d00708a56f40aaee6b5853ea4804f14db872cd89a83dba3"
        },
        "downloads": -1,
        "filename": "fastapi_cognito_security-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "162add9f4132efcebbfff5ab184ea823",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.9",
        "size": 7889,
        "upload_time": "2022-05-20T19:07:12",
        "upload_time_iso_8601": "2022-05-20T19:07:12.545057Z",
        "url": "https://files.pythonhosted.org/packages/1b/23/41b60c45c7c16272c3c0ac07b46b21c4b707a9fb0373018d030ed347242a/fastapi_cognito_security-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ad0ae782e1c32657e447847f5084c38fb37cc819484392b7260d404a12de10df",
          "md5": "3ce0649d99e5dca49732d7f12529310f",
          "sha256": "dfb0d8712636219381ac1e17f96d2e606fc98f504810939603d1e22a6b2e5a14"
        },
        "downloads": -1,
        "filename": "fastapi-cognito-security-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "3ce0649d99e5dca49732d7f12529310f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.9",
        "size": 7514,
        "upload_time": "2022-05-20T19:07:13",
        "upload_time_iso_8601": "2022-05-20T19:07:13.949908Z",
        "url": "https://files.pythonhosted.org/packages/ad/0a/e782e1c32657e447847f5084c38fb37cc819484392b7260d404a12de10df/fastapi-cognito-security-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "fe2a0ddb4ac4e3e96f4896bfffb0ee919e8d5f3d671a4e5ce9e5f75fdcc8e298",
          "md5": "6f2fa3fcf9e06fffd0b2ca5f2e474aa8",
          "sha256": "a2cd7bd27e18ad632c2cb339f6690d8d3055b5d7754fb99f2c31042574750a7e"
        },
        "downloads": -1,
        "filename": "fastapi_cognito_security-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "6f2fa3fcf9e06fffd0b2ca5f2e474aa8",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.9",
        "size": 7898,
        "upload_time": "2022-05-24T13:52:32",
        "upload_time_iso_8601": "2022-05-24T13:52:32.837825Z",
        "url": "https://files.pythonhosted.org/packages/fe/2a/0ddb4ac4e3e96f4896bfffb0ee919e8d5f3d671a4e5ce9e5f75fdcc8e298/fastapi_cognito_security-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5adfabfcbaae6014eb0deba523e06ef04537561d6b1f1b89de104175cf8e366c",
          "md5": "9e6cbfd2e1bcf5153141c8d5bd595025",
          "sha256": "f288bd0da53778256763a8200660646f58173201bcf0f440bf84417bee052e9b"
        },
        "downloads": -1,
        "filename": "fastapi-cognito-security-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "9e6cbfd2e1bcf5153141c8d5bd595025",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.9",
        "size": 7531,
        "upload_time": "2022-05-24T13:52:34",
        "upload_time_iso_8601": "2022-05-24T13:52:34.180297Z",
        "url": "https://files.pythonhosted.org/packages/5a/df/abfcbaae6014eb0deba523e06ef04537561d6b1f1b89de104175cf8e366c/fastapi-cognito-security-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "fe2a0ddb4ac4e3e96f4896bfffb0ee919e8d5f3d671a4e5ce9e5f75fdcc8e298",
        "md5": "6f2fa3fcf9e06fffd0b2ca5f2e474aa8",
        "sha256": "a2cd7bd27e18ad632c2cb339f6690d8d3055b5d7754fb99f2c31042574750a7e"
      },
      "downloads": -1,
      "filename": "fastapi_cognito_security-0.0.2-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "6f2fa3fcf9e06fffd0b2ca5f2e474aa8",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.9",
      "size": 7898,
      "upload_time": "2022-05-24T13:52:32",
      "upload_time_iso_8601": "2022-05-24T13:52:32.837825Z",
      "url": "https://files.pythonhosted.org/packages/fe/2a/0ddb4ac4e3e96f4896bfffb0ee919e8d5f3d671a4e5ce9e5f75fdcc8e298/fastapi_cognito_security-0.0.2-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "5adfabfcbaae6014eb0deba523e06ef04537561d6b1f1b89de104175cf8e366c",
        "md5": "9e6cbfd2e1bcf5153141c8d5bd595025",
        "sha256": "f288bd0da53778256763a8200660646f58173201bcf0f440bf84417bee052e9b"
      },
      "downloads": -1,
      "filename": "fastapi-cognito-security-0.0.2.tar.gz",
      "has_sig": false,
      "md5_digest": "9e6cbfd2e1bcf5153141c8d5bd595025",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.9",
      "size": 7531,
      "upload_time": "2022-05-24T13:52:34",
      "upload_time_iso_8601": "2022-05-24T13:52:34.180297Z",
      "url": "https://files.pythonhosted.org/packages/5a/df/abfcbaae6014eb0deba523e06ef04537561d6b1f1b89de104175cf8e366c/fastapi-cognito-security-0.0.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}