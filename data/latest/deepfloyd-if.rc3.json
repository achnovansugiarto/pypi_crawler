{
  "info": {
    "author": "DeepFloyd, StabilityAI",
    "author_email": "shonenkov@gmail.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "[![License](https://img.shields.io/badge/License-GNU_GPL-blue.svg)](LICENSE)\n[![Downloads](https://pepy.tech/badge/deepfloyd_if)](https://pepy.tech/project/deepfloyd_if)\n\n### DeepFloyd-IF (Imagen Free)\n___\n\n![](./pics/scheme-h.jpg)\n\n## Minimum requirements to use all IF models:\n\n- 40GB vRAM/RAM (or 16GB vRAM, but `cascade-III` will not be available)\n- install xformers and set env variable `FORCE_MEM_EFFICIENT_ATTN=1`\n\n\n## Quick Start\n\n[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/drive/1M9GkgwHZgjD_NykCq8hV5imbSbmtXX6O?usp=sharing)\n\n```shell\npip install deepfloyd_if==0.0.1rc2\npip install xformers==0.0.16\n```\n\n\n### I. Dream\n\n```python\nprompt = 'ultra close-up color photo portrait of rainbow owl with deer horns in the woods'\ncount = 4\n\nresult = dream(\n    t5=t5, if_I=if_I, if_II=if_II, if_III=if_III,\n    prompt=[prompt]*count,\n    seed=42,\n    if_I_kwargs={\n        \"guidance_scale\": 7.0,\n        \"sample_timestep_respacing\": \"smart100\",\n    },\n    if_II_kwargs={\n        \"guidance_scale\": 4.0,\n        \"sample_timestep_respacing\": \"smart50\",\n    },\n    if_III_kwargs={\n        \"guidance_scale\": 4.0,\n        \"sample_timestep_respacing\": \"super40\",\n    },\n)\nif_III.show(result['III'], size=14)\n```\n![](./pics/dream-III.jpg)\n\n\n## II. Style Transfer\n\n```python\nresult = style_transfer(\n    t5=t5, if_I=if_I, if_II=if_II,\n    support_pil_img=raw_pil_image,\n    style_prompt=[\n        'A fantasy landscape in style lego',\n        'A fantasy landscape in style zombie',\n        'A fantasy landscape in style origami',\n        'A fantasy landscape in style anime',\n    ],\n    seed=42,\n    if_I_kwargs={\n        \"guidance_scale\": 10.0,\n        \"sample_timestep_respacing\": \"10,10,10,10,10,10,10,10,0,0\",\n        'support_noise_less_qsample_steps': 5,\n    },\n    if_II_kwargs={\n        \"guidance_scale\": 4.0,\n        \"sample_timestep_respacing\": 'smart50',\n        \"support_noise_less_qsample_steps\": 5,\n    },\n)\nif_I.show(result['II'], 1, 20)\n```\n![](./pics/style-transfer.jpg)\n\n## III. Super Resolution\n\n`96px --> 1024px` (two cascades):\n\n```python\nmiddle_res = super_resolution(\n    t5,\n    if_III=if_II,\n    prompt=['face of beautiful woman, makeup, detailed picture, 4k dslr, best quality'],\n    support_pil_img=raw_pil_image,\n    img_scale=4.0,\n    img_size=96,\n    if_III_kwargs={\n        'sample_timestep_respacing': 'smart100',\n        'aug_level': 0.25,\n        'guidance_scale': 4.0,\n    },\n)\nhigh_res = super_resolution(\n    t5,\n    if_III=if_III,\n    prompt=[''],\n    support_pil_img=middle_res['III'][0],\n    img_scale=1024/384,\n    img_size=384,\n    if_III_kwargs={\n        'sample_timestep_respacing': 'super100',\n        'aug_level': 0.0,\n        'guidance_scale': 7.0,\n    },\n)\nshow_superres(raw_pil_image, high_res['III'][0])\n```\n![](./pics/super-res-0.jpg)\n\n`384px --> 1024px` with aspect-ratio:\n\n```python\n_res = super_resolution(\n    t5,\n    if_III=if_III,\n    prompt=['cat, detailed picture, 4k dslr'],\n    support_pil_img=raw_pil_image,\n    img_scale=1024/384,\n    img_size=384,\n    if_III_kwargs={\n        'sample_timestep_respacing': 'super100',\n        'aug_level': 0.2,\n        'guidance_scale': 4.0,\n    },\n)\nshow_superres(raw_pil_image, _res['III'][0])\n```\n![](./pics/super-res-1.jpg)\n\n\n### IV. Inpainting\n\n![](./pics/inpainting-mask.jpg)\n\n```python\nresult = inpainting(\n    t5=t5, if_I=if_I,\n    if_II=if_II,\n    if_III=if_III,\n    support_pil_img=raw_pil_image,\n    inpainting_mask=inpainting_mask,\n    prompt=[\n        'blue sunglasses',\n        'yellow sunglasses',\n        'red sunglasses',\n        'green sunglasses',\n    ],\n    seed=42,\n    if_I_kwargs={\n        \"guidance_scale\": 7.0,\n        \"sample_timestep_respacing\": \"10,10,10,10,10,0,0,0,0,0\",\n        'support_noise_less_qsample_steps': 0,\n    },\n    if_II_kwargs={\n        \"guidance_scale\": 4.0,\n        'aug_level': 0.0,\n        \"sample_timestep_respacing\": '100',\n    },\n    if_III_kwargs={\n        \"guidance_scale\": 4.0,\n        'aug_level': 0.0,\n        \"sample_timestep_respacing\": '40',\n        'support_noise_less_qsample_steps': 0,\n    },\n)\nif_I.show(result['I'], 2, 3)\nif_I.show(result['II'], 2, 6)\nif_I.show(result['III'], 2, 14)\n```\n![](./pics/inpainting.jpg)\n\n### ðŸ¤— Model Zoo ðŸ¤—\n\nCascade-I:\n+ [IF-I-M](https://huggingface.co/DeepFloyd/IF-I-M-v1.0) [400M]\n+ [IF-I-L](https://huggingface.co/DeepFloyd/IF-I-L-v1.0) [900M]\n+ [IF-I-IF](https://huggingface.co/DeepFloyd/IF-I-IF-v1.0) [4.3B]\n\nCascade-II:\n+ [IF-II-M](https://huggingface.co/DeepFloyd/IF-II-M-v1.0) [500M]\n+ [IF-II-L](https://huggingface.co/DeepFloyd/IF-II-L-v1.0) [1.2B]\n\nCascade-III:\n+ [IF-III-L](https://huggingface.co/DeepFloyd/IF-III-L-v1.0) [700M]\n\n### Quantitative Evaluation\n\n`FID = 6.66`\n\n![](./pics/fid30k_if.jpg)\n\n## License\n\nThe code in this repository is released under the GNU GPL License.\n\nThe weights are available via [the DeepFloyd organization at Hugging Face](https://huggingface.co/DeepFloyd).\n\n\n## Citation\n\n```bibtex\n@misc{IF2023,\n    title={IF only: a pixel diffusion model with ...},\n    author={A Shonenkov and M Konstantinov and D Bakshandaeva and C Schuhmann and R Vencu and D Ha and E Mostaque},\n    year={2023},\n    eprint={...},\n    archivePrefix={arXiv},\n    primaryClass={cs.CV}\n}\n```\n\n## Acknowledgements\n\nThanks StabilityAI, LAION and ...\n\n## ðŸš€ Contributors ðŸš€\n- Thanks, [@Dango233](https://github.com/Dango233), for adaptation IF with xformers memory efficient attention\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "deepfloyd-if",
    "package_url": "https://pypi.org/project/deepfloyd-if/",
    "platform": null,
    "project_url": "https://pypi.org/project/deepfloyd-if/",
    "project_urls": null,
    "release_url": "https://pypi.org/project/deepfloyd-if/0.0.1rc2/",
    "requires_dist": [
      "tqdm",
      "numpy",
      "torch",
      "torchvision",
      "omegaconf",
      "matplotlib",
      "Pillow (>=9.2.0)",
      "huggingface-hub (~=0.11.1)",
      "transformers (~=4.25.1)",
      "accelerate (~=0.15.0)",
      "tokenizers (~=0.13.2)",
      "sentencepiece (~=0.1.97)",
      "ftfy (~=6.1.1)",
      "beautifulsoup4 (~=4.11.1)"
    ],
    "requires_python": "",
    "summary": "DeepFloyd-IF (Imagen Free)",
    "version": "0.0.1rc2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17389369,
  "releases": {
    "0.0.1rc0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "77d871863cdd85231a2927862ca25dac04ce83ea07e71996410a6fddec5cfb4a",
          "md5": "2271efa0104f23d6e18aa707fbfeff88",
          "sha256": "00e8d4e883170efdc6bb7279659434b200b12354d6d52c781357b3d400536780"
        },
        "downloads": -1,
        "filename": "deepfloyd_if-0.0.1rc0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "2271efa0104f23d6e18aa707fbfeff88",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 51820,
        "upload_time": "2023-03-20T17:15:38",
        "upload_time_iso_8601": "2023-03-20T17:15:38.032488Z",
        "url": "https://files.pythonhosted.org/packages/77/d8/71863cdd85231a2927862ca25dac04ce83ea07e71996410a6fddec5cfb4a/deepfloyd_if-0.0.1rc0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "bdd26ead11b4c39d1ac42c7c6dfbb7bd716dcaadafb680d077e9f05f52be4e63",
          "md5": "7bbc636f9feabccb0e769ed4fec0b319",
          "sha256": "2bdbf02dd5be4fa1eced58d39ae832c3cbed87981b6b987494d594ea93818b5c"
        },
        "downloads": -1,
        "filename": "deepfloyd_if-0.0.1rc0.tar.gz",
        "has_sig": false,
        "md5_digest": "7bbc636f9feabccb0e769ed4fec0b319",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 45423,
        "upload_time": "2023-03-20T17:15:40",
        "upload_time_iso_8601": "2023-03-20T17:15:40.531139Z",
        "url": "https://files.pythonhosted.org/packages/bd/d2/6ead11b4c39d1ac42c7c6dfbb7bd716dcaadafb680d077e9f05f52be4e63/deepfloyd_if-0.0.1rc0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.1rc1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "deb2ee5d4a8d316ea04ed6f4bd5ed9be0edfc69d29ff1a94c69593c22e310480",
          "md5": "6ea37b8a63ca95b21ed0ac2820430b93",
          "sha256": "b431100869b263d276e1d0f3934c86fb5e43e563d3edbb300e1e760c2316a921"
        },
        "downloads": -1,
        "filename": "deepfloyd_if-0.0.1rc1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "6ea37b8a63ca95b21ed0ac2820430b93",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 72826,
        "upload_time": "2023-03-20T17:18:27",
        "upload_time_iso_8601": "2023-03-20T17:18:27.231455Z",
        "url": "https://files.pythonhosted.org/packages/de/b2/ee5d4a8d316ea04ed6f4bd5ed9be0edfc69d29ff1a94c69593c22e310480/deepfloyd_if-0.0.1rc1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "98ba90b930825e66b5cdf0fe91eab612c5a7339f5b0665929da7bebbfd8e9f32",
          "md5": "88478568dacb194abe50e8323af3fd09",
          "sha256": "c8f490f4916e2d2f6d603bcb718ae1e9524db5d50c8d37105ac603f0b0ff824e"
        },
        "downloads": -1,
        "filename": "deepfloyd_if-0.0.1rc1.tar.gz",
        "has_sig": false,
        "md5_digest": "88478568dacb194abe50e8323af3fd09",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 69334,
        "upload_time": "2023-03-20T17:18:30",
        "upload_time_iso_8601": "2023-03-20T17:18:30.985352Z",
        "url": "https://files.pythonhosted.org/packages/98/ba/90b930825e66b5cdf0fe91eab612c5a7339f5b0665929da7bebbfd8e9f32/deepfloyd_if-0.0.1rc1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.1rc2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "900faf32c82e7726a69bf42e3677ee6dca85dc09da40eda0d977cc5988821c9e",
          "md5": "eab50102444c910a91be8f8911cc64ee",
          "sha256": "82546495c537ed53f0ca43ad8ca5566f93ca5a04d55acc332aa7cd91f3b98e4e"
        },
        "downloads": -1,
        "filename": "deepfloyd_if-0.0.1rc2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "eab50102444c910a91be8f8911cc64ee",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 72990,
        "upload_time": "2023-03-21T22:19:56",
        "upload_time_iso_8601": "2023-03-21T22:19:56.532331Z",
        "url": "https://files.pythonhosted.org/packages/90/0f/af32c82e7726a69bf42e3677ee6dca85dc09da40eda0d977cc5988821c9e/deepfloyd_if-0.0.1rc2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c6b5f87dde8fb0b3efd2bfab53e45bf3cab3b5ed2dd3e7b73466c8ff7ecdb711",
          "md5": "a2d904642e8080c4f5b70a8e86aa26bb",
          "sha256": "ebd62a25b3f8fe12c9bc1bccecd188958649c16ca425df79f6a38ab06d0da907"
        },
        "downloads": -1,
        "filename": "deepfloyd_if-0.0.1rc2.tar.gz",
        "has_sig": false,
        "md5_digest": "a2d904642e8080c4f5b70a8e86aa26bb",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 69721,
        "upload_time": "2023-03-21T22:19:58",
        "upload_time_iso_8601": "2023-03-21T22:19:58.599359Z",
        "url": "https://files.pythonhosted.org/packages/c6/b5/f87dde8fb0b3efd2bfab53e45bf3cab3b5ed2dd3e7b73466c8ff7ecdb711/deepfloyd_if-0.0.1rc2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "900faf32c82e7726a69bf42e3677ee6dca85dc09da40eda0d977cc5988821c9e",
        "md5": "eab50102444c910a91be8f8911cc64ee",
        "sha256": "82546495c537ed53f0ca43ad8ca5566f93ca5a04d55acc332aa7cd91f3b98e4e"
      },
      "downloads": -1,
      "filename": "deepfloyd_if-0.0.1rc2-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "eab50102444c910a91be8f8911cc64ee",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 72990,
      "upload_time": "2023-03-21T22:19:56",
      "upload_time_iso_8601": "2023-03-21T22:19:56.532331Z",
      "url": "https://files.pythonhosted.org/packages/90/0f/af32c82e7726a69bf42e3677ee6dca85dc09da40eda0d977cc5988821c9e/deepfloyd_if-0.0.1rc2-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "c6b5f87dde8fb0b3efd2bfab53e45bf3cab3b5ed2dd3e7b73466c8ff7ecdb711",
        "md5": "a2d904642e8080c4f5b70a8e86aa26bb",
        "sha256": "ebd62a25b3f8fe12c9bc1bccecd188958649c16ca425df79f6a38ab06d0da907"
      },
      "downloads": -1,
      "filename": "deepfloyd_if-0.0.1rc2.tar.gz",
      "has_sig": false,
      "md5_digest": "a2d904642e8080c4f5b70a8e86aa26bb",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 69721,
      "upload_time": "2023-03-21T22:19:58",
      "upload_time_iso_8601": "2023-03-21T22:19:58.599359Z",
      "url": "https://files.pythonhosted.org/packages/c6/b5/f87dde8fb0b3efd2bfab53e45bf3cab3b5ed2dd3e7b73466c8ff7ecdb711/deepfloyd_if-0.0.1rc2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}