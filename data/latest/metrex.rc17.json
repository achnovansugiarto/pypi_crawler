{
  "info": {
    "author": "Mike Phillipson",
    "author_email": "MICHAEL_PHILLIPSON1@homedepot.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# metREx\n\n[![PyPI version](https://badge.fury.io/py/metREx.svg)](https://badge.fury.io/py/metREx)\n[![GitHub Actions Status](https://github.com/homedepot/metREx/workflows/Tests/badge.svg?branch=master)](https://github.com/homedepot/metREx/actions?query=workflow%3ATests)\n[![Coverage Status](https://coveralls.io/repos/github/homedepot/metREx/badge.svg?branch=master)](https://coveralls.io/github/homedepot/metREx?branch=master)\n[![Docker Pulls](https://img.shields.io/docker/pulls/homedepottech/metrex)](https://hub.docker.com/r/homedepottech/metrex)\n\nSQL query and monitoring system metrics exporter for [Prometheus](https://prometheus.io/). A product of **Reliability Engineering** at [The Home Depot](https://www.homedepot.com/).\n\nSupported database engines include:\n- [Google BigQuery](https://cloud.google.com/bigquery)\n- [IBM DB2](https://www.ibm.com/products/db2-database)\n- [IBM Informix](https://www.ibm.com/products/informix) (experimental)\n- [Microsoft SQL Server](https://www.microsoft.com/en-us/sql-server/default.aspx)\n- [MySQL](https://www.mysql.com/)\n- [Oracle](https://www.oracle.com/database)\n- [PostgreSQL](https://www.postgresql.org/)\n- [SQLite](https://www.sqlite.org/)\n\nPrometheus metrics can also be generated from the following monitoring systems:\n- [AppDynamics](https://www.appdynamics.com/)\n- [ExtraHop](https://www.extrahop.com/)\n- [New Relic](https://www.newrelic.com/)\n\n## Table of Contents\n\n* [Installation](#installation)\n  * [Database Engines](#database-engines)\n* [Local Environment Setup](#local-environment-setup)\n  * [ENV Variables](#env-variables)\n* [Configuration: Services](#configuration-services)\n  * [Database Connection Parameters](#database-connection-parameters)\n  * [API Connection Parameters](#api-connection-parameters)\n  * [Encrypting Credentials](#encrypting-credentials)\n* [Configuration: Jobs](#configuration-jobs)\n  * [Defining Jobs as Services](#defining-jobs-as-services)\n  * [Defining Jobs in a GitHub Repository](#defining-jobs-in-a-github-repository)\n  * [Job Parameters](#job-parameters)\n  * [About Aggregation](#about-aggregation)\n* [Pushing Metrics](#pushing-metrics)\n  * [Exposing Metrics to a Pushgateway](#exposing-metrics-to-a-pushgateway)\n  * [Pushing Metrics to a Graphite Bridge](#pushing-metrics-to-a-graphite-bridge)\n  * [Pushing Metrics to Wavefront](#pushing-metrics-to-wavefront)\n  * [Activating Push Services](#activating-push-services)\n* [Running the Application](#running-the-application)\n* [Running in Docker](#running-in-docker)\n* [Swagger](#swagger)\n* [Testing](#testing)\n* [License](#license)\n\n## Installation\n\n```shell\n$ pip install metREx\n```\n\n### Database Engines\n\nThe [SQLAlchemy](https://www.sqlalchemy.org/) package used by this application enables connectivity to a variety of database engines. However, additional packages may need to be installed, depending on which engines are used.\n\nA variation on the above `pip install` command can be used to include specific SQLAlchemy driver packages as needed.*\n\nIn the following example, the dialect identifiers `mysql` and `postgres`, supplied in brackets, will install the `pymysql` and `pg8000` driver packages for MySQL and PostgreSQL database connectivity, respectively:\n\n```shell\n$ pip install metREx\"[mysql,postgresql]\"\n```\n\nFor convenience, a selection of predefined dialects are available for commonly used SQLAlchemy driver packages:*\n\n| Dialect      | Driver       |\n| :---         | :---         |\n| `bigquery`   | `pybigquery` |\n| `db2`        | `ibm_db`     |\n| `informix`   | `ifx_jdbc`   |\n| `mssql`      | `pymssql`    |\n| `mysql`      | `pymysql`    |\n| `oracle`     | `cx_oracle`  |\n| `postgresql` | `pg8000`     |\n| `sqlite`**   | `pysqlite`   |\n\nTo install any combination of these SQLAlchemy drivers, substitute their dialect identifiers, delimited by commas, within the brackets shown in the previous example *(see [Supported Drivers](http://docs.sqlalchemy.org/en/latest/core/engines.html#supported-databases) for details about other SQLAlchemy drivers not mapped to the predefined dialects above)*.\n\n*Additional client software may also be required for certain database engines. Installation steps will vary depending on the host operating system.\n\n**SQLite support is included by default; `sqlite` dialect does not need to be installed as an extra.\n\n## Local Environment Setup\n\nA `.env` file can optionally be used to define environment variables available to the application at runtime. This can be useful when running in a local development environment.\n\nThe `.env` file should be placed in the installed package root. Any of the `.env.*` files included in the `examples` folder can be renamed to `.env`, as shown below:\n\n```shell\n$ cp examples/.env.macos-oracle metREx/.env\n```\n\n### ENV Variables\n\nSee [Supported ENV Variables](/ENV.md).\n\n## Configuration: Services\n\nThis application was originally designed to run on [Cloud Foundry (CF)](https://github.com/cloudfoundry). However, it can also be configured for other environments.\n\nWhen running in Cloud Foundry, the connection parameters used by metric exporter \"jobs\" are defined via [user-provided service instances](https://docs.cloudfoundry.org/devguide/services/user-provided.html).\n\nIn non-CF environments, services can be defined via a YAML configuration file (default: `env/services.yml`), as shown in the following example:\n\n```yaml\n---\nMETREX_DB_MYSQL:\n  name: database_name\n  hostname: mysql.mydomain.com\n  port: 3306\n  username: user\n  password: password\n  encrypted: false\n  dialect: mysql\n  driver: pymysql\nMETREX_DB_BIGQUERY:\n  project: gcp-project-name\n  location: US\n  credentials_path: /path/to/service/account/credentials.json\n  dialect: bigquery\nMETREX_DB_SQLITE:\n  path: /path/to/database/file.db\n  dialect: sqlite\nMETREX_API_APPD:\n  hostname: appdynamics.mydomain.com\n  account: account\n  username: user\n  password: password\n  encrypted: false\n  vendor: appdynamics\nMETREX_API_EXTRAHOP:\n  hostname: extrahop.mydomain.com\n  apikey: extrahop_apikey\n  encrypted: false\n  vendor: extrahop\nMETREX_API_GITHUB:\n  apikey: github_apikey\n  encrypted: false\n  vendor: github\nMETREX_API_NEWRELIC:\n  hostname: api.newrelic.com\n  account_id: account_id\n  apikey: newrelic_apikey\n  encrypted: false\n  vendor: newrelic\n```\n\n### Database Connection Parameters\n\nThe names assigned to services containing database connection details must begin with the prefix `METREX_DB_` (or the value of the **DB_PREFIX** environment variable). The text that appears after this prefix will be prepended to the names of all Prometheus metrics generated from this service.\n\nFor database connections (except BigQuery and SQLite), the following parameters must be included:\n- `name`: Database or service name\n- `hostname`: Server name or IP address\n- `port`: Port number\n- `username`: User name\n- `password`: Password\n- `encrypted`: \"true\" (recommended) if `password` value is encrypted or \"false\" if it is not.\n- `dialect`: Dialect identifier *(refer to table of Dialect/Driver mappings in [Database Engines](#database-engines) section above)*\n- `driver`: SQLAlchemy driver *(refer to table of Dialect/Driver mappings in [Database Engines](#database-engines) section above)*\n- `timezone`: Localized [database timezone](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) to apply to \"naive\" (non-TZ-aware) `timestamp_column` values returned by metric exporter jobs (optional, to override the **DB_DEFAULT_LOCAL_TZ** env variable)\n\nIn addition to the above, the following parameters for establishing SSL connections are supported for MySQL and PostgreSQL databases:\n- `ssl_ca`: Full path to a file of concatenated CA certificates in PEM format\n- `ssl_cert`: Full path to a single file in PEM format containing the certificate as well as any number of CA certificates needed to establish the certificateâ€™s authenticity\n- `ssl_key`: Full path to a file containing the private key\n\nFor BigQuery connections, the following parameters are used:\n- `project`: Name of the GCP project (defaults to the project specified in the credentials JSON file)\n- `location`: Specifies the dataset location (optional)\n- `credentials_path`: Full path to the service account credentials JSON file (optional)*\n- `credentials_info`: Contents of the service account credentials JSON file (optional)*\n- `encrypted`: \"true\" (recommended) if the `credentials_info` value is encrypted or \"false\" if it is not (optional, for use only with `credentials_info`)\n- `dialect`: \"bigquery\"\n\n*NOTE: Either `credentials_path` or `credentials_info` can be used instead of or to override the **GOOGLE_APPLICATION_CREDENTIALS** ENV variable on a per-service basis. `credentials_path` takes precedence if provided in combination with **GOOGLE_APPLICATION_CREDENTIALS** or `credentials_info`.\n\nFor SQLite connections, the following parameters are used:\n- `path`: Full path to the database file (optional)*\n- `dialect`: \"sqlite\"\n\n*NOTE: If `path` is not provided, an in-memory database will be used.\n\n### API Connection Parameters\n\nThe names assigned to services containing API connection details must begin with the prefix `METREX_API_` (or the value of the **API_PREFIX** environment variable). Presently, connectivity to the following APIs is supported:\n- [AppDynamics](https://docs.appdynamics.com/display/PRO43/Metric+and+Snapshot+API)\n- [ExtraHop](https://docs.extrahop.com/7.9/rest-extract-metrics)\n- [GitHub](https://developer.github.com/v3/)*\n- [New Relic](https://docs.newrelic.com/docs/apis/nerdgraph/)\n- [Prometheus-to-Graphite bridge](https://github.com/prometheus/client_python#graphite)**\n- [Prometheus Pushgateway](https://github.com/prometheus/pushgateway)**\n- [Wavefront](https://github.com/wavefrontHQ/wavefront-sdk-python)**\n\n*GitHub connectivity is provided only as a means to access metric exporter job definitions in a source repository *(see [Defining Jobs in a GitHub Repository](#defining-jobs-in-a-github-repository) section below)*. It cannot be used as a `service` parameter in individual exporter job definitions.\n\n**Prometheus-to-Graphite bridge, Pushgateway and Wavefront connectivity is provided to allow exporter job metrics to be sent to other services *(see [Pushing Metrics](#pushing-metrics) section below)*. These cannot be used as a `service` parameter in individual exporter job definitions.\n\nThe parameters to be included for each API connection type are shown below.\n\nAppDynamics API connections:\n- `hostname`: AppD controller server name or IP address\n- `port`: Port number (optional)\n- `account`: Account name (optional, default: \"customer1\")\n- `username`: User name\n- `password`: Password\n- `encrypted`: \"true\" (recommended) if `password` value is encrypted or \"false\" if it is not\n- `vendor`: \"appdynamics\"\n\nExtraHop API connections:\n- `hostname`: ExtraHop server name or IP address\n- `port`: Port number (optional)\n- `apikey`: ExtraHop API key\n- `encrypted`: \"true\" (recommended) if `apikey` value is encrypted or \"false\" if it is not\n- `vendor`: \"extrahop\"\n\nGitHub API connections:\n- `hostname`: Custom GitHub Enterprise server name or IP address (only include if not using standard GitHub.com)\n- `port`: Port number (optional)\n- `apikey`: GitHub API key\n- `encrypted`: \"true\" (recommended) if `apikey` value is encrypted or \"false\" if it is not\n- `vendor`: \"github\"\n\nNew Relic API connections:\n- `hostname`: New Relic API server name (\"api.newrelic.com\" in most cases) or IP address\n- `port`: Port number (optional)\n- `apikey`: New Relic user key\n- `encrypted`: \"true\" (recommended) if `apikey` value is encrypted or \"false\" if it is not\n- `vendor`: \"newrelic\"\n\nPrometheus-to-Graphite bridge API connections:\n- `hostname`: Graphite bridge server name or IP address\n- `port`: Port number (optional)\n- `prefix`: Prefix to use for all metric names - e.g., \"dev.\", \"prod.system.\", etc. (optional)\n- `vendor`: \"graphite\"\n\nPrometheus Pushgateway API connections:\n- `hostname`: Pushgateway server name or IP address (include \"https://\" for secure server connections)\n- `port`: Port number (optional)\n- `username`: User name (optional, for connections requiring Basic auth)\n- `password`: Password (optional, for connections requiring Basic auth)\n- `encrypted`: \"true\" (recommended) if `password` value is encrypted or \"false\" if it is not (optional, for connections requiring Basic auth)\n- `vendor`: \"pushgateway\"\n\nWavefront API connections:\n- `hostname`: Wavefront server name or IP address (include \"http://\" or \"https://\" for direct ingestion, or \"proxy://\" for proxy server)\n- `port`: Port number (optional)\n- `apikey`: API token (optional)\n- `encrypted`: \"true\" (recommended) if `apikey` value is encrypted or \"false\" if it is not\n- `prefix`: Prefix to use for all metric names - e.g., \"dev.\", \"prod.system.\", etc. (optional)\n- `vendor`: \"wavefront\"\n\n### Encrypting Credentials\n\nFor security purposes, it is recommended that database passwords and API keys be encrypted, especially when stored in CF. This application supports the decryption of credentials encrypted via the [cryptofy](https://github.com/homedepot/cryptofy) package.\n\nTo configure the application to decrypt a password or API key for a given connection at runtime, set the `encrypted` property to \"true\", as shown in the following example:\n\n```yaml\nMETREX_DB_MYSQL:\n  name: database_name\n  hostname: mysql.mydomain.com\n  port: 3306\n  username: user\n  password: Zq4B/mjYV9a4sVBzWiCxz5+tjcXHK2yc4UDVhWJLP2g=\n  encrypted: true\n  dialect: mysql\n  driver: pymysql\nMETREX_API_EXTRAHOP:\n  hostname: extrahop.mydomain.com\n  apikey: V37REDWZithWkr9Qu2d/p6uurhpj6kShcYjX0Y6yBWI=\n  encrypted: true\n  vendor: extrahop\n```\n\nA \"secret\" must be supplied to the application in order to unlock encrypted credentials at runtime. This secret must be the same one that was used to encrypt each of the passwords/API keys *(refer to the cryptofy documentation for instructions on generating secrets and encrypting credentials)*.\n\nSecrets may be supplied either by means of the **SECRET_KEY** environment variable or via a YAML-formatted file, the location of which is referenced in the ENV variable **SECRET_PATH**.*\n\n**Method 1**: Environment variable\n\n```dotenv\nSECRET_KEY=my_secret\n```\n\n**Method 2**: Secrets file (with file path environment variable)\n\nENV variable:\n\n```dotenv\nSECRET_PATH=secrets.yml\n```\n\nContents of `secrets.yml`:\n\n```yaml\nsecret-key: my_secret\n```\n\n*WARNING: Due to their sensitive nature, care should be taken to protect secret keys from being exposed. If defined via an ENV variable, make sure it is not visible to others; else if it is supplied as a secrets file, do NOT store the file in source code!\n\n## Configuration: Jobs\n\nMetric exporter jobs can be defined via:\n- [Service definitions](#defining-jobs-as-services) (user-provided services in CF or the services file)\n- [GitHub repository](#defining-jobs-in-a-github-repository)\n\n### Defining Jobs as Services\n\nIf running in Cloud Foundry, metric exporter jobs can be defined as user-provided services. All user-provided services containing exporter job definitions must begin with the prefix `METREX_JOB_` (or the value of the **JOB_PREFIX** environment variable).\n\nIn non-CF environments, jobs can be added to the same YAML-formatted configuration file containing the connection services, as shown below:\n\n```yaml\nMETREX_JOB_QUERY_EXAMPLE:\n  services:\n    - METREX_DB_MYSQL\n  interval_minutes: 5\n  statement: SELECT col1, col2, col3 FROM my_table\n  value_columns:\n    - col1\n    - col2\n  static_labels:\n    label1: value\n    label2: value\nMETREX_JOB_APPD_EXAMPLE:\n  services:\n    - METREX_API_APPD\n  interval_minutes: 15\n  application: Application_Name\n  metric_path: Business Transaction Performance|Business Transactions|*|*|*\nMETREX_JOB_EXTRAHOP_EXAMPLE:\n  services:\n    - METREX_API_EXTRAHOP\n  interval_minutes: 60\n  metric_params:\n    cycle: auto\n    object_type: device\n    object_ids:\n      - 9363\n    metric_category: http_client\n    metric_specs:\n      - req\n  aggregation:\n    funcs:\n      - count\n      - sum\n      - 95\n    threshold:\n      operator: \">\"\n      value: 10\nMETREX_JOB_NEWRELIC_EXAMPLE:\n  services:\n    - METREX_API_NEWRELIC\n  interval_minutes: 15\n  statement: FROM Transaction SELECT average(duration) AS 'avg_duration', appName FACET appName\n  value_attrs:\n    - avg_duration\n```\n\n### Defining Jobs in a GitHub Repository\n\nMetric exporter jobs can also be defined via a YAML-formatted config file hosted in GitHub like the one shown below:\n\n```yaml\n---\nQUERY_EXAMPLE:\n  services:\n    - METREX_DB_MYSQL\n  interval_minutes: 5\n  statement: SELECT col1, col2, col3 FROM my_table\n  value_columns:\n    - col1\n    - col2\n  static_labels:\n    label1: value\n    label2: value\nAPPD_EXAMPLE:\n  services:\n    - METREX_API_APPD\n  interval_minutes: 15\n  application: Application_Name\n  metric_path: Business Transaction Performance|Business Transactions|*|*|*\nEXTRAHOP_EXAMPLE:\n  services:\n    - METREX_API_EXTRAHOP\n  interval_minutes: 60\n  metric_params:\n    cycle: auto\n    object_type: device\n    object_ids:\n      - 9363\n    metric_category: http_client\n    metric_specs:\n      - req\n  aggregation:\n    funcs:\n      - count\n      - sum\n      - 95\n    threshold:\n      operator: \">\"\n      value: 10\nNEWRELIC_EXAMPLE:\n  services:\n    - METREX_API_NEWRELIC\n  interval_minutes: 15\n  statement: FROM Transaction SELECT average(duration) AS 'avg_duration', appName FACET appName\n  value_attrs:\n    - avg_duration\n```\n\nThere is no prefix requirement for GitHub-hosted job names. However, the name referenced in the job's `service` parameter must match the full service name (prefix included) defined in CF.\n\nIn order for jobs defined in a GitHub repository to be consumed, the following environment variables must be provided:\n\n```dotenv\nJOBS_SOURCE_SERVICE=METREX_API_GITHUB\nJOBS_SOURCE_ORG=org_name\nJOBS_SOURCE_REPO=repo_name\nJOBS_SOURCE_PATH=path/to/jobs.yml\n```\n\nChanges to the jobs config file referenced by these env variables will be picked up every *x* minutes, per the value assigned to **JOBS_SOURCE_REFRESH_INTERVAL**, and incorporated into the job scheduler. Unlike changes to services, no restart of the application is required for GitHub-hosted job file changes to take effect.\n\n### Job Parameters\n\nThe parameters to be included for each metric exporter job type are shown below.\n\nDatabase queries:\n- `services`: A list of one or more service names referencing database connections, from which the job metrics will be sourced\n- `push_services`: (optional) A list of one or more service names referencing push service API connections, to which the job metrics will be sent\n- `interval_minutes`: The interval (in minutes) to wait between each execution of the job\n- `statement`: SELECT query\n- `value_columns`: A list of one or more returned column names representing numeric metric values (any columns returned via the query which do not match the names in this list will be used as metric \"labels\")\n- `static_labels`: (optional) One or more `key: value` pairs to apply as static labels for all metrics (static label names must not conflict with returned column names)\n- `timestamp_column`: (optional) The name of a column returned by the SQL query to use as the metric timestamp (ignored when metrics are exposed via Pushgateway)\n\nAppDynamics metrics:\n- `services`: A list of one or more service names referencing AppDynamics API connections, from which the job metrics will be sourced\n- `push_services`: (optional) A list of one or more service names referencing push service API connections, to which the job metrics will be sent\n- `interval_minutes`: The interval (in minutes) to wait between each execution of the job\n- `application`: The Application name as it appears in AppD (for Database metrics, value is always \"Database Monitoring\")\n- `metric_path`: The AppD metrics path; may include wildcards (`*`)\n- `static_labels`: (optional) One or more `key: value` pairs to apply as static labels for all metrics\n\nExtraHop metrics:\n- `services`: A list of one or more service names referencing ExtraHop API connections, from which the job metrics will be sourced\n- `push_services`: (optional) A list of one or more service names referencing push service API connections, to which the job metrics will be sent\n- `interval_minutes`: The interval (in minutes) to wait between each execution of the job\n- `metric_params`: The list of parameters passed to the ExtraHop `/metrics` API endpoint\n- `metric_name`: The identifier to be used in the Prometheus metric collector name\n- `aggregation`: The list of parameters used to aggregate the values returned from the ExtraHop API *(see [About Aggregation](#about-aggregation) below)*\n- `static_labels`: (optional) One or more `key: value` pairs to apply as static labels for all metrics\n\nNew Relic metrics:\n- `services`: A list of one or more service names referencing New Relic API connections, from which the job metrics will be sourced\n- `push_services`: (optional) A list of one or more service names referencing push service API connections, to which the job metrics will be sent\n- `interval_minutes`: The interval (in minutes) to wait between each execution of the job\n- `statement`: NRQL query (excluding SINCE/UNTIL and TIMESERIES clauses)\n- `value_attrs`: A list of one or more returned attribute labels representing numeric metric values (any attributes returned via the query which do not match the names in this list will be used as metric \"labels\")\n- `static_labels`: (optional) One or more `key: value` pairs to apply as static labels for all metrics (static label names must not conflict with returned attribute names)\n\n### About Aggregation\n\nCertain job types *(see \"ExtraHop metrics\" above)* provide the ability to define aggregation functions to produce metrics from the result data returned by the API.\n\nThe `aggregation` parameter group consists of two subgroups: `funcs` and `threshold` *(see example in [Defining Jobs as Services](#defining-jobs-as-services) above)*\n\nThe `funcs` subgroup accepts any combination of the following aggregation functions:\n- `avg`\n- `count` (default)\n- `min`\n- `max`\n- `sum`\n\nIt can also take integer values between 0 and 100, representing the nth percentile.\n\nThe optional `threshold` subgroup works much in the same way as a `HAVING` clause in a SQL `GROUP BY`: it filters by values matching defined criteria.*  Here, the criteria are expressed via the `operator` and `value` params.\n\nSupported `operator` values are:\n- `>`\n- `<`\n- `>=`\n- `<=`\n- `=`\n- `<>`\n- `!=`\n\nThe `value` param must be an integer.\n\nExample: Match all values greater than 10\n\n```yaml\nJOB_EXAMPLE:\n  aggregation:\n    threshold:\n      operator: \">\"\n      value: 10\n```\n\n*NOTE: If no `threshold` is specified, the aggregation function will include all returned values.\n\n## Pushing Metrics\n\nBy default, each metric exporter job exposes its own registry endpoint at `/metrics/<job_id>`, which can be scraped by a Prometheus process. In addition, exporter job metrics can optionally be sent to one or more of the services detailed below.\n\n### Exposing Metrics to a Pushgateway\n\nMetrics can be exposed to one or more [Prometheus Pushgateway](https://github.com/prometheus/pushgateway) services, which may simplify the process of managing jobs in Prometheus.\n\nDefining a Pushgateway service:\n\n```yaml\nMETREX_API_PUSHGATEWAY:\n  hostname: https://pushgateway.mydomain.com\n  vendor: pushgateway\n```\n\n### Pushing Metrics to a Graphite Bridge\n\nMetrics can also be pushed over TCP to a [Graphite bridge](https://github.com/prometheus/client_python#graphite) service, which provides an option to expose metrics to systems other than Prometheus. If a Graphite bridge service is defined, all new exporter jobs will automatically be pushed to it.\n\nDefining a Graphite bridge service:\n\n```yaml\nMETREX_API_GRAPHITE:\n  hostname: graphite.mydomain.com\n  port: 2003\n  prefix: my.prefix.\n  vendor: graphite\n```\n\n### Pushing Metrics to Wavefront\n\nAs an alternative to Prometheus, metrics can be sent to one or more [Wavefront](https://www.wavefront.com/) services. If a Wavefront service is defined, all new exporter jobs will automatically be pushed to it.\n\nDefining a Wavefront service:\n\n```yaml\nMETREX_API_WAVEFRONT:\n  hostname: mydomain.wavefront.com\n  port: 2878\n  prefix: my.prefix.\n  vendor: wavefront\n```\n\n### Activating Push Services\n\nMetrics can be configured to be sent to one or more push services on a per-job basis or on a global basis for all jobs.\n\nTo configure a specific job to send metrics to one or more push services, include the `push_services` attribute in the job definition to list the services.\n\nExample: Send metrics to push services for a job\n\n```yaml\nJOB_EXAMPLE:\n  services:\n    - METREX_DB_MYSQL\n  push_services:\n    - METREX_API_GRAPHITE\n  interval_minutes: 5\n  statement: SELECT col1 FROM my_table\n  value_columns:\n    - col1\n```\n\nTo send all exporter job metrics to one or more push services, list them (comma-delimited, if more than one) via the ENV variable **SEND_ALL_JOBS_TO_SERVICES**:\n\n```dotenv\nSEND_ALL_JOBS_TO_SERVICES=METREX_API_PUSHGATEWAY,METREX_API_WAVEFRONT\n```\n\n## Running the Application\n\nExecute the following command:\n\n```shell\n$ metrex\n```\n\n## Running in Docker\n\nThis application can be run inside a [Docker](https://www.docker.com/) container. A prepackaged image is available on [Docker Hub](https://hub.docker.com/r/homedepottech/metrex).\n\nIt was built with support for the following databases:\n- [Google BigQuery](https://cloud.google.com/bigquery)\n- [Microsoft SQL Server](https://www.microsoft.com/en-us/sql-server/default.aspx)\n- [MySQL](https://www.mysql.com/)\n- [PostgreSQL](https://www.postgresql.org/)\n- [SQLite](https://www.sqlite.org/)\n\nSample `docker-compose.yml` file:\n\n```yaml\nversion: \"3.8\"\n\nservices:\n  metrex:\n    image: homedepottech/metrex:latest\n    ports:\n      - 5000:5000\n    environment:\n      SECRET_PATH: /secrets.yml\n      SERVICES_PATH: /services.yml\n      GOOGLE_APPLICATION_CREDENTIALS: /gcp_credentials.json\n    volumes:\n      - /path/to/secrets.yml:/secrets.yml\n      - /path/to/services.yml:/services.yml\n      - /path/to/gcp_credentials.json:/gcp_credentials.json\n```\n\nCreate and start the Docker container:\n\n```shell\n$ docker-compose up -d metrex\n```\n\n## Swagger\n\nOpen the URL shown in the resulting output following application startup (default: http://127.0.0.1:5000) to access the Swagger UI.\n\n## Testing\n\nExecute the following command from the top-level directory of the cloned repository:\n\n```shell\n$ python setup.py test\n```\n\n## License\n\nDistributed under the [Apache, version 2.0 license](https://opensource.org/licenses/Apache-2.0).\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/homedepot/metREx",
    "keywords": "prometheus exporter prometheus-exporter metrics metrics-exporter query-exporter sql sql-exporter appd appd-exporter appdynamics appdynamics-exporter extrahop extrahop-exporter",
    "license": "Apache 2.0",
    "maintainer": "",
    "maintainer_email": "",
    "name": "metREx",
    "package_url": "https://pypi.org/project/metREx/",
    "platform": null,
    "project_url": "https://pypi.org/project/metREx/",
    "project_urls": {
      "Homepage": "https://github.com/homedepot/metREx"
    },
    "release_url": "https://pypi.org/project/metREx/0.7.3/",
    "requires_dist": null,
    "requires_python": ">=3.6",
    "summary": "SQL query and monitoring system metrics exporter for Prometheus",
    "version": "0.7.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 13143282,
  "releases": {
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "dc8e4e41f75fc4c7fb32de92980fc14d2371128c30e8dce3f30fbb56c04968c3",
          "md5": "b1fbebcca2ec23f4820a427d396f855f",
          "sha256": "3645149f3b3ba601a29f7b4cb30fbc35177207579f118a8ee32f9d4677516c8d"
        },
        "downloads": -1,
        "filename": "metREx-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "b1fbebcca2ec23f4820a427d396f855f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 31960,
        "upload_time": "2020-03-13T02:43:54",
        "upload_time_iso_8601": "2020-03-13T02:43:54.508061Z",
        "url": "https://files.pythonhosted.org/packages/dc/8e/4e41f75fc4c7fb32de92980fc14d2371128c30e8dce3f30fbb56c04968c3/metREx-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "01cfa06ad2227738d09aeaa449fbbc048941e66a5a998266457d972ffb0efbbd",
          "md5": "759605c7962917e726a1edcaee1f0172",
          "sha256": "ccc6428d0db27fe024ecaed3f57fa54746d412cb1181e6f4ab980b934c6826a4"
        },
        "downloads": -1,
        "filename": "metREx-0.2.0.tar.gz",
        "has_sig": false,
        "md5_digest": "759605c7962917e726a1edcaee1f0172",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 33797,
        "upload_time": "2020-04-22T01:58:50",
        "upload_time_iso_8601": "2020-04-22T01:58:50.548437Z",
        "url": "https://files.pythonhosted.org/packages/01/cf/a06ad2227738d09aeaa449fbbc048941e66a5a998266457d972ffb0efbbd/metREx-0.2.0.tar.gz",
        "yanked": true,
        "yanked_reason": null
      }
    ],
    "0.2.0.post1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "9df636606f8aea88093ac931d7e91209b27e829368546e04936c2042d8d4b980",
          "md5": "3ee7d8fe9f73bc620f028a4d0045f21d",
          "sha256": "0ff00a4a6675571f98ae7b9aa453d64edc2e9eba37085145e86ce92fc909b07d"
        },
        "downloads": -1,
        "filename": "metREx-0.2.0.post1.tar.gz",
        "has_sig": false,
        "md5_digest": "3ee7d8fe9f73bc620f028a4d0045f21d",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 33818,
        "upload_time": "2020-04-22T03:49:36",
        "upload_time_iso_8601": "2020-04-22T03:49:36.679919Z",
        "url": "https://files.pythonhosted.org/packages/9d/f6/36606f8aea88093ac931d7e91209b27e829368546e04936c2042d8d4b980/metREx-0.2.0.post1.tar.gz",
        "yanked": true,
        "yanked_reason": null
      }
    ],
    "0.2.0.post2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a371d4b166832ca3b0b227a902766ea5744bd5efa6828c6018e4340aae9d31ff",
          "md5": "6aed4925627a0630cc84a92af1d4668f",
          "sha256": "bb78c6a4d79f01dcf193342e6225fa32db800bbbe6c5b38da275089b6448c59d"
        },
        "downloads": -1,
        "filename": "metREx-0.2.0.post2.tar.gz",
        "has_sig": false,
        "md5_digest": "6aed4925627a0630cc84a92af1d4668f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 33811,
        "upload_time": "2020-04-22T04:01:24",
        "upload_time_iso_8601": "2020-04-22T04:01:24.552432Z",
        "url": "https://files.pythonhosted.org/packages/a3/71/d4b166832ca3b0b227a902766ea5744bd5efa6828c6018e4340aae9d31ff/metREx-0.2.0.post2.tar.gz",
        "yanked": true,
        "yanked_reason": null
      }
    ],
    "0.2.0.post3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "82ada748fa7b1b5b7892d00bb9ca60849d7675ac3ed39dddbd8b3b3d46b5b9a0",
          "md5": "98ac7ed5bed82fae605c1ddfaac9c20e",
          "sha256": "2350df035b3a6473539fd4ae201b49295ff17e63b5ee6927214baa41b2cddbd5"
        },
        "downloads": -1,
        "filename": "metREx-0.2.0.post3.tar.gz",
        "has_sig": false,
        "md5_digest": "98ac7ed5bed82fae605c1ddfaac9c20e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 33812,
        "upload_time": "2020-04-22T18:00:08",
        "upload_time_iso_8601": "2020-04-22T18:00:08.021663Z",
        "url": "https://files.pythonhosted.org/packages/82/ad/a748fa7b1b5b7892d00bb9ca60849d7675ac3ed39dddbd8b3b3d46b5b9a0/metREx-0.2.0.post3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "537d7df924a44868a4e5911fcebfb5014d31d56d4c6736983eaecc7091e360f1",
          "md5": "4aed8514ae2c9c524cb99ec8c3d2b938",
          "sha256": "4f01214e3bf0b280f0e4e46e61d8d56f061d3bd1e67fdd3fff79ad2583c763df"
        },
        "downloads": -1,
        "filename": "metREx-0.3.0.tar.gz",
        "has_sig": false,
        "md5_digest": "4aed8514ae2c9c524cb99ec8c3d2b938",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 35199,
        "upload_time": "2020-05-15T14:46:27",
        "upload_time_iso_8601": "2020-05-15T14:46:27.815668Z",
        "url": "https://files.pythonhosted.org/packages/53/7d/7df924a44868a4e5911fcebfb5014d31d56d4c6736983eaecc7091e360f1/metREx-0.3.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6c30a102d04b710a678e693666d4167fbdb0f3a0e837f7179a62e5d47d183eae",
          "md5": "e02e80c6c877baedb708b71efc7f4e46",
          "sha256": "cf9db04269f9cc4e3682b96fe24c5e905913a69b8c652b31ca625dc3d5eee28b"
        },
        "downloads": -1,
        "filename": "metREx-0.4.0.tar.gz",
        "has_sig": false,
        "md5_digest": "e02e80c6c877baedb708b71efc7f4e46",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 35669,
        "upload_time": "2020-06-18T15:02:51",
        "upload_time_iso_8601": "2020-06-18T15:02:51.455408Z",
        "url": "https://files.pythonhosted.org/packages/6c/30/a102d04b710a678e693666d4167fbdb0f3a0e837f7179a62e5d47d183eae/metREx-0.4.0.tar.gz",
        "yanked": true,
        "yanked_reason": null
      }
    ],
    "0.4.0.post1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "fbb07f41dfc3498e8b9b144339f03b5dbecf27e0b76da73cc818e671be7ae225",
          "md5": "c5e504260cd147219fccb35ec24d9cef",
          "sha256": "f3782566b935b995ac608b370a7974331aa5fae3b5e00d9f153a79139f9fffc7"
        },
        "downloads": -1,
        "filename": "metREx-0.4.0.post1.tar.gz",
        "has_sig": false,
        "md5_digest": "c5e504260cd147219fccb35ec24d9cef",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 35787,
        "upload_time": "2020-06-18T19:27:04",
        "upload_time_iso_8601": "2020-06-18T19:27:04.005504Z",
        "url": "https://files.pythonhosted.org/packages/fb/b0/7f41dfc3498e8b9b144339f03b5dbecf27e0b76da73cc818e671be7ae225/metREx-0.4.0.post1.tar.gz",
        "yanked": true,
        "yanked_reason": null
      }
    ],
    "0.4.0.post2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "fc97f72dab907dd42d291041ee1b606cc8381d4cd04774f840539133f00fe406",
          "md5": "c805529d8272eb3264a1d1e7adc4b963",
          "sha256": "c7cb79017e2cd8d3192bbdb152ce9acb89c06b3ec38f48ccfe0b79038e09f34f"
        },
        "downloads": -1,
        "filename": "metREx-0.4.0.post2.tar.gz",
        "has_sig": false,
        "md5_digest": "c805529d8272eb3264a1d1e7adc4b963",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 35773,
        "upload_time": "2020-06-19T02:07:29",
        "upload_time_iso_8601": "2020-06-19T02:07:29.052058Z",
        "url": "https://files.pythonhosted.org/packages/fc/97/f72dab907dd42d291041ee1b606cc8381d4cd04774f840539133f00fe406/metREx-0.4.0.post2.tar.gz",
        "yanked": true,
        "yanked_reason": null
      }
    ],
    "0.4.0.post3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "3d8998f9cee6e9dff3f0ca46139ab418b077605060ec2b678c4da84203cafe85",
          "md5": "b83589ada8440f3fa88dba35caeec56f",
          "sha256": "282a50f130782b4fc5fd229f25bbceba59f490e8d043d56ddc34e676569d9d47"
        },
        "downloads": -1,
        "filename": "metREx-0.4.0.post3.tar.gz",
        "has_sig": false,
        "md5_digest": "b83589ada8440f3fa88dba35caeec56f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 33419,
        "upload_time": "2020-06-19T17:00:09",
        "upload_time_iso_8601": "2020-06-19T17:00:09.068986Z",
        "url": "https://files.pythonhosted.org/packages/3d/89/98f9cee6e9dff3f0ca46139ab418b077605060ec2b678c4da84203cafe85/metREx-0.4.0.post3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.5.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "f24132e9602f11aabcd6301a21c82e6e2f03028ce594ca76c84bdc080590914f",
          "md5": "680f8b9193f4e82b7dccc6146c68e644",
          "sha256": "d9d6bd11578508cd4f9a2c882f37e58ec973deef55f2c53e21d33c591e7de4e6"
        },
        "downloads": -1,
        "filename": "metREx-0.5.0.tar.gz",
        "has_sig": false,
        "md5_digest": "680f8b9193f4e82b7dccc6146c68e644",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 33622,
        "upload_time": "2020-09-03T16:51:56",
        "upload_time_iso_8601": "2020-09-03T16:51:56.494840Z",
        "url": "https://files.pythonhosted.org/packages/f2/41/32e9602f11aabcd6301a21c82e6e2f03028ce594ca76c84bdc080590914f/metREx-0.5.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.6.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "f94094727b006f204f331cfab668696226e15e2784252725fca135b2570e1193",
          "md5": "0fb00a26ce9130c39d45cc337c20a0f0",
          "sha256": "a87377e915f9f1f2caca94d4ee89a8003380f8315d4d636511f66b5dfbb3fc5a"
        },
        "downloads": -1,
        "filename": "metREx-0.6.0.tar.gz",
        "has_sig": false,
        "md5_digest": "0fb00a26ce9130c39d45cc337c20a0f0",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 35539,
        "upload_time": "2021-05-06T16:13:06",
        "upload_time_iso_8601": "2021-05-06T16:13:06.434785Z",
        "url": "https://files.pythonhosted.org/packages/f9/40/94727b006f204f331cfab668696226e15e2784252725fca135b2570e1193/metREx-0.6.0.tar.gz",
        "yanked": true,
        "yanked_reason": null
      }
    ],
    "0.6.0.post1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "328c20d5cf5bac238452a27e271bfb9b942f5aecb18ebc1be25b3fe5c28ee6cc",
          "md5": "37d00cd027559b83512af1833451a440",
          "sha256": "9d3d29d3056d4a8917178b2d5038dae3aee45bd6468624ad4aebec33a83c930d"
        },
        "downloads": -1,
        "filename": "metREx-0.6.0.post1.tar.gz",
        "has_sig": false,
        "md5_digest": "37d00cd027559b83512af1833451a440",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 35603,
        "upload_time": "2021-05-06T17:59:56",
        "upload_time_iso_8601": "2021-05-06T17:59:56.949681Z",
        "url": "https://files.pythonhosted.org/packages/32/8c/20d5cf5bac238452a27e271bfb9b942f5aecb18ebc1be25b3fe5c28ee6cc/metREx-0.6.0.post1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.7.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4306bfe8331d268a60d6d23f2e034ff70db756f9bd622ba288959e3006fe666e",
          "md5": "fdccd8374d8ef0da7f1af5d2ec74e768",
          "sha256": "53665890980f0e77a8087eb6d43e3e5ce25deab71069c1523d34a33a37a401ec"
        },
        "downloads": -1,
        "filename": "metREx-0.7.0.tar.gz",
        "has_sig": false,
        "md5_digest": "fdccd8374d8ef0da7f1af5d2ec74e768",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 41191,
        "upload_time": "2022-02-03T22:26:54",
        "upload_time_iso_8601": "2022-02-03T22:26:54.826994Z",
        "url": "https://files.pythonhosted.org/packages/43/06/bfe8331d268a60d6d23f2e034ff70db756f9bd622ba288959e3006fe666e/metREx-0.7.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.7.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b77f5f479967d6a4983ef34d2c8b85998a3b5a194019d152845e164a766c1808",
          "md5": "91822527fce609267ab078db34c97691",
          "sha256": "03a07b510246324877a2dedb02c77bd00190d3a06098376d12200956675f0e2e"
        },
        "downloads": -1,
        "filename": "metREx-0.7.1.tar.gz",
        "has_sig": false,
        "md5_digest": "91822527fce609267ab078db34c97691",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 41257,
        "upload_time": "2022-02-16T18:47:32",
        "upload_time_iso_8601": "2022-02-16T18:47:32.097028Z",
        "url": "https://files.pythonhosted.org/packages/b7/7f/5f479967d6a4983ef34d2c8b85998a3b5a194019d152845e164a766c1808/metREx-0.7.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.7.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "65376703c50a97f1ffb7f5b06e13d87cbfcbf234c3c6630e2360a41ecb28497b",
          "md5": "d70407dfc0c90d2132f8a2afce021c0c",
          "sha256": "53c175ac9b0eb8f8001c33a37bd74d0fbe49446f64c456ab4111bced144da91b"
        },
        "downloads": -1,
        "filename": "metREx-0.7.2.tar.gz",
        "has_sig": false,
        "md5_digest": "d70407dfc0c90d2132f8a2afce021c0c",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 41410,
        "upload_time": "2022-03-02T19:21:17",
        "upload_time_iso_8601": "2022-03-02T19:21:17.308870Z",
        "url": "https://files.pythonhosted.org/packages/65/37/6703c50a97f1ffb7f5b06e13d87cbfcbf234c3c6630e2360a41ecb28497b/metREx-0.7.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.7.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "cc0dd9628b04b43b2c73769cf026e124cb8311d6c1103d078d3d256ce19e4c6a",
          "md5": "c39c03ee33a58d59011d205cd75d1229",
          "sha256": "8a1c82bef34bd51088ef165ac29b6dcc0f1938533ceabb4b1355204fffe623b7"
        },
        "downloads": -1,
        "filename": "metREx-0.7.3.tar.gz",
        "has_sig": false,
        "md5_digest": "c39c03ee33a58d59011d205cd75d1229",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 41482,
        "upload_time": "2022-03-10T22:37:24",
        "upload_time_iso_8601": "2022-03-10T22:37:24.285376Z",
        "url": "https://files.pythonhosted.org/packages/cc/0d/d9628b04b43b2c73769cf026e124cb8311d6c1103d078d3d256ce19e4c6a/metREx-0.7.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "cc0dd9628b04b43b2c73769cf026e124cb8311d6c1103d078d3d256ce19e4c6a",
        "md5": "c39c03ee33a58d59011d205cd75d1229",
        "sha256": "8a1c82bef34bd51088ef165ac29b6dcc0f1938533ceabb4b1355204fffe623b7"
      },
      "downloads": -1,
      "filename": "metREx-0.7.3.tar.gz",
      "has_sig": false,
      "md5_digest": "c39c03ee33a58d59011d205cd75d1229",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 41482,
      "upload_time": "2022-03-10T22:37:24",
      "upload_time_iso_8601": "2022-03-10T22:37:24.285376Z",
      "url": "https://files.pythonhosted.org/packages/cc/0d/d9628b04b43b2c73769cf026e124cb8311d6c1103d078d3d256ce19e4c6a/metREx-0.7.3.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}