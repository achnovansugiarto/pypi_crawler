{
  "info": {
    "author": "David Zajac",
    "author_email": "davidzajac321@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 1 - Planning",
      "Intended Audience :: Developers",
      "Operating System :: MacOS :: MacOS X",
      "Operating System :: Microsoft :: Windows",
      "Operating System :: Unix",
      "Programming Language :: Python :: 3"
    ],
    "description": "# iamscan\n\n![Language](https://img.shields.io/badge/Language-Python-informational?style=flat)\n![License](https://img.shields.io/badge/License-MIT-informational?style=flat)\n![Version](https://img.shields.io/badge/Version-0.0.1-informational?style=flat)\n[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)\n\niamscan is a command line tool that reads your code and generates an AWS IAM policy with your needed permissions. Keeping track of AWS IAM permissions is annoying and timeconsuming. How often have you seen an update deployed to the cloud followed by `The provided execution role does not have permissions to call CreateSomething on SomeService`? This problem is either solved by manually reading through code or worse by blanketly opening up permissions to speed up the process (`lambda:*`, `s3:*`, etc.). IAM policies should always [grant least privilege](https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege) and iamscan can help you accomplish this.\n\n\n\n### Installation\n\niamscan is easiest install via pip for Python versions 3.8+\n\n```bash\n$ pip install iamscan\n```\n\n### Supported File Types\n\n- Currently iamscan can parse JavaScript Files, Python Files and Shell Scripts, thus the filename extension must be one of .js, .py or .sh\n- For JavaScript files iamscan will recongize [AWS SDK for JavaScript v2](https://github.com/awsdocs/aws-javascript-developer-guide-v2/tree/main/doc_source) commands but will not recognize [AWS SDK for JavaScript v3](https://github.com/awsdocs/aws-sdk-for-javascript-v3/tree/main/doc_source) commands\n- For Python files iamscan recognizes [`boto3`](https://github.com/boto/boto3) [Low Level Client](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/clients.html) commands but will not recognize [Resource](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/resources.html) based commands\n- For Shell Scripts all [`aws-cli`](https://github.com/aws/aws-cli) commands are recognized\n\n### Basic Usage\n\nCall iamscan from the command line and pass in your file or a directory containing multiple files using the `--path` keyword\n\n```bash\n$ iamscan --path iamscan -p tests/py/awsec2instances.py\n{\n  \"Version\": \"2012-10-17\",      \n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",        \n      \"Action\": [\n        \"ec2:DescribeInstances\",\n        \"ec2:RebootInstances\",  \n        \"ec2:RunInstances\",     \n        \"ec2:StartInstances\",\n        \"ec2:StopInstances\",\n        \"ec2:TerminateInstances\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n```\n\nPassing in a directory will parse all files in the directory and add their permissions to the policy\n\n```bash\n$ iamscan --path iamscan -p tests/py/\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeInstances\",\n        \"ec2:RebootInstances\",\n        \"ec2:RunInstances\",\n        \"ec2:StartInstances\",\n        \"ec2:StopInstances\",\n        \"ec2:TerminateInstances\",\n        \"lambda:CreateFunction\",\n        \"lambda:DeleteFunction\",\n        \"lambda:GetFunctionConfiguration\",\n        \"lambda:UpdateFunctionCode\",\n        \"lambda:UpdateFunctionConfiguration\",\n        \"s3api:CreateBucket\",\n        \"s3api:DeleteBucket\",\n        \"s3api:DeleteObject\",\n        \"s3api:ListBuckets\",\n        \"s3api:ListObjectsV2\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n```\n\nUse the `--output-format` to change the output to YAML for use with AWS CloudFormation\n\n```bash\n$ iamscan --path iamscan -p tests/py/awsec2instances.py --output-format yaml\nStatement:\n- Effect: Allow\n  Action:\n  - ec2:DescribeInstances\n  - ec2:RebootInstances\n  - ec2:RunInstances\n  - ec2:StartInstances\n  - ec2:StopInstances\n  - ec2:TerminateInstances\n  Resource: '*'\n```\n\n### Command Line Reference\n\n| Command | Description |\n| --- | --- |\n| -p, --path | The path to a file or directory [REQUIRED] |\n| -v, --version | Displays the current version |\n| -h, --help | Displays the help message |\n| -o, --output-format | The format of the output IAM policy (json \\| yaml) defaults to json |\n| -i, --id | An Id to add to the IAM policy |\n| -r, --resource | One or multiple ARNs to add to the IAM Policy |\n| -s, --seperate-statements | Usable when passing a directory as a path, seperates permissions into seperate Statements based on file |\n\n\n### Contributing\n\nThe iamscan repo makes use of a [Makefile](Makefile) with [`pytest`](https://docs.pytest.org/) for local development. First create a virtual environment using the `requirements.txt` file then after any changes are made run `make test` to ensure all the tests pass. If you're change warrants tests add them to the [`test_code.py`](tests/test_code.py) file. After all tests pass please make a Pull Request into the `main` branch\n\n### License\n\niamscan is released under the MIT License. See the bundled [LICENSE](LICENSE) file for details.\n\n### Credits\n\n- [alfonsof/aws-python-examples](https://github.com/alfonsof/aws-python-examples)\n- [swoodford/aws](https://github.com/swoodford/aws)\n- [awsdocs/aws-doc-sdk-examples](https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javascript/example_code)\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "",
    "keywords": "aws,python,bash,aws-cli,iam",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "iamscan",
    "package_url": "https://pypi.org/project/iamscan/",
    "platform": null,
    "project_url": "https://pypi.org/project/iamscan/",
    "project_urls": null,
    "release_url": "https://pypi.org/project/iamscan/0.0.1/",
    "requires_dist": [
      "PyYAML (>=5)"
    ],
    "requires_python": "",
    "summary": "Checks code for needed AWS IAM Privileges",
    "version": "0.0.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 14335853,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "eda4febe3cefe6b23629fa0e7f92235f313735a19cdca6aec4e933ed93cae81b",
          "md5": "b30af9b2ce3b638f85ab949436259369",
          "sha256": "9a5e204861157676ecd45a220b1bd3a76230f861658fc58308c4abf26361c1d8"
        },
        "downloads": -1,
        "filename": "iamscan-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "b30af9b2ce3b638f85ab949436259369",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 58009,
        "upload_time": "2022-07-05T02:24:22",
        "upload_time_iso_8601": "2022-07-05T02:24:22.390555Z",
        "url": "https://files.pythonhosted.org/packages/ed/a4/febe3cefe6b23629fa0e7f92235f313735a19cdca6aec4e933ed93cae81b/iamscan-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "638ee074c7927f1c9a78a039c8f68de218d42e8910efe15cf6d3ac5d8ec64e41",
          "md5": "9d1698860c8c18a60c1b677363e0cb38",
          "sha256": "8438d6738eed0c845548db1d5fb975b94f8709276726a8d4410e4bcb67ee0141"
        },
        "downloads": -1,
        "filename": "iamscan-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "9d1698860c8c18a60c1b677363e0cb38",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 59427,
        "upload_time": "2022-07-05T02:24:24",
        "upload_time_iso_8601": "2022-07-05T02:24:24.365988Z",
        "url": "https://files.pythonhosted.org/packages/63/8e/e074c7927f1c9a78a039c8f68de218d42e8910efe15cf6d3ac5d8ec64e41/iamscan-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "eda4febe3cefe6b23629fa0e7f92235f313735a19cdca6aec4e933ed93cae81b",
        "md5": "b30af9b2ce3b638f85ab949436259369",
        "sha256": "9a5e204861157676ecd45a220b1bd3a76230f861658fc58308c4abf26361c1d8"
      },
      "downloads": -1,
      "filename": "iamscan-0.0.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "b30af9b2ce3b638f85ab949436259369",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 58009,
      "upload_time": "2022-07-05T02:24:22",
      "upload_time_iso_8601": "2022-07-05T02:24:22.390555Z",
      "url": "https://files.pythonhosted.org/packages/ed/a4/febe3cefe6b23629fa0e7f92235f313735a19cdca6aec4e933ed93cae81b/iamscan-0.0.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "638ee074c7927f1c9a78a039c8f68de218d42e8910efe15cf6d3ac5d8ec64e41",
        "md5": "9d1698860c8c18a60c1b677363e0cb38",
        "sha256": "8438d6738eed0c845548db1d5fb975b94f8709276726a8d4410e4bcb67ee0141"
      },
      "downloads": -1,
      "filename": "iamscan-0.0.1.tar.gz",
      "has_sig": false,
      "md5_digest": "9d1698860c8c18a60c1b677363e0cb38",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 59427,
      "upload_time": "2022-07-05T02:24:24",
      "upload_time_iso_8601": "2022-07-05T02:24:24.365988Z",
      "url": "https://files.pythonhosted.org/packages/63/8e/e074c7927f1c9a78a039c8f68de218d42e8910efe15cf6d3ac5d8ec64e41/iamscan-0.0.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}