{
  "info": {
    "author": "BlueWhaleMain",
    "author_email": "bluewhalemain@outlook.com",
    "bugtrack_url": null,
    "classifiers": [
      "Intended Audience :: Developers",
      "Natural Language :: Chinese (Simplified)",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.9",
      "Topic :: Software Development :: Libraries"
    ],
    "description": "# descriptor\n\n```python\nimport datetime\nimport json\nimport typing\n\nfrom descriptor import validator\nfrom descriptor.base import Field, ValidatableField, TransientField\nfrom descriptor.error import FieldSetError\nfrom descriptor.support.base import BaseDecoder\nfrom descriptor.support.interface import Serializable\nfrom descriptor.support.json import JSONEncoder, HookFactory\n\n\nclass SubType(Serializable):\n    d: int = Field('d')\n\n\nclass DataTest(Serializable):\n    a: int = Field('a', 'aaa')\n    b: float = ValidatableField('b', '1.1 ≤ bbb ≤ 10').add_validator(validator.MaxMinValidator(1.1, 10))\n    c: str = ValidatableField('c', 'ccc not blank').add_validator(validator.NotBlankValidator())\n    d: datetime.timedelta = TransientField('d', 'Need to check')\n    e: bool = Field('e', 'none')\n    f: datetime.datetime = Field('f')\n    g: typing.Union[str, int, float] = Field('g')\n    h: typing.Optional[typing.Callable[[int], str]] = Field('h')\n    i: typing.Any = Field('i')\n    j: SubType = Field('j')\n\n    def __init__(self):\n        self.a = 1\n        self.b = 2.1\n        self.d = datetime.datetime.now() - datetime.datetime.min\n        self.c = 'c'\n        self.f = datetime.datetime.now()\n        self.g = 3\n        self.h = None\n        self.i = {'t': 12}\n        self.j = SubType()\n        self.j.d = 2\n\n\ndef h(_h: int) -> str:\n    return str(_h)\n\n\nclass JSONEncoderTest(JSONEncoder):\n\n    def default(self, o):\n        if isinstance(o, datetime.datetime):\n            return o.strftime('%Y-%m-%d %H:%M:%S')\n        return super().default(o)\n\n\nclass JSONDecoderTest(BaseDecoder):\n\n    def _default(self, t: typing.Union[type, typing.Any], val: typing.Any) -> typing.Any:\n        if isinstance(t, type):\n            if issubclass(t, datetime.datetime) and isinstance(val, str):\n                return datetime.datetime.strptime(val, '%Y-%m-%d %H:%M:%S')\n        return super()._default(t, val)\n\n\nprint(json.dumps(DataTest(), cls=JSONEncoderTest))\n# 此处解析多层结构时会出现问题\nfrom_hook = json.loads('{\"a\": 1, \"b\": 2.1, \"c\": \"c\", \"f\": \"2021-12-08 21:53:26\", \"g\": 3, \"h\": null, \"i\": 2}',\n                       object_hook=HookFactory.make_hook(JSONDecoderTest(DataTest)))\nprint(JSONEncoderTest().encode(from_hook))\nprint(json.dumps(from_hook, cls=JSONEncoderTest))\n# 多层结构不能使用object_hook\nform_decoder = JSONDecoderTest(DataTest).decode(json.loads(\n    '{\"a\": 1, \"b\": 2.1, \"c\": \"c\", \"f\": \"2021-12-08 21:53:26\", \"g\": 3, \"i\": {\"t\": 12}, \"j\": {\"d\": 2}}'))\nprint(JSONEncoderTest().encode(form_decoder))\nprint(json.dumps(form_decoder, cls=JSONEncoderTest))\ntry:\n    DataTest().b = 100.\nexcept FieldSetError as e:\n    print(repr(e))\ntry:\n    DataTest().c = 100\nexcept FieldSetError as e:\n    print(repr(e))\ntry:\n    DataTest().c = '  '\nexcept FieldSetError as e:\n    print(repr(e))\nDataTest().g = 2.\nDataTest().g = \"3\"\ntry:\n    DataTest().g = None\nexcept FieldSetError as e:\n    print(repr(e))\nd = DataTest()\nd.h = h\nprint(d.h(1))\ntry:\n    DataTest().h = 1\nexcept FieldSetError as e:\n    print(repr(e))\nd.i = None\nd.i = 223\nd.i = \"123\"\n```\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/BlueWhaleMain/descriptor",
    "keywords": "",
    "license": "MIT License",
    "maintainer": "",
    "maintainer_email": "",
    "name": "field-descriptor",
    "package_url": "https://pypi.org/project/field-descriptor/",
    "platform": "all",
    "project_url": "https://pypi.org/project/field-descriptor/",
    "project_urls": {
      "Homepage": "https://github.com/BlueWhaleMain/descriptor"
    },
    "release_url": "https://pypi.org/project/field-descriptor/1.0.1/",
    "requires_dist": null,
    "requires_python": ">=3.6.0",
    "summary": "A descriptor package",
    "version": "1.0.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 12245811,
  "releases": {
    "1.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "37bfdb657aaa352a0e84bf8861799ba7b54fca9a5c312884510783fda2411bc7",
          "md5": "c19ba4071cd0bb8e213582915db3ad58",
          "sha256": "503c423e596dc37c6e2e7ad8adde54d3fe27f1f8fc79efd787fd0c5aa3cd7b5b"
        },
        "downloads": -1,
        "filename": "field_descriptor-1.0.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "c19ba4071cd0bb8e213582915db3ad58",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.0",
        "size": 12257,
        "upload_time": "2021-09-03T13:13:19",
        "upload_time_iso_8601": "2021-09-03T13:13:19.862642Z",
        "url": "https://files.pythonhosted.org/packages/37/bf/db657aaa352a0e84bf8861799ba7b54fca9a5c312884510783fda2411bc7/field_descriptor-1.0.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "27d11e1a1d6c1ce7556437cca09553e02ce72ea6694b30433005db2521755184",
          "md5": "2f6ad6bcfef2a103d3769205e65be5a7",
          "sha256": "9326b5c394b72427806c2020e8b15ba6ea3a1ea6150ac9f8145eb339bc145b0a"
        },
        "downloads": -1,
        "filename": "field-descriptor-1.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "2f6ad6bcfef2a103d3769205e65be5a7",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.0",
        "size": 8574,
        "upload_time": "2021-09-03T13:13:21",
        "upload_time_iso_8601": "2021-09-03T13:13:21.571515Z",
        "url": "https://files.pythonhosted.org/packages/27/d1/1e1a1d6c1ce7556437cca09553e02ce72ea6694b30433005db2521755184/field-descriptor-1.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "67509cf1f8cb2809b3900fed682eb7e84a31a95956bab42f020a6a495d71b45f",
          "md5": "047d7cb3f65c84ab0205978c75675886",
          "sha256": "f23ce9fbab5207d121eec4445cb7be862ca7abd87bd907fb313ca6c254e9914b"
        },
        "downloads": -1,
        "filename": "field_descriptor-1.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "047d7cb3f65c84ab0205978c75675886",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.0",
        "size": 13486,
        "upload_time": "2021-12-08T15:01:00",
        "upload_time_iso_8601": "2021-12-08T15:01:00.223223Z",
        "url": "https://files.pythonhosted.org/packages/67/50/9cf1f8cb2809b3900fed682eb7e84a31a95956bab42f020a6a495d71b45f/field_descriptor-1.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "74f7e5bb3e674faeab48428f0794ef7f550db5ebbd6fd279db63e5434d69cc75",
          "md5": "ddca1332f9ade53c04497223f5e6d256",
          "sha256": "1056d4779a246d6fd333c5d45269d83c8ba9052a121975109bc4ea03a5052fa6"
        },
        "downloads": -1,
        "filename": "field-descriptor-1.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "ddca1332f9ade53c04497223f5e6d256",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.0",
        "size": 9793,
        "upload_time": "2021-12-08T15:01:01",
        "upload_time_iso_8601": "2021-12-08T15:01:01.570375Z",
        "url": "https://files.pythonhosted.org/packages/74/f7/e5bb3e674faeab48428f0794ef7f550db5ebbd6fd279db63e5434d69cc75/field-descriptor-1.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "67509cf1f8cb2809b3900fed682eb7e84a31a95956bab42f020a6a495d71b45f",
        "md5": "047d7cb3f65c84ab0205978c75675886",
        "sha256": "f23ce9fbab5207d121eec4445cb7be862ca7abd87bd907fb313ca6c254e9914b"
      },
      "downloads": -1,
      "filename": "field_descriptor-1.0.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "047d7cb3f65c84ab0205978c75675886",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6.0",
      "size": 13486,
      "upload_time": "2021-12-08T15:01:00",
      "upload_time_iso_8601": "2021-12-08T15:01:00.223223Z",
      "url": "https://files.pythonhosted.org/packages/67/50/9cf1f8cb2809b3900fed682eb7e84a31a95956bab42f020a6a495d71b45f/field_descriptor-1.0.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "74f7e5bb3e674faeab48428f0794ef7f550db5ebbd6fd279db63e5434d69cc75",
        "md5": "ddca1332f9ade53c04497223f5e6d256",
        "sha256": "1056d4779a246d6fd333c5d45269d83c8ba9052a121975109bc4ea03a5052fa6"
      },
      "downloads": -1,
      "filename": "field-descriptor-1.0.1.tar.gz",
      "has_sig": false,
      "md5_digest": "ddca1332f9ade53c04497223f5e6d256",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6.0",
      "size": 9793,
      "upload_time": "2021-12-08T15:01:01",
      "upload_time_iso_8601": "2021-12-08T15:01:01.570375Z",
      "url": "https://files.pythonhosted.org/packages/74/f7/e5bb3e674faeab48428f0794ef7f550db5ebbd6fd279db63e5434d69cc75/field-descriptor-1.0.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}