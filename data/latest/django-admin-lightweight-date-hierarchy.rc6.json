{
  "info": {
    "author": "Haki Benita",
    "author_email": "hakibenita@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Framework :: Django",
      "Framework :: Django :: 2.2",
      "Framework :: Django :: 3.2",
      "Framework :: Django :: 4.0",
      "Framework :: Django :: 4.1",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: BSD License",
      "Natural Language :: English",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "=======================================\nDjango Admin lightweight date hierarchy\n=======================================\n\n.. image:: https://badge.fury.io/py/django-admin-lightweight-date-hierarchy.svg\n    :target: https://badge.fury.io/py/django-admin-lightweight-date-hierarchy\n\n.. image:: https://github.com/hakib/django-admin-lightweight-date-hierarchy/actions/workflows/main.yml/badge.svg?branch=master\n    :target: https://github.com/hakib/django-admin-lightweight-date-hierarchy/actions/workflows/main.yml?query=branch%3Amaster\n\n.. image:: https://codecov.io/gh/hakib/django-admin-lightweight-date-hierarchy/branch/master/graph/badge.svg\n    :target: https://codecov.io/gh/hakib/django-admin-lightweight-date-hierarchy\n\n\nDjango Admin date_hierarchy with zero queries\n---------------------------------------------\n\n**NOTE**: Some of the functionality provided by this extension is `included as\npart of Django <https://github.com/django/django/pull/9469>`_ starting at\nversion 2.1.\n\nThe built-in `date_hierarchy`_ tag performs a query to find the dates for which there is data.\nOn large tables this query can be very expensive.\n\nTo prevent additional queries, set ``date_hierarchy_drilldown = False`` on the ``ModelAdmin``.\nWhen drill-down is disabled the tag will generate a default range of dates based solely\non the selected hierarchy level - without performing a query.\n\nDefault options for hierarchy levels:\n\n- None - +-3 years from current year.\n- Year - all months of the selected year.\n- Month - all days of the selected month.\n\nWhen ``date_hierarchy_drilldown = True`` or when not set the default behaviour is preserved.\n\n.. _`date_hierarchy`: https://docs.djangoproject.com/en/1.11/ref/contrib/admin/#django.contrib.admin.ModelAdmin.date_hierarchy\n\n\nSupport\n-------\n\nPython>=3.7\n\nDjango>=2.2\n\n\nQuickstart\n----------\n\nInstall django-admin-lightweight-date-hierarchy::\n\n    pip install django-admin-lightweight-date-hierarchy\n\nAdd it to your ``INSTALLED_APPS``:\n\n.. code-block:: python\n\n    INSTALLED_APPS = (\n        ...\n        'django_admin_lightweight_date_hierarchy',\n        ...\n    )\n\nAdd the following to any ``ModelAdmin`` with ``date_hierarchy`` to prevent the default drill-down behaviour:\n\n.. code-block:: python\n\n    @admin.register(MyModel)\n    class MyModelAdmin(admin.ModelAdmin):\n        date_hierarchy = 'created'\n        date_hierarchy_drilldown = False\n\n\nTo change the default dates generated by the template tag for any level in the hierarchy, implement a\nfunction called ``get_date_hierarchy_drilldown(self, year_lookup=None, month_lookup=None)`` on the ``ModelAdmin``.\nThe function receives the date hierarchy filter and is expected to return a list of dates to offer for drill-down.\n\nFor example, a custom drill-down that offers only past dates:\n\n\n.. code-block:: python\n\n\n    import datetime\n    import calendar\n\n    from django.utils import timezone\n    from django.contrib import admin\n\n\n    @admin.register(MyModel)\n    class MyModelAdmin(admin.ModelAdmin):\n        date_hierarchy = 'created'\n        date_hierarchy_drilldown = False\n\n        def get_date_hierarchy_drilldown(self, year_lookup, month_lookup):\n            \"\"\"Drill-down only on past dates.\"\"\"\n\n            today = timezone.now().date()\n\n            if year_lookup is None and month_lookup is None:\n                # Past 3 years.\n                return (\n                    datetime.date(y, 1, 1)\n                    for y in range(today.year - 2, today.year + 1)\n                )\n\n            elif year_lookup is not None and month_lookup is None:\n                # Past months of selected year.\n                this_month = today.replace(day=1)\n                return (\n                    month for month in (\n                        datetime.date(int(year_lookup), month, 1)\n                        for month in range(1, 13)\n                    ) if month <= this_month\n                )\n\n            elif year_lookup is not None and month_lookup is not None:\n                # Past days of selected month.\n                days_in_month = calendar.monthrange(year_lookup, month_lookup)[1]\n                return (\n                    day for day in (\n                        datetime.date(year_lookup, month_lookup, i + 1)\n                        for i in range(days_in_month)\n                    ) if day <= today\n                )\n\nBlog Post\n---------\n\nMore about the process of developing date hierarchy drill-down in this blog post `scaling django admin date hierarchy`_.\n\n.. _`scaling django admin date hierarchy`: https://hakibenita.com/scaling-django-admin-date-hierarchy\n\n\nRangeBasedDateHierarchyListFilter\n---------------------------------\n\nDjango filters the queryset for a given level in the date hierarchy using a database\nfunction to extract the relevent date part. For example, when filtering a queryset on\na ``created`` date field for November 2017, Django will execute the following query:\n\n.. code-block:: sql\n\n    SELECT\n        ...\n    FROM\n        app_model\n    WHERE\n        created BETWEEN '2017-01-01 00:00:00' AND '2017-12-31 23:59:59.999999'\n        AND EXTRACT('month', created) = 11\n\nA function is opaque to the database optimizer. If you have a range-based (btree) index\non the field, using EXTRACT does not limit the range at all, and so the index is not\nutilized properly which might lead to a sub optimal execution plan.\n\nThere are several approaches to tackle this issue. For example, in databases that support\nfunction based indexes the developer can add an index on the specific function to try and\nimprove the performace of the query. The downside to this approach is having to maintain\nadditional indexes for each level of the hierarchy. Additional indexes slow down insert\nand update operations, and take up space.\n\nAnother approach is to simplify the condition used by Django to filter the queryset\nfor any given level in the hierarchy:\n\n.. code-block:: sql\n\n    SELECT\n        ...\n    FROM\n        app_model\n    WHERE\n        created >= '2017-11-01 00:00:00'\n        AND created < '2017-12-01 00:00:00'\n\n\nThis is what ``RangeBasedDateHierarchyListFilter`` does.\n\nTo achieve the above query, add the following to your ModelAdmin:\n\n.. code-block:: python\n\n\n    from django.contrib import admin\n    from django_admin_lightweight_date_hierarchy.admin import RangeBasedDateHierarchyListFilter\n\n\n    @admin.register(MyModel)\n    class MyModelAdmin(admin.ModelAdmin):\n        date_hierarchy = 'created'\n\n        list_filter = (\n            RangeBasedDateHierarchyListFilter,\n        )\n\n\nBlog Post\n----------\n\nMore about the motivation and the performace of ``RangeBasedDateHierarchyListFilter`` in this blog post `Django Admin Range-Based Date Hierarchy`_.\n\n.. _`Django Admin Range-Based Date Hierarchy`: https://codeburst.io/django-admin-range-based-date-hierarchy-37955b12ea4e\n\n\nRunning Tests\n-------------\n\n::\n\n    source <YOURVIRTUALENV>/bin/activate\n    (venv) $ pip install tox\n    (venv) $ tox\n",
    "description_content_type": "",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/hakib/django-admin-lightweight-date-hierarchy",
    "keywords": "django-admin-lightweight-date-hierarchy",
    "license": "MIT, Django",
    "maintainer": "",
    "maintainer_email": "",
    "name": "django-admin-lightweight-date-hierarchy",
    "package_url": "https://pypi.org/project/django-admin-lightweight-date-hierarchy/",
    "platform": null,
    "project_url": "https://pypi.org/project/django-admin-lightweight-date-hierarchy/",
    "project_urls": {
      "Homepage": "https://github.com/hakib/django-admin-lightweight-date-hierarchy"
    },
    "release_url": "https://pypi.org/project/django-admin-lightweight-date-hierarchy/1.1.0/",
    "requires_dist": [
      "Django (>=2.2)"
    ],
    "requires_python": ">=3.7",
    "summary": "Using django admin date hierarchy queries free!",
    "version": "1.1.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 15350718,
  "releases": {
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5b4619af60ecdc0b1e07e1d08d753da28c76cc83077598c61d3548c208f32f91",
          "md5": "c75638a5913d4b66cd45891e23f1e26b",
          "sha256": "3334bb706cc5f4beb2290e1eac38465ab9f1abf0d45f1841d3cd3a132633229c"
        },
        "downloads": -1,
        "filename": "django_admin_lightweight_date_hierarchy-0.1.0-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "c75638a5913d4b66cd45891e23f1e26b",
        "packagetype": "bdist_wheel",
        "python_version": "3.5",
        "requires_python": null,
        "size": 7751,
        "upload_time": "2017-09-27T16:48:12",
        "upload_time_iso_8601": "2017-09-27T16:48:12.654607Z",
        "url": "https://files.pythonhosted.org/packages/5b/46/19af60ecdc0b1e07e1d08d753da28c76cc83077598c61d3548c208f32f91/django_admin_lightweight_date_hierarchy-0.1.0-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4a646e77b525fa739c97232d1a499bf8130ee7ed0c85d727e9c958b23418ad1e",
          "md5": "62c359ca2bcd4739c3a255c1dbc99d5a",
          "sha256": "e1ef25ad4efd469adec6b303f35d753315c21b046dfcfa0ba15afdde177af797"
        },
        "downloads": -1,
        "filename": "django-admin-lightweight-date-hierarchy-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "62c359ca2bcd4739c3a255c1dbc99d5a",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 7864,
        "upload_time": "2017-09-27T17:40:41",
        "upload_time_iso_8601": "2017-09-27T17:40:41.949536Z",
        "url": "https://files.pythonhosted.org/packages/4a/64/6e77b525fa739c97232d1a499bf8130ee7ed0c85d727e9c958b23418ad1e/django-admin-lightweight-date-hierarchy-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c017a13f632d8b05372a458409be34b4fcd21c0f09d426343eed756ab36a626c",
          "md5": "5846020d6c42bbca5ba0be289e6a36e4",
          "sha256": "225a7177757e025d524bbeff08996c1f179809075986b466cdd1db85e55f5cf7"
        },
        "downloads": -1,
        "filename": "django-admin-lightweight-date-hierarchy-0.2.0.tar.gz",
        "has_sig": false,
        "md5_digest": "5846020d6c42bbca5ba0be289e6a36e4",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 8808,
        "upload_time": "2017-10-21T13:36:22",
        "upload_time_iso_8601": "2017-10-21T13:36:22.498189Z",
        "url": "https://files.pythonhosted.org/packages/c0/17/a13f632d8b05372a458409be34b4fcd21c0f09d426343eed756ab36a626c/django-admin-lightweight-date-hierarchy-0.2.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c01c0fb593e4a4ed6b49a1ebab94cea3328a472a2f21371f6047877ea5fce7cd",
          "md5": "5acb5016c230ac276549b6ca788d4cfd",
          "sha256": "d9146fc50fff81d68ddebaaacba9b168f3a02afc8d8314528998c181ce50d606"
        },
        "downloads": -1,
        "filename": "django_admin_lightweight_date_hierarchy-0.3.0-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "5acb5016c230ac276549b6ca788d4cfd",
        "packagetype": "bdist_wheel",
        "python_version": "3.5",
        "requires_python": null,
        "size": 11741,
        "upload_time": "2017-11-24T12:03:55",
        "upload_time_iso_8601": "2017-11-24T12:03:55.451242Z",
        "url": "https://files.pythonhosted.org/packages/c0/1c/0fb593e4a4ed6b49a1ebab94cea3328a472a2f21371f6047877ea5fce7cd/django_admin_lightweight_date_hierarchy-0.3.0-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7cb1ef97eedbbb2a35d3abdf122b510f2deeb3796484f40a821003379481423a",
          "md5": "1be608eef9cf6051c4a2b79d5f96325e",
          "sha256": "3e368154aa775162cdbcc5153574e69282f2542152364f88a38640dbbcafe52b"
        },
        "downloads": -1,
        "filename": "django-admin-lightweight-date-hierarchy-0.3.0.tar.gz",
        "has_sig": false,
        "md5_digest": "1be608eef9cf6051c4a2b79d5f96325e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 10452,
        "upload_time": "2017-11-24T12:03:52",
        "upload_time_iso_8601": "2017-11-24T12:03:52.359400Z",
        "url": "https://files.pythonhosted.org/packages/7c/b1/ef97eedbbb2a35d3abdf122b510f2deeb3796484f40a821003379481423a/django-admin-lightweight-date-hierarchy-0.3.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "707075d7945cf1f7b358842ff8cb3d9bf50bcd84e1d30c61505dccafde25cdcf",
          "md5": "acc1332d896b5a8594805cafac055afe",
          "sha256": "6a04ca07a1fd7cb4c7911353f3a934c588363a21acb8e68bdd07eea07db36060"
        },
        "downloads": -1,
        "filename": "django_admin_lightweight_date_hierarchy-0.4.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "acc1332d896b5a8594805cafac055afe",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 10296,
        "upload_time": "2020-10-20T11:57:58",
        "upload_time_iso_8601": "2020-10-20T11:57:58.012710Z",
        "url": "https://files.pythonhosted.org/packages/70/70/75d7945cf1f7b358842ff8cb3d9bf50bcd84e1d30c61505dccafde25cdcf/django_admin_lightweight_date_hierarchy-0.4.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "890b4ca515e25fc21ff9293e53d4757206b01e518565018fc70ad6cd4f61a9d5",
          "md5": "cb9fc5277caca5785447b669b44d13ef",
          "sha256": "e00d46d8ef1e6bdb70a32b147bbf3e39749cb6be1daaf2e28b6362797280c004"
        },
        "downloads": -1,
        "filename": "django-admin-lightweight-date-hierarchy-0.4.0.tar.gz",
        "has_sig": false,
        "md5_digest": "cb9fc5277caca5785447b669b44d13ef",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 12069,
        "upload_time": "2020-10-20T11:57:59",
        "upload_time_iso_8601": "2020-10-20T11:57:59.314691Z",
        "url": "https://files.pythonhosted.org/packages/89/0b/4ca515e25fc21ff9293e53d4757206b01e518565018fc70ad6cd4f61a9d5/django-admin-lightweight-date-hierarchy-0.4.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1794870c883e1e5393bc063093acf30ffb96c1a8f026afc6e619687c1b81657e",
          "md5": "812cccede2d28d1a11fa1471a943085c",
          "sha256": "f1d0b130790eb3e75db112e01de0d3fc5f98d242a313484f9eb0a2e118cc32a9"
        },
        "downloads": -1,
        "filename": "django_admin_lightweight_date_hierarchy-1.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "812cccede2d28d1a11fa1471a943085c",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 10335,
        "upload_time": "2022-02-03T14:16:16",
        "upload_time_iso_8601": "2022-02-03T14:16:16.527590Z",
        "url": "https://files.pythonhosted.org/packages/17/94/870c883e1e5393bc063093acf30ffb96c1a8f026afc6e619687c1b81657e/django_admin_lightweight_date_hierarchy-1.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "725c1b813eab2b3340f4b3fa2afed33c819abade319d9eb061e36d580fb744b3",
          "md5": "f2d1278376f1bf7b33acd9b639a83e55",
          "sha256": "10f3d98632036c6a0a6f01b96acecdf27a68c63f8fbbf4ffb57c29c984efa89e"
        },
        "downloads": -1,
        "filename": "django-admin-lightweight-date-hierarchy-1.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "f2d1278376f1bf7b33acd9b639a83e55",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 11644,
        "upload_time": "2022-02-03T14:16:18",
        "upload_time_iso_8601": "2022-02-03T14:16:18.234017Z",
        "url": "https://files.pythonhosted.org/packages/72/5c/1b813eab2b3340f4b3fa2afed33c819abade319d9eb061e36d580fb744b3/django-admin-lightweight-date-hierarchy-1.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "9d4bd78dbeda2cc2454e593126df34139118b603073c77bee0c5ee2be27acb40",
          "md5": "9128ebe200906f1aa8ec1691a0f44acb",
          "sha256": "90e4e1e7c96cf95392b9d67c2a8753861f5676aaabd0986bfcff750a16eede82"
        },
        "downloads": -1,
        "filename": "django_admin_lightweight_date_hierarchy-1.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "9128ebe200906f1aa8ec1691a0f44acb",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 10346,
        "upload_time": "2022-10-09T10:05:49",
        "upload_time_iso_8601": "2022-10-09T10:05:49.667009Z",
        "url": "https://files.pythonhosted.org/packages/9d/4b/d78dbeda2cc2454e593126df34139118b603073c77bee0c5ee2be27acb40/django_admin_lightweight_date_hierarchy-1.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "347000e1f0181d8b4d2687fe77639b10749fec42c1b75478e8672e33d5f267fa",
          "md5": "2d17a458a6d3fbdcf2eeb77de1ffccd0",
          "sha256": "2f51bd007a244e04974c4b38bb7483d4349939482b8cac79f5c1b31fc8cbb6ff"
        },
        "downloads": -1,
        "filename": "django-admin-lightweight-date-hierarchy-1.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "2d17a458a6d3fbdcf2eeb77de1ffccd0",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 11684,
        "upload_time": "2022-10-09T10:05:51",
        "upload_time_iso_8601": "2022-10-09T10:05:51.435988Z",
        "url": "https://files.pythonhosted.org/packages/34/70/00e1f0181d8b4d2687fe77639b10749fec42c1b75478e8672e33d5f267fa/django-admin-lightweight-date-hierarchy-1.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "9d4bd78dbeda2cc2454e593126df34139118b603073c77bee0c5ee2be27acb40",
        "md5": "9128ebe200906f1aa8ec1691a0f44acb",
        "sha256": "90e4e1e7c96cf95392b9d67c2a8753861f5676aaabd0986bfcff750a16eede82"
      },
      "downloads": -1,
      "filename": "django_admin_lightweight_date_hierarchy-1.1.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "9128ebe200906f1aa8ec1691a0f44acb",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.7",
      "size": 10346,
      "upload_time": "2022-10-09T10:05:49",
      "upload_time_iso_8601": "2022-10-09T10:05:49.667009Z",
      "url": "https://files.pythonhosted.org/packages/9d/4b/d78dbeda2cc2454e593126df34139118b603073c77bee0c5ee2be27acb40/django_admin_lightweight_date_hierarchy-1.1.0-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "347000e1f0181d8b4d2687fe77639b10749fec42c1b75478e8672e33d5f267fa",
        "md5": "2d17a458a6d3fbdcf2eeb77de1ffccd0",
        "sha256": "2f51bd007a244e04974c4b38bb7483d4349939482b8cac79f5c1b31fc8cbb6ff"
      },
      "downloads": -1,
      "filename": "django-admin-lightweight-date-hierarchy-1.1.0.tar.gz",
      "has_sig": false,
      "md5_digest": "2d17a458a6d3fbdcf2eeb77de1ffccd0",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.7",
      "size": 11684,
      "upload_time": "2022-10-09T10:05:51",
      "upload_time_iso_8601": "2022-10-09T10:05:51.435988Z",
      "url": "https://files.pythonhosted.org/packages/34/70/00e1f0181d8b4d2687fe77639b10749fec42c1b75478e8672e33d5f267fa/django-admin-lightweight-date-hierarchy-1.1.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}