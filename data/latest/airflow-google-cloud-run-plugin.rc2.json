{
  "info": {
    "author": "Michael Harris",
    "author_email": "mharris@luabase.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "# airflow-google-cloud-run-plugin\n\n[![PyPI version](https://badge.fury.io/py/airflow-google-cloud-run-plugin.svg)](https://badge.fury.io/py/airflow-google-cloud-run-plugin)\n[![PyPI - Downloads](https://img.shields.io/pypi/dm/airflow-google-cloud-run-plugin)](https://pypi.org/project/airflow-google-cloud-run-plugin/)\n[![PyPI - Python Version](https://img.shields.io/pypi/pyversions/airflow-google-cloud-run-plugin.svg)](https://pypi.org/project/airflow-google-cloud-run-plugin/)\n[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/ambv/black)\n\nAirflow plugin for\norchestrating [Google Cloud Run jobs](https://cloud.google.com/run/docs/overview/what-is-cloud-run#jobs).\n\n## Features\n\n1. Easier to use alternative\n   to [`KubernetesPodOperator`](https://airflow.apache.org/docs/apache-airflow-providers-cncf-kubernetes/stable/operators.html)\n2. Securely use sensitive data stored in Google Cloud Secrets Manager\n3. Create tasks with isolated dependencies\n4. Enables polyglot workflows\n\n## Resources\n\n### Core Operators\n\n1. `CloudRunJobOperator`\n\n### CRUD-Based Operators\n\n1. `CloudRunCreateJobOperator`\n2. `CloudRunGetJobOperator` ðŸ”œ\n3. `CloudRunUpdateJobOperator` ðŸ”œ\n4. `CloudRunDeleteJobOperator`\n5. `CloudRunListJobsOperator` ðŸ”œ\n\n### Hooks\n\n1. `CloudRunJobHook`\n\n### Sensors\n\n2. `CloudRunJobExecutionSensor` ðŸ”œ\n\n## Usage\n\n### Simple Job Lifecycle\n\n```python\nfrom airflow import DAG\n\nfrom airflow_google_cloud_run_plugin.operators.cloud_run import CloudRunJobOperator\n\nwith DAG(dag_id=\"example_dag\") as dag:\n  job = CloudRunJobOperator(\n    task_id=\"example-job\",\n    name=\"example-job\",\n    location=\"us-central1\",\n    project_id=\"example-project\",\n    image=\"gcr.io/gcp-runtimes/ubuntu_18_0_4\",\n    command=[\"echo\"],\n    cpu=\"1000m\",\n    memory=\"512Mi\",\n    create_if_not_exists=True,\n    delete_on_exit=True\n  )\n```\n\n### CRUD Job Lifecycle\n\n```python\nfrom airflow import DAG\n\nfrom airflow_google_cloud_run_plugin.operators.cloud_run import (\n  CloudRunJobOperator,\n  CloudRunCreateJobOperator,\n  CloudRunDeleteJobOperator,\n)\n\nwith DAG(dag_id=\"example_dag\") as dag:\n  create_job = CloudRunCreateJobOperator(\n    task_id=\"create\",\n    name=\"example-job\",\n    location=\"us-central1\",\n    project_id=\"example-project\",\n    image=\"gcr.io/gcp-runtimes/ubuntu_18_0_4\",\n    command=[\"echo\"],\n    cpu=\"1000m\",\n    memory=\"512Mi\"\n  )\n\n  run_job = CloudRunJobOperator(\n    task_id=\"run\",\n    name=\"example-job\",\n    location=\"us-central1\",\n    project_id=\"example-project\"\n  )\n\n  delete_job = CloudRunDeleteJobOperator(\n    task_id=\"delete\",\n    name=\"example-job\",\n    location=\"us-central1\",\n    project_id=\"example-project\"\n  )\n\n  create_job >> run_job >> delete_job\n```\n\n### Using Environment Variables\n\n```python\nfrom airflow import DAG\n\nfrom airflow_google_cloud_run_plugin.operators.cloud_run import CloudRunJobOperator\n\n# Simple environment variable\nFOO = {\n  \"name\": \"FOO\",\n  \"value\": \"not_so_secret_value_123\"\n}\n\n# Environment variable from Secret Manager\nBAR = {\n  \"name\": \"BAR\",\n  \"valueFrom\": {\n    \"secretKeyRef\": {\n      \"name\": \"super_secret_password\",\n      \"key\": \"1\"  # or \"latest\" for latest secret version\n    }\n  }\n}\n\nwith DAG(dag_id=\"example_dag\") as dag:\n  job = CloudRunJobOperator(\n    task_id=\"example-job\",\n    name=\"example-job\",\n    location=\"us-central1\",\n    project_id=\"example-project\",\n    image=\"gcr.io/gcp-runtimes/ubuntu_18_0_4\",\n    command=[\"echo\"],\n    args=[\"$FOO\", \"$BAR\"],\n    env_vars=[FOO, BAR],\n    cpu=\"1000m\",\n    memory=\"512Mi\",\n    create_if_not_exists=True,\n    delete_on_exit=True\n  )\n```\n\n## Improvement Suggestions\n\n- Add support for Cloud Run services\n- Nicer user experience for defining args and commands\n- Use approach from other GCP operators once this issue is resolved https://github.com/googleapis/python-run/issues/64\n- Add operators for all CRUD operations\n- Add run sensor (see [link](https://github.com/apache/airflow/tree/main/airflow/providers/google/cloud/sensors))\n- Enable volume mounts (see [TaskSpec](https://cloud.google.com/run/docs/reference/rest/v1/TaskSpec))\n- Allow user to configure resource requirements `requests` (\n  see [ResourceRequirements](https://cloud.google.com/run/docs/reference/rest/v1/Container#resourcerequirements))\n- Add remaining container options (see [Container](https://cloud.google.com/run/docs/reference/rest/v1/Container))\n- Allow non-default credentials and for user to specify service account (\n  see [link](https://google-auth.readthedocs.io/en/latest/user-guide.html#service-account-private-key-files))\n- Allow failure threshold. If more than one task is specified, user should be allowed to specify number of failures\n  allowed\n- Add custom links for log URIs\n- Add wrapper class for easier environment variable definition. Similar to `Secret` from Kubernetes provider (\n  see [link](https://github.com/apache/airflow/blob/main/airflow/kubernetes/secret.py))\n- Add slight time padding between job create and run\n- Add ability to choose to replace the job with new config values if values have changed\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/mharrisb1/airflow-google-cloud-run-plugin",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "airflow-google-cloud-run-plugin",
    "package_url": "https://pypi.org/project/airflow-google-cloud-run-plugin/",
    "platform": null,
    "project_url": "https://pypi.org/project/airflow-google-cloud-run-plugin/",
    "project_urls": {
      "Documentation": "https://github.com/mharrisb1/airflow-google-cloud-run-plugin",
      "Homepage": "https://github.com/mharrisb1/airflow-google-cloud-run-plugin",
      "Repository": "https://github.com/mharrisb1/airflow-google-cloud-run-plugin"
    },
    "release_url": "https://pypi.org/project/airflow-google-cloud-run-plugin/0.3.2/",
    "requires_dist": [
      "google-auth (>=2.13.0,<3.0.0)"
    ],
    "requires_python": ">=3.8,<3.11",
    "summary": "Airflow plugin for Google Cloud Run Jobs",
    "version": "0.3.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 15828275,
  "releases": {
    "0.3.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "adb854dbc1970bd347eb852ddc459870b106c455245a8c9c97fc38210cdbd176",
          "md5": "4661b7566891e72b49549d4be77ee9c5",
          "sha256": "391540588e8dbc76cfac3a53d06c1d8609af9d92beb28b0a3dbabc44e0470991"
        },
        "downloads": -1,
        "filename": "airflow_google_cloud_run_plugin-0.3.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "4661b7566891e72b49549d4be77ee9c5",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8,<3.11",
        "size": 17565,
        "upload_time": "2022-11-19T16:44:13",
        "upload_time_iso_8601": "2022-11-19T16:44:13.324086Z",
        "url": "https://files.pythonhosted.org/packages/ad/b8/54dbc1970bd347eb852ddc459870b106c455245a8c9c97fc38210cdbd176/airflow_google_cloud_run_plugin-0.3.1-py3-none-any.whl",
        "yanked": true,
        "yanked_reason": "Causes too many requests error"
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7f37b4e9a33569f9d5544c433b10a246e13d926722b1170e7879c31e2037dae5",
          "md5": "9457267c09544c2e191799b5c9a663f4",
          "sha256": "073204aca5328bb7fe5f858695a097f5883ff2867e7e1fab3cf359b582cd151f"
        },
        "downloads": -1,
        "filename": "airflow-google-cloud-run-plugin-0.3.1.tar.gz",
        "has_sig": false,
        "md5_digest": "9457267c09544c2e191799b5c9a663f4",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8,<3.11",
        "size": 12042,
        "upload_time": "2022-11-19T16:44:11",
        "upload_time_iso_8601": "2022-11-19T16:44:11.268807Z",
        "url": "https://files.pythonhosted.org/packages/7f/37/b4e9a33569f9d5544c433b10a246e13d926722b1170e7879c31e2037dae5/airflow-google-cloud-run-plugin-0.3.1.tar.gz",
        "yanked": true,
        "yanked_reason": "Causes too many requests error"
      }
    ],
    "0.3.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "0a79465063e30f665995d6ae70cad8a77580ea14721441269e4754855cfa3956",
          "md5": "c32568a8109ee393bda954c77ca9c46e",
          "sha256": "5c9c71ca128b99ff574c2e6eb61ea3f85f63666933eb0e0e3c36218bfd2c1dc7"
        },
        "downloads": -1,
        "filename": "airflow_google_cloud_run_plugin-0.3.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "c32568a8109ee393bda954c77ca9c46e",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8,<3.11",
        "size": 17593,
        "upload_time": "2022-11-20T01:31:44",
        "upload_time_iso_8601": "2022-11-20T01:31:44.119309Z",
        "url": "https://files.pythonhosted.org/packages/0a/79/465063e30f665995d6ae70cad8a77580ea14721441269e4754855cfa3956/airflow_google_cloud_run_plugin-0.3.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "138452b7dbeea7f1c5acf90e7dd5cd6a452b05fabf56797a17219442569cc17b",
          "md5": "d6b721b8009c390e2bdfb8ccd808653c",
          "sha256": "08a8389740d9c3c952c9d06f7a15aaf6cefcb7666b9097f9bde9d4452010f028"
        },
        "downloads": -1,
        "filename": "airflow-google-cloud-run-plugin-0.3.2.tar.gz",
        "has_sig": false,
        "md5_digest": "d6b721b8009c390e2bdfb8ccd808653c",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8,<3.11",
        "size": 12067,
        "upload_time": "2022-11-20T01:31:41",
        "upload_time_iso_8601": "2022-11-20T01:31:41.973280Z",
        "url": "https://files.pythonhosted.org/packages/13/84/52b7dbeea7f1c5acf90e7dd5cd6a452b05fabf56797a17219442569cc17b/airflow-google-cloud-run-plugin-0.3.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "0a79465063e30f665995d6ae70cad8a77580ea14721441269e4754855cfa3956",
        "md5": "c32568a8109ee393bda954c77ca9c46e",
        "sha256": "5c9c71ca128b99ff574c2e6eb61ea3f85f63666933eb0e0e3c36218bfd2c1dc7"
      },
      "downloads": -1,
      "filename": "airflow_google_cloud_run_plugin-0.3.2-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "c32568a8109ee393bda954c77ca9c46e",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.8,<3.11",
      "size": 17593,
      "upload_time": "2022-11-20T01:31:44",
      "upload_time_iso_8601": "2022-11-20T01:31:44.119309Z",
      "url": "https://files.pythonhosted.org/packages/0a/79/465063e30f665995d6ae70cad8a77580ea14721441269e4754855cfa3956/airflow_google_cloud_run_plugin-0.3.2-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "138452b7dbeea7f1c5acf90e7dd5cd6a452b05fabf56797a17219442569cc17b",
        "md5": "d6b721b8009c390e2bdfb8ccd808653c",
        "sha256": "08a8389740d9c3c952c9d06f7a15aaf6cefcb7666b9097f9bde9d4452010f028"
      },
      "downloads": -1,
      "filename": "airflow-google-cloud-run-plugin-0.3.2.tar.gz",
      "has_sig": false,
      "md5_digest": "d6b721b8009c390e2bdfb8ccd808653c",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.8,<3.11",
      "size": 12067,
      "upload_time": "2022-11-20T01:31:41",
      "upload_time_iso_8601": "2022-11-20T01:31:41.973280Z",
      "url": "https://files.pythonhosted.org/packages/13/84/52b7dbeea7f1c5acf90e7dd5cd6a452b05fabf56797a17219442569cc17b/airflow-google-cloud-run-plugin-0.3.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}