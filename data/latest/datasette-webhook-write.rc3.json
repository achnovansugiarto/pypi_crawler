{
  "info": {
    "author": "Andreas Madsack",
    "author_email": "",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# datasette-webhook-write\n\n[![PyPI](https://img.shields.io/pypi/v/datasette-webhook-write.svg)](https://pypi.org/project/datasette-webhook-write/)\n[![Changelog](https://img.shields.io/github/v/release/mfa/datasette-webhook-write?include_prereleases&label=changelog)](https://github.com/mfa/datasette-webhook-write/releases)\n[![Tests](https://github.com/mfa/datasette-webhook-write/workflows/Test/badge.svg)](https://github.com/mfa/datasette-webhook-write/actions?query=workflow%3ATest)\n[![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](https://github.com/mfa/datasette-webhook-write/blob/main/LICENSE)\n\nDatasette plugin to write to database via verified webhooks\n\n## Installation\n\nInstall this plugin in the same environment as Datasette.\n\n    $ datasette install datasette-webhook-write\n\n\n## Usage (datasette/receiving side)\n\nThis plugin allows writing to a datasette database via hmac-signed http POST calls.\n\nExample for metadata.yml (for usage to receive texts from https://nlg.ax/):\n```\nplugins:\n  datasette-webhook-write:\n    webhook_secret:\n      \"$env\": \"WEBHOOK_SECRET\"\n    http_header_name: \"x-myax-signature\"\n    database_name: \"example\"\n    table_name: \"generated_texts\"\n    use_pk:\n      - \"uid\"\n      - \"collection_id\"\n```\n\n`WEBHOOK_SECRET` is set as environment variable.\n\nThe url to upload to the datasette instance is ``/-/webhook-write/``.\n\n\n## Usage (pushing side)\n\nThe json data pushed has to be signed with the `WEBHOOK_SECRET` and added to the headers of the POST call.\n\nGenerate the hmac signature (where `document` is the data you want to send, and `WEBHOOK_SECRET` is the secret only pushing+receving parties should know):\n```\ndigest = hmac.new(\n    key=WEBHOOK_SECRET.encode(),\n    msg=json.dumps(document).encode(),\n    digestmod=hashlib.sha1,\n)\n\nheader = {\n    \"X-SIGNATURE\": f\"sha1={digest.hexdigest()}\",\n}\n```\n\nThe pushed data is written to the database only when secret+document are generating the same digest.\n\n\n## Development\n\nTo set up this plugin locally, first checkout the code. Then create a new virtual environment:\n\n    cd datasette-webhook-write\n    python3 -mvenv venv\n    source venv/bin/activate\n\nNow install the dependencies and test dependencies:\n\n    pip install -e '.[test]'\n\nTo run the tests:\n\n    pytest\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/mfa/datasette-webhook-write",
    "keywords": "",
    "license": "Apache License, Version 2.0",
    "maintainer": "",
    "maintainer_email": "",
    "name": "datasette-webhook-write",
    "package_url": "https://pypi.org/project/datasette-webhook-write/",
    "platform": null,
    "project_url": "https://pypi.org/project/datasette-webhook-write/",
    "project_urls": {
      "CI": "https://github.com/mfa/datasette-webhook-write/actions",
      "Changelog": "https://github.com/mfa/datasette-webhook-write/releases",
      "Homepage": "https://github.com/mfa/datasette-webhook-write",
      "Issues": "https://github.com/mfa/datasette-webhook-write/issues"
    },
    "release_url": "https://pypi.org/project/datasette-webhook-write/0.3/",
    "requires_dist": [
      "datasette",
      "sqlite-utils",
      "httpx ; extra == 'test'",
      "pytest ; extra == 'test'",
      "pytest-asyncio ; extra == 'test'"
    ],
    "requires_python": ">=3.6",
    "summary": "Datasette plugin to write to database via verified webhooks",
    "version": "0.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 15941123,
  "releases": {
    "0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "39c5e0765acd039650541c4094d6053e5a2c4e5e3438d8365815708eea1cb53f",
          "md5": "03fbaf522247ed55e3a86791a11be331",
          "sha256": "438281d6367fb88c5f61de6e8dca8ba583f16502f7b2fc4562b977432a5e98eb"
        },
        "downloads": -1,
        "filename": "datasette_webhook_write-0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "03fbaf522247ed55e3a86791a11be331",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 3483,
        "upload_time": "2021-07-28T19:10:33",
        "upload_time_iso_8601": "2021-07-28T19:10:33.469423Z",
        "url": "https://files.pythonhosted.org/packages/39/c5/e0765acd039650541c4094d6053e5a2c4e5e3438d8365815708eea1cb53f/datasette_webhook_write-0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c42038152017225b68cce1029315ee1f6800a97af1889d021515dbd37a42c494",
          "md5": "1856711e202edac57b71f47e922c1b0c",
          "sha256": "82a6f30a270de2e4d54eb91b45d9e74e6388bc9881a2f6f836ff0619069d703d"
        },
        "downloads": -1,
        "filename": "datasette-webhook-write-0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "1856711e202edac57b71f47e922c1b0c",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 3272,
        "upload_time": "2021-07-28T19:10:34",
        "upload_time_iso_8601": "2021-07-28T19:10:34.378179Z",
        "url": "https://files.pythonhosted.org/packages/c4/20/38152017225b68cce1029315ee1f6800a97af1889d021515dbd37a42c494/datasette-webhook-write-0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a109cb4749fdd079bf800a2cff2edb00a72c986ac0b9b34c5ace5967e695a303",
          "md5": "e845e89bc962ab6521aa63716cb5cd6a",
          "sha256": "c64e83ac96a3b21710eb49dd55adac44165fb29f149b9cfb9d5d1b8c493314fa"
        },
        "downloads": -1,
        "filename": "datasette_webhook_write-0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "e845e89bc962ab6521aa63716cb5cd6a",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 3764,
        "upload_time": "2021-07-28T19:40:35",
        "upload_time_iso_8601": "2021-07-28T19:40:35.872899Z",
        "url": "https://files.pythonhosted.org/packages/a1/09/cb4749fdd079bf800a2cff2edb00a72c986ac0b9b34c5ace5967e695a303/datasette_webhook_write-0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "47cf2aaf2bf5750cbf48712d88a2be30a903edff0674d51da6efc07a1f742810",
          "md5": "0d18200f621bc58e681bf6be0527e270",
          "sha256": "43fc7fb2860f70d353950a8c3df76626718ff6aa97d589b847ff415fe1ded5fe"
        },
        "downloads": -1,
        "filename": "datasette-webhook-write-0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "0d18200f621bc58e681bf6be0527e270",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 3557,
        "upload_time": "2021-07-28T19:40:37",
        "upload_time_iso_8601": "2021-07-28T19:40:37.170725Z",
        "url": "https://files.pythonhosted.org/packages/47/cf/2aaf2bf5750cbf48712d88a2be30a903edff0674d51da6efc07a1f742810/datasette-webhook-write-0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "eb2949da0928e097845b1812979b3c4c708a20544748509a5c301c35517c7638",
          "md5": "0c93cbdcba09f6f80b8777495a9bd78e",
          "sha256": "7b30db6e17b34bb9826e2c21c576010774932719462d429fe49738db05d99d61"
        },
        "downloads": -1,
        "filename": "datasette_webhook_write-0.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0c93cbdcba09f6f80b8777495a9bd78e",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 7994,
        "upload_time": "2022-11-30T11:14:44",
        "upload_time_iso_8601": "2022-11-30T11:14:44.986743Z",
        "url": "https://files.pythonhosted.org/packages/eb/29/49da0928e097845b1812979b3c4c708a20544748509a5c301c35517c7638/datasette_webhook_write-0.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4c2af59d273540827893b4b364dd032384885d1b799fb4f93da90d2b173aa0bf",
          "md5": "1a0576697b7b0a31e9786dc71711a4ac",
          "sha256": "18c900d39e212a26db907bcd6fb4ee0ba000665dca87d0686c77921b4b6cfe2c"
        },
        "downloads": -1,
        "filename": "datasette-webhook-write-0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "1a0576697b7b0a31e9786dc71711a4ac",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 7426,
        "upload_time": "2022-11-30T11:14:46",
        "upload_time_iso_8601": "2022-11-30T11:14:46.618522Z",
        "url": "https://files.pythonhosted.org/packages/4c/2a/f59d273540827893b4b364dd032384885d1b799fb4f93da90d2b173aa0bf/datasette-webhook-write-0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "eb2949da0928e097845b1812979b3c4c708a20544748509a5c301c35517c7638",
        "md5": "0c93cbdcba09f6f80b8777495a9bd78e",
        "sha256": "7b30db6e17b34bb9826e2c21c576010774932719462d429fe49738db05d99d61"
      },
      "downloads": -1,
      "filename": "datasette_webhook_write-0.3-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "0c93cbdcba09f6f80b8777495a9bd78e",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6",
      "size": 7994,
      "upload_time": "2022-11-30T11:14:44",
      "upload_time_iso_8601": "2022-11-30T11:14:44.986743Z",
      "url": "https://files.pythonhosted.org/packages/eb/29/49da0928e097845b1812979b3c4c708a20544748509a5c301c35517c7638/datasette_webhook_write-0.3-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "4c2af59d273540827893b4b364dd032384885d1b799fb4f93da90d2b173aa0bf",
        "md5": "1a0576697b7b0a31e9786dc71711a4ac",
        "sha256": "18c900d39e212a26db907bcd6fb4ee0ba000665dca87d0686c77921b4b6cfe2c"
      },
      "downloads": -1,
      "filename": "datasette-webhook-write-0.3.tar.gz",
      "has_sig": false,
      "md5_digest": "1a0576697b7b0a31e9786dc71711a4ac",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 7426,
      "upload_time": "2022-11-30T11:14:46",
      "upload_time_iso_8601": "2022-11-30T11:14:46.618522Z",
      "url": "https://files.pythonhosted.org/packages/4c/2a/f59d273540827893b4b364dd032384885d1b799fb4f93da90d2b173aa0bf/datasette-webhook-write-0.3.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}