{
  "info": {
    "author": "Michael Costa, Florent Chevalier",
    "author_email": "michael.costa@mcos.nc, florent.chevalier.nc@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Environment :: Console",
      "Intended Audience :: Developers",
      "Intended Audience :: System Administrators",
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3",
      "Topic :: Software Development :: Libraries :: Application Frameworks"
    ],
    "description": "![Build Status](https://drone.mcos.nc/api/badges/scrippy/scrippy-mail/status.svg) ![License](https://img.shields.io/static/v1?label=license&color=orange&message=MIT) ![Language](https://img.shields.io/static/v1?label=language&color=informational&message=Python)\n\n![Scrippy, mon ami le scrangourou](./scrippy-mail.png \"Scrippy, mon ami le scrangourou\")\n\n# `scrippy_mail`\n\nClient _Git_ pour le cadriciel [`Scrippy`](https://codeberg.org/scrippy).\n\n## Prérequis\n\n### Modules Python\n\n#### Liste des modules nécessaires\n\n- Aucun\n\n## Installation\n\n### Manuelle\n\n```bash\ngit clone https://codeberg.org/scrippy/scrippy-mail.git\ncd scrippy-mail.git\nsudo python3 -m pip install -r requirements.txt\nmake install\n```\n\n### Avec `pip`\n\n```bash\npip install scrippy-mail\n```\n\n### Utilisation\n\n### `scrippy_mail`\n\nLe module `scrippy_mail.mail`  propose une interface simplifiée permettant l'envoi de courriels via l'objet `Mailer`.\n\nCe module propose également une interface à `SpamAssassin` via l'objet `SpamAssassinClient` et une interface `POP3` via l'objet `PopClient`.\n\nCes deux dernières interfaces ne sont pas encore documentées et n'implémente pas l'intégralité des protocoles qu'elles sont censées supporter. Cependant elles sont utilisées en production pour des besoins limités.\n\nLe code source des modules `scrippy_mail.mail.popclient` et `scrippy_mail.mail.spamassassin` et les commentaires qu'il contient reste la meilleure source de documentation. [`Use the Source, Luke`](https://en.wiktionary.org/wiki/UTSL).\n\nLes paramètres suivants sont optionnels à l'instanciation d'un objet `scrippy_mail.mail.Mailer`:\n- `host`: Le nom du serveur de mails à utiliser (défaut: localhost)\n- `port`: Le numéro du port sur lequel contacter le serveur de mails (défaut: 25)\n- `user`: Le nom d'utilisateur avec lequel s'authentifier sur le serveur de mails\n- `password`: Le mot de passe avec lequel s'authentifier sur le serveur de mails\n- `starttls`: Un booléen indiquant s'il faut utiliser STARTTLS (défaut: False)\n- `timeout`: Un entier indiquant le délai maximum en secondes pour réussir une connexion (défaut: 60)\n\n#### Envoi de mail\n\nLa méthode `Mailer.send()` permettant l'envoi du message accepte les 4 arguments obligatoires suivants:\n- `subject`: Une chaîne de caractère utilisée comme sujet du courriel\n- `body`: Une chaîne de caractère utilisée comme corps du courriel\n- `to_addrs`: Un *tuple* contenant la liste des adresses de courriels de destination\n- `from_addr`: L'adresse de courriel de l'expéditeur\n\nSi l'argument `to_addrs` n'est pas un *tuple*, il sera converti comme tel. Typiquement si le courriel n'a qu'un seul destinataire, passer la seule adresse de courriel de ce destinataire comme une chaîne de caractères sera suffisant.\n\nSi le courriel doit être expédié à plusieurs destinataires, les adresses de destination devront être fournies sous formes de *tuple*.\n\nChaque adresse de courriel doit être une adresse de courriel répondant à la [RFC 5322](https://tools.ietf.org/html/rfc5322.html).\n\nLa méthode `Mailer.send()` renvoie `True` en cas de succès et `False` en cas d'échec de l'envoi du courriel.\n\n```python\nfrom scrippy_mail import mail\n\nmail_host = \"smtp.flying.circus\"\nmail_port = \"465\"\nmail_tls = True\nmail_from = \"luigi.vercotti@flying.circus\"\nmail_to = \"harry.fink@flying.circus\"\nmail_subject = \"Rapport d'erreur\"\nmail_body = \"\"\"Bonjour Harry Fink\n\nVous recevez cet e-mail car vous faites partie des administrateurs fonctionnels de l'application Dead Parrot.\n\nL'exécution du script s'est terminé avec l'erreur suivante:\n- It's not pinin’! It's passed on! This parrot is no more!\n\n--\nCordialement.\nLuiggi Vercotti\n\"\"\"\n\nmailer = mail.Mailer(host=mail_host, port=mail_port, starttls=mail_tls)\nto_addrs = (mail_to,)\n\nif mailer.send(subject, body, to_addrs, mail_from):\n  logging.debug(\"Courriel envoyé avec succès\")\n```\n\n#### Récupération de mails (POP3)\n\nLe client `PopClient` permet d'interroger un serveur _POP3_. Ce client très basique ne gère pas les connexions chiffrées _TLS_.\n\n```python\nimport email\nfrom scrippy_mail import mail\n\nmail_host = \"smtp.flying.circus\"\nmail_port = \"110\"\nmail_account = \"luigi.vercotti@flying.circus\"\nmail_password = \"D3ADP4ARR0T\"\n\nclient = mail.PopClient(host=mail_host, port=mail_port, timeout=5)\nclient.connect()\nclient.authenticate(mail_account, mail_password)\n# Récupère le nombre de mails disponibles\n# client.stat() renvoie la donnée brute, il appartient au développeur\n# De la traiter pour pouvoir l'exploiter.\nnum_mails = client.stat()\n# Récupère le dernier mails\nmail_content = client.retr(1)\n# Récupération du contenu (Body)\nmail_content = email.message_from_bytes(mail_content).get_payload()\nmail_content = mail_content.replace(\"=\\r\\n\", \"\")\nmail_content = mail_content.replace(\"\\r\\n.\\r\\n\", \"\\n\")\nmail_content = \"\\n\".join(mail_content.split(\"\\r\\n\"))\n# Supprime le dernier mail\nclient.dele(1)\nclient.bye()\n```\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://codeberg.org/scrippy/scrippy-mail",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "scrippy-mail",
    "package_url": "https://pypi.org/project/scrippy-mail/",
    "platform": null,
    "project_url": "https://pypi.org/project/scrippy-mail/",
    "project_urls": {
      "Homepage": "https://codeberg.org/scrippy/scrippy-mail"
    },
    "release_url": "https://pypi.org/project/scrippy-mail/1.1.72/",
    "requires_dist": [
      "twine ; extra == 'dev'",
      "wheel (>=0.37.0) ; extra == 'dev'",
      "flake8 (>=4.0.1) ; extra == 'dev'",
      "flake8-breakpoint (>=1.1.0) ; extra == 'dev'",
      "flake8-builtins (>=1.5.3) ; extra == 'dev'",
      "flake8-print (>=4.0.0) ; extra == 'dev'",
      "flake8-return (>=1.1.3) ; extra == 'dev'",
      "pep8-naming (>=0.8.2) ; extra == 'dev'",
      "pytest (>=6.2.2) ; extra == 'dev'",
      "pytest-cov (>=3.0.0) ; extra == 'dev'",
      "bump2version (>=1.0.1) ; extra == 'dev'",
      "setuptools (>=60.9.2) ; extra == 'dev'",
      "pypirc-chappers (>=1.0.8) ; extra == 'dev'",
      "pylint (>=2.12.2) ; extra == 'dev'"
    ],
    "requires_python": ">=3.8",
    "summary": "\"Client SMTP, POP3 et SpamAssassin pour le cadriciel Scrippy\"",
    "version": "1.1.72",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16957322,
  "releases": {
    "1.1.70": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "619a7a4a44fb0ba946cbbc6ef46fc0b5b8b800c319744d8bf18a72290ddc6da3",
          "md5": "18d4f244d399a52dde582e6b48300ed7",
          "sha256": "2ddf0835c894e639b258b533db303f93c8f79259c2ec7d5c05c46dc38d884d92"
        },
        "downloads": -1,
        "filename": "scrippy_mail-1.1.70-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "18d4f244d399a52dde582e6b48300ed7",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 10365,
        "upload_time": "2022-12-31T05:04:51",
        "upload_time_iso_8601": "2022-12-31T05:04:51.852568Z",
        "url": "https://files.pythonhosted.org/packages/61/9a/7a4a44fb0ba946cbbc6ef46fc0b5b8b800c319744d8bf18a72290ddc6da3/scrippy_mail-1.1.70-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "f8b4d49c5f11915c6c11e86652a3de20aa8b462b1c878aeb2bb761d0d2377e8d",
          "md5": "9d68101cb9fac64d1fff24693b4febc7",
          "sha256": "9944769b6f5202e0ae5f4446143db7ff3c908775089899b2eb52772af6bc0ddf"
        },
        "downloads": -1,
        "filename": "scrippy-mail-1.1.70.tar.gz",
        "has_sig": false,
        "md5_digest": "9d68101cb9fac64d1fff24693b4febc7",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8",
        "size": 10774,
        "upload_time": "2022-12-31T05:04:53",
        "upload_time_iso_8601": "2022-12-31T05:04:53.257944Z",
        "url": "https://files.pythonhosted.org/packages/f8/b4/d49c5f11915c6c11e86652a3de20aa8b462b1c878aeb2bb761d0d2377e8d/scrippy-mail-1.1.70.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.1.71": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a7907cf36e4b28aa3eb40b91f71fb3aecb228888631b707aff5bf8ffc9665399",
          "md5": "27fc98e0dc090b81a2485765930dd4f4",
          "sha256": "a0dd3c08ee8da83bc5e92c4d216c2f9d6ba7fb1c7e5117f691e17b84f6a3f505"
        },
        "downloads": -1,
        "filename": "scrippy_mail-1.1.71-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "27fc98e0dc090b81a2485765930dd4f4",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 10380,
        "upload_time": "2023-01-28T01:48:10",
        "upload_time_iso_8601": "2023-01-28T01:48:10.055719Z",
        "url": "https://files.pythonhosted.org/packages/a7/90/7cf36e4b28aa3eb40b91f71fb3aecb228888631b707aff5bf8ffc9665399/scrippy_mail-1.1.71-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d44118c2869702ae433df6af0660eab4e29609f6882c8f08954fd86da64d70e0",
          "md5": "180152a66d2bb2bb89bf3ff9f1f292f6",
          "sha256": "3d11a5f004011f5cf08d0f7f21e0bfc68b02a4769986030794f0de35881f10a5"
        },
        "downloads": -1,
        "filename": "scrippy-mail-1.1.71.tar.gz",
        "has_sig": false,
        "md5_digest": "180152a66d2bb2bb89bf3ff9f1f292f6",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8",
        "size": 10775,
        "upload_time": "2023-01-28T01:48:11",
        "upload_time_iso_8601": "2023-01-28T01:48:11.428204Z",
        "url": "https://files.pythonhosted.org/packages/d4/41/18c2869702ae433df6af0660eab4e29609f6882c8f08954fd86da64d70e0/scrippy-mail-1.1.71.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.1.72": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "38b123e6295435070c8b218333fa4dd32325aee7432bcc799b95844d5a192e0f",
          "md5": "e0031637f692a96981c330a42ffe62d7",
          "sha256": "62c5c036ab192048596625098c5aa1057405f20ea808e082e82d611be19dd802"
        },
        "downloads": -1,
        "filename": "scrippy_mail-1.1.72-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "e0031637f692a96981c330a42ffe62d7",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 10306,
        "upload_time": "2023-02-21T07:57:12",
        "upload_time_iso_8601": "2023-02-21T07:57:12.913431Z",
        "url": "https://files.pythonhosted.org/packages/38/b1/23e6295435070c8b218333fa4dd32325aee7432bcc799b95844d5a192e0f/scrippy_mail-1.1.72-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "296840ec1b46265b0b372e0ab6723cff9ba26658bf31980a690901728544dcae",
          "md5": "fd352c0d5c8229cc2966d5930158abdc",
          "sha256": "efdd877e494eaa268c737b630f9838d818c3fe7ecd1ae3e3081fe0dda0ebe3f5"
        },
        "downloads": -1,
        "filename": "scrippy-mail-1.1.72.tar.gz",
        "has_sig": false,
        "md5_digest": "fd352c0d5c8229cc2966d5930158abdc",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8",
        "size": 11189,
        "upload_time": "2023-02-21T07:57:14",
        "upload_time_iso_8601": "2023-02-21T07:57:14.696991Z",
        "url": "https://files.pythonhosted.org/packages/29/68/40ec1b46265b0b372e0ab6723cff9ba26658bf31980a690901728544dcae/scrippy-mail-1.1.72.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "38b123e6295435070c8b218333fa4dd32325aee7432bcc799b95844d5a192e0f",
        "md5": "e0031637f692a96981c330a42ffe62d7",
        "sha256": "62c5c036ab192048596625098c5aa1057405f20ea808e082e82d611be19dd802"
      },
      "downloads": -1,
      "filename": "scrippy_mail-1.1.72-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "e0031637f692a96981c330a42ffe62d7",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.8",
      "size": 10306,
      "upload_time": "2023-02-21T07:57:12",
      "upload_time_iso_8601": "2023-02-21T07:57:12.913431Z",
      "url": "https://files.pythonhosted.org/packages/38/b1/23e6295435070c8b218333fa4dd32325aee7432bcc799b95844d5a192e0f/scrippy_mail-1.1.72-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "296840ec1b46265b0b372e0ab6723cff9ba26658bf31980a690901728544dcae",
        "md5": "fd352c0d5c8229cc2966d5930158abdc",
        "sha256": "efdd877e494eaa268c737b630f9838d818c3fe7ecd1ae3e3081fe0dda0ebe3f5"
      },
      "downloads": -1,
      "filename": "scrippy-mail-1.1.72.tar.gz",
      "has_sig": false,
      "md5_digest": "fd352c0d5c8229cc2966d5930158abdc",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.8",
      "size": 11189,
      "upload_time": "2023-02-21T07:57:14",
      "upload_time_iso_8601": "2023-02-21T07:57:14.696991Z",
      "url": "https://files.pythonhosted.org/packages/29/68/40ec1b46265b0b372e0ab6723cff9ba26658bf31980a690901728544dcae/scrippy-mail-1.1.72.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}