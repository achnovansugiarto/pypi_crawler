{
  "info": {
    "author": "Ian Epperson",
    "author_email": "ian@epperson.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3"
    ],
    "description": "# filestorage\nA Python library to make storing files simple and easy.\n\n> :warning: Although there are extensive tests within this project for Python 3.6, 3.7, 3.8 and 3.9, it is a young project and there may be bugs and security holes. Be sure and test thoroughly prior to use in a production environment.\n\nIt is primarily intended to deal with file uploads to a static files directory or an object service like\n[AWS S3](https://aws.amazon.com/s3/?nc2=h_ql_prod_st_s3) or [Linode](https://www.linode.com/products/object-storage/).\nFiles can by stored synchronously (for [WSGI](https://wsgi.readthedocs.io/en/latest/index.html) servers\nlike [Django](https://www.djangoproject.com/), [Flask](https://flask.palletsprojects.com/) or [Pyramid](https://trypyramid.com/)) or asynchronously\n(for [ASGI](https://asgi.readthedocs.io/en/latest/) servers like [Starlette](https://www.starlette.io/),\n[FastAPI](https://fastapi.tiangolo.com/) or [Django Channels](https://channels.readthedocs.io/en/stable/)).\n\nSupports multiple storage services simultaneously or even the same service with multiple configurations.\n\nUpload filters are easy to create and a few [are included](#filters) by default.\n\nTable of Contents\n=================\n\n<!--ts-->\n   * [filestorage](#filestorage)\n   * [Table of Contents](#table-of-contents)\n      * [Introduction](#introduction)\n         * [Installation](#installation)\n         * [The Store](#the-store)\n            * [Configure the Store](#configure-the-store)\n         * [Folders](#folders)\n         * [Adding Filters](#adding-filters)\n      * [Configuration](#configuration)\n         * [Pyramid](#pyramid)\n      * [Classes](#classes)\n         * [StorageContainer](#storagecontainer)\n         * [StorageHandler](#storagehandler)\n         * [Filter](#filter)\n         * [FileItem](#fileitem)\n         * [Exceptions](#exceptions)\n         * [Handlers](#handlers)\n            * [LocalFileHandler](#localfilehandler)\n            * [AsyncLocalFileHandler](#asynclocalfilehandler)\n            * [S3Handler](#s3handler)\n            * [DummyHandler](#dummyhandler)\n            * [AsyncDummyHandler](#asyncdummyhandler)\n         * [Filters](#filters)\n            * [RandomizeFilename](#randomizefilename)\n            * [ValidateExtension](#validateextension)\n      * [Testing](#testing)\n\n<!-- Added by: runner, at: Sat Jan 23 00:29:29 UTC 2021 -->\n\n<!--te-->\n\n## Introduction\n\n### Installation\n\nThe library is available through the [Python Package Index](https://pypi.org/project/filestorage/) and can be installed with pip.\n\n```bash\npip install filestorage\n```\n\nDifferent handlers have additional library requirements that can be optionally installed. For instance, the [async local file handler](#asynclocalfilehandler) requirements can be installed using:\n\n```base\npip install \"filestorage[aio_file]\"\n```\n\nThe extras are:\n * `aio_file` - requirements for async local file handling.\n * `s3` - requirements for storing to an AWS S3 bucket.\n\n### The Store\n\nInteraction with the library is primarily accomplished through a global [`store`](#storagecontainer) object. Any Python file can access this global object by importing it.\n\n```python\nfrom filestorage import store\nstore.finalized  # == False\n```\n\n> If you are uncomfortable by the existance of a global store, fear not! You can make a new instance of the store using the [StorageContainer](#storagecontainer) class. `my_store = StorageContainer()`, the use that in your program.\n\nThe store can hold multiple configurations that are accessed through its indices:\n\n```python\nstore['portraits'].finalized  # == False\nstore['more']['and more'].finalized  # == False\n\nPORTRAIT_STORE = store['portraits']  # global variable for later use!\n```\n\nThe store and any of its other sub-configurations can be saved and referenced _prior_ to setting up any configuration.\nThis allows the store or any other sub-configuration to be imported anywhere and stored within global variables as\nneeded.\n\nTrying to use the store to save files prior to providing it a handler will result in an error.\n\n```python\nstore.save_data(filename='file.txt', data=b'spamity spam')\n\n# FilestorageConfigError: No handler provided for store\n```\n\nSo it's time to give it a [handler](#handler).\n\n#### Configure the Store\n\nAlthough any file can import the [store](#storagecontainer), it will not actually be usable until it is provided some kind of configuration.\nYou do this by giving the store a handler. This library includes a few kinds of [handlers](#handlers) with different configuration setups. For testing it's easiest to use the [DummyHandler](#dummyhandler):\n\n```python\nfrom filestore.handlers import DummmyHandler\nstore.handler = DummyHandler()\nstore['portraits'] = DummyHandler()\n```\n\nThe DummyHandler doesn't need any other configuration and just stores any saved files in memory.\n\nIn your app, you would would normally perform this configuration after all files have been imported but before the app starts - for instance in an initialization step where the app configuration is read. Different frameworks (Pyramid/Django/Starlette) will have different mechanisms for this.\n\nNow you can try to save some data into the store:\n\n```python\nstore.save_data(filename='file.txt', data=b'spamity spam')\n\n# 'file.txt' - the name of the file that was saved\n\nstore.exists(filename='file.txt')\n\n# True\n```\n\nHandlers and filters might adjust the filename in the process of storing the file. The return value gives you feedback of the actual name of the file that was saved to the store. This might be useful for storing in a database for later reference.\n\nYou can set and reset the handler several times. When you want to lock in the configuration and prevent further changes, you need to finalize the store.\nWhen you do so, all handlers and filters will validate their configuration and if any handlers are missing a configuration error will be thrown.  Any attempts to set a handler after this step will throw an error. This ensures that the store is properly set up once and only once.\n\n```python\nstore.finalize_config()\n\nstore.handler = DummyHandler()\n# FilestorageConfigError: Setting store.handler: store already finalized!\n```\n\nIf using an ASGI server, you may need to instead use an [async startup task](https://www.starlette.io/events/) that contains:\n```python\nawait store.async_finalize_config()\n```\n\nThe finalization step also will validate any handler configuration.\nFor instance, the [local file handler](#localfilehandler) ensures its configured directory\nexists, the [async file handler](#asynclocalfilehandler) ensures the proper libraries are installed and the S3 handler verifies the credentials by saving and deleting a dummy file in the bucket.\n\nIf the store or one of the sub-stores are not intended to be used, they must explicitly have their handler set to `None`. For instance, suppose\nyou want to use two different configurations, but don't want to use the store's base config. You can do:\n\n```python\nstore['portraits'].handler = DummyHandler()\nstore['backgrounds'].handler = DummyHandler()\n\n# Indicate that we don't want anybody using the base configurations (no `store.save_data()`)\nstore.handler = None\n\n# Finalize the configuration to prevent further changes\nstore.finalize_config()\n```\n\n### Folders\n\nThe save/exists/delete methods can also be used on any sub-folder of the `store`.\n```python\nfolder = store / 'one_folder' / 'another_folder'\nfolder.save_data(b'contents', 'file.txt')\n```\n\nFolders are late-binding and can thus be saved into a variable prior to the handler configuration.\n\nIf desired, a Folder can be used as a handler too:\n\n```python\nstore.handler = DummyHandler()\nstore['portraits'].handler = store / 'portraits'\n```\n\n### Adding Filters\n\nFilters allow mutating a file to be stored to a Handler. They are called in the order defined and a few filters are provided by this library.\n\nFor instance, it's often best not to simply store filenames provided by random Internet uploads. Although this library does scrub the filename, it's not as fool-proof as simply ignoring the provided filename and using a random string with a consistent length. The [RandomizeFilename](#randomizefilename) filter does just that.\n\n```python\nfrom filestorage.filters import RandomizeFilename\nstore.handler = DummyHandler(filters=[RandomizeFilename()])\n\nstore.save_data(filename='ignored name.txt', data=b'contents')\n'5d29f7e1-50c0-4dc6-a466-b2ae042e8ac0.txt'\n```\n\nFor more on filters, see the [Filter](#filter) class definition.\n\n## Configuration\n\n### Pyramid\n\nThis library can behave as a Pyramid plugin. When doing so, it will read from the Pyramid configuration and set up the handler(s) defined there. The `store` will also be available on the `request` object as `request.store`.\n\nTo set it up, include `filestorage.pyramid_config` in your configuration using the [Pyramid Configurator's include](.https://docs.pylonsproject.org/projects/pyramid/en/latest/api/config.html#pyramid.config.Configurator.include) method.\n\n```python\nfrom pyramid.config import Configurator\n\ndef main(global_config, **settings):\n    config = Configurator()\n    config.include('filestorage.pyramid_config'). # <---\n    ...\n```\n\nAdd any handler configuration to your app's config file. The handler and filters can refer to any handler or filter within `filestorage`, or can refer to any other package by full module path and model name.\n\n```ini\n[app:main]\n# (other config settings)\n\n# Base store with a custom handler and a custom filter\nstore.handler = myapp.filestorage.MyCustomHandler\nstore.filters[0] = myapp.filestorage.MyCustomFilter\n\n# Portrait store with a couple of filestorage filters\nstore['portrait'].handler = LocalFileHandler\nstore['portrait'].handler.base_path = /var/www/static/uploaded_images\nstore['portrait'].handler.base_url = http://my.portraits/static\nstore['portrait'].handler.filters[0] = RandomizeFilename\nstore['portrait'].handler.filters[1] = ValidateExtension\nstore['portrait'].handler.filters[1].extensions = ['jpg', 'png']\n\n# Another store that exists, but has been disabled.\nstore['not_used'].handler = None\n```\n\nAny parameters for filters and handlers are decoded and passed in as kwargs. Anything that looks like a list, set or dict literal is `eval`ed and bare whole numbers are converted to `int`. You can force anything to be a string by enclosing it in single or double quotes: `\"50\"`.\n\nThe store is then usable in any [view](https://docs.pylonsproject.org/projects/pyramid/en/latest/narr/views.html#defining-a-view-callable-as-a-function):\n\n```python\ndef save_file(request):\n    uploaded_file = request.POST['file']\n    filename = request.store.save_field(uploaded_file)\n    return Response(f'Saved to {filename}!')\n```\n\nAdditional optional settings:\n  * `store.request_property` - (Default `store`) - Name of the property to use on the request object. For example, set this to `my_store` then access the store through `request.my_store`.\n  * `store.use_global` - (Default `True`) - Use the global `store` object. If set to `False` then the `request.store` object will independent of the global `store` object.\n\n## Classes\n\n### StorageContainer\n\nThis is the class for the global `store` object.\n\nMethods:\n\n * `handler` - Gets the configured handler or raises an exception of no handler has been provided. Set this property to set the handler.\n * `sync_handler` - Gets the configured handler as a sync-only handler. Raises an exception if no `handler` has been set.\n * `async_handler` - Gets the configured handler as an async-only handler. Raises an exception if no `handler` has been set or if the configured handler can't be used asynchronously.\n * `finalize_config()` - Walk through all configured objects and check to ensure they have a valid configuration. Lock the `StorageContainer` to prevent any further configuration changes. Will raise a `FilestorageConfigError` if there's a configuration problem.\n * `async_finalize_config()` - awaitable version of the above call. Necessary for ASGI servers.\n * `finalized` - `True` if the config has been finalized, `False` otherwise.\n * `do_not_use` - `True` if the `handler` has been set to `None`, `False` otherwise.\n * `name` - String name of how this configuration is accessed. `store['a'].name == \"['a']\"`.\n * `[*]` - Get a sub-configuration object. Raises a `FilestorageConfigError` if the configuration is finalized and this configuration's `handler` hasn't been set.\n * `/ 'name'` - Obtain a `Folder` object with the same save/exist/delete methods as this object which write to the named sub-folder.\n\nOnce the handler is set, the store object can be used as a `StorageHandler` object.\n\n### StorageHandler\n(`StorageHandlerBase` or `AsyncStorageHandlerBase`)\n\nAll handlers inherit from `StorageHandlerBase`.\n\nThe async version of the Handler can be used for either synchronous or asynchronous operations. The `StorageHandlerBase` by itself can only be used for synchronous operations and any `async_*` method calls will throw an error. To make a new custom handler, start with the [handler template](../master/filestorage/handlers/_template.py).\n\n> :warning: __Ensure your forms include the attribute enctype=”multipart/form-data”__ or your uploaded files will be empty. [Short example](https://html.com/attributes/form-enctype/) and [more detail](https://developer.mozilla.org/en-US/docs/Web/API/FormData/Using_FormData_Objects#sending_files_using_a_formdata_object).\n\nParameters:\n\n * `base_url` - Optional string - The URL prefix for any saved file. For example: `'https://eppx.com/static/'`. If not set, the `get_url` method will only return the path string, not the full URL.\n * `path` - Optional list or string - The path within the store (and URL) for any saved file. For example: `['folder', 'subfolder']`\n * `filters` - Optional list of [Filters](#all-filters) to apply, in order, when saving any file through this handler. For example: `[RandomizeFilename()]`\n\nMethods:\n\n * `get_url(filename: str)` - Return the full URL of the given filename. If the `base_url` parameter isn't set, will only return the path string instead of the full URL.\n * `sanitize_filename(filename: str)` - Return the string stripped of dangerous characters.\n * Synchronous methods:\n   * `exists(filename: str)` - `True` if the given file exists in the store, false otherwise.\n   * `delete(filename: str)` - Deletes the given file from the store.\n   * `save_file(filename: str, data: BinaryIO)` - Save the binary IO object to the given file.\n   * `save_data(filename: str, data: bytes)` - Save the binary data to the given file.\n   * `save_field(field: cgi.FieldStorage)` - Save the given field storage object.\n * Asynchronous methods: (all will throw a `FilestorageConfigError` if the handler doesn't support async operations.)\n   * `async_exists(filename: str)` - Awaitable version\n   * `async_delete(filename: str)` - Awaitable version\n   * `async_save_file(filename: str, data: BinaryIO)` - Awaitable version\n   * `async_save_data(filename: str, data: binary)` - Awaitable version\n   * `async_save_field(field: cgi.FieldStorage)` - Awaitable version\n\nAbstract Methods to be overridden when sub-classing:\n\n * `_validate()` - Check to ensure the provided configuration is correct. Can be an async method or return a `Future` object.\n * Synchronous methods: (All get passed a [FileItem](#fileitem) object)\n   * `_exists(item: FileItem)` - Returns `True`/`False` to indicate if the item exists in the storage container.\n   * `_delete(item: FileItem)` - Remove the item from the storage container.\n   * `_save(item: FileItem)` - Save the item to the storage container and return the name of the file saved.\n * Asynchronous methods:\n   * `async _async_exists(item: FileItem)` - async version, returns `True` or `False`.\n   * `async _async_delete(item: FileItem)` - async version.\n   * `async _async_save(item: FileItem)` - async version, returns the stored filename.\n\n### Filter\n\nThe `FilterBase` is used as a base class for any Filters. These are not intended to be used directly, but to be passed as an optional list to a Handler through the `filters` parameter. To make a new custom filter, start with the [filter template](../master/filestorage/filters/_template.py).\n\nProperties:\n\n * `async_ok` - `True`/`False` to indicate if this Filter is OK to be used asynchronously.\n\nMethods:\n\n * `call(item: FileItem)` - Returns the filtered [FileItem](#fileitem).\n * `async_call(item: FileItem)` - Awaitable version of `call`. If the filter can't be used asynchronously, will raise a `FilestorageConfigError`.\n * `validate()` - Checks to ensure the Filter is configured correctly. Might return an Awaitable.\n\nAbstract Methods to be overridden when sub-classing:\n\n * `_apply(item: FileItem)` - Returns the filtered [FileItem](#fileitem). It can optionally be an async method that will be awaited on. Can raise an exception if the item fails the filter.\n * `_validate()` - Check to ensure the provided configuration is correct. Can be an async method or return a `Future` object.\n\n### FileItem\n\nThis is the basic item that's passed through Filters to the Handlers. It is based on a NamedTuple and is therefore immutable.\n\nParameters, which are also Properties:\n * `filename` - String\n * `path` - Optional tuple of the path under which the `filename` can be accessed or stored. Example: `('folder', 'subfolder')`.\n * `data` - Optional [BinaryIO](https://docs.python.org/3/library/typing.html#typing.BinaryIO) of the contents to store. Example: `BytesIO(b'contents')`.\n * `media_type` - Optional string describing the [media (or MIME) type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types) contained within the data. If not provided, the type will be [guessed](https://docs.python.org/3/library/mimetypes.html#mimetypes.guess_type) as needed based on the filename's extension.\n\nProperties:\n * `url_path` - Relative path and filename for use in a URL. Example: `'folder/subfolder/file.txt'`\n * `fs_path` - Relative path and filename for use in the local filesystem. Example when running on Windows: `'folder\\subfolder\\file.txt'`.\n * `has_data` - `True` if data is populated.\n * `content_type` - String indicating the `media_type` to be used in HTTP headers as needed.\n\nMethods:\n * `copy(**kwargs)` - Create a copy of this object, overriding any specific parameter. Example: `item.copy(filename='new_name.txt')`. This is very useful in a Filter that changes the filename or other properties.\n\nContext Manager:\n\nThe FileItem can be used as a context manager, where it will modify the read/seek methods of the underlying object to fit the requested stream as necessary - either sync or async.\n\n * `with FileItem as f` - Returns an object (`f`) that behaves as an open file. `f.read()` and `f.seek()` methods are supported.\n * `async with FileItem as f` - Returns an object (`f`) that behaves as an async open file. `await f.read()` and `await f.seek()` methods are supported.\n\n### Exceptions\n\nAll are importable via the `exceptions` sub-package. For example:\n\n```python\nfrom filestorage.exceptions import FilestorageError\n```\n\n * FilestorageError - Base class for any exceptions raised by this library.\n * FileNotAllowed - The provided file is not allowed, either through a [Filter](#filter) or from a [Handler](#handler).\n * FileExtensionNotAllowed - The provided file with the given extension is not allowed, either through a [Filter](#filter) or from a [Handler](#handler).\n * FilestorageConfigError - There was some problem with the configuration.\n\n### Handlers\n\nAll handlers are subclasses of the [StorageHandler](#storagehandler) class. These can be imported via the `handlers` sub-package. For example:\n\n```python\nfrom filestorage.handlers import LocalFileHandler\n\nstore.handler = LocalFileHandler(base_path='/home/www/uploads`)\n```\n\n#### LocalFileHandler\n\nStore files on the local file system using synchronous methods.\n\nAsync not OK.\n\nParameters:\n * `base_path` - Where to store the files on the local filesystem\n * `auto_make_dir` - Automatically create the directory as needed.\n\n#### AsyncLocalFileHandler\n\nStore files on the local file system using asynchronous methods.\n\nAsync OK.\n\n> :warning: __Requires the `aiofiles` library__, which will be installed with `pip install filestorage['aio_file']`\n\nParameters:\n * `base_path` - Where to store the files on the local filesystem\n * `auto_make_dir` (defualt: `False`)- Automatically create the directory as needed.\n * `allow_sync_methods` (default: `True`) - When `False`, all synchronous calls throw a `RuntimeError`. Might be helpful in preventing accidentally using the sync `save`/`exists`/`delete` methods, which would block the async loop too.\n\n#### S3Handler\n\nStore files to an S3 bucket. This handler works for synchronous and asynchronous calls.\n\nAsync OK.\n\n> :warning: __Requires the `aioboto3` library__, which will be installed with `pip install filestorage['s3']`\n\n> :warning: __Requires appropriate AWS permissions to the S3 bucket.__\n\nParameters:\n * `bucket_name` - required - AWS bucket to store the files in.\n * `acl` (default: `'public-read'`) - Access-Control to apply to newly saved files. Other interesting options are `'private'`, `'authenticate-read'`, and `'bucket-owner-read'`. See [the S3 documentation](https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html#canned-acl) for more information.\n * `connect_timeout` (default: `5`) - Seconds to wait for a connection event before timeout.\n * `num_retries` (default: `5` - How many times the library will attempt to connect before failing.\n * `read_timeout` (default: `10`) Seconds to wait for a read event before timeout.\n * `keepalive_timeout` (default: `12`) - Send a packet every few seconds to keep active connections open.\n * `host_url` - When using [non-AWS S3 service](https://www.google.com/search?q=s3+compatible+storage) (like [Linode](https://www.linode.com/products/object-storage/)), use this url to connect. (Example: `'https://us-east-1.linodeobjects.com'`)\n * `region_name` - Overrides any region_name defined in the [AWS configuration file](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#using-a-configuration-file) or  the `AWS_DEFAULT_REGION` environment variable. Required if using AWS S3 and the value is not already set elsewhere.\n * `addressing_style` - Overrides any S3.addressing_style set in the [AWS configuration file](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#using-a-configuration-file).\n * `allow_sync_methods` (default: `True`) - When `False`, all synchronous calls throw a `RuntimeError`. Might be helpful in preventing accidentally using the sync `save`/`exists`/`delete` methods, which would block the async loop too.\n\nPermissions can be configured in three different ways. They can be stored in environment variables, then can be stored in a particular AWS file, or they can be passed in directly.\n\nSee the [boto3 credentials documentation](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html) for details on how to configure the required keys.\n\n> :warning: __Do not hard-code secret information in your source code!__\n\nIf you wish to directly provide the connection information to this handler, use the following optional parameters:\n\n * `aws_access_key_id` - or use the `AWS_ACCESS_KEY_ID` environment variable.\n * `aws_secret_access_key` - or use the `AWS_SECRET_ACCESS_KEY` environment variable.\n * `aws_session_token` - Unnecessary when using the two previous options, but here for completeness. Note that [session tokens](https://docs.aws.amazon.com/cli/latest/reference/sts/get-session-token.html) have a maximum age of 36 hours. Could instead use the `AWS_SESSION_TOKEN` environment variable.\n * `profile_name` - Which profile to use within a [shared credentials file](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html#shared-credentials-file).\n\n#### DummyHandler\n\nHandler used to test the file store - keeps any stored files in memory.\n\nAsync not OK - will fail for any async call. For an async version use the [AsyncDummyHandler](#asyncdummyhandler).\n\nAccepts no parameters.\n\nProperties:\n\n * `files` - a dictionary of all saved files. The key is the path/filename string and the value is a [FileItem](@fileitem) object.\n * `validated` - `True` if the handler was validated (which happens while finalizing the config).\n * `last_save` - The last [FileItem](@fileitem) saved.\n * `last_delete` - The last [FileItem](@fileitem) deleted.\n\nMethods:\n\n * `assert_exists(filename: str, path: Tuple[str, ...]` - Asserts that the provided filename and path have been saved.\n * `assert_file_contains(filename: str, path: Tuple[str, ...], data: bytes)` - Asserts that the saved file contains the given data.\n\n#### AsyncDummyHandler\n\nIdentical to the [DummyHandler](#dummyhandler), but can be used asynchronously.\n\n### Filters\n\nAll are importable via the `filters` sub-package. For example:\n\n```python\nfrom filestorage.filter import RandomizeFilename\n\nstore.handler = DummyHandler(filters=[RandomizeFilename()])\n```\n\n#### RandomizeFilename\n\nFilter to randomize the filename. It keeps any extension within the filename, but replaces the name with a random string.\n\nAsync OK.\n\nParameters:\n * `name_generator` Optional method that takes the filename (without extension) and returns a new random name. When left off, this Filter uses the [uuid4](https://docs.python.org/3/library/uuid.html#uuid.uuid4) method.\n\n#### ValidateExtension\n\nReject any filename that does not have one of the indicated extensions. Raises a [`FileExtensionNotAllowed`](#exceptions) for a disallowed extension.\n\nAsync OK.\n\nParameters:\n * `extensions` - List of exceptions to allow through this filter. Example: `['jpg', 'png']`\n\n## Testing\n\nThe [DummyHandler](#dummyhandler) or [AsyncDummyHandler](#asyncdummyhandler) are great tools for testing your application. To keep your tests isolated, you can create a new [store](#storagecontainer) object and configure it for each test as needed.\n\n```python\nfrom filestorage import StorageContainer\nfrom filestorage.handlers import AsyncDummyHandler\n\ndef test_store():\n    store = StorageContainer()\n    dummy_handler = AsyncDummyHandler()\n    store.handler = dummy_handler\n\n    # Do whatever should trigger your app to store a file\n\n    dummy_handler.assert_exists('name.txt', ('folder', 'subfolder'))\n```\n\nIf you need to write several tests and want to check the result, it's probably best to create a couple of simple fixtures and allow [pytest](https://docs.pytest.org/en/stable/fixture.html) to inject them as needed.\n\nWithin `tests/conftest.py`:\n```python\nimport pytest\n\nfrom filestorage import StorageContainer\nfrom filestorage.handlers import AsyncDummyHandler\n\n@pytest.fixture\ndef dummy_handler():\n    return AsyncDummyHandler()\n\n@pytest.fixture\ndef store(dummy_handler):\n    store = StorageContainer()\n    store.handler = dummy_handler\n    store.finalize_config()\n    return store\n```\n\nWithin `tests/test_myapp.py`\n```python\ndef test_store(store, dummy_handler):\n    # The configured dummy handler and store were auto-created and passed in here\n\n    # Do whatever should trigger your app to store a file\n\n    dummy_handler.assert_exists('name.txt', ('folder', 'subfolder'))\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/ianepperson/filestorage",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "filestorage",
    "package_url": "https://pypi.org/project/filestorage/",
    "platform": "any",
    "project_url": "https://pypi.org/project/filestorage/",
    "project_urls": {
      "Homepage": "https://github.com/ianepperson/filestorage"
    },
    "release_url": "https://pypi.org/project/filestorage/0.0.6/",
    "requires_dist": [
      "asgiref",
      "aiofiles ; extra == 'aio_file'",
      "aioboto3 ; extra == 's3'",
      "pytest ; extra == 'test'",
      "mock ; extra == 'test'",
      "pytest-asyncio ; extra == 'test'",
      "pytest-mock ; extra == 'test'",
      "aioboto3 ; extra == 'test'",
      "aiofiles ; extra == 'test'"
    ],
    "requires_python": ">=3.6",
    "summary": "Save uploaded files in configurable stores",
    "version": "0.0.6",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 9208285,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "f794fb23f6722ba39df6d2b804beb13f8bbe3c9005236fb85dc1596adb71bc62",
          "md5": "0a30a87eb6527a373c8fd23be8af7b55",
          "sha256": "50a38d689d3eadb54a2f85ebde8f24ce8eac9c3c61e5dcba91326d31214cf64c"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0a30a87eb6527a373c8fd23be8af7b55",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.5",
        "size": 32888,
        "upload_time": "2021-01-14T02:35:36",
        "upload_time_iso_8601": "2021-01-14T02:35:36.514368Z",
        "url": "https://files.pythonhosted.org/packages/f7/94/fb23f6722ba39df6d2b804beb13f8bbe3c9005236fb85dc1596adb71bc62/filestorage-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a80ccafa819b85effbf71f0333234f2031be4429bf4e47695d08ff343f2b5916",
          "md5": "d43c50597a55875dc925d1c05bcc046f",
          "sha256": "048035875223c19f5a2da416b6cee83b33329d243aa31ae2cbc172e096f789f0"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "d43c50597a55875dc925d1c05bcc046f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.5",
        "size": 27460,
        "upload_time": "2021-01-14T02:35:37",
        "upload_time_iso_8601": "2021-01-14T02:35:37.833149Z",
        "url": "https://files.pythonhosted.org/packages/a8/0c/cafa819b85effbf71f0333234f2031be4429bf4e47695d08ff343f2b5916/filestorage-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "9569ed055855d1d0652fc2601f718a5189c3c3a8267a1667590c17a5ca74c0c7",
          "md5": "5b9d981d8ef9075a9575a43b945658d8",
          "sha256": "0f5bedf528cd5555cba40931215f3026fbee2a4cd45233c7e0c19ddc0b7dfe61"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "5b9d981d8ef9075a9575a43b945658d8",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.5",
        "size": 33231,
        "upload_time": "2021-01-14T03:56:25",
        "upload_time_iso_8601": "2021-01-14T03:56:25.383947Z",
        "url": "https://files.pythonhosted.org/packages/95/69/ed055855d1d0652fc2601f718a5189c3c3a8267a1667590c17a5ca74c0c7/filestorage-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b3e08954d04d0a221915939cd3dd535dcb997a9d047fc640edb880392d1848c7",
          "md5": "bd6be1e136974df7b9b2880dde8939fa",
          "sha256": "c6f1ddfb19ac269dd8cc7332c8d3168bc78b36f868b294adb7bfcb9530b9d45a"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "bd6be1e136974df7b9b2880dde8939fa",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.5",
        "size": 27677,
        "upload_time": "2021-01-14T03:56:26",
        "upload_time_iso_8601": "2021-01-14T03:56:26.587383Z",
        "url": "https://files.pythonhosted.org/packages/b3/e0/8954d04d0a221915939cd3dd535dcb997a9d047fc640edb880392d1848c7/filestorage-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2271de05b7675b8ae270c06e4ef4b7522ab17d59236ee8682b552bf5114a722f",
          "md5": "3a2d6125d8138043e3280d0ae7855fe2",
          "sha256": "59cb7ec06e66779757418e4a622d84d133c0d74001ba78cc0853b5d59edb528b"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "3a2d6125d8138043e3280d0ae7855fe2",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.5",
        "size": 38306,
        "upload_time": "2021-01-16T18:09:02",
        "upload_time_iso_8601": "2021-01-16T18:09:02.848579Z",
        "url": "https://files.pythonhosted.org/packages/22/71/de05b7675b8ae270c06e4ef4b7522ab17d59236ee8682b552bf5114a722f/filestorage-0.0.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "04ff5b0392bd7bbe299b7c50cf2b620362ec5cd8011c3055974ba28def62f05d",
          "md5": "2e1df927758f8be89ef7e9b0780fcde7",
          "sha256": "98086e7bc8519580b4e8379f6935de1fbccc45f14498c142063171e960bbf249"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "2e1df927758f8be89ef7e9b0780fcde7",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.5",
        "size": 33438,
        "upload_time": "2021-01-16T18:09:04",
        "upload_time_iso_8601": "2021-01-16T18:09:04.020964Z",
        "url": "https://files.pythonhosted.org/packages/04/ff/5b0392bd7bbe299b7c50cf2b620362ec5cd8011c3055974ba28def62f05d/filestorage-0.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d4d9afca866a30a2acce7818565713d69669627ee8716eebacf0b592bc24e041",
          "md5": "f0740751369e5dd7ac6be203cc3a2e52",
          "sha256": "1b2ebcd7e4367856f0178354c2f37578dbb0ae3fb537866b466f047d126acf3f"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "f0740751369e5dd7ac6be203cc3a2e52",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.5",
        "size": 38674,
        "upload_time": "2021-01-18T23:44:08",
        "upload_time_iso_8601": "2021-01-18T23:44:08.511794Z",
        "url": "https://files.pythonhosted.org/packages/d4/d9/afca866a30a2acce7818565713d69669627ee8716eebacf0b592bc24e041/filestorage-0.0.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "673095290b931d5730c9f70fcb80e4b03350e321fa6c97110ddddf5e4b56a437",
          "md5": "3cb850a7f3e53335a62959c5c6493f1d",
          "sha256": "d32f2edc556a468865bdf86edb2576b6a3274a1469d3f46a7a5e88c9f34a01e6"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "3cb850a7f3e53335a62959c5c6493f1d",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.5",
        "size": 35623,
        "upload_time": "2021-01-18T23:44:09",
        "upload_time_iso_8601": "2021-01-18T23:44:09.713801Z",
        "url": "https://files.pythonhosted.org/packages/67/30/95290b931d5730c9f70fcb80e4b03350e321fa6c97110ddddf5e4b56a437/filestorage-0.0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "9f2e7c9f83eb04297515702f7efcee8bbc116949effc39d8aad3c19e6e8aabe1",
          "md5": "2d66dd7152334808e3b55fd5bf3d3db0",
          "sha256": "938d4cff994844fb2f8c12879acfe66a32acf870b6a3338f26b0df7c294b1316"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.5-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "2d66dd7152334808e3b55fd5bf3d3db0",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.5",
        "size": 39532,
        "upload_time": "2021-01-19T03:10:21",
        "upload_time_iso_8601": "2021-01-19T03:10:21.989412Z",
        "url": "https://files.pythonhosted.org/packages/9f/2e/7c9f83eb04297515702f7efcee8bbc116949effc39d8aad3c19e6e8aabe1/filestorage-0.0.5-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5a3b944194106fc23a8cf3adfd210bfecb46e1627d020ac7e7018e9077063f4b",
          "md5": "7730a9d9aa666ee362b449274f4fa758",
          "sha256": "03071bcd0ec68e74523ce0d7f53a725eace6dc1694cb13f4930ccad0a6944376"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.5.tar.gz",
        "has_sig": false,
        "md5_digest": "7730a9d9aa666ee362b449274f4fa758",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.5",
        "size": 35631,
        "upload_time": "2021-01-19T03:10:23",
        "upload_time_iso_8601": "2021-01-19T03:10:23.174632Z",
        "url": "https://files.pythonhosted.org/packages/5a/3b/944194106fc23a8cf3adfd210bfecb46e1627d020ac7e7018e9077063f4b/filestorage-0.0.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.6": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "88d20ff07d7a74403c836e6c2311f2888f2dcba42853a44ae222a93602804376",
          "md5": "b1ec1505e28ea145658bd29b5be0b11c",
          "sha256": "ffbaff77331c61e8e4059879fbb525687c30b0fc56cfe84d06b88ae67c2de0e9"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.6-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "b1ec1505e28ea145658bd29b5be0b11c",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 39501,
        "upload_time": "2021-01-23T02:04:42",
        "upload_time_iso_8601": "2021-01-23T02:04:42.427264Z",
        "url": "https://files.pythonhosted.org/packages/88/d2/0ff07d7a74403c836e6c2311f2888f2dcba42853a44ae222a93602804376/filestorage-0.0.6-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "e5b5e74ce316aa7d637bffd87fcaabb402447691d7a8adff73b40b6da614f67c",
          "md5": "7e6725e1e0ce8e27b1e55300606a21df",
          "sha256": "66f10ea436912f22f79ef3f8ce7c8c494f4af05eedaba9f54c60b74f0996e9fe"
        },
        "downloads": -1,
        "filename": "filestorage-0.0.6.tar.gz",
        "has_sig": false,
        "md5_digest": "7e6725e1e0ce8e27b1e55300606a21df",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 35730,
        "upload_time": "2021-01-23T02:04:43",
        "upload_time_iso_8601": "2021-01-23T02:04:43.648674Z",
        "url": "https://files.pythonhosted.org/packages/e5/b5/e74ce316aa7d637bffd87fcaabb402447691d7a8adff73b40b6da614f67c/filestorage-0.0.6.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "88d20ff07d7a74403c836e6c2311f2888f2dcba42853a44ae222a93602804376",
        "md5": "b1ec1505e28ea145658bd29b5be0b11c",
        "sha256": "ffbaff77331c61e8e4059879fbb525687c30b0fc56cfe84d06b88ae67c2de0e9"
      },
      "downloads": -1,
      "filename": "filestorage-0.0.6-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "b1ec1505e28ea145658bd29b5be0b11c",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6",
      "size": 39501,
      "upload_time": "2021-01-23T02:04:42",
      "upload_time_iso_8601": "2021-01-23T02:04:42.427264Z",
      "url": "https://files.pythonhosted.org/packages/88/d2/0ff07d7a74403c836e6c2311f2888f2dcba42853a44ae222a93602804376/filestorage-0.0.6-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "e5b5e74ce316aa7d637bffd87fcaabb402447691d7a8adff73b40b6da614f67c",
        "md5": "7e6725e1e0ce8e27b1e55300606a21df",
        "sha256": "66f10ea436912f22f79ef3f8ce7c8c494f4af05eedaba9f54c60b74f0996e9fe"
      },
      "downloads": -1,
      "filename": "filestorage-0.0.6.tar.gz",
      "has_sig": false,
      "md5_digest": "7e6725e1e0ce8e27b1e55300606a21df",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 35730,
      "upload_time": "2021-01-23T02:04:43",
      "upload_time_iso_8601": "2021-01-23T02:04:43.648674Z",
      "url": "https://files.pythonhosted.org/packages/e5/b5/e74ce316aa7d637bffd87fcaabb402447691d7a8adff73b40b6da614f67c/filestorage-0.0.6.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}