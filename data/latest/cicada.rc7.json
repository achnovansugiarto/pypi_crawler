{
  "info": {
    "author": "Wise",
    "author_email": "",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: Apache Software License",
      "Programming Language :: Python :: 3 :: Only"
    ],
    "description": "# Cicada scheduler\n\n[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)\n[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)\n\n*Centralized Distributed Scheduler*\n\n- [Overview](#overview)\n    - [Advantages over using only CRON](#advantages-over-using-only-cron)\n    - [Execution flow diagram](#execution-flow-diagram)\n- [Setup Central database](#setup-central-database)\n    - [Database ERD](#database-erd)\n- [Setup Node](#setup-node)\n- [Administration](#administration)\n    - [cli help](#cli-help)\n    - [(Re)register a server to Cicada](#(re)register-a-server-to-cicada)\n    - [Add or Update a new schedule](#add-or-update-a-new-schedule)\n    - [Launch a schedule once](#launch-a-schedule-once)\n    - [Launch a schedule once](#launch-a-schedule-once)\n    - [Abort a running schedule](#abort-a-running-schedule)\n## Overview\n\n- Cicada is best understood as a lightweight management layer between linux CRON and the end executables\n- It requires a central database for setting up and monitoring schedules\n- Schedules can be launched on any node that has registered itself to the database\n- Nodes act as agents pulling scheduling information from the database.\n### Advantages over using only CRON\n- A central log is kept of schedule executions and results\n- Offers some schedule dependance management\n- Non-running schedules can easily be moved from one node to another\n- Running schedules can easily be terminated\n### Execution flow diagram\n![Execution flow diagram](https://github.com/transferwise/cicada/blob/main/docs/execution_flow.png)\n\n## Setup Central Database\n\nVerified on **PostgreSQL** versions *9.6* to *12.9*\n\n1. Execute as **postgres** user [setup/db_and_user.sql](setup/db_and_user.sql)\n2. Change **cicada** user password\n3. Execute as **cicada** user [setup/schema.sql](setup/schema.sql)\n\n### Database ERD\n![Database ERD](https://github.com/transferwise/cicada/blob/main/docs/erd.png)\n\n## Setup Node\n\nVerified on *Ubuntu 18.04 and 20.04 LTS*\n\nPrerequisites\n\n- ntpd\n- cron\n- python3.8\n\n```bash\n# Install Cicada Scheduler\nsudo mkdir -p /opt/cicada\nsudo chown -R $USER:$USER /opt/cicada\ncd /opt/cicada\nDIR=$(pwd)\n\ncd $DIR\ngit clone git@github.com:transferwise/cicada.git .\nmake python=python3.8\n\n# Update the db_cicada section of the environmental config file\ncp $DIR/config/example.yml $DIR/config/definitions.yml\nvim $DIR/config/definitions.yml\n\n# Register new Node in Database\n$DIR/bin/cicada register_server\n\n# Add linux CRON job to check central scheduler every minute\necho \"* * * * * $DIR/venv/bin/python3 $DIR/venv/bin/cicada exec_server_schedules\" | crontab\n```\n\n## Administration\n\n### cli help\n```bash\ncicada --help\n```\n\n### (Re)register a server to Cicada\n```bash\ncicada register_server\n```\n\n### Add or Update a new schedule\n```bash\ncicada upsert_schedule --help\n\nschedule_id             | Id of the schedule\nschedule_description    | Schedule description and comments\nserver_id               | Id of the server where the schedule will run\nschedule_order          | run order for the schedule. lowest is first. is_async jobs will be execute in parallel\nis_async                | 0=Disabled 1=Enabled | is_async jobs execute in parallel\nis_enabled              | 0=Disabled 1=Enabled\nadhoc_execute           | 0=Disabled 1=Enabled | Execute at next minute, regardless of other settings\nabort_running           | 0=Disabled 1=Enabled | If the job is running, it will be terminated as soon as possible\ninterval_mask           | When to execute the command | unix crontab (minute hour dom month dow)\nfirst_run_date          | The schedule will not execute before this datetime\nlast_run_date           | The schedule will not execute after this datetime\nexec_command            | Command to execute\nparameters              | Parameters for exec_command\nadhoc_parameters        | If specified, will override parameters for one run\nschedule_group_id       | Optional field to help with schedule grouping\n```\n\n### Launch a schedule once, as soon as possible\n- adhoc_execute is a **one-time** schedule modification.\n- As soon as adhoc_execution has been used, it is reset.\n\n```bash\ncicada upsert_schedule --schedule_id={schedule_id} --adhoc_execute={1}\n```\n\n### Launch the next run of a schedule with different parameters\n- adhoc_parameters is a **one-time** schedule modification.\n- As soon as adhoc_parameters has been used, it is reset.\n```\ncicada upsert_schedule --schedule_id={schedule_id} ==adhoc_parameters={do something diffident}\n```\n\n### Abort a running schedule\n- abort_running is a **one-time** schedule modification.\n- As soon as abort_running has been used, it is reset.\n\n```bash\ncicada upsert_schedule --schedule_id={schedule_id} --abort_running={1}\n```\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/transferwise/cicada",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "cicada",
    "package_url": "https://pypi.org/project/cicada/",
    "platform": null,
    "project_url": "https://pypi.org/project/cicada/",
    "project_urls": {
      "Homepage": "https://github.com/transferwise/cicada"
    },
    "release_url": "https://pypi.org/project/cicada/0.5.1/",
    "requires_dist": [
      "psycopg2-binary (==2.9.5)",
      "pyyaml (==6.0)",
      "croniter (==1.3.8)",
      "tabulate (==0.9.0)",
      "slack-sdk (==3.19.5)",
      "backoff (==2.2.1)",
      "pytest (==7.2.0) ; extra == 'dev'",
      "pytest-cov (==4.0.0) ; extra == 'dev'",
      "pytest-mock (==3.10.0) ; extra == 'dev'",
      "black (==22.12.0) ; extra == 'dev'",
      "flake8 (==6.0.0) ; extra == 'dev'",
      "freezegun (==1.2.2) ; extra == 'dev'"
    ],
    "requires_python": "",
    "summary": "Lightweight, agent-based, distributed scheduler",
    "version": "0.5.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17069059,
  "releases": {
    "0.3.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "463c2cace5335cef5cf58190bdfac6662a7cb4b07f70a5ca7f25569829e0fcc7",
          "md5": "dfd518de29cb0da9408580cb2cc2a41a",
          "sha256": "a7648b9d80f7cf9b39abb0e44538e191d7742b0ac0b801e924b1ae89d0a506fb"
        },
        "downloads": -1,
        "filename": "cicada-0.3.1.tar.gz",
        "has_sig": false,
        "md5_digest": "dfd518de29cb0da9408580cb2cc2a41a",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 15164,
        "upload_time": "2022-04-04T05:37:46",
        "upload_time_iso_8601": "2022-04-04T05:37:46.726437Z",
        "url": "https://files.pythonhosted.org/packages/46/3c/2cace5335cef5cf58190bdfac6662a7cb4b07f70a5ca7f25569829e0fcc7/cicada-0.3.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b23f472ff57c26aec6ec911a2aff2c5c0015ef44b6e9932a7c74641bea161c06",
          "md5": "d84f3d917a7a47b10427a1cb6c99e22f",
          "sha256": "5a2e6462faafb11047353466494d8a6c7ec0030d87378405ba2939f1c10dc9cd"
        },
        "downloads": -1,
        "filename": "cicada-0.3.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "d84f3d917a7a47b10427a1cb6c99e22f",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 21983,
        "upload_time": "2022-04-04T19:24:17",
        "upload_time_iso_8601": "2022-04-04T19:24:17.290010Z",
        "url": "https://files.pythonhosted.org/packages/b2/3f/472ff57c26aec6ec911a2aff2c5c0015ef44b6e9932a7c74641bea161c06/cicada-0.3.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "22201b685a4e66346c403f00597192817d246425d1a941eb672df7ed44bfa1e7",
          "md5": "5d97f359f73fbbab6603251b22a67d50",
          "sha256": "c16eaa83e083f289b26698da1e979031ae28a4705a240eb2ff6b5a7175eb4eb4"
        },
        "downloads": -1,
        "filename": "cicada-0.3.2.tar.gz",
        "has_sig": false,
        "md5_digest": "5d97f359f73fbbab6603251b22a67d50",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 18604,
        "upload_time": "2022-04-04T19:24:18",
        "upload_time_iso_8601": "2022-04-04T19:24:18.978029Z",
        "url": "https://files.pythonhosted.org/packages/22/20/1b685a4e66346c403f00597192817d246425d1a941eb672df7ed44bfa1e7/cicada-0.3.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a67992053f0160be3f16f0ec81b12263de8f4783b7b58a2a832485b68c71890c",
          "md5": "27b7d0210a441d5a66dda05389a33a78",
          "sha256": "5c61c8e6c6f2a7118417925172f16356672d4e26edc366a4ea32a367d9acbb74"
        },
        "downloads": -1,
        "filename": "cicada-0.3.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "27b7d0210a441d5a66dda05389a33a78",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 21982,
        "upload_time": "2022-07-19T15:01:17",
        "upload_time_iso_8601": "2022-07-19T15:01:17.487343Z",
        "url": "https://files.pythonhosted.org/packages/a6/79/92053f0160be3f16f0ec81b12263de8f4783b7b58a2a832485b68c71890c/cicada-0.3.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c539e05237cda0db98eb12bbc2038d6cb7ea6d58bdf66ebe5e30483b5a6a0f4b",
          "md5": "d96f05b311749885273ccb6c24c8bc0e",
          "sha256": "c984607d456b44d5b30ec8e054d03f8d9c1842fdf1aa124c8938865e1b8d351d"
        },
        "downloads": -1,
        "filename": "cicada-0.3.3.tar.gz",
        "has_sig": false,
        "md5_digest": "d96f05b311749885273ccb6c24c8bc0e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 18627,
        "upload_time": "2022-07-19T15:01:19",
        "upload_time_iso_8601": "2022-07-19T15:01:19.719033Z",
        "url": "https://files.pythonhosted.org/packages/c5/39/e05237cda0db98eb12bbc2038d6cb7ea6d58bdf66ebe5e30483b5a6a0f4b/cicada-0.3.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1421709e7aa9aaf4a2b50ee3b8cd2de6f282dc11e6ed7ca963f38ca01d92d626",
          "md5": "ecb4b6e664a42931345df7d7e42d3f3a",
          "sha256": "ebc34cfb8cf9518d068dedf5c711572bfdf268adb9f9838090c819af1a56d106"
        },
        "downloads": -1,
        "filename": "cicada-0.4.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "ecb4b6e664a42931345df7d7e42d3f3a",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 21692,
        "upload_time": "2022-11-09T21:44:03",
        "upload_time_iso_8601": "2022-11-09T21:44:03.035957Z",
        "url": "https://files.pythonhosted.org/packages/14/21/709e7aa9aaf4a2b50ee3b8cd2de6f282dc11e6ed7ca963f38ca01d92d626/cicada-0.4.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "929c8348cffb884bad7a041ed381ae2e65e9b900f7a359033253d665d25386f3",
          "md5": "a4080fb60995a32d360ad44c47b60d00",
          "sha256": "9ff589d5cb9e57d85f6a53bfbdce12d1fd9bdf141823ca77b7d531b722291937"
        },
        "downloads": -1,
        "filename": "cicada-0.4.0.tar.gz",
        "has_sig": false,
        "md5_digest": "a4080fb60995a32d360ad44c47b60d00",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 18384,
        "upload_time": "2022-11-09T21:44:05",
        "upload_time_iso_8601": "2022-11-09T21:44:05.161843Z",
        "url": "https://files.pythonhosted.org/packages/92/9c/8348cffb884bad7a041ed381ae2e65e9b900f7a359033253d665d25386f3/cicada-0.4.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "39c6cb7720818dd4adc572d2ac1c9a9b9b2f224e8168a9beaa8a9f5d8cdf0f55",
          "md5": "a0c8bdfeed3fe079676c25e443e910c8",
          "sha256": "69b9b3d288ff6c2b6ed3dc0ee4f48ac268592754fd414302e78e2f04c09100fc"
        },
        "downloads": -1,
        "filename": "cicada-0.4.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "a0c8bdfeed3fe079676c25e443e910c8",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 21822,
        "upload_time": "2023-01-06T11:34:56",
        "upload_time_iso_8601": "2023-01-06T11:34:56.129986Z",
        "url": "https://files.pythonhosted.org/packages/39/c6/cb7720818dd4adc572d2ac1c9a9b9b2f224e8168a9beaa8a9f5d8cdf0f55/cicada-0.4.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2c64726685db919557065da010a0a5072acbae9c46aa57645154b64ad2e64f0e",
          "md5": "e076728d0fb89565255cade73acd22d3",
          "sha256": "77b27a0c69d556b8decdc8e93987d6d6d8677d14788cf5361dc7a91e7246c96c"
        },
        "downloads": -1,
        "filename": "cicada-0.4.1.tar.gz",
        "has_sig": false,
        "md5_digest": "e076728d0fb89565255cade73acd22d3",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 18607,
        "upload_time": "2023-01-06T11:34:58",
        "upload_time_iso_8601": "2023-01-06T11:34:58.026157Z",
        "url": "https://files.pythonhosted.org/packages/2c/64/726685db919557065da010a0a5072acbae9c46aa57645154b64ad2e64f0e/cicada-0.4.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.5.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a210c5b036de5b48f0cb166c4fd867ffaf173293194472b88af4e6ff308c322b",
          "md5": "d891ba10a5bcb1b1f3ea27c0be768c42",
          "sha256": "89f68a99e28f2bd17c2f2ed0ffca1bac2d6c04ad76e165282ff60f57889e5b5f"
        },
        "downloads": -1,
        "filename": "cicada-0.5.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "d891ba10a5bcb1b1f3ea27c0be768c42",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 21921,
        "upload_time": "2023-02-24T14:25:00",
        "upload_time_iso_8601": "2023-02-24T14:25:00.199627Z",
        "url": "https://files.pythonhosted.org/packages/a2/10/c5b036de5b48f0cb166c4fd867ffaf173293194472b88af4e6ff308c322b/cicada-0.5.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b9ffd32924943efa704aaf32f2607fd3d883c4b9ec2ecdc449a2d0ef27d65009",
          "md5": "25f7e0ec96421d91080af520efcc0cca",
          "sha256": "592e772c290116249b3f31bda08bc846244953962f48241a45ab7410dad852e8"
        },
        "downloads": -1,
        "filename": "cicada-0.5.0.tar.gz",
        "has_sig": false,
        "md5_digest": "25f7e0ec96421d91080af520efcc0cca",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 18695,
        "upload_time": "2023-02-24T14:25:02",
        "upload_time_iso_8601": "2023-02-24T14:25:02.502198Z",
        "url": "https://files.pythonhosted.org/packages/b9/ff/d32924943efa704aaf32f2607fd3d883c4b9ec2ecdc449a2d0ef27d65009/cicada-0.5.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.5.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "67f08cc40257d4c6e344bc0d03d08fd6de2e5a4066a8de342b28e92e8f5adbb5",
          "md5": "48da87e89467e725f20168c9a49c5b1a",
          "sha256": "b769283963b49c7a8e27db555e73948d4620c072bf20792b5e354e7aefba0275"
        },
        "downloads": -1,
        "filename": "cicada-0.5.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "48da87e89467e725f20168c9a49c5b1a",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 21919,
        "upload_time": "2023-02-27T16:00:17",
        "upload_time_iso_8601": "2023-02-27T16:00:17.286186Z",
        "url": "https://files.pythonhosted.org/packages/67/f0/8cc40257d4c6e344bc0d03d08fd6de2e5a4066a8de342b28e92e8f5adbb5/cicada-0.5.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7baddbfcc02090f4fc6a9ee7397269c5a8f44df53daf6ceff3aee26483fcd3ae",
          "md5": "c5964a1ac1fd3ad6ab503d4dc1500b31",
          "sha256": "c699f45ce30e4a7750dcfc445e2cff382e2bafedf8cbea1e9e685cf0b696fed3"
        },
        "downloads": -1,
        "filename": "cicada-0.5.1.tar.gz",
        "has_sig": false,
        "md5_digest": "c5964a1ac1fd3ad6ab503d4dc1500b31",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 18735,
        "upload_time": "2023-02-27T16:00:18",
        "upload_time_iso_8601": "2023-02-27T16:00:18.800884Z",
        "url": "https://files.pythonhosted.org/packages/7b/ad/dbfcc02090f4fc6a9ee7397269c5a8f44df53daf6ceff3aee26483fcd3ae/cicada-0.5.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "67f08cc40257d4c6e344bc0d03d08fd6de2e5a4066a8de342b28e92e8f5adbb5",
        "md5": "48da87e89467e725f20168c9a49c5b1a",
        "sha256": "b769283963b49c7a8e27db555e73948d4620c072bf20792b5e354e7aefba0275"
      },
      "downloads": -1,
      "filename": "cicada-0.5.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "48da87e89467e725f20168c9a49c5b1a",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 21919,
      "upload_time": "2023-02-27T16:00:17",
      "upload_time_iso_8601": "2023-02-27T16:00:17.286186Z",
      "url": "https://files.pythonhosted.org/packages/67/f0/8cc40257d4c6e344bc0d03d08fd6de2e5a4066a8de342b28e92e8f5adbb5/cicada-0.5.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "7baddbfcc02090f4fc6a9ee7397269c5a8f44df53daf6ceff3aee26483fcd3ae",
        "md5": "c5964a1ac1fd3ad6ab503d4dc1500b31",
        "sha256": "c699f45ce30e4a7750dcfc445e2cff382e2bafedf8cbea1e9e685cf0b696fed3"
      },
      "downloads": -1,
      "filename": "cicada-0.5.1.tar.gz",
      "has_sig": false,
      "md5_digest": "c5964a1ac1fd3ad6ab503d4dc1500b31",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 18735,
      "upload_time": "2023-02-27T16:00:18",
      "upload_time_iso_8601": "2023-02-27T16:00:18.800884Z",
      "url": "https://files.pythonhosted.org/packages/7b/ad/dbfcc02090f4fc6a9ee7397269c5a8f44df53daf6ceff3aee26483fcd3ae/cicada-0.5.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}