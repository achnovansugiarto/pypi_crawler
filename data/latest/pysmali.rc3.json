{
  "info": {
    "author": "",
    "author_email": "MatrixEditor <not@supported.com>",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "Intended Audience :: Science/Research",
      "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "# PySmali\r\n\r\n[![python](https://img.shields.io/badge/python-3.8+-blue.svg?logo=python&labelColor=lightgrey)](https://www.python.org/downloads/)\r\n![LastEdit](https://img.shields.io:/static/v1?label=LastEdit&message=03/18/2023&color=9cf)\r\n![Status](https://img.shields.io:/static/v1?label=Status&message=Pre-Release&color=lightgreen)\r\n![Platform](https://img.shields.io:/static/v1?label=Platforms&message=Linux|Windows&color=yellowgreen)\r\n[![Documentation Status](https://readthedocs.org/projects/pysmali/badge/?version=latest)](https://pysmali.readthedocs.io/en/latest/?badge=latest)\r\n![PyPi](https://img.shields.io:/static/v1?label=PyPi&message=0.1.1&color=lightblue)\r\n\r\n\r\nThe main functionalities of this repository cover creating and parsing Smali files with Python3 as well as interpret Smali source code files. There is also an interace interpreter provided that\r\nacts as a Python-CLI.\r\n\r\n\r\n## Installation\r\n\r\nBy now, the only way to install the python module in this repository is by cloning it and running the following command:\r\n\r\n```bash\r\n$ cd ./pysmali && pip install .\r\n# Or with pip\r\n$ pip install pysmali\r\n```\r\n\r\n## Usage\r\n\r\nFor a more detailed explanation of the Smali Visitor-API use the [docs](https://pysmali.readthedocs.io/).\r\n\r\n### ISmali (Interactive Smali Interpreter)\r\n\r\nAs of version `0.1.1` the interactive interpreter can be used to execute Smali code directly:\r\n\r\n```bash\r\n$ ismali example.ssf\r\n# or start interactive mode\r\n$ ismali\r\n>>> vars\r\n{'p0': <SmaliObject@195f5c0da90>}\r\n```\r\n\r\nSome notes:\r\n\r\n* ``p0``: This register always stores the root-instance where defined fields and methods will be stored.\r\n* ``vars``: This command can be used to print all registers together with their values\r\n* `L<Root>;`: The name of the root-context class\r\n\r\nThe API [documentation](https://pysmali.readthedocs.io/) provides some usage examples and usage hints.\r\n\r\n### Parsing Smali-Files\r\n\r\nThe simplest way to parse code is to use a `SmaliReader` together with a visitor:\r\n\r\n```python\r\nfrom smali import SmaliReader, ClassVisitor\r\n\r\ncode = \"\"\"\r\n.class public final Lcom/example/Hello;\r\n.super Ljava/lang/Object;\r\n# One line comment\r\n.source \"SourceFile\" # EOL comment\r\n\"\"\"\r\n\r\nreader = SmaliReader()\r\nreader.visit(code, ClassVisitor())\r\n```\r\n\r\nThere are a few options to have in mind when parsing with a `SmaliReader`:\r\n\r\n* `comments`: To explicitly parse comments, set this variable to True (in constructor or directly)\r\n* `snippet`: To parse simple code snippets without a .class definition, use the 'snippet' variable (or within the constructor). Use this property only if you don't have a '.class' definition at the start of the source code\r\n* `validate`: Validates the parsed code\r\n* `errors`: With values `\"strict\"` or `\"ignore\"` this attribute will cause the reader to raise or ignore exceptions\r\n\r\nActually, the code above does nothing as the `ClassVisitor` class does not handle any notification by the reader. For instance, to print out the class name of a parsed code, the following implementation could be used:\r\n\r\n```python\r\nfrom smali import SmaliReader, ClassVisitor, Type\r\n\r\nclass NamePrinterVisitor(ClassVisitor):\r\n    def visit_class(self, name: str, access_flags: int) -> None:\r\n        # The provided name is the type descriptor, so we have to \r\n        # convert it:\r\n        cls_type = Type(name)\r\n        print('ClassName:', cls_type.class_name)\r\n\r\nreader = SmaliReader()\r\nreader.visit(\".class public final Lcom/example/Hello;\", NamePrinterVisitor())\r\n```\r\n\r\n### Writing Smali-Files\r\n\r\nWriting is as simple as parsing files. To write the exact same document the has been parsed, the `SmaliWriter` class can be used as the visitor:\r\n\r\n```python\r\nfrom smali import SmaliReader, SmaliWriter\r\n\r\nreader = SmaliReader()\r\nwriter = SmaliWriter()\r\n\r\nreader.visit(\".class public final Lcom/example/Hello;\", writer)\r\n# The source code can be retrieved via a property\r\ntext = writer.code\r\n```\r\n\r\nTo create own Smali files, the pre-defined `SmaliWriter` can be used again:\r\n\r\n```python\r\nfrom smali import SmaliWriter, AccessType\r\n\r\nwriter = SmaliWriter()\r\n# create the class definition\r\nwriter.visit_class(\"Lcom/example/Hello;\", AccessType.PUBLIC + AccessType.FINAL)\r\nwriter.visit_super(\"Ljava/lang/Object;\")\r\n\r\n# create a field\r\nfield_writer = writer.visit_field(\"foo\", AccessType.PRIVATE, \"Ljava/lang/String\")\r\n\r\n# create the finished source code, BUT don't forget visit_end()\r\nwriter.visit_end()\r\ntext = writer.code\r\n```\r\n\r\n### Importing classes and execute methods\r\n\r\nAs of version `0.1.1` you can import Smali files and execute defined methods:\r\n\r\n```python\r\nfrom smali.bridge import SmaliVM, SmaliObject\r\n\r\nwith open('example.smali', 'r', encoding='utf-8') as fp:\r\n    source = fp.read()\r\n    \r\nvm = SmaliVM()\r\n# Import class definition\r\nsmali_class = vm.classloader.load_class(source, init=False)\r\n# Call <clinit> method\r\nsmali_class.clinit()\r\n\r\n# Create a new instance of the imported class\r\ninstance = SmaliObject(smali_class)\r\n# Call the object's constructor\r\ninstance.init()\r\n\r\n# Execute the method 'toString'\r\ntoString = instance.smali_class.method(\"toString\")\r\n# The instance must be always the first element (on \r\n# static methods this argument must be None)\r\nvalue = toString(instance)\r\nprint(value)\r\n```\r\n\r\n## License\r\n\r\nDistributed under the GNU GPLv3. See `LICENSE` for more information.\r\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "pysmali",
    "package_url": "https://pypi.org/project/pysmali/",
    "platform": null,
    "project_url": "https://pypi.org/project/pysmali/",
    "project_urls": {
      "API-Docs": "https://pysmali.readthedocs.io/",
      "Homepage": "https://github.com/MatrixEditor/pysmali"
    },
    "release_url": "https://pypi.org/project/pysmali/0.1.1/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "Smali Visitor-API and Smali emulator",
    "version": "0.1.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17398415,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "bdabea2b61da96e37c36e2ac5da3fe3028eb096d3171c55cfd20b2fbb8e4dd39",
          "md5": "9bc65ebcf306a602b2ad6ce291601ac6",
          "sha256": "11a7ed37675ffc83bda8c5d37d238875eb81561d9ee4463d7243397d5b1f4a65"
        },
        "downloads": -1,
        "filename": "pysmali-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "9bc65ebcf306a602b2ad6ce291601ac6",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 57825,
        "upload_time": "2023-03-16T06:12:52",
        "upload_time_iso_8601": "2023-03-16T06:12:52.618012Z",
        "url": "https://files.pythonhosted.org/packages/bd/ab/ea2b61da96e37c36e2ac5da3fe3028eb096d3171c55cfd20b2fbb8e4dd39/pysmali-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5f314783e501e26182ddaa317c032ae78246cbebe9ff1ef15f39cb28d205dd20",
          "md5": "4ce4d42edefe6ad7946050f4b06f73bf",
          "sha256": "10d5610dcb330f5d8ba2e05c819e87111edcceb3bdeaf5757d2ffb243ffee927"
        },
        "downloads": -1,
        "filename": "pysmali-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "4ce4d42edefe6ad7946050f4b06f73bf",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 48575,
        "upload_time": "2023-03-16T06:12:54",
        "upload_time_iso_8601": "2023-03-16T06:12:54.526067Z",
        "url": "https://files.pythonhosted.org/packages/5f/31/4783e501e26182ddaa317c032ae78246cbebe9ff1ef15f39cb28d205dd20/pysmali-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "36273a9722dd478298a093199c4f7bac790cdbe4c143f1a68156a39ccfcb0ca5",
          "md5": "b98548d453f7ce079d6fa22b709ce025",
          "sha256": "c40de0204a6795677f49abd1b657e1d73e5c89b5580ba9ee54ac5270735373c9"
        },
        "downloads": -1,
        "filename": "pysmali-0.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "b98548d453f7ce079d6fa22b709ce025",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 66035,
        "upload_time": "2023-03-18T17:57:16",
        "upload_time_iso_8601": "2023-03-18T17:57:16.366425Z",
        "url": "https://files.pythonhosted.org/packages/36/27/3a9722dd478298a093199c4f7bac790cdbe4c143f1a68156a39ccfcb0ca5/pysmali-0.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b0c84ea4a52c64fa8136cbc7b46620562ec555d82b2872d5b8c1efc18459133c",
          "md5": "82aa62eac381682c4e7d15c35b609aae",
          "sha256": "29e5b59493f6348585582abb37c62bb353b455f99b3379008a8e60453fd8796b"
        },
        "downloads": -1,
        "filename": "pysmali-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "82aa62eac381682c4e7d15c35b609aae",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 54640,
        "upload_time": "2023-03-18T17:57:18",
        "upload_time_iso_8601": "2023-03-18T17:57:18.219265Z",
        "url": "https://files.pythonhosted.org/packages/b0/c8/4ea4a52c64fa8136cbc7b46620562ec555d82b2872d5b8c1efc18459133c/pysmali-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "13145fe081f3379fe11abc4b1b769d4beece90cd3f517f0642c33d9a499ac5ac",
          "md5": "974ddd8e9b4e0fb285a71c306c7ce4d4",
          "sha256": "eb420e1b11f851537341b606d8377e20e37d2b24113c5d37c6a9577185503409"
        },
        "downloads": -1,
        "filename": "pysmali-0.1.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "974ddd8e9b4e0fb285a71c306c7ce4d4",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 66416,
        "upload_time": "2023-03-22T13:15:04",
        "upload_time_iso_8601": "2023-03-22T13:15:04.441445Z",
        "url": "https://files.pythonhosted.org/packages/13/14/5fe081f3379fe11abc4b1b769d4beece90cd3f517f0642c33d9a499ac5ac/pysmali-0.1.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "34c87665a8fb7a9b40e7c650fe17c7bdde4a4ca4ee8e4ddcf219103c511e4913",
          "md5": "f11854d72d2a4737cef45f4ea628e615",
          "sha256": "4b355cf8a6619a19f125f561b1f5bdf1a0c262cfea6a67bd2483cafab485ee28"
        },
        "downloads": -1,
        "filename": "pysmali-0.1.1.tar.gz",
        "has_sig": false,
        "md5_digest": "f11854d72d2a4737cef45f4ea628e615",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 55086,
        "upload_time": "2023-03-22T13:15:05",
        "upload_time_iso_8601": "2023-03-22T13:15:05.826864Z",
        "url": "https://files.pythonhosted.org/packages/34/c8/7665a8fb7a9b40e7c650fe17c7bdde4a4ca4ee8e4ddcf219103c511e4913/pysmali-0.1.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "13145fe081f3379fe11abc4b1b769d4beece90cd3f517f0642c33d9a499ac5ac",
        "md5": "974ddd8e9b4e0fb285a71c306c7ce4d4",
        "sha256": "eb420e1b11f851537341b606d8377e20e37d2b24113c5d37c6a9577185503409"
      },
      "downloads": -1,
      "filename": "pysmali-0.1.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "974ddd8e9b4e0fb285a71c306c7ce4d4",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 66416,
      "upload_time": "2023-03-22T13:15:04",
      "upload_time_iso_8601": "2023-03-22T13:15:04.441445Z",
      "url": "https://files.pythonhosted.org/packages/13/14/5fe081f3379fe11abc4b1b769d4beece90cd3f517f0642c33d9a499ac5ac/pysmali-0.1.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "34c87665a8fb7a9b40e7c650fe17c7bdde4a4ca4ee8e4ddcf219103c511e4913",
        "md5": "f11854d72d2a4737cef45f4ea628e615",
        "sha256": "4b355cf8a6619a19f125f561b1f5bdf1a0c262cfea6a67bd2483cafab485ee28"
      },
      "downloads": -1,
      "filename": "pysmali-0.1.1.tar.gz",
      "has_sig": false,
      "md5_digest": "f11854d72d2a4737cef45f4ea628e615",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 55086,
      "upload_time": "2023-03-22T13:15:05",
      "upload_time_iso_8601": "2023-03-22T13:15:05.826864Z",
      "url": "https://files.pythonhosted.org/packages/34/c8/7665a8fb7a9b40e7c650fe17c7bdde4a4ca4ee8e4ddcf219103c511e4913/pysmali-0.1.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}