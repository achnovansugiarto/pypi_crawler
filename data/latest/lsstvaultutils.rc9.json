{
  "info": {
    "author": "",
    "author_email": "",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "License :: OSI Approved :: MIT License",
      "Natural Language :: English",
      "Operating System :: POSIX",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "# LSST Vault Utilities\n\nThis package is a set of Vault utilities useful for the LSST use case.\n\n## LSST Vault Hierarchy\n\nThese tools are intended to work with a specific taxonomic hierarchy,\ndetailed below.\n\n### Secrets\n\nThe primary use case for the LSST vault has been to act as a repository\nfor Kubernetes secrets.  Those are organized as follows:\n\n```\nsecret/k8s_operator/:instance:\n```\n\nThese secrets are typically created and injected at cluster creation\ntime; in the case of the LSP deployment, this is scripted.  We\nuse [Vault\nSecrets Operator](https://github.com/ricoberger/vault-secrets-operator)\nto automatically manage the translation of vault secrets into Kubernetes\nsecrets.\n\nThe secondary, more flexible, use case is to use the LSST vault as a\ngeneralized key-value store.\n\nWhen used in this mode, the LSST vault is organized with secrets under\n`secret` as follows:\n\n```\nsecret/:subsystem:/:team:/:category:/:instance:\n```\n\nEach of these vault paths, terminating in `:instance:` is referred to as\nan enclave in our nomenclature.  An enclave has both a read and a write\ntoken.\n\nThe way an enclave is used is that the user will populate the secret\ntree under that enclave with the write token, and then use the read\ntoken for automated data retrieval.  In the case of\n`vault-secrets-operator` it is the read key that should be used to\npopulate K8s secrets from the vault secrets.\n\nNote that secrets in an enclave are *not* accessible to the\nadministrative user that created the enclave, its token pair, and its\npolicies.  Those secrets are only accessed through either the enclave's\nread or its write token.\n\n## Usage\n\n### Tokens\n\nThe first thing to do, with an administrative token, is to create a\ndelegator token which will be the token used to run the Vault token\nprovisioning tools.  Use [delegator.hcl](delegator.hcl) as the input to\ncreate a policy for this.  Then create a token with that new delegator\npolicy attached.\n\nToken IDs and accessors are stored under\n`secret/delegated/:subsystem:/:team:/:category:/:instance:/:role:/:type:`\nwhere `role` is one of `read` or `write` and `type` is one of `id` or\n`accessor`.  These secrets are only accessible to an administrative user\n(such as the one that created the token pair in the first place, which\nshould be the token attached to the `delegator` policy created\nabove).\n\nThere are two tokens for each enclave, comprising the \"token pair\".\nThese are `read` and `write`.\n\nIt is our intention that a runtime system have access to the `read`\ntoken to be able to read (but not update) secrets, and that the\nadministrators of such a system have access to the `write` token to\ncreate, update, and remove secrets.\n\nWe previously provided a tool that allowed easy copying of Kubernetes\nsecrets to and from Vault.  That tool has now been removed, because\n`vault-secrets-operator` is a Kubernetes operator that provides\nautomated synchronization of secrets.\n\n### Policies\n\nPolicies are stored as\n`delegated/:subsystem:/:team:/:category:/:instance:/:role:` where role\nis one of `read` or `write`.  The administrative user that\ncreates or revokes the token pair is also responsible for creating and\ndestroying these policies.\n\n## Classes\n\nThe package name is `lsstvaultutils`.  Its functional classes are:\n\n1. `AdminTool` -- this highly LSST-specific class allows you to specify a\n   path under the Vault secret store, and it will generate two tokens\n   (read and write) for manipulating secrets under the path.  It\n   stores those under secret/delegated, so that an admin can find (and,\n   if need be, revoke) them later.  It also manages revoking those\n   tokens and removing them from the secret/delegated path.  Options\n   exist to, if manipulating tokens on a path that already exist, revoke\n   the old tokens and overwrite with new ones, or to remove the secret\n   data at the same time as the tokens are revoked.  There is also a\n   function to display the IDs and accessors of the token pair\n   associated with the path.\n\n2. `VaultConfig` -- this is another very LSST-specific class which is\n   useful for adding or removing secrets at a given path across multiple\n   vault enclaves.\n   \n3. `RecursiveDeleter` -- this adds a recursive deletion feature to Vault\n   for removing a whole secret tree at a time.\n   \nThere is also a TimeFormatter class that exists only to add milliseconds\nto the debugging logs.  There is a convenience function, `getLogger`,\nthat provides an interface to get a standardized logger for these tools and\nclasses.\n\n## Programs\n\nThe major functionality of these classes is also exposed as standalone\nprograms.\n\n1. `tokenadmin` -- Create or revoke token sets for a given Vault secret\n   path, or display the token IDs and accessors for that path.\n\n2. `multisecret` -- Create or remove a secret path across multiple Vault\n   enclaves.  This is useful when adding a new feature to a K8s-managed\n   Science Platform application, for instance.\n\n3. `vaultrmrf` -- Remove a Vault secret path and everything underneath\n   it.  As is implied by the name, this is a fairly dangerous operation.\n\n## Example Workflow\n\nWe will go through a workflow that exercises `tokenadmin` and\n`vaultrmrf` by creating a token pair, creating some secrets, deleting a\nsecret tree, and finally deleting the token pair.\n\n### Create a token pair.\n\nFirst we'll create a token pair for a hierarchy at `dm/test`.  (Note\nthat we have omitted a level of hierarchy to make the output slightly\nmore readable; `dm/square/test` would be more realistic.)  We ensure\nthat `VAULT_ADDR` and `VAULT_CAPATH` are set correctly, and that\n`VAULT_TOKEN` is set to an appropriate administrative token.  We're\ngoing to use `debug` to get an idea of what's going on during the\nprocess, and we will use the `display` option to print JSON representing\nthe tokens.\n\nI am using a `vaultutils` virtualenv with the `lsstvaultutils` package\ninstalled, and the `vault` CLI is on my path.\n\n    (vaultutils) adam@ixitxachitl:~$ tokenadmin create --debug --display dm/test\n    2019-03-04 14:45:52.625 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Debug logging started.\n    2019-03-04 14:45:52.625 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Getting Vault client for 'https://35.184.246.111'.\n    2019-03-04 14:45:52.939 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Vault Client is authenticated.\n    2019-03-04 14:45:52.939 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Creating policies and tokens for 'dm/test'.\n    2019-03-04 14:45:52.939 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Creating policies for 'dm/test'.\n    2019-03-04 14:45:52.939 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Checking for existence of policy 'delegated/dm/test'.\n    2019-03-04 14:45:53.109 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Creating policy for 'dm/test/read'.\n    2019-03-04 14:45:53.109 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Policy string:  path \"secret/data/dm/test/*\" {\n       capabilities = [\"read\"]\n     }\n     path \"secret/metadata/dm/test/*\" {\n       capabilities = [\"read\",\"list\"]\n     }\n\n    2019-03-04 14:45:53.109 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Policy path: delegated/dm/test/read\n    2019-03-04 14:45:53.535 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Creating policy for 'dm/test/write'.\n    2019-03-04 14:45:53.535 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Policy string:  path \"secret/data/dm/test\" {\n       capabilities = [\"read\", \"create\", \"update\", \"delete\"]\n     }\n     path \"secret/data/dm/test/*\" {\n       capabilities = [\"read\", \"create\", \"update\", \"delete\"]\n     }\n     path \"secret/metadata/dm/test/*\" {\n       capabilities = [\"list\", \"read\", \"update\",\"delete\"]\n     }\n     path \"secret/metadata/dm/test\" {\n       capabilities = [\"list\", \"read\", \"update\",\"delete\"]\n     }\n     path \"secret/delete/dm/test/*\" {\n       capabilities = [\"update\"]\n     }\n     path \"secret/undelete/dm/test/*\" {\n       capabilities = [\"update\"]\n     }\n     path \"secret/destroy/dm/test/*\" {\n       capabilities = [\"update\"]\n     }\n\n    2019-03-04 14:45:53.535 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Policy path: delegated/dm/test/write\n    2019-03-04 14:45:54.217 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Creating token for 'dm/test/read'.\n    2019-03-04 14:45:54.217 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin |  - policies '['delegated/dm/test/read']'.\n    2019-03-04 14:45:55.630 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Writing token store for 'dm/test/read'.\n    2019-03-04 14:45:55.630 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin |  'delegated/dm/test/read' -> 's.3nyTeqdWiINKIKNtuoIDtD9D'.\n    2019-03-04 14:45:56.840 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Creating token for 'dm/test/write'.\n    2019-03-04 14:45:56.840 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin |  - policies '['delegated/dm/test/write']'.\n    2019-03-04 14:45:58.171 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Writing token store for 'dm/test/write'.\n    2019-03-04 14:45:58.171 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin |  'delegated/dm/test/write' -> 's.4l4eDdLMyD436RsjRqlI11cD'.\n    2019-03-04 14:45:59.335 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Getting tokens for 'dm/test'.\n    {\n        \"dm/test\": {\n            \"read\": {\n                \"accessor\": \"1WRccTQEebkqx78t37EyVztK\",\n                \"id\": \"s.3nyTeqdWiINKIKNtuoIDtD9D\"\n            },\n            \"write\": {\n                \"accessor\": \"8LvOhKiGFJf9qYNIgOXrb8Ik\",\n                \"id\": \"s.4l4eDdLMyD436RsjRqlI11cD\"\n            }\n        }\n    }\n\n\n### Add some secrets\n\nFirst, set Vault to use the `write` token:\n\n```\nexport VAULT_TOKEN=\"s.4l4eDdLMyD436RsjRqlI11cD\"\n```\n\nI like JSON output, so I'm going to set:\n\n```\nexport VAULT_FORMAT=json\n```\n\nThen use the vault client to add some secrets:\n\n\n\t(vaultutils) adam@ixitxachitl:~$ vault kv put secret/dm/test/group1/foo value=bar\n    {\n      \"request_id\": \"0a814bd2-e95d-cf1c-9018-c00173668e3d\",\n      \"lease_id\": \"\",\n      \"lease_duration\": 0,\n      \"renewable\": false,\n      \"data\": {\n        \"created_time\": \"2019-03-04T21:51:07.616034224Z\",\n        \"deletion_time\": \"\",\n        \"destroyed\": false,\n        \"version\": 1\n      },\n      \"warnings\": null\n    }\n    (vaultutils) adam@ixitxachitl:~$ vault kv put secret/dm/test/group1/baz value=quux\n    {\n      \"request_id\": \"38c65e0d-735d-db9a-c2d6-840bdd4dff65\",\n      \"lease_id\": \"\",\n      \"lease_duration\": 0,\n      \"renewable\": false,\n      \"data\": {\n        \"created_time\": \"2019-03-04T21:51:34.991913644Z\",\n        \"deletion_time\": \"\",\n        \"destroyed\": false,\n        \"version\": 1\n      },\n      \"warnings\": null\n    }\n    (vaultutils) adam@ixitxachitl:~$ vault kv put secret/dm/test/group2/king value=fink\n    {\n      \"request_id\": \"12753857-25f2-a27a-3d65-badc18805d07\",\n      \"lease_id\": \"\",\n      \"lease_duration\": 0,\n      \"renewable\": false,\n      \"data\": {\n        \"created_time\": \"2019-03-04T21:51:45.645224365Z\",\n        \"deletion_time\": \"\",\n        \"destroyed\": false,\n        \"version\": 1\n      },\n      \"warnings\": null\n    }\n\nRead one back:\n\n    (vaultutils) adam@ixitxachitl:~$ vault kv get secret/dm/test/group1/baz\n    {\n      \"request_id\": \"03ef8ba1-3eb2-2962-d4c6-ebaf595e3387\",\n      \"lease_id\": \"\",\n      \"lease_duration\": 0,\n      \"renewable\": false,\n      \"data\": {\n        \"data\": {\n          \"value\": \"quux\"\n        },\n        \"metadata\": {\n          \"created_time\": \"2019-03-04T21:51:34.991913644Z\",\n          \"deletion_time\": \"\",\n          \"destroyed\": false,\n          \"version\": 1\n        }\n      },\n      \"warnings\": null\n    }\n\n### Recursively remove a secret tree\n\nLet's say we didn't really want those secrets after all.  We can easily\nremove the tree with the `vaultrmrf` command and the write token.\n\n    (vaultutils) adam@ixitxachitl:~$ vaultrmrf --debug dm/test/copy1\n    2019-03-04 15:05:47.920 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Debug logging started.\n    2019-03-04 15:05:47.920 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Acquiring Vault client for 'https://35.184.246.111'.\n    2019-03-04 15:05:48.164 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/copy1' recursively.\n    2019-03-04 15:05:48.269 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'dm/test/copy1'\n    2019-03-04 15:05:48.269 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': 'f6774de1-cb8c-76ed-8425-7963b5d95d76', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['baz', 'foo']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:05:48.269 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/copy1/baz' recursively.\n    2019-03-04 15:05:48.369 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/copy1/baz' as leaf node.\n    2019-03-04 15:05:48.369 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.4l4eDdLMyD436RsjRqlI11cD'.\n    2019-03-04 15:05:48.703 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/copy1/foo' recursively.\n    2019-03-04 15:05:48.809 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/copy1/foo' as leaf node.\n    2019-03-04 15:05:48.809 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.4l4eDdLMyD436RsjRqlI11cD'.\n    2019-03-04 15:05:49.123 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/copy1' as leaf node.\n    2019-03-04 15:05:49.123 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.4l4eDdLMyD436RsjRqlI11cD'.\n\n\nTrying to read the secret now will show it's gone:\n\n    (vaultutils) adam@ixitxachitl:~$ vault kv get secret/dm/test/copy1/foo\n    No value found at secret/data/dm/test/copy1/foo\n\n### Revoke Token Pair and remove data\n\nNow we will clean up:\n\nWe go back to an administrative token to revoke our token pair (by\nsetting `VAULT_TOKEN` to an appropriate value), and while we're at it we\nwill clean up the data we inserted into vault as well.\n\n    (vaultutils) adam@ixitxachitl:~$ tokenadmin revoke --delete-data --debug dm/test2019-03-04 15:08:12.888 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Debug logging started.\n    2019-03-04 15:08:12.888 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Getting Vault client for 'https://35.184.246.111'.\n    2019-03-04 15:08:13.147 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Vault Client is authenticated.\n    2019-03-04 15:08:13.147 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Revoking tokens and removing policies for 'dm/test'.\n    2019-03-04 15:08:13.147 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Getting write token for 'dm/test'.\n    2019-03-04 15:08:13.147 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Reading value from 'delegated/dm/test/write/id'.\n    2019-03-04 15:08:13.208 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Got data: {'request_id': 'e5084c92-f404-7338-f776-47f1d8ee5980', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'data': {'value': 's.4l4eDdLMyD436RsjRqlI11cD'}, 'metadata': {'created_time': '2019-03-04T21:45:58.325211493Z', 'deletion_time': '', 'destroyed': False, 'version': 1}}, 'wrap_info': None, 'warnings': None, 'auth': None}\n    2019-03-04 15:08:13.208 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Debug logging started.\n    2019-03-04 15:08:13.208 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Acquiring Vault client for 'https://35.184.246.111'.\n    2019-03-04 15:08:13.498 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Deleting data under 'dm/test'.\n    2019-03-04 15:08:13.498 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test' recursively.\n    2019-03-04 15:08:13.638 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'dm/test'\n    2019-03-04 15:08:13.638 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': '661160b2-6916-62f5-ae29-8da0d576d841', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['group1/', 'group2/']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:08:13.638 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group1' recursively.\n    2019-03-04 15:08:13.907 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'dm/test/group1'\n    2019-03-04 15:08:13.907 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': '02e65063-64e2-8ca9-1532-f3aaf1eaeeb5', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['baz', 'foo']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:08:13.908 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group1/baz' recursively.\n    2019-03-04 15:08:14.262 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group1/baz' as leaf node.\n    2019-03-04 15:08:14.262 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.4l4eDdLMyD436RsjRqlI11cD'.\n    2019-03-04 15:08:14.729 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group1/foo' recursively.\n    2019-03-04 15:08:14.906 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group1/foo' as leaf node.\n    2019-03-04 15:08:14.906 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.4l4eDdLMyD436RsjRqlI11cD'.\n    2019-03-04 15:08:15.409 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group1' as leaf node.\n    2019-03-04 15:08:15.409 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.4l4eDdLMyD436RsjRqlI11cD'.\n    2019-03-04 15:08:15.560 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group2' recursively.\n    2019-03-04 15:08:15.716 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'dm/test/group2'\n    2019-03-04 15:08:15.716 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': '9a9f23d3-f5cf-10c7-e18c-2f54a848e3e7', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['king']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:08:15.716 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group2/king' recursively.\n    2019-03-04 15:08:15.866 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group2/king' as leaf node.\n    2019-03-04 15:08:15.866 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.4l4eDdLMyD436RsjRqlI11cD'.\n    2019-03-04 15:08:16.480 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test/group2' as leaf node.\n    2019-03-04 15:08:16.480 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.4l4eDdLMyD436RsjRqlI11cD'.\n    2019-03-04 15:08:16.623 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'dm/test' as leaf node.\n    2019-03-04 15:08:16.623 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.4l4eDdLMyD436RsjRqlI11cD'.\n    2019-03-04 15:08:16.765 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Requesting ID for 'read' token for 'dm/test'.\n    2019-03-04 15:08:16.826 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Tokendata: {'request_id': '845ca454-5b0e-9518-9029-bf221c771e4f', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'data': {'value': 's.3nyTeqdWiINKIKNtuoIDtD9D'}, 'metadata': {'created_time': '2019-03-04T21:45:55.802574394Z', 'deletion_time': '', 'destroyed': False, 'version': 1}}, 'wrap_info': None, 'warnings': None, 'auth': None}\n    2019-03-04 15:08:16.827 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Deleting 'read' token for 'dm/test'.\n    2019-03-04 15:08:18.393 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Requesting ID for 'write' token for 'dm/test'.\n    2019-03-04 15:08:18.454 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Tokendata: {'request_id': '5f3aae99-59f4-618b-cf1c-cb9bc3b39478', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'data': {'value': 's.4l4eDdLMyD436RsjRqlI11cD'}, 'metadata': {'created_time': '2019-03-04T21:45:58.325211493Z', 'deletion_time': '', 'destroyed': False, 'version': 1}}, 'wrap_info': None, 'warnings': None, 'auth': None}\n    2019-03-04 15:08:18.455 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Deleting 'write' token for 'dm/test'.\n    2019-03-04 15:08:19.845 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Deleting token store for 'dm/test'.\n    2019-03-04 15:08:19.846 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Debug logging started.\n    2019-03-04 15:08:19.846 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Debug logging started.\n    2019-03-04 15:08:19.846 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Acquiring Vault client for 'https://35.184.246.111'.\n    2019-03-04 15:08:19.846 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Acquiring Vault client for 'https://35.184.246.111'.\n    2019-03-04 15:08:20.085 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Recursive delete of: 'delegated/dm/test'\n    2019-03-04 15:08:20.085 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test' recursively.\n    2019-03-04 15:08:20.085 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test' recursively.\n    2019-03-04 15:08:20.199 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'delegated/dm/test'\n    2019-03-04 15:08:20.199 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'delegated/dm/test'\n    2019-03-04 15:08:20.199 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': '5c1f33cf-8878-a5c8-a884-1f5cda607fa6', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['read/', 'write/']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:08:20.199 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': '5c1f33cf-8878-a5c8-a884-1f5cda607fa6', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['read/', 'write/']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:08:20.199 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read' recursively.\n    2019-03-04 15:08:20.199 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read' recursively.\n    2019-03-04 15:08:20.317 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'delegated/dm/test/read'\n    2019-03-04 15:08:20.317 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'delegated/dm/test/read'\n    2019-03-04 15:08:20.317 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': '4d18f739-1ee7-c413-6b9a-1766f6f300de', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['accessor', 'id']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:08:20.317 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': '4d18f739-1ee7-c413-6b9a-1766f6f300de', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['accessor', 'id']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:08:20.317 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read/accessor' recursively.\n    2019-03-04 15:08:20.317 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read/accessor' recursively.\n    2019-03-04 15:08:20.422 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read/accessor' as leaf node.\n    2019-03-04 15:08:20.422 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read/accessor' as leaf node.\n    2019-03-04 15:08:20.422 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:20.422 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:20.856 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read/id' recursively.\n    2019-03-04 15:08:20.856 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read/id' recursively.\n    2019-03-04 15:08:20.971 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read/id' as leaf node.\n    2019-03-04 15:08:20.971 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read/id' as leaf node.\n    2019-03-04 15:08:20.972 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:20.972 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:21.406 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read' as leaf node.\n    2019-03-04 15:08:21.406 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/read' as leaf node.\n    2019-03-04 15:08:21.406 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:21.406 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:21.492 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write' recursively.\n    2019-03-04 15:08:21.492 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write' recursively.\n    2019-03-04 15:08:21.603 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'delegated/dm/test/write'\n    2019-03-04 15:08:21.603 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing tree rooted at 'delegated/dm/test/write'\n    2019-03-04 15:08:21.603 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': '8446aa1b-3d86-3b0d-eb55-01a9fe0e1cad', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['accessor', 'id']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:08:21.603 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | resp = '{'request_id': '8446aa1b-3d86-3b0d-eb55-01a9fe0e1cad', 'lease_id': '', 'renewable': False, 'lease_duration': 0, 'data': {'keys': ['accessor', 'id']}, 'wrap_info': None, 'warnings': None, 'auth': None}'\n    2019-03-04 15:08:21.603 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write/accessor' recursively.\n    2019-03-04 15:08:21.603 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write/accessor' recursively.\n    2019-03-04 15:08:21.707 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write/accessor' as leaf node.\n    2019-03-04 15:08:21.707 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write/accessor' as leaf node.\n    2019-03-04 15:08:21.708 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:21.708 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:22.120 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write/id' recursively.\n    2019-03-04 15:08:22.120 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write/id' recursively.\n    2019-03-04 15:08:22.224 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write/id' as leaf node.\n    2019-03-04 15:08:22.224 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write/id' as leaf node.\n    2019-03-04 15:08:22.224 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:22.224 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:22.673 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write' as leaf node.\n    2019-03-04 15:08:22.673 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test/write' as leaf node.\n    2019-03-04 15:08:22.673 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:22.673 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:22.761 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test' as leaf node.\n    2019-03-04 15:08:22.761 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Removing 'delegated/dm/test' as leaf node.\n    2019-03-04 15:08:22.761 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:22.761 MST(-0700) [DEBUG] lsstvaultutils.recursivedeleter | Using token 's.86o9UFmo4bbd4yxs1pWHS2Z1'.\n    2019-03-04 15:08:22.856 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Deleting policy for 'delegated/dm/test/read'.\n    2019-03-04 15:08:23.039 MST(-0700) [DEBUG] lsstvaultutils.tokenadmin | Deleting policy for 'delegated/dm/test/write'.\n\nAnd now the system is back in the state in which we started.\n\n### Verifying token deletion\n\nWe can try an operation to see that the tokens have been revoked.  Set\nup the (now-revoked) read token: `export\nVAULT_TOKEN=\"s.3nyTeqdWiINKIKNtuoIDtD9D\"`.  Then try the same read we\npreviously ran again:\n\n    (vaultutils) adam@ixitxachitl:~$ vault kv get secret/dm/test/group1/baz\n    Error making API request.\n\n    URL: GET https://35.184.246.111/v1/sys/internal/ui/mounts/secret/dm/test/group1/baz\n    Code: 403. Errors:\n\n    * permission denied\n\n### Using multisecret\n\nIn this workflow, we will use `multisecret` to add a secret to a\nKubernetes `vault-secrets-operator` path.  We will add it to two enclaves,\n`data-dev.lsst.cloud` and `nublado.lsst.codes`, verify that the secrets\nwere created, and then remove them, also with `multisecret`.\n\nFirst we ensure we have `lsstvaultutils` installed into our active\nenvironment (that's what the `(lvu)` at the front of the prompt tells\nus) and then we run `multisecret --help`:\n\n\tUsage: multisecret [OPTIONS] COMMAND [ARGS]...\n\n\t  A tool to manipulate secrets in the same relative location across vault\n\t  enclaves.\n\n\t  --vault-address is a string representing a URL for a Vault implementation,\n\t  e.g. \"vault.lsst.codes\".  If unspecified, the value of the environment\n\t  variable VAULT_ADDR will be used.  It that isn't specified either, the\n\t  default of \"http://localhost:8200\" will be used.\n\n\t  --secret-name is a string representing the name of the secret relative to\n\t  the top of the enclave, e.g. \"pull-secret\".\n\n\t  --secret-file is only used with the \"add\" command.  It is a path to a JSON\n\t  document that specifies the contents of the secret you want to inject, as\n\t  a single object with key-value pairs, each pair being the name of the item\n\t  within the secret and its value.\n\n\t  --vault-file is a path to a file that contains a JSON document that is a\n\t  list of enclaves (each one being a dict whose only key is the name of the\n\t  top of the vault path for the enclave, and whose values are pair of dicts,\n\t  \"read\" and \"write\", each a dict containing two keys, \"accessor\" and \"id\",\n\t  whose values are the vault accessor and the vault token for its respective\n\t  context within the enclave).  Not by coincidence, this is the form in\n\t  which the vault document exists in SQuaRE's 1password.\n\n\t  --omit may be specified multiple times; each time it is specified, it is\n\t  the name of the enclave to skip when updating vaults.  This is helpful,\n\t  for example, to *not* put the SQuaRE docker pull password into third-party\n\t  implementations that rely on vault.lsst.codes.\n\n\t  --dry-run is a boolean flag; if it is set, no change to the vault will\n\t  actually be made, although the tool will report on the changes it would\n\t  have done.\n\n\tOptions:\n\t  -a, --vault-address TEXT\n\t  -n, --secret-name TEXT    [required]\n\t  -s, --secret-file TEXT\n\t  -v, --vault-file TEXT     [required]\n\t  -o, --omit TEXT\n\t  -x, --dry-run\n\t  --help                    Show this message and exit.\n\n\tCommands:\n\t  add     Add a secret across enclaves.\n\t  remove  Remove a secret from multiple enclaves.\n\nLet's set up a working directory to hold our configuration and configure\nvault:\n\n    (lvu) adam@air-wired:~/git/lsstvaultutils$ mkdir -p ~/Documents/src/vault-doc-test\n    (lvu) adam@air-wired:~/git/lsstvaultutils$ cd ~/Documents/src/vault-doc-test\n    (lvu) adam@air-wired:~/Documents/src/vault-doc-test$ export VAULT_ADDR=\"https://vault.lsst.codes\"\n    (lvu) adam@air-wired:~/Documents/src/vault-doc-test$ export VAULT_FORMAT=\"json\"\n    (lvu) adam@air-wired:~/Documents/src/vault-doc-test$\n\nArmed with this knowledge, we prepare a multi-enclave file.  We will\ncall it `vault-nb-idf` and its contents will look like the following,\nexcept with actual keys.\n\n\t[\n\t  {\n\t\t\"k8s_operator/nublado.lsst.codes\": {\n\t\t  \"read\": {\n\t\t\t\"accessor\": \"[REDACTED]\",\n\t\t\t\"id\": \"[REDACTED]\"\n\t\t  },\n\t\t  \"write\": {\n\t\t\t\"accessor\": \"[REDACTED]\",\n\t\t\t\"id\": \"[REDACTED]\"\n\t\t  }\n\t\t}\n\t  },\n\t  {\n\t\t\"k8s_operator/data-dev.lsst.cloud\": {\n\t\t  \"read\": {\n\t\t\t\"accessor\": \"[REDACTED]\",\n\t\t\t\"id\": \"[REDACTED]\"\n\t\t  },\n\t\t  \"write\": {\n\t\t\t\"accessor\": \"[REDACTED]\",\n\t\t\t\"id\": \"[REDACTED]\"\n\t\t  }\n\t\t}\n\t  }\n\t]\n\nNext we'll create the payload.  `testcase.json` contains simply:\n\n    { \"foo\": \"bar\" }\n\nLet's verify that our new secret (which we will call simply `test`) does\nnot exist in either enclave yet.  I have put the read tokens into other\nshell variables that are, for obvious reasons, not in this document:\n\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ vault kv list secret/k8s_operator/data-dev.lsst.cloud\n\t[\n\t  \"cert-manager\",\n\t  \"gafaelfawr\",\n\t  \"log\",\n\t  \"mobu\",\n\t  \"nublado\",\n\t  \"nublado2\",\n\t  \"postgres\",\n\t  \"pull-secret\",\n\t  \"tap\"\n\t]\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ export VAULT_TOKEN=${NLC_READ_TOKEN}\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ vault kv list secret/k8s_operator/nublado.lsst.codes\n\t[\n\t  \"cert-manager\",\n\t  \"gafaelfawr\",\n\t  \"jwt_authorizer\",\n\t  \"mobu\",\n\t  \"nublado\",\n\t  \"postgres\",\n\t  \"tap\"\n\t]\n\nLet's run it with `--dry-run` first to make sure it looks correct:\n\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ multisecret --vault-address=https://vault.lsst.codes --secret-name test --secret-file testcase.json --vault-file vault-nb-idf.json --dry-run add\n\tDry run: add secret at https://vault.lsst.codes/k8s_operator/nublado.lsst.codes/test\n\tDry run: add secret at https://vault.lsst.codes/k8s_operator/data-dev.lsst.cloud/test\n\nSeems right.  Repeat without `--dry-run`.\n\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ multisecret --vault-address=https://vault.lsst.codes --secret-name test --secret-file testcase.json --vault-file vault-nb-idf.json add\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$\n\nVerify that the secrets were made:\n\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ export VAULT_TOKEN=${DLC_READ_TOKEN}\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ vault kv get secret/k8s_operator/data-dev.lsst.cloud/test\n\t{\n\t  \"request_id\": \"bb53344a-31e9-81d3-32c2-5f2f895d7554\",\n\t  \"lease_id\": \"\",\n\t  \"lease_duration\": 0,\n\t  \"renewable\": false,\n\t  \"data\": {\n\t\t\"data\": {\n\t\t  \"foo\": \"bar\"\n\t\t},\n\t\t\"metadata\": {\n\t\t  \"created_time\": \"2020-12-10T19:18:58.345274962Z\",\n\t\t  \"deletion_time\": \"\",\n\t\t  \"destroyed\": false,\n\t\t  \"version\": 1\n\t\t}\n\t  },\n\t  \"warnings\": null\n\t}\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ export VAULT_TOKEN=${NLC_READ_TOKEN}\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ vault kv get secret/k8s_operator/nublado.lsst.codes/test\n\t{\n\t  \"request_id\": \"5f69665d-e8ca-f9a3-aa69-5fe12c1784c0\",\n\t  \"lease_id\": \"\",\n\t  \"lease_duration\": 0,\n\t  \"renewable\": false,\n\t  \"data\": {\n\t\t\"data\": {\n\t\t  \"foo\": \"bar\"\n\t\t},\n\t\t\"metadata\": {\n\t\t  \"created_time\": \"2020-12-10T19:18:57.631480686Z\",\n\t\t  \"deletion_time\": \"\",\n\t\t  \"destroyed\": false,\n\t\t  \"version\": 1\n\t\t}\n\t  },\n\t  \"warnings\": null\n\t}\n\nAnd now destroy them:\n\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ multisecret --vault-address=https://vault.lsst.codes --secret-name test --vault-file vault-nb-idf.json remove\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$\n\nAnd verify they no longer exist:\n\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ export VAULT_TOKEN=${DLC_READ_TOKEN}\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ vault kv get secret/k8s_operator/data-dev.lsst.cloud/test\n\tNo value found at secret/data/k8s_operator/data-dev.lsst.cloud/test\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ vault kv list secret/k8s_operator/data-dev.lsst.cloud\n\t[\n\t  \"cert-manager\",\n\t  \"gafaelfawr\",\n\t  \"log\",\n\t  \"mobu\",\n\t  \"nublado\",\n\t  \"nublado2\",\n\t  \"postgres\",\n\t  \"pull-secret\",\n\t  \"tap\"\n\t]\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ export VAULT_TOKEN=${NLC_READ_TOKEN}\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ vault kv get secret/k8s_operator/nublado.lsst.codes/test\n\tNo value found at secret/data/k8s_operator/nublado.lsst.codes/test\n\t(lvu) adam@air-wired:~/Documents/src/vault-doc-test$ vault kv list secret/k8s_operator/nublado.lsst.codes\n\t[\n\t  \"cert-manager\",\n\t  \"gafaelfawr\",\n\t  \"jwt_authorizer\",\n\t  \"mobu\",\n\t  \"nublado\",\n\t  \"postgres\",\n\t  \"tap\"\n\t]\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "",
    "keywords": "rubin,lsst",
    "license": "The MIT License (MIT)  Copyright (c) 2019 AURA/LSST  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. ",
    "maintainer": "",
    "maintainer_email": "",
    "name": "lsstvaultutils",
    "package_url": "https://pypi.org/project/lsstvaultutils/",
    "platform": null,
    "project_url": "https://pypi.org/project/lsstvaultutils/",
    "project_urls": {
      "Source": "https://github.com/lsst-sqre/lsstvaultutils"
    },
    "release_url": "https://pypi.org/project/lsstvaultutils/0.3.0/",
    "requires_dist": [
      "click",
      "hvac",
      "pytest ; extra == 'dev'",
      "mypy ; extra == 'dev'",
      "coverage ; extra == 'dev'"
    ],
    "requires_python": ">=3.8",
    "summary": "Tools for manipulating the Rubin Observatory Vault installation",
    "version": "0.3.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16717779,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c9417aa3d51ea71c0de57dca73ea7b8739515bc801cb473118e23c3df4fd7847",
          "md5": "86d9f199998f5b9c172d9f739072c591",
          "sha256": "d74b2058f8594812383e1e9203759008019f70257c70002bb3a8fc67b2e02ed4"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.1-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "86d9f199998f5b9c172d9f739072c591",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 10250,
        "upload_time": "2019-02-19T23:34:03",
        "upload_time_iso_8601": "2019-02-19T23:34:03.733303Z",
        "url": "https://files.pythonhosted.org/packages/c9/41/7aa3d51ea71c0de57dca73ea7b8739515bc801cb473118e23c3df4fd7847/lsstvaultutils-0.0.1-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c8cb91d185f0a5afb48cb52ac9168ff85814fdd041bb065ed1ca51c7c8d3c8d9",
          "md5": "8b15bc4154bbbe55b16cb7803dd4d03b",
          "sha256": "1cf43a2439c8f9e905bad879db842a0dd61580f27539065bc90395988a356a18"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "8b15bc4154bbbe55b16cb7803dd4d03b",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 6880,
        "upload_time": "2019-02-19T23:34:06",
        "upload_time_iso_8601": "2019-02-19T23:34:06.089653Z",
        "url": "https://files.pythonhosted.org/packages/c8/cb/91d185f0a5afb48cb52ac9168ff85814fdd041bb065ed1ca51c7c8d3c8d9/lsstvaultutils-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "cb7d870aff3d3af503b8c21bf317c2c3a7802d7d97c0796da1c50416e2173cda",
          "md5": "7c2faf7f9c4ee7fa71b28edfd9179434",
          "sha256": "bb6b80e2b56fcc3a814b8dfe964ddaf33c8072db4038a1464c0402c77c7e0f9f"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.2-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "7c2faf7f9c4ee7fa71b28edfd9179434",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 10987,
        "upload_time": "2019-02-20T23:52:19",
        "upload_time_iso_8601": "2019-02-20T23:52:19.213269Z",
        "url": "https://files.pythonhosted.org/packages/cb/7d/870aff3d3af503b8c21bf317c2c3a7802d7d97c0796da1c50416e2173cda/lsstvaultutils-0.0.2-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "3ece90875298645c64aac21ed22019f7809960b3e2c3232acc732cc1ef53a625",
          "md5": "677603055c46c029778f86e9b31267aa",
          "sha256": "89224209545558f79b68130cd8d68a6e0f4f7f69f831d2e41ab0e0da4bdd8fc5"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "677603055c46c029778f86e9b31267aa",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 8481,
        "upload_time": "2019-02-20T23:52:20",
        "upload_time_iso_8601": "2019-02-20T23:52:20.578495Z",
        "url": "https://files.pythonhosted.org/packages/3e/ce/90875298645c64aac21ed22019f7809960b3e2c3232acc732cc1ef53a625/lsstvaultutils-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "dc7d5fcb7ff19ad75ec4ffc4e62c2d8ad3ec2d623415b54ffe942160d61fda32",
          "md5": "f56d7ebb0693ca012406b33753192035",
          "sha256": "b2c22f62e8338bf0b430e1d5265075c09b9f7b81fd11f73f03dc1aef57e5826b"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.3-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "f56d7ebb0693ca012406b33753192035",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 11201,
        "upload_time": "2019-02-21T01:19:09",
        "upload_time_iso_8601": "2019-02-21T01:19:09.038640Z",
        "url": "https://files.pythonhosted.org/packages/dc/7d/5fcb7ff19ad75ec4ffc4e62c2d8ad3ec2d623415b54ffe942160d61fda32/lsstvaultutils-0.0.3-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "df06fa20ac7381938123c7a1d9e8e55e9bf6ea922dace8aabdf98c887dc37a2a",
          "md5": "adf6280076f025db2806a686c06c616b",
          "sha256": "e978a6d74fa0176a66961e97ed4ab4a00925b91d415d943cfdf79f1348a0cd54"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "adf6280076f025db2806a686c06c616b",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 8645,
        "upload_time": "2019-02-21T01:19:10",
        "upload_time_iso_8601": "2019-02-21T01:19:10.495381Z",
        "url": "https://files.pythonhosted.org/packages/df/06/fa20ac7381938123c7a1d9e8e55e9bf6ea922dace8aabdf98c887dc37a2a/lsstvaultutils-0.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "16f53453b655aa4bd51a24345777c681990d61baba2f85e46ca56570b1bb7cb2",
          "md5": "70ea426de4a7e2409afcbfcdc243a52b",
          "sha256": "a6590d9b009acc548450bfe01155c7125571ca1a3047c29744bfad9387ba40a0"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.4-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "70ea426de4a7e2409afcbfcdc243a52b",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 16214,
        "upload_time": "2019-03-04T22:18:22",
        "upload_time_iso_8601": "2019-03-04T22:18:22.434799Z",
        "url": "https://files.pythonhosted.org/packages/16/f5/3453b655aa4bd51a24345777c681990d61baba2f85e46ca56570b1bb7cb2/lsstvaultutils-0.0.4-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a85f1826a3e9cabc2d79a04e9ebc62cb4bb50c7b26c74ff537484b4a78e854a5",
          "md5": "176c54d63d52000eb5ba7da5351954e5",
          "sha256": "f33eff66b1296b64d102aa82e8b1ff115c279b71e7a83db54a6e599aeadd21af"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "176c54d63d52000eb5ba7da5351954e5",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 24185,
        "upload_time": "2019-03-04T22:18:23",
        "upload_time_iso_8601": "2019-03-04T22:18:23.876849Z",
        "url": "https://files.pythonhosted.org/packages/a8/5f/1826a3e9cabc2d79a04e9ebc62cb4bb50c7b26c74ff537484b4a78e854a5/lsstvaultutils-0.0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5528b542b51274eed179256350c12f6686e005e92e2f47c54b17db114d7977e7",
          "md5": "185839470c295b29e2e6f60e371eff7d",
          "sha256": "09fa8740268ec23676ba9b35ad77e6694754728518be490159d15dc1a26baf07"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.5-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "185839470c295b29e2e6f60e371eff7d",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 16199,
        "upload_time": "2019-03-20T20:53:47",
        "upload_time_iso_8601": "2019-03-20T20:53:47.906486Z",
        "url": "https://files.pythonhosted.org/packages/55/28/b542b51274eed179256350c12f6686e005e92e2f47c54b17db114d7977e7/lsstvaultutils-0.0.5-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "68a5635f8d1950a84d09b830c28e65d071035dd7bc9be2dbee502e2acdfb2994",
          "md5": "9592f47191cb5c48124a1a426af99019",
          "sha256": "c3bdadebf7cef232ce5470efe37e72316b6e56684b9d28199ebe8eae6a4f432a"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.5.tar.gz",
        "has_sig": false,
        "md5_digest": "9592f47191cb5c48124a1a426af99019",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 24142,
        "upload_time": "2019-03-20T20:53:49",
        "upload_time_iso_8601": "2019-03-20T20:53:49.122940Z",
        "url": "https://files.pythonhosted.org/packages/68/a5/635f8d1950a84d09b830c28e65d071035dd7bc9be2dbee502e2acdfb2994/lsstvaultutils-0.0.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.6": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6502b8f29fda3e855ff690c820b13697dc22e3763bf72b8c97440501c9ca6833",
          "md5": "18761de06b01c0694a961f52a4c15b9b",
          "sha256": "1747a64f2e31a12de3fe1da01b6f1236e59d509f087dbad53ddec257f61b0ca3"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.6-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "18761de06b01c0694a961f52a4c15b9b",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 16338,
        "upload_time": "2019-03-26T23:51:14",
        "upload_time_iso_8601": "2019-03-26T23:51:14.567202Z",
        "url": "https://files.pythonhosted.org/packages/65/02/b8f29fda3e855ff690c820b13697dc22e3763bf72b8c97440501c9ca6833/lsstvaultutils-0.0.6-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a00e055ecff07a5a058b6a052e4fe4fdbc9c7bfaac654016abcd09ba6f434830",
          "md5": "26eb6882335ac46479381af4ca087f5d",
          "sha256": "64952c07f031e145921ffafd548e2339db4dd5d335334099fb8f31bc34b89f9b"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.0.6.tar.gz",
        "has_sig": false,
        "md5_digest": "26eb6882335ac46479381af4ca087f5d",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 24602,
        "upload_time": "2019-03-26T23:51:16",
        "upload_time_iso_8601": "2019-03-26T23:51:16.131228Z",
        "url": "https://files.pythonhosted.org/packages/a0/0e/055ecff07a5a058b6a052e4fe4fdbc9c7bfaac654016abcd09ba6f434830/lsstvaultutils-0.0.6.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "f4064ab0382fcc072b506f70dfc3bed56def9d7ccd40637fc7714595100467c8",
          "md5": "e1c2d4ada7ab0ab94f870b09241d3b52",
          "sha256": "bb5ae4be84f092189c39a223a0ae5296bc2c672ad85578d03e7010d8a3f49175"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.1.0-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "e1c2d4ada7ab0ab94f870b09241d3b52",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 19604,
        "upload_time": "2020-12-10T18:21:50",
        "upload_time_iso_8601": "2020-12-10T18:21:50.975980Z",
        "url": "https://files.pythonhosted.org/packages/f4/06/4ab0382fcc072b506f70dfc3bed56def9d7ccd40637fc7714595100467c8/lsstvaultutils-0.1.0-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "e702550e2045f3c68c41c9894a559cdba537bc4c2a5ff3d45c0d5e2f137853e1",
          "md5": "7690fdfa1b3b55e549f096a07901c703",
          "sha256": "efdf6c56c312400887ac938fcd6c6eed41aec35b76e6b0cf6d2e83d2f99a0f11"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "7690fdfa1b3b55e549f096a07901c703",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 28176,
        "upload_time": "2020-12-10T18:21:52",
        "upload_time_iso_8601": "2020-12-10T18:21:52.075544Z",
        "url": "https://files.pythonhosted.org/packages/e7/02/550e2045f3c68c41c9894a559cdba537bc4c2a5ff3d45c0d5e2f137853e1/lsstvaultutils-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "30549822ee50d2e1a7292a2db20bf00b5cf1d80951187a8978ebee3a5b480121",
          "md5": "e184cffc0cf88a14a9f54f1d6a6ecfb3",
          "sha256": "b34e9e18373ccc8e25f90d4069ee052d350ec416f30fa2150ec80540e89db02b"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.2.0-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "e184cffc0cf88a14a9f54f1d6a6ecfb3",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": ">=3.9",
        "size": 12156,
        "upload_time": "2022-08-05T00:10:17",
        "upload_time_iso_8601": "2022-08-05T00:10:17.185364Z",
        "url": "https://files.pythonhosted.org/packages/30/54/9822ee50d2e1a7292a2db20bf00b5cf1d80951187a8978ebee3a5b480121/lsstvaultutils-0.2.0-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6758bd493a1d76064132aaa2e684a43afb06ec09fbfd2c7b8ca9ed7f6be263d4",
          "md5": "a57919e92531de8f3193e171ef6ac6e4",
          "sha256": "0dc8df499097bab066f89dc3643686c89cf02dbb669d3ff577d73b2fac0c7455"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.2.0.tar.gz",
        "has_sig": false,
        "md5_digest": "a57919e92531de8f3193e171ef6ac6e4",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.9",
        "size": 27130,
        "upload_time": "2022-08-05T00:10:19",
        "upload_time_iso_8601": "2022-08-05T00:10:19.233723Z",
        "url": "https://files.pythonhosted.org/packages/67/58/bd493a1d76064132aaa2e684a43afb06ec09fbfd2c7b8ca9ed7f6be263d4/lsstvaultutils-0.2.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "bd79510eb9b7c3c2162b43dae8b31c13d8b6d3ae27211feb6743b434e531840c",
          "md5": "cec59de625b09bc8cc40aaeb2d38cdfe",
          "sha256": "20db531f46420abce1b0ae90df1828021ad210e863fc3bfe7a1536bfaed04e82"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.3.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "cec59de625b09bc8cc40aaeb2d38cdfe",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 19616,
        "upload_time": "2023-02-06T22:15:48",
        "upload_time_iso_8601": "2023-02-06T22:15:48.631904Z",
        "url": "https://files.pythonhosted.org/packages/bd/79/510eb9b7c3c2162b43dae8b31c13d8b6d3ae27211feb6743b434e531840c/lsstvaultutils-0.3.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b3257ebd4c3c397d83bcf0099fe7b499192b672a9e3b0e06f3dcf9cc557b7390",
          "md5": "9d0742c214f995960eb3e1e438c7aa58",
          "sha256": "bd799dbb74b7a975b6645eae3227031965650d5335faddaa9b4349cec8e3f046"
        },
        "downloads": -1,
        "filename": "lsstvaultutils-0.3.0.tar.gz",
        "has_sig": false,
        "md5_digest": "9d0742c214f995960eb3e1e438c7aa58",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8",
        "size": 34834,
        "upload_time": "2023-02-06T22:15:50",
        "upload_time_iso_8601": "2023-02-06T22:15:50.707220Z",
        "url": "https://files.pythonhosted.org/packages/b3/25/7ebd4c3c397d83bcf0099fe7b499192b672a9e3b0e06f3dcf9cc557b7390/lsstvaultutils-0.3.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "bd79510eb9b7c3c2162b43dae8b31c13d8b6d3ae27211feb6743b434e531840c",
        "md5": "cec59de625b09bc8cc40aaeb2d38cdfe",
        "sha256": "20db531f46420abce1b0ae90df1828021ad210e863fc3bfe7a1536bfaed04e82"
      },
      "downloads": -1,
      "filename": "lsstvaultutils-0.3.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "cec59de625b09bc8cc40aaeb2d38cdfe",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.8",
      "size": 19616,
      "upload_time": "2023-02-06T22:15:48",
      "upload_time_iso_8601": "2023-02-06T22:15:48.631904Z",
      "url": "https://files.pythonhosted.org/packages/bd/79/510eb9b7c3c2162b43dae8b31c13d8b6d3ae27211feb6743b434e531840c/lsstvaultutils-0.3.0-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "b3257ebd4c3c397d83bcf0099fe7b499192b672a9e3b0e06f3dcf9cc557b7390",
        "md5": "9d0742c214f995960eb3e1e438c7aa58",
        "sha256": "bd799dbb74b7a975b6645eae3227031965650d5335faddaa9b4349cec8e3f046"
      },
      "downloads": -1,
      "filename": "lsstvaultutils-0.3.0.tar.gz",
      "has_sig": false,
      "md5_digest": "9d0742c214f995960eb3e1e438c7aa58",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.8",
      "size": 34834,
      "upload_time": "2023-02-06T22:15:50",
      "upload_time_iso_8601": "2023-02-06T22:15:50.707220Z",
      "url": "https://files.pythonhosted.org/packages/b3/25/7ebd4c3c397d83bcf0099fe7b499192b672a9e3b0e06f3dcf9cc557b7390/lsstvaultutils-0.3.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}