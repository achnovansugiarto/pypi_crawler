{
  "info": {
    "author": "Fritz Sassine",
    "author_email": "fileunderdonotread@gmail.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "aws-mfa: Easily manage your AWS Security Credentials when using Multi-Factor Authentication (MFA)\n=================================================================================================\n\n**aws-mfa** makes it easy to manage your AWS SDK Security Credentials when Multi-Factor Authentication (MFA) is enforced on your AWS account. It automates the process of obtaining temporary credentials from the [AWS Security Token Service](http://docs.aws.amazon.com/STS/latest/APIReference/Welcome.html) and updating your [AWS Credentials](https://blogs.aws.amazon.com/security/post/Tx3D6U6WSFGOK2H/A-New-and-Standardized-Way-to-Manage-Credentials-in-the-AWS-SDKs) file (located at `~/.aws/credentials`). Traditional methods of managing MFA-based credentials requires users to write their own bespoke scripts/wrappers to fetch temporary credentials from STS and often times manually update their AWS credentials file.\n\nThe concept behind **aws-mfa** is that there are 2 types of credentials:\n\n* `long-term` - Your typcial AWS access keys, consisting of an `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`\n\n* `short-term` - A temporary set of credentials that are generated by AWS STS using your `long-term` credentials in combination with your MFA device serial number (either a hardware device serial number or virtual device ARN) and one time token code. Your short term credentials are the credentials that are actively utilized by the AWS SDK in use.\n\n\nIf you haven't yet enabled multi-factor authentication for AWS API access, check out the [AWS article](http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_configure-api-require.html) on doing so.\n\n\nInstallation:\n-------------\nOption 1\n```sh\n$ pip install aws-mfa\n```\n\nOption 2\n```sh\n1. Clone this repo\n2. $ python setup.py install\n```\n\nCredentials File Setup\n----------------------\n\nIn a typical AWS credentials file (located at `~/.aws/credentials`), credentials are stored in sections, denoted by a pair of brackets: `[]`. The `[default]` section stores your default credentials. You can store multiple sets of credentials using different profile names. If no profile is specified, the `[default]` section is always used.\n\nBy default long term credential sections are identified by the convention `[<profile_name>-long-term]` and short term credentials are identified by the typical convention: `[<profile_name>]`. The following illustrates how you would configure you credentials file using **aws-mfa** with your default credentials:\n\n```ini\n[default-long-term]\naws_access_key_id = YOUR_LONGTERM_KEY_ID\naws_secret_access_key = YOUR_LONGTERM_ACCESS_KEY\n```\n\nAfter running `aws-mfa`, your credentials file would read:\n\n```ini\n[default-long-term]\naws_access_key_id = YOUR_LONGTERM_KEY_ID\naws_secret_access_key = YOUR_LONGTERM_ACCESS_KEY\n\n\n[default]\naws_access_key_id = <POPULATED_BY_AWS-MFA>\naws_secret_access_key = <POPULATED_BY_AWS-MFA>\naws_security_token = <POPULATED_BY_AWS-MFA>\n```\n\nSimilarly, if you utilize a credentials profile named **development**, your credentials file would look like:\n\n```ini\n[development-long-term]\naws_access_key_id = YOUR_LONGTERM_KEY_ID\naws_secret_access_key = YOUR_LONGTERM_ACCESS_KEY\n```\n\n\nAfter running `aws-mfa`, your credentials file would read:\n\n```ini\n[development-long-term]\naws_access_key_id = YOUR_LONGTERM_KEY_ID\naws_secret_access_key = YOUR_LONGTERM_ACCESS_KEY\n\n[development]\naws_access_key_id = <POPULATED_BY_AWS-MFA>\naws_secret_access_key = <POPULATED_BY_AWS-MFA>\naws_security_token = <POPULATED_BY_AWS-MFA>\n```\n\nThe default naming convention for the credential section can be overriden by using the `--long-term-suffix` and\n`--short-term-suffix` command line arguments. For example, in a multi account scenario you can have one AWS account\nthat manages the IAM users for your organization and have other AWS accounts for development, staging and production\nenvironments.\n\nAfter running `aws-mfa` once for each environment with a different value for `--short-term-suffix`, your credentials\nfile would read:\n\n```ini\n[myorganization-long-term]\naws_access_key_id = YOUR_LONGTERM_KEY_ID\naws_secret_access_key = YOUR_LONGTERM_ACCESS_KEY\n\n[myorganization-development]\naws_access_key_id = <POPULATED_BY_AWS-MFA>\naws_secret_access_key = <POPULATED_BY_AWS-MFA>\naws_security_token = <POPULATED_BY_AWS-MFA>\n\n[myorganization-staging]\naws_access_key_id = <POPULATED_BY_AWS-MFA>\naws_secret_access_key = <POPULATED_BY_AWS-MFA>\naws_security_token = <POPULATED_BY_AWS-MFA>\n\n[myorganization-production]\naws_access_key_id = <POPULATED_BY_AWS-MFA>\naws_secret_access_key = <POPULATED_BY_AWS-MFA>\naws_security_token = <POPULATED_BY_AWS-MFA>\n```\n\nThis allows you to access multiple environments without the need to run `aws-mfa` each time you want to switch\nenvironments.\n\nIf you don't like the a long term suffix, you can omit it by passing the value `none` for the `--long-term-suffix`\ncommand line argument. After running ``aws-mfa`` once for each environment with a different value for\n`--short-term-suffix`, your credentials file would read:\n\n```ini\n[myorganization]\naws_access_key_id = YOUR_LONGTERM_KEY_ID\naws_secret_access_key = YOUR_LONGTERM_ACCESS_KEY\n\n[myorganization-development]\naws_access_key_id = <POPULATED_BY_AWS-MFA>\naws_secret_access_key = <POPULATED_BY_AWS-MFA>\naws_security_token = <POPULATED_BY_AWS-MFA>\n\n[myorganization-staging]\naws_access_key_id = <POPULATED_BY_AWS-MFA>\naws_secret_access_key = <POPULATED_BY_AWS-MFA>\naws_security_token = <POPULATED_BY_AWS-MFA>\n\n[myorganization-production]\naws_access_key_id = <POPULATED_BY_AWS-MFA>\naws_secret_access_key = <POPULATED_BY_AWS-MFA>\naws_security_token = <POPULATED_BY_AWS-MFA>\n```\n\nUsage\n-----\n\n```\n--device arn:aws:iam::123456788990:mfa/dudeman\n                        The MFA Device ARN. This value can also be provided\n                        via the environment variable 'MFA_DEVICE' or the\n                        ~/.aws/credentials variable 'aws_mfa_device'.\n--duration DURATION     The duration, in seconds, that the temporary\n                        credentials should remain valid. Minimum value: 900\n                        (15 minutes). Maximum: 129600 (36 hours). Defaults to\n                        43200 (12 hours), or 3600 (one hour) when using\n                        '--assume-role'. This value can also be provided via\n                        the environment variable 'MFA_STS_DURATION'.\n--profile PROFILE       If using profiles, specify the name here. The default\n                        profile name is 'default'. The value can also be\n                        provided via the environment variable 'AWS_PROFILE'.\n--long-term-suffix LONG_TERM_SUFFIX\n                        To identify the long term credential section by\n                        [<profile_name>-LONG_TERM_SUFFIX]. Use 'none' to\n                        identify the long term credential section by\n                        [<profile_name>]. Omit to identify the long term \n                        credential section by [<profile_name>-long-term].\n--short-term-suffix SHORT_TERM_SUFFIX\n                        To identify the short term credential section by\n                        [<profile_name>-SHORT_TERM_SUFFIX]. Omit or use 'none'\n                        to identify the short term credential section by\n                        [<profile_name>].\n--assume-role arn:aws:iam::123456788990:role/RoleName\n                        The ARN of the AWS IAM Role you would like to assume,\n                        if specified. This value can also be provided via the\n                        environment variable 'MFA_ASSUME_ROLE'\n--role-session-name ROLE_SESSION_NAME\n                        Friendly session name required when using --assume-\n                        role. By default, this is your local username.\n```\n\n**Argument precedence**: Command line arguments take precedence over environment variables.\n\nUsage Example\n-------------\n\nRun **aws-mfa** *before* running any of your scripts that use any AWS SDK.\n\n\nUsing command line arguments:\n\n```sh\n$> aws-mfa --duration 1800 --device arn:aws:iam::123456788990:mfa/dudeman\nINFO - Using profile: default\nINFO - Your credentials have expired, renewing.\nEnter AWS MFA code for device [arn:aws:iam::123456788990:mfa/dudeman] (renewing for 1800 seconds):123456\nINFO - Success! Your credentials will expire in 1800 seconds at: 2015-12-21 23:07:09+00:00\n```\n\nUsing environment variables:\n\n```sh\nexport MFA_DEVICE=arn:aws:iam::123456788990:mfa/dudeman\n$> aws-mfa --duration 1800\nINFO - Using profile: default\nINFO - Your credentials have expired, renewing.\nEnter AWS MFA code for device [arn:aws:iam::123456788990:mfa/dudeman] (renewing for 1800 seconds):123456\nINFO - Success! Your credentials will expire in 1800 seconds at: 2015-12-21 23:07:09+00:00\n```\n\n```sh\nexport MFA_DEVICE=arn:aws:iam::123456788990:mfa/dudeman\nexport MFA_STS_DURATION=1800\n$> aws-mfa\nINFO - Using profile: default\nINFO - Your credentials have expired, renewing.\nEnter AWS MFA code for device [arn:aws:iam::123456788990:mfa/dudeman] (renewing for 1800 seconds):123456\nINFO - Success! Your credentials will expire in 1800 seconds at: 2015-12-21 23:07:09+00:00\n```\n\nOutput of running **aws-mfa** while credentials are still valid:\n\n```sh\n$> aws-mfa\nINFO - Using profile: default\nINFO - Your credentials are still valid for 1541.791134 seconds they will expire at 2015-12-21 23:07:09\n```\n\nUsing a profile: (profiles allow you to reference different sets of credentials, perhaps for different users or different regions)\n\n```sh\n$> aws-mfa --duration 1800 --device arn:aws:iam::123456788990:mfa/dudeman --profile development\nINFO - Using profile: development\nEnter AWS MFA code for device [arn:aws:iam::123456788990:mfa/dudeman] (renewing for 1800 seconds):666666\nINFO - Success! Your credentials will expire in 1800 seconds at: 2015-12-21 23:09:04+00:00\n```\n\nUsing a profile that is set via the environment variable `AWS_PROFILE`:\n\n```sh\n$> export AWS_PROFILE=development\n$> aws-mfa --duration 1800 --device arn:aws:iam::123456788990:mfa/dudeman\nINFO - Using profile: development\nEnter AWS MFA code for device [arn:aws:iam::123456788990:mfa/dudeman] (renewing for 1800 seconds):666666\nINFO - Success! Your credentials will expire in 1800 seconds at: 2015-12-21 23:09:04+00:00\n```\n\nAssuming a role:\n\n```sh\n$> aws-mfa --duration 1800 --device arn:aws:iam::123456788990:mfa/dudeman --assume-role arn:aws:iam::123456788990:role/some-role --role-session-name some-role-session\nINFO - Validating credentials for profile: default  with assumed role arn:aws:iam::123456788990:role/some-role\nINFO - Obtaining credentials for a new role or profile.\nEnter AWS MFA code for device [arn:aws:iam::123456788990:mfa/dudeman] (renewing for 1800 seconds):123456\nINFO - Success! Your credentials will expire in 1800 seconds at: 2016-10-24 18:58:17+00:00\n```\n\nAssuming a role: Assume a role specified in your `long-term` configuration\n\n```ini\n[default-long-term]\naws_access_key_id = YOUR_LONGTERM_KEY_ID\naws_secret_access_key = YOUR_LONGTERM_ACCESS_KEY\nassume_role =  arn:aws:iam::123456788990:role/some-role\n```\n\n```sh\n$> aws-mfa --duration 1800 --device arn:aws:iam::123456788990:mfa/dudeman --role-session-name some-role-session\n```\n\nAssuming a role using a profile:\n\n```sh\n$> aws-mfa --duration 1800 --device arn:aws:iam::123456788990:mfa/dudeman --profile development --assume-role arn:aws:iam::123456788990:role/some-role --role-session-name some-role-session\nINFO - Validating credentials for profile: development with assumed role arn:aws:iam::123456788990:role/some-role\nINFO - Obtaining credentials for a new role or profile.\nEnter AWS MFA code for device [arn:aws:iam::123456788990:mfa/dudeman] (renewing for 1800 seconds):123456\nINFO - Success! Your credentials will expire in 1800 seconds at: 2016-10-24 18:58:17+00:00\n```\n\nAssuming a role in multiple accounts and be able to work with both accounts simultaneously (i.e. production an staging):\n\n```sh\n$> aws-mfa —profile myorganization --assume-role arn:aws:iam::222222222222:role/Administrator --short-term-suffix production --long-term-suffix none --role-session-name production\nINFO - Validating credentials for profile: myorganization-production with assumed role arn:aws:iam::222222222222:role/Administrator\nINFO - Your credentials have expired, renewing.\nEnter AWS MFA code for device [arn:aws:iam::111111111111:mfa/me] (renewing for 3600 seconds):123456\nINFO - Success! Your credentials will expire in 3600 seconds at: 2017-07-10 07:16:43+00:00\n\n$> aws-mfa —profile myorganization --assume-role arn:aws:iam::333333333333:role/Administrator --short-term-suffix staging --long-term-suffix none --role-session-name staging \nINFO - Validating credentials for profile: myorganization-staging with assumed role arn:aws:iam::333333333333:role/Administrator\nINFO - Your credentials have expired, renewing.\nEnter AWS MFA code for device [arn:aws:iam::111111111111:mfa/me] (renewing for 3600 seconds):123456\nINFO - Success! Your credentials will expire in 3600 seconds at: 2017-07-10 07:16:44+00:00\n\n$> aws s3 list-objects —bucket my-production-bucket —profile myorganization-production\n\n$> aws s3 list-objects —bucket my-staging-bucket —profile myorganization-staging\n```",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/vodou/aws-mfa",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "vodou-aws-mfa",
    "package_url": "https://pypi.org/project/vodou-aws-mfa/",
    "platform": "",
    "project_url": "https://pypi.org/project/vodou-aws-mfa/",
    "project_urls": {
      "Homepage": "https://github.com/vodou/aws-mfa"
    },
    "release_url": "https://pypi.org/project/vodou-aws-mfa/0.0.15/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "Manage AWS MFA Security Credentials",
    "version": "0.0.15",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 11700030,
  "releases": {
    "0.0.13": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "e217da555c1df8f8f2238b64e678993f6d45071b17d88f219397bf5c41d74e7e",
          "md5": "85b7f127dfbb621c3a0c5b9b2b9f7cf3",
          "sha256": "9c3393ed8cda2c7900f983f501e9a613b035c2dc59777b20d5e754b857bf2c7e"
        },
        "downloads": -1,
        "filename": "vodou-aws-mfa-0.0.13.tar.gz",
        "has_sig": false,
        "md5_digest": "85b7f127dfbb621c3a0c5b9b2b9f7cf3",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 11047,
        "upload_time": "2021-10-12T01:39:33",
        "upload_time_iso_8601": "2021-10-12T01:39:33.756886Z",
        "url": "https://files.pythonhosted.org/packages/e2/17/da555c1df8f8f2238b64e678993f6d45071b17d88f219397bf5c41d74e7e/vodou-aws-mfa-0.0.13.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.15": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "3dd869ccea832b77c8efd253005fefc908e9f52c0e2fff92c049acd8bfcec833",
          "md5": "cdcbf2d709fa7b5def97f661e6a28a49",
          "sha256": "c76e6d06cd56450da7ee317393ce4f03d4c3d6140deaee0308b54e9aaf8fbe36"
        },
        "downloads": -1,
        "filename": "vodou-aws-mfa-0.0.15.tar.gz",
        "has_sig": false,
        "md5_digest": "cdcbf2d709fa7b5def97f661e6a28a49",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 11758,
        "upload_time": "2021-10-12T15:21:01",
        "upload_time_iso_8601": "2021-10-12T15:21:01.896886Z",
        "url": "https://files.pythonhosted.org/packages/3d/d8/69ccea832b77c8efd253005fefc908e9f52c0e2fff92c049acd8bfcec833/vodou-aws-mfa-0.0.15.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "3dd869ccea832b77c8efd253005fefc908e9f52c0e2fff92c049acd8bfcec833",
        "md5": "cdcbf2d709fa7b5def97f661e6a28a49",
        "sha256": "c76e6d06cd56450da7ee317393ce4f03d4c3d6140deaee0308b54e9aaf8fbe36"
      },
      "downloads": -1,
      "filename": "vodou-aws-mfa-0.0.15.tar.gz",
      "has_sig": false,
      "md5_digest": "cdcbf2d709fa7b5def97f661e6a28a49",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 11758,
      "upload_time": "2021-10-12T15:21:01",
      "upload_time_iso_8601": "2021-10-12T15:21:01.896886Z",
      "url": "https://files.pythonhosted.org/packages/3d/d8/69ccea832b77c8efd253005fefc908e9f52c0e2fff92c049acd8bfcec833/vodou-aws-mfa-0.0.15.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}