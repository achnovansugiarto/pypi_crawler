{
  "info": {
    "author": "koo5",
    "author_email": "kolman.jindrich@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 3 - Alpha",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)",
      "License :: Other/Proprietary License",
      "Natural Language :: English",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "# BFG\nB-tree Filesystem Git attempts to enable git-like workflow for subvolumes. Commit, push, checkout, stash, pull..\n\n<p align=\"center\">\n<a href=\"https://pypi.python.org/pypi/btrfsgit\">\n    <img src=\"https://img.shields.io/pypi/v/btrfsgit.svg\"\n        alt = \"Release Status\">\n</a>\n\n\n## user install:\n```pip install --user BtrFsGit```\n\n\n## dev install:\n```\npip install --user poetry\n`cd BtrFsGit\npoetry install # only installs the executable into somewhere like `/.cache/pypoetry/virtualenvs/bfg-iXQCHChq-py3.6/bin/`. It just doesn't have a \"development mode\" like setuptools have with `pip install -e .`. So find that directory, and copy the `bfg` into your `~/.local/bin/`. But that's about to be [fixed soon](https://github.com/python-poetry/poetry/issues/34).\n```\n\n\n\n## status\nUndertested, but `commit_and_push_and_checkout`, `remote_commit_and_pull` and other commands work. python-fire (the CLI lib) behaves in unexpected ways sometimes. Data loss could occur ;)\n\n## why\nI built this because my scenario is not just simple backup, but also transfering subvolumes back and forth between multiple machines, where no one machine is a single source of truth. In other words, a desktop computer and a notebook, and a subvol with a bunch of VM images. And then maybe a bunch of external backup HDDs.\n\n## cool features\n* It tries to figure out shared parents smartly, by walking the uuids of subvolumes of both filesystems. It doesn't just expect the last transferred snapshot to \"be there\", in a fixed location, like other tools do.\n* No config files, just specify a source subvol and a target subvol (and the ID 5 mount point) on the command line, and in case of a remote machine, a ssh command to use.\n\n## what this doesn's do (yet?)\n* snapshot pruning\n* cleanup after failure / .tmp destination\n* finding shared parent by simply listing the snapshots dirs\n* config files\n\n## todo\n* what happens when there is only an incomplete snapshot on target?\n\n## planned features\n* automatically saving and propagating `sub list` dumps - to allow finding shared parents also for offine generating of send streams, even across multiple machine hops\n* Generating a send stream, and applying it later.\n\n## wishlist\n* some kind of integration with https://github.com/csirac2/snazzer/#snazzer for integrity checks\n* maybe some automation for non-BTRFS backups, ie, create a snapshot, rsync it to an ext4, (and apply snazzer..)\n\n## what this will probably never be\n* an attempt to immitate more of git, like merging, exact same command syntax, commit messages (well maybe commit messages would make sense, maybe as a backend to datalad?)..\n\n\n## example workflow\nthis is how i ping-pong my data between my two machines:\n```\nbfg   \\\n  --YES=true  \\  #  no confirmations\n  --LOCAL_FS_TOP_LEVEL_SUBVOL_MOUNT_POINT=/nvme0n1p6_crypt_root  \\  # ugly hack\n  --sshstr='/opt/hpnssh/usr/bin/ssh   -p 2222   -o TCPRcvBufPoll=yes -o NoneSwitch=yes  -o NoneEnabled=yes     koom@10.0.0.20'  \\\n  commit_and_push_and_checkout  \\  # the command\n  --SUBVOLUME=/d \\  # source\n  --REMOTE_SUBVOLUME=/mx500data/lean  # target\n```\n...this:\n* makes a read-only snapshot of /d/ in /.bfg_snapshots.d/<timestamp>_from_<hostname>\n* finds the best shared parent and sends the snapshot to the other machine over ssh\n* receives it on the other machine in /mx500data/.bfg_snapshots.lean\n* makes a read-only snapshot of /mx500data/lean in /mx500data/.bfg_snapshots.lean/<timestamp>_stash\n* deletes /mx500data/lean\n* makes a read-write snapshot of the received snapshot, in /mx500data/lean\n\n\nAnd back:\n```\nbfg   --YES=true    --REMOTE_FS_TOP_LEVEL_SUBVOL_MOUNT_POINT=/mx500data    --sshstr='/opt/hpnssh/usr/bin/ssh   -p 2222   -o TCPRcvBufPoll=yes -o NoneSwitch=yes  -o NoneEnabled=yes     koom@10.0.0.20'   remote_commit_and_pull   --SUBVOLUME=/d  --REMOTE_SUBVOLUME=/mx500data/lean\n```\nfull output:\n[example_session.md](misc/example_session.md)\n\nsee also:\n[test1](tests/test1.sh)\n\n## available commands\n[docs](docs/bfg/bfg.md)\n\n## prerequisites\n\n### install\nThis isnt a proper python package yet. Python3.8 is expected. Checkout the repo, do\n```\n virtualenv -p /usr/bin/python3.8 venv\n pip install -r requirements.txt\n\n```\n### mount the root\n#### problem\nIf you want to work with subvolumes mounted with `subvol=..`: This is how linux distributions set up your system by default. In this case, BFG would not be able to automatically find the filesystem path of a subvolume given its UUID, so, it wouldn't be able to call `btrfs send` with correct `-p` parents.\n#### solution\nmake sure that the root subvolume of your BTRFS filesystem is always mounted. For example my fstab entry:\n```\n/dev/mapper/nvme0n1p6_crypt /nvme0n1p6_crypt_root  btrfs   defaults,subvol=   0   2\n```\nFor some operations, you will need to pass this mountpoint like so: `--LOCAL_FS_TOP_LEVEL_SUBVOL_MOUNT_POINT=...` or `--REMOTE_FS_TOP_LEVEL_SUBVOL_MOUNT_POINT=...`.\n### avoid nested subvolumes\n#### problem\nTo be able to make use of stash and checkout, the subvolume that you want to manage with BFG should not contain other subvolumes, so that it can be `btrfs subvolume delete`'d without affecting your snapshots or other subvolumes. (or possibly we could just `mv`?)\n#### solution\nAs an example, i have a subvolume `/data`, and by default, BFG will store all snapshots in `/.bfg_snapshots.data`, and i don't have snapper doing stuff in `/data/.snapshots`.\n\n### prevent writes to incomplete snapshots\n#### problem\nBTRFS doesn't make a subvolume read-only when it's `btrfs receive`-ing. If another program writes into it at that time, something bad will happen..\n#### solution\ndon't do it!\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/koo5/bfg",
    "keywords": "",
    "license": "GNU Affero General Public License v3 or later (AGPLv3+)",
    "maintainer": "",
    "maintainer_email": "",
    "name": "btrfsgit",
    "package_url": "https://pypi.org/project/btrfsgit/",
    "platform": "",
    "project_url": "https://pypi.org/project/btrfsgit/",
    "project_urls": {
      "Homepage": "https://github.com/koo5/bfg"
    },
    "release_url": "https://pypi.org/project/btrfsgit/9000.0.2/",
    "requires_dist": [
      "fire (==0.4.0)",
      "black (==20.8b1); extra == \"test\"",
      "isort (==5.6.4); extra == \"test\"",
      "flake8 (==3.8.4); extra == \"test\"",
      "flake8-docstrings (>=1.6.0,<2.0.0); extra == \"test\"",
      "pytest (==6.1.2); extra == \"test\"",
      "pytest-cov (==2.10.1); extra == \"test\"",
      "tox (>=3.20.1,<4.0.0); extra == \"dev\"",
      "virtualenv (>=20.2.2,<21.0.0); extra == \"dev\"",
      "pip (>=20.3.1,<21.0.0); extra == \"dev\"",
      "mkdocs (>=1.1.2,<2.0.0); extra == \"doc\"",
      "mkdocs-include-markdown-plugin (>=1.0.0,<2.0.0); extra == \"doc\"",
      "mkdocs-material (>=6.1.7,<7.0.0); extra == \"doc\"",
      "mkdocstrings (>=0.13.6,<0.14.0); extra == \"doc\"",
      "mkdocs-material-extensions (>=1.0.1,<2.0.0)",
      "twine (>=3.3.0,<4.0.0); extra == \"dev\"",
      "mkdocs-autorefs (==0.1.1); extra == \"doc\"",
      "pre-commit (>=2.12.0,<3.0.0); extra == \"dev\"",
      "toml (>=0.10.2,<0.11.0); extra == \"dev\"",
      "pathvalidate (>=2.5.0,<3.0.0)",
      "PyInquirer (>=1.0.3,<2.0.0)"
    ],
    "requires_python": ">=3.8.1,<4.0",
    "summary": "B-tree Filesystem Git attempts to enable git-like workflow for BTRFS subvolumes. Commit, push, checkout, stash, pull...",
    "version": "9000.0.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 11922319,
  "releases": {
    "0.0.9": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d46cda4ce0b1c15f5a87686bde7c4e5e91823dc2e631b56e2930e2696bc71493",
          "md5": "0912dd2e648ba3c365a105847ede7eeb",
          "sha256": "14de7c2997188ed3cf519a4298a467dda36b8d50de12705c752c281007614bc5"
        },
        "downloads": -1,
        "filename": "BtrFsGit-0.0.9-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0912dd2e648ba3c365a105847ede7eeb",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.1,<4.0",
        "size": 22748,
        "upload_time": "2021-11-04T02:43:38",
        "upload_time_iso_8601": "2021-11-04T02:43:38.024579Z",
        "url": "https://files.pythonhosted.org/packages/d4/6c/da4ce0b1c15f5a87686bde7c4e5e91823dc2e631b56e2930e2696bc71493/BtrFsGit-0.0.9-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "115c6f5f51f17d797fd929031a72ced60a5cffbddbc848b10fa376010a09445f",
          "md5": "4f5215d7edd689f6bbed253e1d249fcd",
          "sha256": "0e2abf8f9adee3206d938d83938113942e18ae976d402d98bf21c932b37a4829"
        },
        "downloads": -1,
        "filename": "BtrFsGit-0.0.9.tar.gz",
        "has_sig": false,
        "md5_digest": "4f5215d7edd689f6bbed253e1d249fcd",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.1,<4.0",
        "size": 25955,
        "upload_time": "2021-11-04T02:43:40",
        "upload_time_iso_8601": "2021-11-04T02:43:40.476324Z",
        "url": "https://files.pythonhosted.org/packages/11/5c/6f5f51f17d797fd929031a72ced60a5cffbddbc848b10fa376010a09445f/BtrFsGit-0.0.9.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "90.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "0ed4e40956a6598d0aab4fafd653966ab2b6ee57cf2f4727c80ab32b1ed1b093",
          "md5": "38bd86bcb408819b59efe586eb4eefd2",
          "sha256": "b162ead1e7eb66e7452d2743cfdff4752640c986676a198637e838e8fa33edc3"
        },
        "downloads": -1,
        "filename": "BtrFsGit-90.0.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "38bd86bcb408819b59efe586eb4eefd2",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6.1,<4.0",
        "size": 22779,
        "upload_time": "2021-11-04T02:49:58",
        "upload_time_iso_8601": "2021-11-04T02:49:58.889305Z",
        "url": "https://files.pythonhosted.org/packages/0e/d4/e40956a6598d0aab4fafd653966ab2b6ee57cf2f4727c80ab32b1ed1b093/BtrFsGit-90.0.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "e85bebe8363728e7b1440fb6a4f81d745ddc643cc28799741ab4400f9f377cb4",
          "md5": "2bae837d2dc9763f65c4fc7a81e434ce",
          "sha256": "57fbaedd13c263f4666f2c84d45af1daf05748be8fd65aa789e8e48862c60e88"
        },
        "downloads": -1,
        "filename": "BtrFsGit-90.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "2bae837d2dc9763f65c4fc7a81e434ce",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6.1,<4.0",
        "size": 25975,
        "upload_time": "2021-11-04T02:50:00",
        "upload_time_iso_8601": "2021-11-04T02:50:00.340883Z",
        "url": "https://files.pythonhosted.org/packages/e8/5b/ebe8363728e7b1440fb6a4f81d745ddc643cc28799741ab4400f9f377cb4/BtrFsGit-90.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "9000.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8580ac815934df6616d34ec59aa8845a655c603adcda89cd4a93e777b2e70b4d",
          "md5": "2fb489a7d56d16b8be4dff04da8055d4",
          "sha256": "473f6cd06742fe488143997cd056d30e612adaeecaf96d0509d0139bd30b4688"
        },
        "downloads": -1,
        "filename": "BtrFsGit-9000.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "2fb489a7d56d16b8be4dff04da8055d4",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8.1,<4.0",
        "size": 22738,
        "upload_time": "2021-11-04T03:10:39",
        "upload_time_iso_8601": "2021-11-04T03:10:39.309690Z",
        "url": "https://files.pythonhosted.org/packages/85/80/ac815934df6616d34ec59aa8845a655c603adcda89cd4a93e777b2e70b4d/BtrFsGit-9000.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d46e72d43b13743da0b7366cd9370ecd8191021ea231d2ae0e5cb3c5f9ddd3a4",
          "md5": "56c8a9a239b47b87769891f0fb90a3a8",
          "sha256": "a3699b709342362490e7ca05a95ea5c992b0e1e1b935961d2f54220bd1af7161"
        },
        "downloads": -1,
        "filename": "BtrFsGit-9000.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "56c8a9a239b47b87769891f0fb90a3a8",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8.1,<4.0",
        "size": 25765,
        "upload_time": "2021-11-04T03:10:40",
        "upload_time_iso_8601": "2021-11-04T03:10:40.820072Z",
        "url": "https://files.pythonhosted.org/packages/d4/6e/72d43b13743da0b7366cd9370ecd8191021ea231d2ae0e5cb3c5f9ddd3a4/BtrFsGit-9000.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "9000.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8456a789cdd9c3a04b490d462ac6c8132cf40d66d1e6f77ceb9279df9449d94d",
          "md5": "0c7e3f97bc2fec1896b569ddf04311dd",
          "sha256": "1c481b57dc2f8f4a3e0f1c260d50eb985fac5fca2676ac8ecb18ef3cb2f92b66"
        },
        "downloads": -1,
        "filename": "BtrFsGit-9000.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0c7e3f97bc2fec1896b569ddf04311dd",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8.1,<4.0",
        "size": 22803,
        "upload_time": "2021-11-04T04:00:35",
        "upload_time_iso_8601": "2021-11-04T04:00:35.494602Z",
        "url": "https://files.pythonhosted.org/packages/84/56/a789cdd9c3a04b490d462ac6c8132cf40d66d1e6f77ceb9279df9449d94d/BtrFsGit-9000.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "657192c138fa2cc26c23521bafb4ee5b22d5358860e568efe484649fee2860ce",
          "md5": "287f05fd5d1dd6c088dc1002566355df",
          "sha256": "a2787dc548190a92b0ee3e0dd0c68cdf1b05cff89db6bf6eb93e08665bf8f7a9"
        },
        "downloads": -1,
        "filename": "BtrFsGit-9000.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "287f05fd5d1dd6c088dc1002566355df",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8.1,<4.0",
        "size": 25969,
        "upload_time": "2021-11-04T04:00:36",
        "upload_time_iso_8601": "2021-11-04T04:00:36.798456Z",
        "url": "https://files.pythonhosted.org/packages/65/71/92c138fa2cc26c23521bafb4ee5b22d5358860e568efe484649fee2860ce/BtrFsGit-9000.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "8456a789cdd9c3a04b490d462ac6c8132cf40d66d1e6f77ceb9279df9449d94d",
        "md5": "0c7e3f97bc2fec1896b569ddf04311dd",
        "sha256": "1c481b57dc2f8f4a3e0f1c260d50eb985fac5fca2676ac8ecb18ef3cb2f92b66"
      },
      "downloads": -1,
      "filename": "BtrFsGit-9000.0.2-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "0c7e3f97bc2fec1896b569ddf04311dd",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.8.1,<4.0",
      "size": 22803,
      "upload_time": "2021-11-04T04:00:35",
      "upload_time_iso_8601": "2021-11-04T04:00:35.494602Z",
      "url": "https://files.pythonhosted.org/packages/84/56/a789cdd9c3a04b490d462ac6c8132cf40d66d1e6f77ceb9279df9449d94d/BtrFsGit-9000.0.2-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "657192c138fa2cc26c23521bafb4ee5b22d5358860e568efe484649fee2860ce",
        "md5": "287f05fd5d1dd6c088dc1002566355df",
        "sha256": "a2787dc548190a92b0ee3e0dd0c68cdf1b05cff89db6bf6eb93e08665bf8f7a9"
      },
      "downloads": -1,
      "filename": "BtrFsGit-9000.0.2.tar.gz",
      "has_sig": false,
      "md5_digest": "287f05fd5d1dd6c088dc1002566355df",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.8.1,<4.0",
      "size": 25969,
      "upload_time": "2021-11-04T04:00:36",
      "upload_time_iso_8601": "2021-11-04T04:00:36.798456Z",
      "url": "https://files.pythonhosted.org/packages/65/71/92c138fa2cc26c23521bafb4ee5b22d5358860e568efe484649fee2860ce/BtrFsGit-9000.0.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}