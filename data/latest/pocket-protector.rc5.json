{
  "info": {
    "author": "Kurt Rose and Mahmoud Hashemi",
    "author_email": "kurt@kurtrose.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# Pocket Protector ðŸ”\n\nPocket Protector provides a cryptographically-strong, serverless secret\nmanagement infrastructure. Pocket Protector enables *key management as\ncode*, securely storing secrets in a versionable format, right\nalongside the corresponding application code.\n\nPocket Protector's approach lets you:\n\n* Leverage existing user, versioning, and backup systems, with no\n  infrastructure to set up\n* Support multiple environments\n* Integrate easily with existing key management systems\n  (AWS/Heroku/TravisCI)\n\nPocket Protector also:\n\n* Minimizes the number of passphrases and keys your team has to\n  remember and secure\n* Beats the heck out of hardcoded plaintext secrets!\n\n\n## Installation\n\nRight now the easiest way to install Pocket Protector across all\nplatforms is with `pip`:\n\n```sh\npip install pocket_protector\n```\n\nThis will install the command-line application `pocket_protector`,\nconveniently shortened to `pprotect`, which you can use to test your\ninstallation:\n\n```sh\n$ pprotect version\npocket_protector version 18.0.1\n```\n\nOnce the above is working, we're ready to start using Pocket Protector!\n\n\n## Usage\n\nPocket Protector aims to be as easy to use as a secret management\nsystem can get. That said, understanding security takes time, so be\nsure to go beyond the quick start and reference below, and read our\n[User Guide](https://github.com/SimpleLegal/pocket_protector/blob/master/USER_GUIDE.md)\nas well.\n\n\n### Quick start\n\nPocket Protector's CLI is its primary interface. It presents a compact\nset of commands, each representing one action you might want to take\non a secret store. Basic usage starts on your laptop, inside your\nchecked out code repository:\n\n```sh\n# create a new protected file\npprotect init\n\n# add a key domain\npprotect add-domain\n\n# add a secret to the new key domain\npprotect add-secret\n\n# decrypt and read out the secret\npprotect decrypt-domain\n```\n\nEach of these will prompt the user for credentials when necessary. See\nthe section below on passing credentials.\n\nWhen you're done updating the secret store, simply `git commit` (or\nequivalent) to save your changes. Should you make any mistakes, use\nyour VCS to revert the changes.\n\n\n### Passing credentials\n\nBy default, the `pocket_protector` command prompts you for credentials\nwhen necessary. But convenience and automation both demand more\noptions, highlighted here:\n\n* Command-line Flags\n  * `-u / --user USER_EMAIL` - specifies the user email for subcommands which require it\n  * `--passphrase-file PATH` - specifies a path to a readable file\n    which contains the passphrase (useful for mount-based key\n    management, like Docker)\n  * `--domain DOMAIN` - specifies the name of the domain\n  * `--non-interactive` - causes the command to fail when credentials cannot be gotten by other means\n\n* Environment variables\n  * `PPROTECT_USER` - environment variable which contains the user email\n  * `PPROTECT_PASSPHRASE` - environment variable which contains the\n    passphrase (useful for environment variable-based key management,\n    used by AWS/Heroku/many CI systems)\n\nIn all cases, flags take precedence over environment variables, and\nboth take precedence over and bypass interactive prompts. In the event\nan incorrect credential is passed, `pocket_protector` does *not*\nautomatically check other sources.\n\n\nSee our\n[User Guide](https://github.com/SimpleLegal/pocket_protector/blob/master/USER_GUIDE.md)\nfor more usage tips.\n\n\n### Command summary\n\nHere is a summary of all commands:\n\n```\nusage: pprotect [COMMANDS]\n\nCommands:\n  add-domain            add a new domain to the protected\n  add-key-custodian     add a new key custodian to the protected\n  add-owner             add a key custodian as owner of a domain\n  add-secret            add a secret to a specified domain\n  decrypt-domain        decrypt and display JSON-formatted cleartext for a\n                        domain\n  init                  create a new pocket-protected file\n  list-all-secrets      display all secrets, with a list of domains the key is\n                        present in\n  list-audit-log        display a chronological list of audit log entries\n                        representing file activity\n  list-domain-secrets   display a list of secrets under a specific domain\n  list-domains          display a list of available domains\n  list-user-secrets     similar to list-all-secrets, but filtered by a given\n                        user\n  rm-domain             remove a domain from the protected\n  rm-owner              remove an owner's privileges on a specified domain\n  rm-secret             remove a secret from a specified domain\n  rotate-domain-keys    rotate the internal keys for a particular domain (must\n                        be owner)\n  set-key-custodian-passphrase\n                        change a key custodian passphrase\n  update-secret         update an existing secret in a specified domain\n```\n\n\n## Design\n\nThe theory of operation is that the `protected.yaml` file consists of\n\"key domains\" at the root level. Each domain stores data encrypted by\na keypair. The public key of the keypair is stored in plaintext, so\nthat anyone may encrypt and add a new secret. The private key is\nencrypted with the owner's passphrase. The owners are known as \"key\ncustodians\", and their private keys are protected by passphrases.\n\nSecrets are broken up into domains for the purposes of granting\nsecurity differently. For example, `prod`, `dev`, and `stage` may all\nbe different domains. Protected stores may have as few or as many\ndomains as the team and application require.\n\nTo allow secrets to be accessed in a certain environment, Pocket\nProtector must be invoked with a user and passphrase. As long as the\ncredentials are correct and the user has permissions to a domain, all\nsecrets within that domain are unlocked.\n\nPassphrase security will depend on the domain. For instance, a domain\nused for local development may set the passphrase as an environment\nvariable, or hardcode it in a configuration file.\n\nOn the other hand, a production domain would likely require manual\nentry of an authorized release engineer, or use AWS/GCP/Heroku key\nmanagement solutions to inject the passphrase.\n\nfor prod domains, use AWS / heroku key management to store\nthe passphrase\n\nAn application / script wants to get its secrets:\n```python\n# at initialization\nsecrets = KeyFile.decrypt_domain(domain_name, Creds(name, passphrase))\n# ... later to access a secret\nsecrets[secret_name]\n```\n\nAn application / script that wants to add / overwrite a secret:\n```python\nKeyFile.from_file(path).with_secret(\n    domain_name, secret_name, value).write()\n```\n\nNote -- the secure environment key is needed to read secrets, but not write them.\nChange management on secrets is intended to follow normal source-code\nmanagement.\n\nFile structure:\n```yaml\n[key-domain]:\n  meta:\n    owners:\n      [name]: [encrypted-private-key]\n    public_key: [b64-bytes]\n    private_key: [b64-bytes]\n  secret-[name]: [b64-bytes]\nkey-custodians:\n  [name]:\n    public-key: [b64-bytes]\n    encrypted-private-key: [b64-bytes]\n```\n\n\n### Threat model\n\nAn attacker is presumed to be able to read but not write the contents\nof `protected.yaml`. This could happen because a developer's laptop\nis compromised, GitHub credentials are compromised, or (most likely)\nGit history is accidentally pushed to a publicly acessible repo.\n\nWith read access, an attacker gets environment and secret names,\nand which secrets are used in which environments.\n\nNeither the file as a whole nor individual entries are signed,\nsince the security model assumes an attacker does not have\nwrite access.\n\n\n### Notes\n\nPocket Protector is a streamlined, people-centric secret management\nsystem, custom built to work with distributed version control systems.\n\n* Pocket Protector is a data protection tool, not a change management\n  tool. While it has convenient affordances like an informal\n  `audit_log`, Pocket Protector is meant to be used in conjunction with\n  your version management tool. Signed commits are a particularly good\n  complement.\n* Pocket Protector is designed for single-user usage. This is not a\n  scaling limitation as much as it is a scaling feature. Single-user\n  means that every `pprotect` command needs at most one credentialed\n  user present. No sideband communication is required, minimizing\n  leakage, while maintaining a system as distributed as your version\n  management.\n\n\n## FAQ\n\n\n### Securing Write Access\n\nPocket Protector does not provide any security against unauthorized writes\nto the `protected.yaml` file, by design. Firstly, without any Public Key Infrastructure,\nPocket Protector is not a good basis for cryptographic signatures. (An attacker\nthat modifies the file could also replace the signing keypair with their own;\nthe only way to detect this would be to have a data-store outside of the file.)\n\nSecondly -- and more importantly -- the Git or Mercurial repository already has\ngood controls around write access. All changes are auditable, authenticated with\nssh keypairs or user passphrases. For futher security, consider using signed commits:\n\n* https://git-scm.com/book/id/v2/Git-Tools-Signing-Your-Work\n* https://help.github.com/articles/signing-commits-using-gpg/\n* https://docs.gitlab.com/ee/user/project/repository/gpg_signed_commits/index.html\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/SimpleLegal/pocket_protector",
    "keywords": "",
    "license": "Apache License 2.0",
    "maintainer": "",
    "maintainer_email": "",
    "name": "pocket-protector",
    "package_url": "https://pypi.org/project/pocket-protector/",
    "platform": "any",
    "project_url": "https://pypi.org/project/pocket-protector/",
    "project_urls": {
      "Homepage": "https://github.com/SimpleLegal/pocket_protector"
    },
    "release_url": "https://pypi.org/project/pocket-protector/20.0.1/",
    "requires_dist": [
      "attrs",
      "boltons",
      "PyNaCl",
      "ruamel.yaml",
      "schema",
      "face (>=20.1.1)"
    ],
    "requires_python": "",
    "summary": "Handy secret management system with a convenient CLI and readable storage format.",
    "version": "20.0.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 10133448,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6f89363deb0ade3b721abf1bb95ef7236de9c1ccf3bc223648ac8457c0641330",
          "md5": "0d666a740222f1818857f748726c1dd4",
          "sha256": "de0df23136d4a1dc2fed403a2805fe22cab9c3c17113d097ab6061aa41f8195e"
        },
        "downloads": -1,
        "filename": "pocket_protector-0.0.1-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "0d666a740222f1818857f748726c1dd4",
        "packagetype": "bdist_wheel",
        "python_version": "2.7",
        "requires_python": null,
        "size": 13956,
        "upload_time": "2018-01-06T08:35:23",
        "upload_time_iso_8601": "2018-01-06T08:35:23.450704Z",
        "url": "https://files.pythonhosted.org/packages/6f/89/363deb0ade3b721abf1bb95ef7236de9c1ccf3bc223648ac8457c0641330/pocket_protector-0.0.1-py2-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "18c3c4dbc7a4a873f233c279ca590a4565e2be9aaef3412183a1d67c3be49191",
          "md5": "702892de7d0342c545b096b609d271fd",
          "sha256": "78a6d8fb5c2b8cf19d4d18ce844fcf5aba28a5287e5b55ad677466bcd8af285f"
        },
        "downloads": -1,
        "filename": "pocket-protector-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "702892de7d0342c545b096b609d271fd",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 14276,
        "upload_time": "2018-01-06T08:35:21",
        "upload_time_iso_8601": "2018-01-06T08:35:21.860197Z",
        "url": "https://files.pythonhosted.org/packages/18/c3/c4dbc7a4a873f233c279ca590a4565e2be9aaef3412183a1d67c3be49191/pocket-protector-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "18.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "aa7ae2687618945069d3b810bdee1579dca38c2043741b741a7e48a007837e6d",
          "md5": "460b4bb24457acc452f9fd3d7902cf2f",
          "sha256": "358134357d5b6f81f8b17275ad78480f5f3407fbb7bf9bf44237e930308b1ab1"
        },
        "downloads": -1,
        "filename": "pocket_protector-18.0.0-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "460b4bb24457acc452f9fd3d7902cf2f",
        "packagetype": "bdist_wheel",
        "python_version": "2.7",
        "requires_python": null,
        "size": 14024,
        "upload_time": "2018-02-05T06:36:08",
        "upload_time_iso_8601": "2018-02-05T06:36:08.959613Z",
        "url": "https://files.pythonhosted.org/packages/aa/7a/e2687618945069d3b810bdee1579dca38c2043741b741a7e48a007837e6d/pocket_protector-18.0.0-py2-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "bd156e2d028f26beb416fdcd71589b7a3c9bfba540df1629ebc415f1db5c1f9d",
          "md5": "ce037f6aa1cec27c591defc8ebe99764",
          "sha256": "51139b2b7d93ba963a4b3f1056671be9033fe4d4d84ee618d1d8b9a5c5ccfa79"
        },
        "downloads": -1,
        "filename": "pocket-protector-18.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "ce037f6aa1cec27c591defc8ebe99764",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 14905,
        "upload_time": "2018-02-05T06:36:07",
        "upload_time_iso_8601": "2018-02-05T06:36:07.709863Z",
        "url": "https://files.pythonhosted.org/packages/bd/15/6e2d028f26beb416fdcd71589b7a3c9bfba540df1629ebc415f1db5c1f9d/pocket-protector-18.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "18.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "f990fe396278bc935774447150a3a56b3720a58c8e5b910238f0e4b945e1a442",
          "md5": "4307bbe4c05a6ba9f8eaa7d39151ec68",
          "sha256": "e98000131fc52de1092b199b90d86f5d363cbcabb325f1ed678698ec16ab2468"
        },
        "downloads": -1,
        "filename": "pocket_protector-18.0.1-py2-none-any.whl",
        "has_sig": false,
        "md5_digest": "4307bbe4c05a6ba9f8eaa7d39151ec68",
        "packagetype": "bdist_wheel",
        "python_version": "2.7",
        "requires_python": null,
        "size": 14306,
        "upload_time": "2018-08-22T21:44:08",
        "upload_time_iso_8601": "2018-08-22T21:44:08.828436Z",
        "url": "https://files.pythonhosted.org/packages/f9/90/fe396278bc935774447150a3a56b3720a58c8e5b910238f0e4b945e1a442/pocket_protector-18.0.1-py2-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "09cb779948e7c6c2fc2ea5e307c54a6a45ec1f329bc940436bf3d0c00f18d91b",
          "md5": "a5fc56c2f17ac97ef4ac3c53180a3504",
          "sha256": "86c08443a4f794128d9de45c99bf5766367034dfef133a83e4e22ae2047292c8"
        },
        "downloads": -1,
        "filename": "pocket-protector-18.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "a5fc56c2f17ac97ef4ac3c53180a3504",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 15184,
        "upload_time": "2018-08-22T21:44:06",
        "upload_time_iso_8601": "2018-08-22T21:44:06.327886Z",
        "url": "https://files.pythonhosted.org/packages/09/cb/779948e7c6c2fc2ea5e307c54a6a45ec1f329bc940436bf3d0c00f18d91b/pocket-protector-18.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "20.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "bc663132a61333a7ded14a8daea866b093dfd377809066a01a7b3d1e1243209d",
          "md5": "346b4cafdd3a8fd075b3f96861b437dc",
          "sha256": "b6a8c24602f6eb4830cccd630b99a2e20022c1928040bc9d7ac10892853fa4be"
        },
        "downloads": -1,
        "filename": "pocket_protector-20.0.0-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "346b4cafdd3a8fd075b3f96861b437dc",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 23111,
        "upload_time": "2020-01-22T07:07:51",
        "upload_time_iso_8601": "2020-01-22T07:07:51.326525Z",
        "url": "https://files.pythonhosted.org/packages/bc/66/3132a61333a7ded14a8daea866b093dfd377809066a01a7b3d1e1243209d/pocket_protector-20.0.0-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "19e8f28bc70067788d2fb54dc10869fb6db5cbf7d4bc1a46828c28ff46f4be66",
          "md5": "55758fc38cb109e175adda0eb0cb385e",
          "sha256": "db835f2ccdaf1fa55872c3aeb4299ff8c12e20178c9931f08f94160fd49a2bbb"
        },
        "downloads": -1,
        "filename": "pocket-protector-20.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "55758fc38cb109e175adda0eb0cb385e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 29416,
        "upload_time": "2020-01-22T07:07:53",
        "upload_time_iso_8601": "2020-01-22T07:07:53.284203Z",
        "url": "https://files.pythonhosted.org/packages/19/e8/f28bc70067788d2fb54dc10869fb6db5cbf7d4bc1a46828c28ff46f4be66/pocket-protector-20.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "20.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7f386013279ad9040083676c9b5079dcf956e933b339a98bfd8ef32977452454",
          "md5": "315738fe3be24848661fe310c9c1e90f",
          "sha256": "e90a781e0a15c6c38545079bd9f51ed0daac884db8f91f1621d3d74cdbca9695"
        },
        "downloads": -1,
        "filename": "pocket_protector-20.0.1-py2.py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "315738fe3be24848661fe310c9c1e90f",
        "packagetype": "bdist_wheel",
        "python_version": "py2.py3",
        "requires_python": null,
        "size": 23174,
        "upload_time": "2020-01-22T20:13:46",
        "upload_time_iso_8601": "2020-01-22T20:13:46.608007Z",
        "url": "https://files.pythonhosted.org/packages/7f/38/6013279ad9040083676c9b5079dcf956e933b339a98bfd8ef32977452454/pocket_protector-20.0.1-py2.py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1b3532419ab7c07a8383f954376fafb9b9fd1427e9af4147cf8b37250890bdfd",
          "md5": "77cb3cbaeac79495d179716faa18c608",
          "sha256": "460c907d3830b02abd135b1fcbfde5d913f336f42cacb8ef9be5827a11c01036"
        },
        "downloads": -1,
        "filename": "pocket-protector-20.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "77cb3cbaeac79495d179716faa18c608",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 29796,
        "upload_time": "2020-01-22T20:13:47",
        "upload_time_iso_8601": "2020-01-22T20:13:47.963427Z",
        "url": "https://files.pythonhosted.org/packages/1b/35/32419ab7c07a8383f954376fafb9b9fd1427e9af4147cf8b37250890bdfd/pocket-protector-20.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "7f386013279ad9040083676c9b5079dcf956e933b339a98bfd8ef32977452454",
        "md5": "315738fe3be24848661fe310c9c1e90f",
        "sha256": "e90a781e0a15c6c38545079bd9f51ed0daac884db8f91f1621d3d74cdbca9695"
      },
      "downloads": -1,
      "filename": "pocket_protector-20.0.1-py2.py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "315738fe3be24848661fe310c9c1e90f",
      "packagetype": "bdist_wheel",
      "python_version": "py2.py3",
      "requires_python": null,
      "size": 23174,
      "upload_time": "2020-01-22T20:13:46",
      "upload_time_iso_8601": "2020-01-22T20:13:46.608007Z",
      "url": "https://files.pythonhosted.org/packages/7f/38/6013279ad9040083676c9b5079dcf956e933b339a98bfd8ef32977452454/pocket_protector-20.0.1-py2.py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "1b3532419ab7c07a8383f954376fafb9b9fd1427e9af4147cf8b37250890bdfd",
        "md5": "77cb3cbaeac79495d179716faa18c608",
        "sha256": "460c907d3830b02abd135b1fcbfde5d913f336f42cacb8ef9be5827a11c01036"
      },
      "downloads": -1,
      "filename": "pocket-protector-20.0.1.tar.gz",
      "has_sig": false,
      "md5_digest": "77cb3cbaeac79495d179716faa18c608",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 29796,
      "upload_time": "2020-01-22T20:13:47",
      "upload_time_iso_8601": "2020-01-22T20:13:47.963427Z",
      "url": "https://files.pythonhosted.org/packages/1b/35/32419ab7c07a8383f954376fafb9b9fd1427e9af4147cf8b37250890bdfd/pocket-protector-20.0.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}