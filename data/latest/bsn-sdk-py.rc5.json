{
  "info": {
    "author": "helailiang",
    "author_email": "helailiang@reddatetech.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3"
    ],
    "description": "# SDK Direction for calling\n\n\n## SDK in Python\n\n### 1. Before calling\n\n#### DApp Parameters\n> DApp parameters are obtained from the Service Detail Page after the user participates in the app. Some parameters are set locally, which includes, \n * __PCN gateway interface address:__ the calling address of the PCN (public city node) gateway\n * __User number：__ the number of the user\n * __Application number：__ number of participating applications\n * __Public key：__ the public key of PCN gateway downloaded after the user participates in the DApp\n * __Private key：__ A public key will be generated by BSN when DApps under Key-Trust Mode connects to the BSN successfully, and a private key will be generated corresponding to the public key uploaded for DApps under Public-Key-Upload Mode \n * __Https certificate：__ the Https certificate used when the Https gateway interface is invoked\n\n #### Local Parameters\n * __Certificate Directory：__ the directory used to store the user's private key and certificate generated by DApps under Public-Key-Upload Mode when the user's certificate registration is invoked\n\n### 2. Preparation\n\n#### Import the SDK package\nIntroduce the following package \n```\nfrom bsn_sdk_py.client.config import Config\nfrom bsn_sdk_py.client.fabric_client import FabricClient\n```\n#### Initialize config\nAn object can be initialized to store all the configuration information, which should be introduced at the time of invocation after being configured or read by the caller. \nIn config 'Init', the basic information of DApp is retrieved. Please do not call this operation frequently because this interface will occupy your TPS and traffic. \nYou can use a static object to store 'config' in the project when you need it.   \nWhen configuring the certificate, the certificate applied (that is, the certificate used for signing and verifying) is the direct certificate path, while the certificate for Https is the certificate root for the project. \nThe file path to the directory is consistent with the previous example code.\n\n\n\n```\n\tnodeApi = \"\" // PCN gateway address\n\tuser_code:=\"\" //User code\n\tapp_code :=\"\" //DApp code\n\tapp_public_cert_path :=\"\" //Public key path\n\tuser_private_cert_path :=\"\" //Private key path\n\tmspDir:=\"\" //cert directory\n\thttpcert :=\"\" //httpscert\n\tc = Config(user_code, app_code, nodeApi, mspDir, httpcert,\n                 app_public_cert_path, user_private_cert_path)\n```\n#### Initialize Client\nUse the generated configuration object and call the following code to create a Client object to invoke the PCN gateway\n```\n    client = FabricClient()\n    client.set_config(c)\n```\n\n####   Call interface\nEach gateway interface has encapsulated the parameter object of the request and response, which can be directly called just by assigning the value, and the operation of signing and verifying the signature has been realized in the function. \nThe following is the call operation for the registered sub-user, and others are the same.\n```\n    client.register_user('hll4', '123456')\n```\n\n####   Log\nTo get a more detailed processing log, configure a logger.\n```\n        import logging\n        FORMAT = \"%(asctime)s %(thread)d %(message)s\"\n        logging.basicConfig(filename='bsn_test.log', filemode='w',level=logging.INFO, format=FORMAT, datefmt=\"[%Y-%m-%d %H:%M:%S]\")\n\n```\n\n### 3.Other instructions\n\n#### Description of the user identity certificate for DApp under Public-Key-Upload Mode   \n\nSince the user certificate needed by DApp under Public-Key-Upload Mode when calling the PCN gateway for transaction needs to be generated by the user himself locally, the process is: registered user -> registered user certificate.\nIn the operation of registering a user certificate, a pair of keys are generated locally. A CSR file (the certificate or the application file) can be exported through the key. Call the user certificate, acquire a valid certificate via the registraion interface to process the transaction initiated by DApp under the Key-Trust Mode.\nWhen setting CN in the CSR file, do not register Name directly, the Name is assembled by Name and AppCode in the format of 'nam@appcode'.  \nThis operation is made in the function of `GetCertificateRequest`   in   `bsn_sdk_py.client.entity.enroll_user.EnrollUser` . \n\n__Storage of certificates__ only in the form of local files at present,\n\nNaming rules: \n\n          __stored cert__+ '\\keystore\\' + Name@AppCode + '_private.pem' \n          __stored cert__+ '\\keystore\\' + Name@AppCode + '_cert.pem'\n\n#### About encryption \nIn order to facilitate data encryption and decryption in the on-BSN operation of data transaction, a symmetric encryption 'AES' and an asymmetric encryption 'SM2' algorithm are implemented in the SDK \nSymmetric encryption for 'AES' is specifically called as follows:\n```\n\tsecret = '9999999999999999'\n\tt = \"hello world\"\n    bsn = BsnAES(secret)\n    e = bsn.encrypt(t)  # Encryption\n    d = bsn.decrypt(e)  # Decryption\n    assert t == d\n```\nAsymmetric encryption 'SM2', the details are as follows. In this function, both the signature and the verified signature of SM2 are made.\n\n>Asymmetric encryption is encrypted by the public key and decrypted by the private key.\n```\n    from gmssl import sm2, func\n\tprivate_key = '00B9AB0B828FF68872F21A837FC303668428DEA11DCD1B24429D0C99E24EED83D5'\n    public_key = 'B9C9A6E04E9C91F7BA880429273747D7EF5DDEB0BB2FF6317EB00BEF331A83081A6994B8993F3F5D6EADDDB81872266C87C018FB4162F5AF347B483E24620207'\n    sm2_crypt = sm2.CryptSM2(\n    public_key=public_key, private_key=private_key)\n\n    #The data and encrypted data are generated in bytes. \n    data = b\"111\"\n    enc_data = sm2_crypt.encrypt(data)\n    dec_data =sm2_crypt.decrypt(enc_data)\n    assert dec_data == data\n```\n\n#### About private key\nIn BSN, the encryption algorithm of 'fabric' framework is ECDSA secp256r1, while encryption algorithm of 'fisco-bcos' framework is' SM2'. \nWhen a uer participates in the DApp under Public-Key-Upload Mode, a key of the corresponding encryption algorithm needs to be generated and uploaded. \n\nNext is the description of how these two keys are generated. Keys are generated using 'openssl', where the generation of SM2 key requires version  1.1.1  of 'openssl' or above. \n> Note: the following commands are executed in a Linux environment.\n\n##### 1. How the keys of ECDSA(secp256r1) are generated\n- Generate a private key.\n```\nopenssl ecparam -name prime256v1 -genkey -out key.pem\n```\n- Export the public key. \n```\nopenssl ec -in key.pem -pubout -out pub.pem\n```\n- Export the private key in pkcs8 format \n> Since it is convenient to use the key of pkcs8 format in some languages, you can export the pkcs8 format private key following the command below \n> The private key used in this SDK is in the format of pkcs8\n```\nopenssl pkcs8 -topk8 -inform PEM -in key.pem -outform PEM -nocrypt -out key_pkcs8.pem\n```\nThree files can be generated from the command above.  \n__`key.pem`__ :Private key  \n__`pub.pem`__ :Public key  \n__`key_pkcs8.pem`__ :Private key in pkcs8 format\n\n##### 2.Generate a private key of `SM2` format   \nFirst you need to check whether the version of 'openssl' supports' SM2 'format key generation using the following command.\n```\nopenssl ecparam -list_curves | grep SM2\n```\nSupport if the output shows as follows,\n```\nSM2       : SM2 curve over a 256 bit prime field\n```\nOtherwise you need to download version 1.1.1  or above from the official website.\nThis is used for version 1.1.1d.   \nDownload address: [https://www.openssl.org/source/openssl-1.1.1d.tar.gz](https://www.openssl.org/source/openssl-1.1.1d.tar.gz])  \n\n- Generate a private key\n```\nopenssl ecparam -genkey -name SM2 -out sm2PriKey.pem\n```\n- Export the public key\n```\nopenssl ec -in sm2PriKey.pem -pubout -out sm2PubKey.pem\n```\n- Export the private key in pkcs8 format\n> Since it is convenient to use the pkcs8 format key in some languages, you can export the pkcs8 format private key using the following command\n> The private key used in this SDK is in the format of pkcs8\n```\nopenssl pkcs8 -topk8 -inform PEM -in sm2PriKey.pem -outform pem -nocrypt -out sm2PriKeyPkcs8.pem\n```\nThree files can be generated from the above command  \n__`sm2PriKey.pem`__ :Private key  \n__`sm2PubKey.pem`__ :Public key  \n__`sm2PriKeyPkcs8.pem`__ :Private key in pkcs8 format\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/BSNDA/PCNGateway-PY-SDK",
    "keywords": "bsn,fabric,bsnbase,bsn_sdk_py,bsn_sdk_python",
    "license": "MIT Licence",
    "maintainer": "",
    "maintainer_email": "",
    "name": "bsn-sdk-py",
    "package_url": "https://pypi.org/project/bsn-sdk-py/",
    "platform": "any",
    "project_url": "https://pypi.org/project/bsn-sdk-py/",
    "project_urls": {
      "Homepage": "https://github.com/BSNDA/PCNGateway-PY-SDK"
    },
    "release_url": "https://pypi.org/project/bsn-sdk-py/1.0.6/",
    "requires_dist": [
      "hkdf (==0.0.3)",
      "cryptography (==2.7)",
      "fabric-sdk-py (==0.8.1)"
    ],
    "requires_python": ">=3.6",
    "summary": "this is the bsn Call the gateway sdk",
    "version": "1.0.6",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 7977947,
  "releases": {
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6b34a7f8ecbf550bdc33980371e4fedd2250e23402b12b9a201ee697ccecbb94",
          "md5": "880cf458ec828633fcdfe437aa9edb82",
          "sha256": "910ede20a24a3ca32a0f99ffe921b7b268c7d18316491e927cbf86fea12f9eb0"
        },
        "downloads": -1,
        "filename": "bsn_sdk_py-1.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "880cf458ec828633fcdfe437aa9edb82",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 31511,
        "upload_time": "2020-04-27T07:08:09",
        "upload_time_iso_8601": "2020-04-27T07:08:09.121081Z",
        "url": "https://files.pythonhosted.org/packages/6b/34/a7f8ecbf550bdc33980371e4fedd2250e23402b12b9a201ee697ccecbb94/bsn_sdk_py-1.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "467d6977831c70a0090402863a94e3dc99c68c79a2ea25f9cd9babccbfbbf9cf",
          "md5": "4ccd873605c5544fcd2bc54aea266dfa",
          "sha256": "30cbd35a178004263b48c70fe4fdeaeb9abb4d657f6d4170fa1252e819a5ad07"
        },
        "downloads": -1,
        "filename": "bsn_sdk_py-1.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "4ccd873605c5544fcd2bc54aea266dfa",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 34104,
        "upload_time": "2020-04-27T09:18:43",
        "upload_time_iso_8601": "2020-04-27T09:18:43.583951Z",
        "url": "https://files.pythonhosted.org/packages/46/7d/6977831c70a0090402863a94e3dc99c68c79a2ea25f9cd9babccbfbbf9cf/bsn_sdk_py-1.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "e5e94045103a1405302aa738f3e3de14220ad2367b99b167ec957b122d9ec2dc",
          "md5": "bff5f65c6d7da010fc81d3b91578e9ee",
          "sha256": "61a1eaf1320a23304052aebfb173fa45e68bc19fb99fb2f9c87d39b5616d3b0a"
        },
        "downloads": -1,
        "filename": "bsn_sdk_py-1.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "bff5f65c6d7da010fc81d3b91578e9ee",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 18092,
        "upload_time": "2020-04-27T09:18:45",
        "upload_time_iso_8601": "2020-04-27T09:18:45.051644Z",
        "url": "https://files.pythonhosted.org/packages/e5/e9/4045103a1405302aa738f3e3de14220ad2367b99b167ec957b122d9ec2dc/bsn_sdk_py-1.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a970a79795fccc34a6bbafcae2f24e812a5c61b7791147fb904d9574fb1c95b8",
          "md5": "17a4d51b4e44829efb6e8f3999bf66c9",
          "sha256": "f9cc305d882c6684e7b06d3ba1ca666442fffae028bb7d7baeddb9778e605c7d"
        },
        "downloads": -1,
        "filename": "bsn_sdk_py-1.0.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "17a4d51b4e44829efb6e8f3999bf66c9",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 30339,
        "upload_time": "2020-08-17T02:48:59",
        "upload_time_iso_8601": "2020-08-17T02:48:59.226550Z",
        "url": "https://files.pythonhosted.org/packages/a9/70/a79795fccc34a6bbafcae2f24e812a5c61b7791147fb904d9574fb1c95b8/bsn_sdk_py-1.0.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1c4beac00ec5a9ac22efb5fd0b29a91af8285bcb29932faecb3684acabd6c402",
          "md5": "697dbb3b2938ea4b395984cdcfbe0e96",
          "sha256": "c02968b5e5238aef083273dc6a7196a422b58bb63ca40b7f487a66d395b1ae93"
        },
        "downloads": -1,
        "filename": "bsn_sdk_py-1.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "697dbb3b2938ea4b395984cdcfbe0e96",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 20780,
        "upload_time": "2020-08-17T02:49:01",
        "upload_time_iso_8601": "2020-08-17T02:49:01.390906Z",
        "url": "https://files.pythonhosted.org/packages/1c/4b/eac00ec5a9ac22efb5fd0b29a91af8285bcb29932faecb3684acabd6c402/bsn_sdk_py-1.0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "08e70c5f2753bf8bf75a2ae2f26f95f808c854365e481070912ed97cdde3de19",
          "md5": "6d8c52587ce817566d1eedd2fbaa653d",
          "sha256": "2241e8579349426f61d8d2b4a5839ebb28a83d7e2d266a1afcac39d57adf5ba1"
        },
        "downloads": -1,
        "filename": "bsn_sdk_py-1.0.5-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "6d8c52587ce817566d1eedd2fbaa653d",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 36198,
        "upload_time": "2020-08-17T05:36:10",
        "upload_time_iso_8601": "2020-08-17T05:36:10.520895Z",
        "url": "https://files.pythonhosted.org/packages/08/e7/0c5f2753bf8bf75a2ae2f26f95f808c854365e481070912ed97cdde3de19/bsn_sdk_py-1.0.5-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c16528221a3061c89a4829b0bd7a5722818a5d4f0145c397be1f9182e2e400f9",
          "md5": "567943ff13ecd54cc32b8e6f76ebd462",
          "sha256": "ebae80f72865501e15f7245e2c9e6b196717f57ac1f7eb2b0e78b82bf31d8603"
        },
        "downloads": -1,
        "filename": "bsn_sdk_py-1.0.5.tar.gz",
        "has_sig": false,
        "md5_digest": "567943ff13ecd54cc32b8e6f76ebd462",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 18388,
        "upload_time": "2020-08-17T05:36:11",
        "upload_time_iso_8601": "2020-08-17T05:36:11.893786Z",
        "url": "https://files.pythonhosted.org/packages/c1/65/28221a3061c89a4829b0bd7a5722818a5d4f0145c397be1f9182e2e400f9/bsn_sdk_py-1.0.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.6": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d6a8afe32a6c26dd9fa14e2a2ec8b8d2572512f13da36f580f871e2d15666140",
          "md5": "06c4df33574d22bd2ad88cd7bb216c54",
          "sha256": "7d2e6af40e03ee0d7abd0d980703e9a4c6c9db6b651afa94dc0312eca3f2804d"
        },
        "downloads": -1,
        "filename": "bsn_sdk_py-1.0.6-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "06c4df33574d22bd2ad88cd7bb216c54",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.6",
        "size": 68621,
        "upload_time": "2020-08-17T08:55:05",
        "upload_time_iso_8601": "2020-08-17T08:55:05.352818Z",
        "url": "https://files.pythonhosted.org/packages/d6/a8/afe32a6c26dd9fa14e2a2ec8b8d2572512f13da36f580f871e2d15666140/bsn_sdk_py-1.0.6-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c8d1ae0f2160211d8f417232f438f7e8f5f985194448eead59df241bded880cc",
          "md5": "e852bc06d4f436196368b84224a11b62",
          "sha256": "e4ded4a513450ffcbfc165fe2b3f0c8c1f8e78049fab25626bfa768835881d85"
        },
        "downloads": -1,
        "filename": "bsn_sdk_py-1.0.6.tar.gz",
        "has_sig": false,
        "md5_digest": "e852bc06d4f436196368b84224a11b62",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.6",
        "size": 37900,
        "upload_time": "2020-08-17T08:55:08",
        "upload_time_iso_8601": "2020-08-17T08:55:08.780138Z",
        "url": "https://files.pythonhosted.org/packages/c8/d1/ae0f2160211d8f417232f438f7e8f5f985194448eead59df241bded880cc/bsn_sdk_py-1.0.6.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "d6a8afe32a6c26dd9fa14e2a2ec8b8d2572512f13da36f580f871e2d15666140",
        "md5": "06c4df33574d22bd2ad88cd7bb216c54",
        "sha256": "7d2e6af40e03ee0d7abd0d980703e9a4c6c9db6b651afa94dc0312eca3f2804d"
      },
      "downloads": -1,
      "filename": "bsn_sdk_py-1.0.6-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "06c4df33574d22bd2ad88cd7bb216c54",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.6",
      "size": 68621,
      "upload_time": "2020-08-17T08:55:05",
      "upload_time_iso_8601": "2020-08-17T08:55:05.352818Z",
      "url": "https://files.pythonhosted.org/packages/d6/a8/afe32a6c26dd9fa14e2a2ec8b8d2572512f13da36f580f871e2d15666140/bsn_sdk_py-1.0.6-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "c8d1ae0f2160211d8f417232f438f7e8f5f985194448eead59df241bded880cc",
        "md5": "e852bc06d4f436196368b84224a11b62",
        "sha256": "e4ded4a513450ffcbfc165fe2b3f0c8c1f8e78049fab25626bfa768835881d85"
      },
      "downloads": -1,
      "filename": "bsn_sdk_py-1.0.6.tar.gz",
      "has_sig": false,
      "md5_digest": "e852bc06d4f436196368b84224a11b62",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.6",
      "size": 37900,
      "upload_time": "2020-08-17T08:55:08",
      "upload_time_iso_8601": "2020-08-17T08:55:08.780138Z",
      "url": "https://files.pythonhosted.org/packages/c8/d1/ae0f2160211d8f417232f438f7e8f5f985194448eead59df241bded880cc/bsn_sdk_py-1.0.6.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}