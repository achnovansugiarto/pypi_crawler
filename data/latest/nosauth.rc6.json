{
  "info": {
    "author": "morsisko",
    "author_email": "",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 5 - Production/Stable",
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3"
    ],
    "description": "# NosTale-Auth\nSimple library that lets you generate \"magic\" value for the NoS0577 login packet\n\n# Python installation\n`pip install nosauth`\n\nPlease refer to the example.py for working example\n\n# The packet\nNew login packet `NoS0577` is used when you login with Gameforge launcher\n\nThat's how it looks like:\n`\"NoS0577 \" + SESSION_TOKEN + \"  \" + INSTALLATION_GUID + \" 003662BF\" + \" \" + REGION_CODE + char(0xB) + \"0.9.3.3126\" + \" 0 \" + MD5_STR(MD5_FILE(\"NostaleClientX.exe\") + MD5_FILE(\"NostaleClient.exe\"))`\n\n* `NoS0577` - The header of the packet, const value\n* `SESSION_TOKEN` - Value generated by this library, after the value there are two spaces in the login packet\n* `INSTALLATION_GUID` - Id that is generated during installation, for login purposes it probably may be random, stored in the windows registry under key name `InstallationId` in `SOFTWARE\\\\WOW6432Node\\\\Gameforge4d\\\\TNTClient\\\\MainApp`\n* `003662BF` - Random value converted to HEX\n* `REGION_CODE` - GF code of your region - `4` for PL\n* `char(0xB)` - Single character with ASCII code `0xB`\n* `0.9.3.3114` - Current version of client, may be obtained from the NostaleClientX.exe file version\n* `0` - const value\n* `MD5_STR(MD5_FILE(\"NostaleClientX.exe\") + MD5_FILE(\"NostaleClient.exe\"))` - MD5 generated from concatenation of MD5 uppercase strings of NostaleClientX.exe and NostaleClient.exe \n\n# The useless stuff\n\nThe client makes some useless stuff (at least - for us) like\n\n1. When you press \"Start\" The launcher generates mostly like pseudo-random GUID and saves it to the environment variable called `_TNT_SESSION_ID`\n2. Launcher launches the client with `gf` parameter\n3. Client reads the `_TNT_SESSION_ID` value from the system environment variables, the value is further used to identify the client in the launcher (in case you run multiple NosTale clients)\n4. Now the client and the launcher talk over newly created [pipe](https://docs.microsoft.com/en-us/windows/desktop/ipc/pipes) using JSON-RPC protocol.\n5. The client queries the launcher using the `_TNT_SESSION_ID` value, the client requests info such as `USERNAME` and `code`, then it translates the `code` into `SESSION_TOKEN` using simple algorithm and sends it along with login packet\n\n# Core part\n\n## User-Agent\n\nThere are three types of User-Agents. For the majority of requests you will use the Chromium one (for example this specified in `Accounts` section below).\nFor the second and third type the User-Agent looks like: `Chrome/Cversion (MAGIC) GameforgeClient/2.1.22`, for example `Chrome/C2.1.22.784 (6a28914b) GameforgeClient/2.1.22`\n\nWhere the `MAGIC` is:\n\n### For the second type\n\nThe second type of User-Agent is used for example during request to `/api/v1/patching/download/nostale/default?branchToken`. There are instructions how to generate this user-agent:\n\nNOTE: The ouput of all hashing algorithms is hexlified string, not raw bytes!\nFirsly, you need to grab first number from your `TNT-Installation-Id`.\n\nIn case the first number is even `(number % 2 == 0)` or there are only letters in your `TNT-Installation-Id`:\n* `MAGIC` = first 8 characters from left of `SHA256(SHA256(Cert) + SHA1(version) + SHA256(TNT-Installation-Id))`\n\nOtherwise (when the first number is odd):\n* `MAGIC` = the last 8 characters of `SHA256(SHA1(Cert) + SHA256(version) + SHA1(TNT-Installation-Id))`\n\n### For the third type\n\nThe third type of User-Agent is used for example while getting the auth code, so it's probably the most important one for you.\n\nNOTE: The ouput of all hashing algorithms is hexlified string, not raw bytes!\nFirsly, you need to grab first number from your `TNT-Installation-Id`.\n\nIn case the first number is even `(number % 2 == 0)` or there are only letters in your `TNT-Installation-Id`:\n* `MAGIC` = 2 first chars of your account id + first 8 characters from left of `SHA256(SHA256(Cert) + SHA1(version) + SHA256(TNT-Installation-Id) + SHA1(account-id))`\n\nOtherwise (when the first number is odd):\n* `MAGIC` = 2 first chars of your account id + the last 8 characters of `SHA256(SHA1(Cert) + SHA256(version) + SHA1(TNT-Installation-Id) + SHA256(account-id))`\n\n\nWhere:\n* `Cert` - Gameforge PEM cert embedded into launcher\n* `version` - The current version of the launcher, for example \"C2.1.22.784\"\n* `account-id` - Id of the account you are trying to log-in \n\n### Obtaining token example:\nThis is an example of obtaining the third type of token with following data:\n* `version` = C2.1.22.784\n* `Cert` = cert.pem file from this repository\n* `account-id` = fb50ca7a-6ba2-11eb-9439-0242ac130002\n* `TNT-Installation-Id` = a777c5e7-c9ac-407b-99b4-1a5934137f43\n\nThe first number of `TNT-Installation-Id` is 7, it is odd number so:\n* `SHA1(Cert)` = 6a62b8e71fac63afc5abcb927a63f83aaa2ccb5b\n* `SHA256(version) = SHA256(\"C2.1.22.784\")` = bb3dc2ed5d66d85d099d97513c52fbe699e61e5e8c71f91b9137566514c04e51\n* `SHA1(TNT-Installation-Id) = SHA1(\"a777c5e7-c9ac-407b-99b4-1a5934137f43\")` = 8b3c8dbe01fbb1d18ec288b74f072915f8d268b4\n* `SHA256(Account-Id) = SHA256(\"fb50ca7a-6ba2-11eb-9439-0242ac130002\")` = bcabe70d5883ceead32fe116322824be320b18a98a241a5370a5de5e34763697\n* `2 first chars of account id` = fb\n* `SHA256(SHA1(Cert) + SHA256(version) + SHA1(TNT-Installation-Id) + SHA256(account-id)) = SHA256(6a62b8e71fac63afc5abcb927a63f83aaa2ccb5b + bb3dc2ed5d66d85d099d97513c52fbe699e61e5e8c71f91b9137566514c04e51 + 8b3c8dbe01fbb1d18ec288b74f072915f8d268b4 + bcabe70d5883ceead32fe116322824be320b18a98a241a5370a5de5e34763697)` = 825e786ede7e1421cda70988d9e493a4adeb9ce2986a48848763bd5cb506b95a\n* `Last 8 characters of the previous one` = b506b95a\n* Result = `2 first chars of account id` + `Last 8 characters of the previous one` = fbb506b95a\n\n\n## Auth\n\nTo obtain the token first you need to auth yourself. To do so you need to send `POST` request to `https://spark.gameforge.com/api/v1/auth/sessions`, you send it `only once`.\n\nIn the request header you need to specify `TNT-Installation-Id` from the windows registry.\nIn the body of the request you need to specify `JSON` content:\n* `email` - your email\n* `locale` - example: `pl_PL`\n* `password` - your password\n\nIn the response you will get `JSON` content:\n* `token` - value that is used later in API requests, it is NOT that one to use in login packet\n\n## Accounts\n\nSince some time you may bind multiple game accounts to your GF account. To handle it you need to make `GET` request to `https://spark.gameforge.com/api/v1/user/accounts`\n\nIn the request header you need to specify:\n* `TNT-Installation-Id` - value from windows registry\n* `User-Agent` - Eg. `Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36`\n* `Authorization` - `Bearer ` + `TOKEN_FROM_AUTH_REQUEST`\n\nIn the response you get `JSON` array of all the accounts. Top level keys in the list are `account ids`.\n\n## Almost done\n\nTo obtain the right token you need to make `POST` request to `https://spark.gameforge.com/api/v1/auth/thin/codes`\nIn the request header you need to specify:\n* `TNT-Installation-Id` - value from windows registry\n* `User-Agent` - This is the third type token, for the details look at the `User-Agent` paragraph at the beginning of the document, eg. `Chrome/C2.1.22.784 (fbb506b95a) GameforgeClient/2.1.22`\n* `Authorization` - `Bearer ` + `TOKEN_FROM_AUTH_REQUEST`\n\nIn the request `JSON` body you need to specify:\n* `platformGameAccountId` - the id of selected account from previous section\n\nIn the response you get `JSON` content with:\n* `code` - The value you are looking for \n\nYou may call the `api/v1/auth/thin/codes` multiple times with the auth token obtained from `api/v1/auth/thin/sessions`\n\n## Finally, the SESSION_TOKEN\n\nTo use the `code` in login packet you need to convert it to `SESSION_TOKEN`. The conversion is very simple. It changes the `code` into hex string.\n\nLets say you got `code` equal to `a857263a-3fc1-4c60-ad78-9b6d9a2a0691`, after the conversion it will look like `61383537323633612D336663312D346336302D616437382D396236643961326130363931` because you convert characters from `code` element by element into hexstring, so:\n* `a` -> 97 -> 0x61 -> `61`\n* `8` -> 56 -> 0x38 -> `38`\n\nand so on, so the string will look like `6138...`\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/morsisko/NosTale-Auth",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "nosauth",
    "package_url": "https://pypi.org/project/nosauth/",
    "platform": "",
    "project_url": "https://pypi.org/project/nosauth/",
    "project_urls": {
      "Homepage": "https://github.com/morsisko/NosTale-Auth"
    },
    "release_url": "https://pypi.org/project/nosauth/0.1.5/",
    "requires_dist": [
      "requests"
    ],
    "requires_python": "",
    "summary": "Library that lets you obtain auth token so you can login to NosTale official servers",
    "version": "0.1.5",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 11947929,
  "releases": {
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "afe494a363f2157881276f636b30011caeaa5280b6117b6606ed9a2b5e0a3105",
          "md5": "cf9f4ba4f9c5193902bab0aa4ae21656",
          "sha256": "4782e246264d54c78292ba853de5bd0cc089361d26d3a7baf7531af1de1ebd75"
        },
        "downloads": -1,
        "filename": "nosauth-0.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "cf9f4ba4f9c5193902bab0aa4ae21656",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 5170,
        "upload_time": "2020-09-16T21:53:46",
        "upload_time_iso_8601": "2020-09-16T21:53:46.653604Z",
        "url": "https://files.pythonhosted.org/packages/af/e4/94a363f2157881276f636b30011caeaa5280b6117b6606ed9a2b5e0a3105/nosauth-0.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7c7a1eb335613411eaca3261eb33fe0f7971293a771688c444fbdd1fdd277daf",
          "md5": "598232468026922679e477cb0394093e",
          "sha256": "83024d199126f74d0b40ff2d9c1515e2b946bf34435b16a5e9452698e5710fc2"
        },
        "downloads": -1,
        "filename": "nosauth-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "598232468026922679e477cb0394093e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 4176,
        "upload_time": "2020-09-16T21:53:49",
        "upload_time_iso_8601": "2020-09-16T21:53:49.171049Z",
        "url": "https://files.pythonhosted.org/packages/7c/7a/1eb335613411eaca3261eb33fe0f7971293a771688c444fbdd1fdd277daf/nosauth-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "cdad9342815f617c7421e9fc1ee7a9655a593eaa3474ee2cd52629c053716bbf",
          "md5": "72c0de00d04224e1877bd1b6aaeae737",
          "sha256": "e08bc521d5fa15b0a3d4b177cf57c05e8ec17be806fa48266c35bc565b71c2b8"
        },
        "downloads": -1,
        "filename": "nosauth-0.1.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "72c0de00d04224e1877bd1b6aaeae737",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 8109,
        "upload_time": "2021-02-10T16:22:49",
        "upload_time_iso_8601": "2021-02-10T16:22:49.294196Z",
        "url": "https://files.pythonhosted.org/packages/cd/ad/9342815f617c7421e9fc1ee7a9655a593eaa3474ee2cd52629c053716bbf/nosauth-0.1.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2fab070dd00bae3437888854756006841af4108ef87aac100642198370986e91",
          "md5": "a096de2173792cbfc8faeffea52cf420",
          "sha256": "201ca2910775bd3783e1c92888dc2ca7addb292383abb8b98b64a70ba091b898"
        },
        "downloads": -1,
        "filename": "nosauth-0.1.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "a096de2173792cbfc8faeffea52cf420",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 11988,
        "upload_time": "2021-02-24T18:53:54",
        "upload_time_iso_8601": "2021-02-24T18:53:54.923644Z",
        "url": "https://files.pythonhosted.org/packages/2f/ab/070dd00bae3437888854756006841af4108ef87aac100642198370986e91/nosauth-0.1.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "312479ecfc795df5135bde8480b3860108d74d1fd7b753bc8ff8edbc158babaf",
          "md5": "1ed667f1567bd43ab7821dc5d59f069f",
          "sha256": "badaa6af59ee841c475d0e09217d11c77d985a4d186b5a8ef84e1ad5fda8e840"
        },
        "downloads": -1,
        "filename": "nosauth-0.1.3-py3.7.egg",
        "has_sig": false,
        "md5_digest": "1ed667f1567bd43ab7821dc5d59f069f",
        "packagetype": "bdist_egg",
        "python_version": "3.7",
        "requires_python": null,
        "size": 16572,
        "upload_time": "2021-10-02T11:37:04",
        "upload_time_iso_8601": "2021-10-02T11:37:04.689142Z",
        "url": "https://files.pythonhosted.org/packages/31/24/79ecfc795df5135bde8480b3860108d74d1fd7b753bc8ff8edbc158babaf/nosauth-0.1.3-py3.7.egg",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "43fceb97bbcc85543b8afb84b281f4e8c01398d077275067cfc6074007e96ce8",
          "md5": "3be8f29fe0117175bccac6459cbf552d",
          "sha256": "c589328965ca4ca0369c2181fa513f8a5ccf61d7ddba8efccd1124887a911a8c"
        },
        "downloads": -1,
        "filename": "nosauth-0.1.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "3be8f29fe0117175bccac6459cbf552d",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 12758,
        "upload_time": "2021-10-02T11:49:22",
        "upload_time_iso_8601": "2021-10-02T11:49:22.002327Z",
        "url": "https://files.pythonhosted.org/packages/43/fc/eb97bbcc85543b8afb84b281f4e8c01398d077275067cfc6074007e96ce8/nosauth-0.1.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "05388d5bfc263ed22ac4be659e6b2350ceca4a7b56436e800279245f64368119",
          "md5": "668bf864a5efcfb9a2601db625516884",
          "sha256": "3059055484722dcc4eaf663dc491f901d7e13fb1cef6d5a415ea2c5a09faa07b"
        },
        "downloads": -1,
        "filename": "nosauth-0.1.5-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "668bf864a5efcfb9a2601db625516884",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 12799,
        "upload_time": "2021-11-06T23:15:24",
        "upload_time_iso_8601": "2021-11-06T23:15:24.611387Z",
        "url": "https://files.pythonhosted.org/packages/05/38/8d5bfc263ed22ac4be659e6b2350ceca4a7b56436e800279245f64368119/nosauth-0.1.5-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "01d78fbc355d5488adeb82fd9c855c4b988fbce162220d647cb6ee087046ff17",
          "md5": "9bc5ac4ed9e3fe39f35829cf00b1c177",
          "sha256": "8dfa4d53171f6d3cdaf70e4cbf495918bab39f7925aef4c1e52b268442706943"
        },
        "downloads": -1,
        "filename": "nosauth-0.1.5.tar.gz",
        "has_sig": false,
        "md5_digest": "9bc5ac4ed9e3fe39f35829cf00b1c177",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 13084,
        "upload_time": "2021-11-06T23:15:26",
        "upload_time_iso_8601": "2021-11-06T23:15:26.228323Z",
        "url": "https://files.pythonhosted.org/packages/01/d7/8fbc355d5488adeb82fd9c855c4b988fbce162220d647cb6ee087046ff17/nosauth-0.1.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "05388d5bfc263ed22ac4be659e6b2350ceca4a7b56436e800279245f64368119",
        "md5": "668bf864a5efcfb9a2601db625516884",
        "sha256": "3059055484722dcc4eaf663dc491f901d7e13fb1cef6d5a415ea2c5a09faa07b"
      },
      "downloads": -1,
      "filename": "nosauth-0.1.5-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "668bf864a5efcfb9a2601db625516884",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 12799,
      "upload_time": "2021-11-06T23:15:24",
      "upload_time_iso_8601": "2021-11-06T23:15:24.611387Z",
      "url": "https://files.pythonhosted.org/packages/05/38/8d5bfc263ed22ac4be659e6b2350ceca4a7b56436e800279245f64368119/nosauth-0.1.5-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "01d78fbc355d5488adeb82fd9c855c4b988fbce162220d647cb6ee087046ff17",
        "md5": "9bc5ac4ed9e3fe39f35829cf00b1c177",
        "sha256": "8dfa4d53171f6d3cdaf70e4cbf495918bab39f7925aef4c1e52b268442706943"
      },
      "downloads": -1,
      "filename": "nosauth-0.1.5.tar.gz",
      "has_sig": false,
      "md5_digest": "9bc5ac4ed9e3fe39f35829cf00b1c177",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 13084,
      "upload_time": "2021-11-06T23:15:26",
      "upload_time_iso_8601": "2021-11-06T23:15:26.228323Z",
      "url": "https://files.pythonhosted.org/packages/01/d7/8fbc355d5488adeb82fd9c855c4b988fbce162220d647cb6ee087046ff17/nosauth-0.1.5.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}