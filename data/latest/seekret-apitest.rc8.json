{
  "info": {
    "author": "Seekret Software Ltd.",
    "author_email": "info@seekret.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3"
    ],
    "description": "# Seekret API testing runtime\n\nThe `seekret.apitest` package contains runtime functions and tools intended to ease API testing.\n\nSeekret uses this library in automatically generated tests to help the readability of the generated tests, and implement\ncommon functionalities.\n\n## Quickstart\n\nFirst, install `seekret.apitest`::\n\n    pip install seekret.apitest\n\nNow, in order to run a test:\n\n1. Store one or more generated tavern tests from the [Seekret website](https://app.seekret.com) in a directory.\n2. Copy the configuration file you received from Seekret to the same directory.\n\nYour test directory should look like this:\n\n```text\n/testdir\n|-- api1_test.py\n|-- api2_test.py\n|-- ...\n|-- run-profile.yaml\n```\n\nAfter you finish setting up your test directory, simply run `pytest`.\n\n### Enable live logging\n\nUse the `--log-cli-level INFO` option to show outgoing requests and incoming responses live as they occur during the\ntest.\n\n## Run profile\n\nEach test run requires a run profile. By default, Seekret reads the run profile from the `run-profile.yaml` file in the\nroot directory, but you can provide a different run profile by specifying the `--run-profile` flag.\n\nThe run profile sets:\n\n* The target server of the tests\n* Users and authentication configurations\n\n```yaml\ntarget_server: https://example.com\nusers:\n  default:\n    auth:\n      type: bearer\n      data:\n        token: <API key of the testing account>\n```\n\n### Users\n\nThe `users` key contains the configuration of the user authentication. The data under the `auth` block describes how to\nauthenticate as the user.\n\nThe following methods are currently available:\n\n* `header` - sends the value in the `data` field as headers.\n* `bearer` - sends the value in the `token` field of `data` as a bearer token in the `Authorization` header.\n\n## Example of a generated test\n\nSeekret generates the test to repeat an observed workflow. Values that have no importance to the workflow will be\nrandomized *during test generation* according to their inferred format.\n\n```python\nimport seekret.apitest\n\n\ndef test_post_channels_post_messages(seekret: seekret.apitest.Context):\n    # Stage 1: POST /api/channels\n    with seekret.stage(method='POST', path='/api/channels') as request:\n        response = request(json={\n            'name': '<random name>'\n        })\n        assert response.status_code == 201\n\n        carry_0_responseBody_data_channel_id = response.search('json.data.channel.id')\n\n    # Stage 2: POST /api/channels/{channel_id}/messages\n    with seekret.stage(method='POST', path='/api/channels/{channel_id}/messages') as request:\n        response = request(json={\n            'message': '<random message>'\n        }, path_params={\n            'channel_id': carry_0_responseBody_data_channel_id\n        })\n        assert response.status_code == 201\n```\n\nIn this generated tests, there are two stages:\n\n* Create a channel: `POST /api/channels`\n* Send a message in the channel: `POST /api/channels/{channel_id}/messages`\n\nSeekret will generate the value transfers between the test stages. For instance, in this case, the ID of the created\nchannel from the first request, is used as the required `channel_id` path parameter of the second request.\n\nSeekret will also assert that the response has the observed status.\n\nTo aid debugging, when a test fails, Seekret will display the data of the requests and responses from the test.\n\n## Deep Dive\n\nThe generated test uses the `seekret` fixture, which returns an instance of the `seekret.apitest.Context` class. The\ntest context allows separating test stages with the `stage` context manager, and sending requests to the target server.\nThe context uses the information from the [run profile](#run-profile) in order to determine the target server, and the\nrequired authorization data.\n\nYou can choose the user for a request with by specifying the `user` parameter in the `request()` call to another user\nfrom the [run profile](#run-profile).\n\n### Setup and teardown\n\nYou can add setup and teardown logic to tests\nusing [pytest fixtures](https://docs.pytest.org/en/stable/fixture.html#fixture). The `seekret` fixture is available for\nuse in function-scoped fixtures for declaring setup stages and logging.\n\nConsider the following example of setup and teardown logic:\n\n```python\nimport pytest\nimport seekret.apitest\n\n\n@pytest.fixture\ndef channel(seekret: seekret.apitest.Context):\n    # Setup stage: happens before the test.\n    with seekret.stage(method='POST', path='/api/channels') as request:\n        response = request(json={\n            'name': 'Test Channel'\n        })\n        assert response.status_code == 201\n\n        channel_id = response.search('json.data.channel.id')\n\n    # Yielding runs the actual test body.\n    # Important! Yield outside of the stage context. Otherwise the test will start in the context of the setup stage.\n    yield channel_id\n\n    # Teardown stage: happens after the test.\n    with seekret.stage(method='DELETE', path='/api/channels/{channel_id}'):\n        response = request(path_params={\n            'channel_id': channel_id\n        })\n        assert response.status_code == 200\n\n\ndef test_post_messages_delete_messages(seekret: seekret.apitest.Context, channel):\n    # The 'channel' parameter has the value yielded from the 'channel' fixture.\n    # In this instance, 'channel' will be the ID of the created channel.\n    ...\n```\n\n### Default user for test\n\nBy default, `request` calls will use the `default` user if another user wasn't provided. You can set the default user\nusing the `default_user` field of the `seekret` value.\n\nSeekret provides the `default_user` test mark in order to specify a different default user for a specific test.\n\n```python\nimport pytest\nimport seekret.apitest\n\n\n@pytest.mark.default_user('non-admin')\ndef test_create_user(seekret: seekret.apitest.Context):\n    with seekret.stage(method='POST', path='/api/users') as request:\n        # Sends the request with the authorization data of the 'non-admin' user.\n        response = request(json={\n            'user_name': '<random name>',\n            'password': '<random password>'\n        })\n        assert response.status_code == 403\n```\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/seek-ret/tests-rtl",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "seekret.apitest",
    "package_url": "https://pypi.org/project/seekret.apitest/",
    "platform": "",
    "project_url": "https://pypi.org/project/seekret.apitest/",
    "project_urls": {
      "Bug Tracker": "https://github.com/seek-ret/tests-rtl/issues",
      "Homepage": "https://github.com/seek-ret/tests-rtl"
    },
    "release_url": "https://pypi.org/project/seekret.apitest/0.3.1/",
    "requires_dist": [
      "requests (<3,>=2)",
      "PyYAML (<6,>=5)",
      "jmespath",
      "pytest (<7,>=6)",
      "pykwalify (~=1.8)"
    ],
    "requires_python": "",
    "summary": "Seekret's library for API testing runtime",
    "version": "0.3.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 10893748,
  "releases": {
    "0.1.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "9e71f448db51bd58987210f490b1e31e46f80fc4da2d0373f9d0eac863363d53",
          "md5": "959310fdf02401af6d02b9619c75bcee",
          "sha256": "05cb4c0715a7a9a4a52e040f80e6db2ac5f6a865427d43f3115ad28933836f5a"
        },
        "downloads": -1,
        "filename": "seekret.apitest-0.1.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "959310fdf02401af6d02b9619c75bcee",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 3564,
        "upload_time": "2021-04-12T08:09:31",
        "upload_time_iso_8601": "2021-04-12T08:09:31.138717Z",
        "url": "https://files.pythonhosted.org/packages/9e/71/f448db51bd58987210f490b1e31e46f80fc4da2d0373f9d0eac863363d53/seekret.apitest-0.1.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "247d2f9263cdf205fcfbf891eb6e8958375c6a292559e10aed24e8335d892a6b",
          "md5": "7b55d036eab2fcc907a052964caae738",
          "sha256": "8e6523577d43d84e566fd4ca7b33a55284e619565c1213eaa25984e2ed4c5c6b"
        },
        "downloads": -1,
        "filename": "seekret.apitest-0.1.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "7b55d036eab2fcc907a052964caae738",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 4225,
        "upload_time": "2021-05-02T15:02:39",
        "upload_time_iso_8601": "2021-05-02T15:02:39.899472Z",
        "url": "https://files.pythonhosted.org/packages/24/7d/2f9263cdf205fcfbf891eb6e8958375c6a292559e10aed24e8335d892a6b/seekret.apitest-0.1.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5950ba536435413f1ddb26f335c66e1da0f2acd347703ef51449f518d370b4cb",
          "md5": "d9db9d4bb67d16d05b50334e961fdbfc",
          "sha256": "9726fa9517b68351234d0a0aa2269675aaa3f69bab51eba02a8af614d69d1b2a"
        },
        "downloads": -1,
        "filename": "seekret.apitest-0.1.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "d9db9d4bb67d16d05b50334e961fdbfc",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 5755,
        "upload_time": "2021-06-16T15:23:13",
        "upload_time_iso_8601": "2021-06-16T15:23:13.895411Z",
        "url": "https://files.pythonhosted.org/packages/59/50/ba536435413f1ddb26f335c66e1da0f2acd347703ef51449f518d370b4cb/seekret.apitest-0.1.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "cafca6a7fd450de039ecd645578e97872ecbf538dfd18f2230387658b015d8c8",
          "md5": "d2d3f5281e74c31c9032d8ff101f71aa",
          "sha256": "d55ef0998d497c1c812c4529277e3f0d6f1c975d17c39d6a29f4e8406ef10972"
        },
        "downloads": -1,
        "filename": "seekret.apitest-0.1.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "d2d3f5281e74c31c9032d8ff101f71aa",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 5770,
        "upload_time": "2021-06-27T07:02:48",
        "upload_time_iso_8601": "2021-06-27T07:02:48.197503Z",
        "url": "https://files.pythonhosted.org/packages/ca/fc/a6a7fd450de039ecd645578e97872ecbf538dfd18f2230387658b015d8c8/seekret.apitest-0.1.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b1e60ae1baebd0b0cdee81dc76cbc8c7bd27c57fefdcb6d6253b6f9405e3d8fa",
          "md5": "9771644de16d05c85efa7bc6b9f15a67",
          "sha256": "b99cda2a68a27af0175c118ffbe5bddac631a9f93bb4bb83d59d755de1a53f20"
        },
        "downloads": -1,
        "filename": "seekret.apitest-0.2.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "9771644de16d05c85efa7bc6b9f15a67",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 8418,
        "upload_time": "2021-06-27T14:31:19",
        "upload_time_iso_8601": "2021-06-27T14:31:19.184380Z",
        "url": "https://files.pythonhosted.org/packages/b1/e6/0ae1baebd0b0cdee81dc76cbc8c7bd27c57fefdcb6d6253b6f9405e3d8fa/seekret.apitest-0.2.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a7dce532d43905a8dff4c278706644eeb4b40224bf0890d81a045f3e5fc238b0",
          "md5": "e4a66c1504f39e08624ed8c361f091d5",
          "sha256": "847f9d83779d199584d7756473137a1e62b68df4c133a4df4e0fab06b5ddd418"
        },
        "downloads": -1,
        "filename": "seekret.apitest-0.3.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "e4a66c1504f39e08624ed8c361f091d5",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 15167,
        "upload_time": "2021-07-12T14:30:06",
        "upload_time_iso_8601": "2021-07-12T14:30:06.252851Z",
        "url": "https://files.pythonhosted.org/packages/a7/dc/e532d43905a8dff4c278706644eeb4b40224bf0890d81a045f3e5fc238b0/seekret.apitest-0.3.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.0.dev0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "027752f4c5b55428842475b2484c6e7b55a49685f5f93693c388af98ae1f56d9",
          "md5": "baafabcba7988a0afb3e8ff74f01c50e",
          "sha256": "556f673a70ffe98be552f6ee62eaa2870d2a88e573f741c70eb6cc988db8679a"
        },
        "downloads": -1,
        "filename": "seekret.apitest-0.3.0.dev0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "baafabcba7988a0afb3e8ff74f01c50e",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 12778,
        "upload_time": "2021-07-01T12:37:43",
        "upload_time_iso_8601": "2021-07-01T12:37:43.226786Z",
        "url": "https://files.pythonhosted.org/packages/02/77/52f4c5b55428842475b2484c6e7b55a49685f5f93693c388af98ae1f56d9/seekret.apitest-0.3.0.dev0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "539aa8b59d1b0503b1e050da07548420545db8c34af0383addfdc52c845d79b4",
          "md5": "11619982188a7c645896796cf530fda0",
          "sha256": "99e3a00d2cb67b99a3c8d78b6c08eb82ae731a8e0f6494da4763ed658469f3be"
        },
        "downloads": -1,
        "filename": "seekret.apitest-0.3.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "11619982188a7c645896796cf530fda0",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 15124,
        "upload_time": "2021-07-13T05:40:09",
        "upload_time_iso_8601": "2021-07-13T05:40:09.685990Z",
        "url": "https://files.pythonhosted.org/packages/53/9a/a8b59d1b0503b1e050da07548420545db8c34af0383addfdc52c845d79b4/seekret.apitest-0.3.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "539aa8b59d1b0503b1e050da07548420545db8c34af0383addfdc52c845d79b4",
        "md5": "11619982188a7c645896796cf530fda0",
        "sha256": "99e3a00d2cb67b99a3c8d78b6c08eb82ae731a8e0f6494da4763ed658469f3be"
      },
      "downloads": -1,
      "filename": "seekret.apitest-0.3.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "11619982188a7c645896796cf530fda0",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 15124,
      "upload_time": "2021-07-13T05:40:09",
      "upload_time_iso_8601": "2021-07-13T05:40:09.685990Z",
      "url": "https://files.pythonhosted.org/packages/53/9a/a8b59d1b0503b1e050da07548420545db8c34af0383addfdc52c845d79b4/seekret.apitest-0.3.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}