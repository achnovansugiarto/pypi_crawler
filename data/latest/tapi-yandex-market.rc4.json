{
  "info": {
    "author": "Pavel Maksimov",
    "author_email": "vur21@ya.ru",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# Python client for [API Yandex Market](https://yandex.ru/dev/metrika/doc/api2/concept/about-docpage/)\r\n\r\n![Supported Python Versions](https://img.shields.io/static/v1?label=python&message=>=3.6&color=green)\r\n[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://raw.githubusercontent.com/vintasoftware/tapioca-wrapper/master/LICENSE)\r\n[![Downloads](https://pepy.tech/badge/tapi-yandex-market)](https://pepy.tech/project/tapi-yandex-market)\r\n<a href=\"https://github.com/psf/black\"><img alt=\"Code style: black\" src=\"https://img.shields.io/badge/code%20style-black-000000.svg\"></a>\r\n\r\n\r\n## Installation\r\n    pip install --upgrade tapi-yandex-market==1.0.3\r\n\r\n\r\n## [API docs](https://yandex.ru/dev/market/partner/doc/dg/concepts/about.html)\r\n\r\n## Documentation\r\n```python\r\nfrom tapi_yandex_market import YandexMarket\r\n\r\nOAUTH_TOKEN = \"{oauth_token}\"\r\nOAUTH_CLIENT_ID = \"{oauth_client_id}\"\r\n\r\nclient = YandexMarket(\r\n    # https://yandex.ru/dev/market/partner/doc/dg/concepts/authorization.html\r\n    oauth_token=OAUTH_TOKEN,\r\n    oauth_client_id=OAUTH_CLIENT_ID,\r\n    # Will retry the request if the request limit is reached.\r\n    retry_if_exceeded_requests_limit=True,\r\n)\r\n```\r\n\r\n### Resource methods\r\n```python\r\nprint(dir(client))\r\n[\r\n    'all_feeds_categories',\r\n    'all_offers',\r\n    'balance',\r\n    'bid_recommendations',\r\n    'bids',\r\n    'bids_settings',\r\n    'campaign',\r\n    'campaign_invoice',\r\n    'campaign_outlets',\r\n    'campaigns',\r\n    'campaigns_by_login',\r\n    'daily_stats',\r\n    'delivery_services_dictionary',\r\n    'feed',\r\n    'feed_categories',\r\n    'feed_index_logs',\r\n    'feed_parameters',\r\n    'feed_refresh',\r\n    'feedback_updates',\r\n    'feeds',\r\n    'geo_region',\r\n    'geo_regions',\r\n    'hidden_offers',\r\n    'invoice',\r\n    'invoice_pay_preview',\r\n    'logins',\r\n    'model',\r\n    'model_offers',\r\n    'models',\r\n    'models_offers',\r\n    'monthly_stats',\r\n    'offer_prices',\r\n    'offers',\r\n    'offers_stats',\r\n    'outlet',\r\n    'outlets',\r\n    'outlets_licenses',\r\n    'quality_check',\r\n    'quality_report',\r\n    'quality_ticket',\r\n    'quality_ticket_fix',\r\n    'quality_tickets',\r\n    'region',\r\n    'region_children',\r\n    'remove_offer_prices',\r\n    'settings',\r\n    'stats',\r\n    'top_market_search',\r\n    'update_offer_prices',\r\n    'weekly_stats'\r\n ]\r\n```\r\n\r\nDetailed resource [information](tapi_yandex_market/resource_mapping.py)\r\n\r\n### API requests\r\n\r\nAPI requests are made using HTTP [methods](https://yandex.ru/dev/market/partner/doc/dg/concepts/method-call.html):\r\n`DELETE`, `GET`, `POST`, `PUT`.\r\n\r\nAn example of an HTTP `GET` request\r\n```python\r\nfrom tapi_yandex_market import YandexMarket\r\n\r\nclient = YandexMarket(...)\r\nresult = client.campaigns().get()\r\n# Raw data.\r\nprint(result.data)\r\n```\r\n\r\nAn example of an HTTP `POST` request\\\r\nResource [documentation](https://yandex.ru/dev/market/partner/doc/dg/reference/post-campaigns-id-feeds-id-params.html)\r\n```python\r\nfrom tapi_yandex_market import YandexMarket\r\n\r\nclient = YandexMarket(...)\r\nbody = {\r\n  \"parameters\":\r\n  [\r\n    {\r\n      \"deleted\": {boolean},\r\n      \"name\": \"{enum}\",\r\n      \"values\":\r\n      [\r\n        {int32},\r\n        ...\r\n      ]\r\n    },\r\n    ...\r\n  ]\r\n}\r\nresult = client.feed_parameters(campaignId=..., feedId=...).post(data=body)\r\n# Raw data.\r\nprint(result.data)\r\n```\r\n\r\nAn example of an HTTP `PUT` request\\\r\nResource [documentation](https://yandex.ru/dev/market/partner/doc/dg/reference/put-campaigns-id-auction-bids.html)\r\n```python\r\nfrom tapi_yandex_market import YandexMarket\r\n\r\nclient = YandexMarket(...)\r\nbody = {\r\n  \"bids\":\r\n  [\r\n    {\r\n      \"feedId\": {int64},\r\n      \"offerId\": \"{string}\",\r\n      \"bid\": {double},\r\n      \"dontPullUpBids\": {boolean}\r\n    },\r\n    ...\r\n  ]\r\n}\r\nresult = client.bids(campaignId=...).put(data=body)\r\n# Raw data.\r\nprint(result.data)\r\n```\r\n\r\nAn example of an HTTP `DELETE` request\\\r\nResource [documentation](https://yandex.ru/dev/market/partner/doc/dg/reference/delete-campaigns-id-outlets-licenses.html)\r\n```python\r\nfrom tapi_yandex_market import YandexMarket\r\n\r\nclient = YandexMarket(...)\r\nresult = client.outlets_licenses(campaignId=...).delete()\r\n# Raw data.\r\nprint(result.data)\r\n```\r\n\r\n### Client response methods\r\n\r\nResult extraction method.\r\n\r\n```python\r\nfrom tapi_yandex_market import YandexMarket\r\n\r\nclient = YandexMarket(...)\r\ncampaign = client.campaign(campaignId=100500).get()\r\n\r\nprint(type(campaign))\r\n# <class 'tapi2.tapi.TapiClient'>\r\nprint(campaign)\r\n# <class 'tapi2.tapi.TapiClient'>\r\n# <TapiClient object\r\n# {   'campaign': {   'clientId': 992161,\r\n#                     'domain': 'lady-xl.ru',\r\n#                     'id': 21033612,\r\n#                     'state': 1}}>\r\nprint(campaign.status_code)\r\n# 200\r\n\r\nprint(campaign.response)\r\n# <Response [200]>\r\n\r\nprint(campaign.request_kwargs)\r\n# {'url': 'https://api.partner.market.yandex.ru/v2/campaigns/100500', 'params': {}, 'headers': {'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'OAuth oauth_token=\"...\", oauth_client_id=\"...\"'}, 'data': None}\r\n\r\nprint(type(campaign.data))\r\n# <class 'dict'>\r\n\r\nprint(campaign.data)\r\n# {'campaign': {'id': 123456789, 'clientId': 100999, 'domain': 'shop100500', 'state': 1}}\r\n\r\nprint(type(campaign[\"campaign\"]))\r\n# <class 'dict'>\r\n\r\nprint(campaign[\"campaign\"])\r\n# {'id': 123456789, 'clientId': 100999, 'domain': 'shop100500', 'state': 1}\r\n```\r\n\r\n### .extract()\r\n\r\nResult extraction method.\r\n\r\n```python\r\nfrom tapi_yandex_market import YandexMarket\r\n\r\nclient = YandexMarket(...)\r\ncampaigns = client.campaigns().get()\r\n\r\nprint(campaigns.data)\r\n# {'pager': {'total': 1, 'from': 1, 'to': 1, 'currentPage': 1, 'pagesCount': 1, 'pageSize': 1}, 'campaigns': [{'id': 21033612, 'clientId': 992161, 'domain': 'lady-xl.ru', 'state': 1}]}\r\n\r\ncampaigns_list = campaigns().extract()\r\n\r\nprint(type(campaigns_list))\r\n# <class 'list'>\r\n\r\nprint(campaigns_list)\r\n# [{'id': 21033612, 'clientId': 992161, 'domain': 'lady-xl.ru', 'state': 1}]\r\n\r\n# Or\r\n\r\nprint(campaigns[\"campaigns\"] == campaigns_list)\r\n# True\r\n\r\n\r\n# Or\r\n\r\nprint(campaigns.data[\"campaigns\"] == campaigns[\"campaigns\"] == campaigns_list)\r\n```\r\n\r\n## Example of exporting statistics\r\nResource [documentation](https://yandex.ru/dev/market/partner/doc/dg/reference/get-campaigns-id-stats-main.html)\r\n```python\r\nimport datetime as dt\r\n\r\nfrom tapi_yandex_market import YandexMarket\r\nfrom tapi_yandex_market.helper import iter_flatten_stats_row\r\n\r\nclient = YandexMarket(...)\r\n\r\ncampaign_id = 100500\r\nparams = dict(\r\n    fromDate=dt.date.today() - dt.timedelta(days=3),\r\n    toDate=dt.date.today(),\r\n    byPlaces=True,\r\n    fields=\"shows,mobile,model\"\r\n)\r\nresult = client.stats(campaignId=campaign_id).get(params=params)\r\ndata = result().extract()\r\n\r\nprint(data[0])\r\n# {'clicks': 282,\r\n# 'date': '2021-09-03',\r\n# 'detailedStats': [{'clicks': 259,\r\n#                 'shows': '1077017',\r\n#                 'spending': 33.37,\r\n#                 'type': 'mobile'}],\r\n# 'placeGroup': 3,\r\n# 'shows': '1409982',\r\n# 'spending': 36.29}\r\n\r\nnew_column_names = {\"clicksMobile\": \"clicks_mobile\"}\r\ndata = list(iter_flatten_stats_row(data, **new_column_names))\r\nprint(data[0])\r\n# {'clicks': 282,\r\n#  'clicks_mobile': 259,\r\n#  'date': '2021-09-03',\r\n#  'placeGroup': 3,\r\n#  'shows': '1409982',\r\n#  'showsMobile': '1077017',\r\n#  'spending': 36.29,\r\n#  'spendingMobile': 33.37}\r\n```\r\n\r\n\r\n## Features\r\n\r\nInformation about the resource.\r\n```python\r\nclient.campaigns().help()\r\n```\r\n\r\nOpen resource documentation\r\n```python\r\nclient.campaigns().open_docs()\r\n```\r\n\r\nSend a request in the browser.\r\n```python\r\nclient.campaigns().open_in_browser()\r\n```\r\n\r\n\r\n## Dependences\r\n- requests\r\n- [tapi_wrapper](https://github.com/pavelmaksimov/tapi-wrapper)\r\n\r\n\r\n## CHANGELOG\r\n### v1.0.3\r\n2021-09-06\r\n- fix iter_flatten_stats_row\r\n\r\n### v1.0.1\r\n2021-09-06\r\n- fix bugs\r\n\r\n## Author\r\nPavel Maksimov\r\n\r\nYou can contact me at\r\n[Телеграм](https://t.me/pavel_maksimow),\r\n[Facebook](https://www.facebook.com/pavel.maksimow)\r\n\r\nGood luck friend! Put an asterisk;)\r\n\r\nУдачи тебе, друг! Поставь звездочку ;)\r\n\r\n\r\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/pavelmaksimov/tapi-yandex-market",
    "keywords": "tapi,yandex,market,api,client,яндекс,маркет,апи",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "tapi-yandex-market",
    "package_url": "https://pypi.org/project/tapi-yandex-market/",
    "platform": "",
    "project_url": "https://pypi.org/project/tapi-yandex-market/",
    "project_urls": {
      "Homepage": "https://github.com/pavelmaksimov/tapi-yandex-market"
    },
    "release_url": "https://pypi.org/project/tapi-yandex-market/1.0.3/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "Python client for API Yandex Market",
    "version": "1.0.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 11376484,
  "releases": {
    "1.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "e0c2567d4ebcd3366140a6815f0cdd6162a9fb33a95d439b237aea2f372dffc6",
          "md5": "1a885f8eccf883585134a359085d1cd5",
          "sha256": "a9ce7e314bd5da249f796ed7eae3dc73efe1e3e5584fd9decb3984302d7f76ca"
        },
        "downloads": -1,
        "filename": "tapi-yandex-market-1.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "1a885f8eccf883585134a359085d1cd5",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 12234,
        "upload_time": "2021-09-05T17:40:31",
        "upload_time_iso_8601": "2021-09-05T17:40:31.241581Z",
        "url": "https://files.pythonhosted.org/packages/e0/c2/567d4ebcd3366140a6815f0cdd6162a9fb33a95d439b237aea2f372dffc6/tapi-yandex-market-1.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4692ab352f437ec4f9a0761d1f42d985220e2ee3a3184c1bab95cf5703ad7339",
          "md5": "1f57ed3a0fa018100bc7e34b7af41df6",
          "sha256": "6c29d223b73388ab7849d3fc2217820360aa207c4ca15382b6c8401940566ccd"
        },
        "downloads": -1,
        "filename": "tapi-yandex-market-1.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "1f57ed3a0fa018100bc7e34b7af41df6",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 14919,
        "upload_time": "2021-09-06T11:22:06",
        "upload_time_iso_8601": "2021-09-06T11:22:06.406802Z",
        "url": "https://files.pythonhosted.org/packages/46/92/ab352f437ec4f9a0761d1f42d985220e2ee3a3184c1bab95cf5703ad7339/tapi-yandex-market-1.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "bff2df41a7fb8a5b7f9589e42a81977512938df38b001067567ec77e404b2de3",
          "md5": "dba4de2599ed0b91265e2cf4ec103f6c",
          "sha256": "368ce8a8c879ddb674d085bc67020d4b3dcb5b3a500ff359c4adea23bb4151f8"
        },
        "downloads": -1,
        "filename": "tapi-yandex-market-1.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "dba4de2599ed0b91265e2cf4ec103f6c",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 15826,
        "upload_time": "2021-09-06T12:27:24",
        "upload_time_iso_8601": "2021-09-06T12:27:24.249336Z",
        "url": "https://files.pythonhosted.org/packages/bf/f2/df41a7fb8a5b7f9589e42a81977512938df38b001067567ec77e404b2de3/tapi-yandex-market-1.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "630e9ae86eff89af04f2f22b7fe4cadc2cc953751135bd32d10ac99e5842a954",
          "md5": "4b6b8b6c0ce70868d58cc13fb7e5b132",
          "sha256": "8f93761c4d2cb73c22fc9c6cc140655afdd1b05deb215a232b46daa26a8263ee"
        },
        "downloads": -1,
        "filename": "tapi-yandex-market-1.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "4b6b8b6c0ce70868d58cc13fb7e5b132",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 15208,
        "upload_time": "2021-09-06T12:35:48",
        "upload_time_iso_8601": "2021-09-06T12:35:48.590779Z",
        "url": "https://files.pythonhosted.org/packages/63/0e/9ae86eff89af04f2f22b7fe4cadc2cc953751135bd32d10ac99e5842a954/tapi-yandex-market-1.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "630e9ae86eff89af04f2f22b7fe4cadc2cc953751135bd32d10ac99e5842a954",
        "md5": "4b6b8b6c0ce70868d58cc13fb7e5b132",
        "sha256": "8f93761c4d2cb73c22fc9c6cc140655afdd1b05deb215a232b46daa26a8263ee"
      },
      "downloads": -1,
      "filename": "tapi-yandex-market-1.0.3.tar.gz",
      "has_sig": false,
      "md5_digest": "4b6b8b6c0ce70868d58cc13fb7e5b132",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 15208,
      "upload_time": "2021-09-06T12:35:48",
      "upload_time_iso_8601": "2021-09-06T12:35:48.590779Z",
      "url": "https://files.pythonhosted.org/packages/63/0e/9ae86eff89af04f2f22b7fe4cadc2cc953751135bd32d10ac99e5842a954/tapi-yandex-market-1.0.3.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}