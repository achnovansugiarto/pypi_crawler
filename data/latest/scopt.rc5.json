{
  "info": {
    "author": "Kanchi Shimono",
    "author_email": "dev.kanchi.shimono@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 3 - Alpha",
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9",
      "Topic :: Scientific/Engineering",
      "Topic :: Utilities"
    ],
    "description": "# scopt\n\n[![Unit test](https://github.com/KanchiShimono/scopt/actions/workflows/test.yml/badge.svg)](https://github.com/KanchiShimono/scopt/actions/workflows/test.yml)\n[![Build Release draft](https://github.com/KanchiShimono/scopt/actions/workflows/release-drafter.yaml/badge.svg)](https://github.com/KanchiShimono/scopt/actions/workflows/release-drafter.yaml)\n\nSpark Config Optimizer calculate optimal cpu cores and memory values for Spark executor and driver.\n\n## Installing\n\nInstall scopt from PyPI via pip.\n\n```sh\npip install scopt\n```\n\n## Usage\n\n### Basic\n\n```python\nfrom scopt import SparkConfOptimizer\nfrom scopt.instances import Instance\n\nexecutor_instance = Instance(32, 250)\nnum_nodes = 10\ndeploy_mode = 'client'\n\nsco = SparkConfOptimizer(executor_instance, num_nodes, deploy_mode)\nprint(sco)\n\n# spark.driver.cores: 5\n# spark.driver.memory: 36g\n# spark.driver.memoryOverhead: 5g\n# spark.executor.cores: 5\n# spark.executor.memory: 36g\n# spark.executor.memoryOverhead: 5g\n# spark.executor.instances: 60\n# spark.default.parallelism: 600\n# spark.sql.shuffle.partitions: 600\n```\n\nCluster mode is also supported.\n\n```python\ndeploy_mode = 'cluster'\n\nsco = SparkConfOptimizer(executor_instance, num_nodes, deploy_mode)\nprint(sco)\n\n# spark.driver.cores: 5\n# spark.driver.memory: 36g\n# spark.driver.memoryOverhead: 5g\n# spark.executor.cores: 5\n# spark.executor.memory: 36g\n# spark.executor.memoryOverhead: 5g\n# spark.executor.instances: 59\n# spark.default.parallelism: 590\n# spark.sql.shuffle.partitions: 590\n```\n\nDifferent instance type for driver node is also supported.\nSpecifying driver instance is enabled only `client mode`.\n\n```python\nexecutor_instance = Instance(32, 250)\ndriver_instance = Instance(4, 30)\ndeploy_mode = 'client'\n\nsco = SparkConfOptimizer(\n    executor_instance,\n    num_nodes,\n    deploy_mode,\n    driver_instance,\n)\nprint(sco)\n\n# spark.driver.cores: 3\n# spark.driver.memory: 26g\n# spark.driver.memoryOverhead: 3g\n# spark.executor.cores: 5\n# spark.executor.memory: 36g\n# spark.executor.memoryOverhead: 5g\n# spark.executor.instances: 60\n# spark.default.parallelism: 600\n# spark.sql.shuffle.partitions: 600\n```\n\n### Dynamic Allocation\n\nFor Spark dynamic allocation mode, you can calculate with `dynamic_allocation` is set `True` (default `False`).\n\n#### Not specify num_nodes\n\nWhen `dynamic_allocation` is `True` and `num_nodes` is `None`, optimizer returns only Spark properties about resources (Not contains about parallelism like `spark.default.parallelism`).\n\n```python\nsco = SparkConfOptimizer(\n    executor_instance,\n    deploy_model=deploy_mode,\n    dynamic_allocation=True,\n)\nprint(sco)\n\n# spark.driver.cores: 3\n# spark.driver.memory: 26g\n# spark.driver.memoryOverhead: 3g\n# spark.executor.cores: 5\n# spark.executor.memory: 36g\n# spark.executor.memoryOverhead: 5g\n```\n\n#### Specify num_nodes\n\nIf `dynamic_allocation` set `True` (default `False`) and specify `num_nodes`, optimizer returns `spark.default.parallelism` and `spark.sql.shuffle.partitions` for when executor nodes reach to num_nodes, but does not return `spark.executor.instances`.\n\n```python\nsco = SparkConfOptimizer(\n    executor_instance,\n    num_nodes,\n    deploy_model=deploy_mode,\n    dynamic_allocation=True,\n)\nprint(sco)\n\n# spark.driver.cores: 3\n# spark.driver.memory: 26g\n# spark.driver.memoryOverhead: 3g\n# spark.executor.cores: 5\n# spark.executor.memory: 36g\n# spark.executor.memoryOverhead: 5g\n# spark.default.parallelism: 600\n# spark.sql.shuffle.partitions: 600\n```\n\n### Predefined Instance\n\nYou can use predefined `Instance` class.\nCurrently supports AWS EC2 instance type.\n\n```python\nfrom scopt.instances.aws import AwsInstanceMap\n\nmapping = AwsInstanceMap()\n\nmapping['r5.4xlarge']\n# Instance(num_cores=16, memory_size=120)\nmapping['p3.8xlarge']\n# Instance(num_cores=4, memory_size=236)\n```\n\n### Set properties to SparkConf\n\nYou can set properties to SparkConf directory via `as_list` method.\n\n```python\nfrom pyspark import SparkConf\nfrom scopt import SparkConfOptimizer\nfrom scopt.instances import Instance\n\nexecutor_instance = Instance(32, 250)\nnum_nodes = 10\ndeploy_mode = 'client'\n\nsco = SparkConfOptimizer(executor_instance, num_nodes, deploy_mode)\n\nconf = SparkConf()\nprint(conf.getAll())\n# Property has not be set yet.\n# dict_items([])\n\nconf.setAll(sco.as_list())\n# dict_items([\n#     ('spark.driver.cores', '5'),\n#     ('spark.driver.memory', '36g'),\n#     ('spark.driver.memoryOverhead', '5g'),\n#     ('spark.executor.cores', '5'),\n#     ('spark.executor.memory', '36g'),\n#     ('spark.executor.memoryOverhead', '5g'),\n#     ('spark.executor.instances', '60'),\n#     ('spark.default.parallelism', '600'),\n#     ('spark.sql.shuffle.partitions', '600')\n# ])\n```\n\n## Reference\n\n- [Best practices for successfully managing memory for Apache Spark applications on Amazon EMR](https://aws.amazon.com/jp/blogs/big-data/best-practices-for-successfully-managing-memory-for-apache-spark-applications-on-amazon-emr/)\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/KanchiShimono/scopt",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "scopt",
    "package_url": "https://pypi.org/project/scopt/",
    "platform": null,
    "project_url": "https://pypi.org/project/scopt/",
    "project_urls": {
      "Homepage": "https://github.com/KanchiShimono/scopt"
    },
    "release_url": "https://pypi.org/project/scopt/0.0.5/",
    "requires_dist": [
      "wheel ; extra == 'build'",
      "twine ; extra == 'build'",
      "beautifulsoup4 ; extra == 'build'",
      "mypy ; extra == 'test'",
      "flake8 ; extra == 'test'",
      "black ; extra == 'test'",
      "isort ; extra == 'test'",
      "pytest ; extra == 'test'"
    ],
    "requires_python": ">=3.8.0",
    "summary": "Calculate optimized properties of Spark configuration",
    "version": "0.0.5",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 13386358,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "062530bfa09ed403e707893022483498dc33876167013162399ceb694fe0b07b",
          "md5": "ca2d2e321bb0ffcfea3bc6d08eca1b09",
          "sha256": "ac6c38f68c183a9fcac15a18baedb812a5b496884f03eb35af080553da45f695"
        },
        "downloads": -1,
        "filename": "scopt-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "ca2d2e321bb0ffcfea3bc6d08eca1b09",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8.0",
        "size": 6379,
        "upload_time": "2021-06-10T08:54:48",
        "upload_time_iso_8601": "2021-06-10T08:54:48.929676Z",
        "url": "https://files.pythonhosted.org/packages/06/25/30bfa09ed403e707893022483498dc33876167013162399ceb694fe0b07b/scopt-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "40cd36d75b18360d632221083538a8f96ebb080d7fe9ce1eef6bc3fb4e734f3b",
          "md5": "a9e56653c6bd9da298d980ff63e00925",
          "sha256": "00f49fdcf7934b577b881ade7722675875427f870d14519371acb3db7171e19c"
        },
        "downloads": -1,
        "filename": "scopt-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "a9e56653c6bd9da298d980ff63e00925",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8.0",
        "size": 6364,
        "upload_time": "2021-06-10T08:54:50",
        "upload_time_iso_8601": "2021-06-10T08:54:50.683949Z",
        "url": "https://files.pythonhosted.org/packages/40/cd/36d75b18360d632221083538a8f96ebb080d7fe9ce1eef6bc3fb4e734f3b/scopt-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ef8e39c2fc0a53da1a0158db3d2470c291755224299757e756afb73a5a88d83b",
          "md5": "d6153cc522e86ae848375d5335845ce4",
          "sha256": "d5bab7615ec2ff64f933feb9149e9cb445e55b03f5958163b56228b5b54ba51a"
        },
        "downloads": -1,
        "filename": "scopt-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "d6153cc522e86ae848375d5335845ce4",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8.0",
        "size": 6931,
        "upload_time": "2021-07-11T22:59:55",
        "upload_time_iso_8601": "2021-07-11T22:59:55.974908Z",
        "url": "https://files.pythonhosted.org/packages/ef/8e/39c2fc0a53da1a0158db3d2470c291755224299757e756afb73a5a88d83b/scopt-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ed69598021e6cf71d962c703423805d6a3946cc41d0e334743f3ed9c2ed9e7b9",
          "md5": "88c32e71cb3773d6120d256d083fecb6",
          "sha256": "c6c57c4d45b5d2c043efb1414981ed181cc390f03ac43af4832c9cfd990ef682"
        },
        "downloads": -1,
        "filename": "scopt-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "88c32e71cb3773d6120d256d083fecb6",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8.0",
        "size": 7724,
        "upload_time": "2021-07-11T22:59:58",
        "upload_time_iso_8601": "2021-07-11T22:59:58.395884Z",
        "url": "https://files.pythonhosted.org/packages/ed/69/598021e6cf71d962c703423805d6a3946cc41d0e334743f3ed9c2ed9e7b9/scopt-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "01f044d1e67d0fcf5c55c4cf596d3f3bb8930a8432a1fbbd6be39a444f12e015",
          "md5": "ffe7b5e7741d1fe3f1216f12950c7ca8",
          "sha256": "119befc91e844385c3de415aea168f010be057c4199478ceda71f2828bff2de4"
        },
        "downloads": -1,
        "filename": "scopt-0.0.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "ffe7b5e7741d1fe3f1216f12950c7ca8",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8.0",
        "size": 8189,
        "upload_time": "2021-07-15T10:51:02",
        "upload_time_iso_8601": "2021-07-15T10:51:02.970777Z",
        "url": "https://files.pythonhosted.org/packages/01/f0/44d1e67d0fcf5c55c4cf596d3f3bb8930a8432a1fbbd6be39a444f12e015/scopt-0.0.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c720dffc7ce7e905e5ae905be59f23e0e8358b5916e1f77a7f043723920d87c1",
          "md5": "544124c7fb50a851493f365793bacb8f",
          "sha256": "e83101e2e5746d4737f138f189fe3852b1c6a9e3904f81f17bfab3e51c18fabe"
        },
        "downloads": -1,
        "filename": "scopt-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "544124c7fb50a851493f365793bacb8f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8.0",
        "size": 9016,
        "upload_time": "2021-07-15T10:51:05",
        "upload_time_iso_8601": "2021-07-15T10:51:05.196579Z",
        "url": "https://files.pythonhosted.org/packages/c7/20/dffc7ce7e905e5ae905be59f23e0e8358b5916e1f77a7f043723920d87c1/scopt-0.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6dbf5006e8a7373731b660d19f663c791952a9f951fc32e83d808459dee5bd67",
          "md5": "2d289d1abeaff4f66566958c95903a8c",
          "sha256": "912a7c154cd27aa15304662a6c97ba24ac9867c19755252c5d1563d339ef418e"
        },
        "downloads": -1,
        "filename": "scopt-0.0.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "2d289d1abeaff4f66566958c95903a8c",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8.0",
        "size": 8927,
        "upload_time": "2021-10-10T10:12:43",
        "upload_time_iso_8601": "2021-10-10T10:12:43.785437Z",
        "url": "https://files.pythonhosted.org/packages/6d/bf/5006e8a7373731b660d19f663c791952a9f951fc32e83d808459dee5bd67/scopt-0.0.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8f0ba238da209c410fb705b9f2021985f02214f252dc23670e791f8bf5023382",
          "md5": "402b87e7e620d3cb8d18798ba9d93abb",
          "sha256": "a55f56d17205ddb4ccb80f0951163121372c3e732e715dd4f688f9c4cf7d3617"
        },
        "downloads": -1,
        "filename": "scopt-0.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "402b87e7e620d3cb8d18798ba9d93abb",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8.0",
        "size": 9199,
        "upload_time": "2021-10-10T10:12:45",
        "upload_time_iso_8601": "2021-10-10T10:12:45.309591Z",
        "url": "https://files.pythonhosted.org/packages/8f/0b/a238da209c410fb705b9f2021985f02214f252dc23670e791f8bf5023382/scopt-0.0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2d7604bba06ffc152c65a58567d5b8ee154d5cb2ffeed5a7dc0e06fe94069842",
          "md5": "6b1ed5a6e6f3e3a4132a02ff91022f06",
          "sha256": "89cdedc57acff495bf8ee83c834f1c8891dfd99681c4b4a7a1222db073b7e984"
        },
        "downloads": -1,
        "filename": "scopt-0.0.5-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "6b1ed5a6e6f3e3a4132a02ff91022f06",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8.0",
        "size": 8939,
        "upload_time": "2022-04-02T21:35:35",
        "upload_time_iso_8601": "2022-04-02T21:35:35.214810Z",
        "url": "https://files.pythonhosted.org/packages/2d/76/04bba06ffc152c65a58567d5b8ee154d5cb2ffeed5a7dc0e06fe94069842/scopt-0.0.5-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "93462959268f8bf959273e828112ab2c94fc56ec52fd2f15457a985fe506bd73",
          "md5": "fe09dfc445756886054274cfd9d5f890",
          "sha256": "594a63ee1d87bb87b8871d89684ab66f551b1cf4a0da00ce94443255834732d4"
        },
        "downloads": -1,
        "filename": "scopt-0.0.5.tar.gz",
        "has_sig": false,
        "md5_digest": "fe09dfc445756886054274cfd9d5f890",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8.0",
        "size": 9865,
        "upload_time": "2022-04-02T21:35:37",
        "upload_time_iso_8601": "2022-04-02T21:35:37.112733Z",
        "url": "https://files.pythonhosted.org/packages/93/46/2959268f8bf959273e828112ab2c94fc56ec52fd2f15457a985fe506bd73/scopt-0.0.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "2d7604bba06ffc152c65a58567d5b8ee154d5cb2ffeed5a7dc0e06fe94069842",
        "md5": "6b1ed5a6e6f3e3a4132a02ff91022f06",
        "sha256": "89cdedc57acff495bf8ee83c834f1c8891dfd99681c4b4a7a1222db073b7e984"
      },
      "downloads": -1,
      "filename": "scopt-0.0.5-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "6b1ed5a6e6f3e3a4132a02ff91022f06",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.8.0",
      "size": 8939,
      "upload_time": "2022-04-02T21:35:35",
      "upload_time_iso_8601": "2022-04-02T21:35:35.214810Z",
      "url": "https://files.pythonhosted.org/packages/2d/76/04bba06ffc152c65a58567d5b8ee154d5cb2ffeed5a7dc0e06fe94069842/scopt-0.0.5-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "93462959268f8bf959273e828112ab2c94fc56ec52fd2f15457a985fe506bd73",
        "md5": "fe09dfc445756886054274cfd9d5f890",
        "sha256": "594a63ee1d87bb87b8871d89684ab66f551b1cf4a0da00ce94443255834732d4"
      },
      "downloads": -1,
      "filename": "scopt-0.0.5.tar.gz",
      "has_sig": false,
      "md5_digest": "fe09dfc445756886054274cfd9d5f890",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.8.0",
      "size": 9865,
      "upload_time": "2022-04-02T21:35:37",
      "upload_time_iso_8601": "2022-04-02T21:35:37.112733Z",
      "url": "https://files.pythonhosted.org/packages/93/46/2959268f8bf959273e828112ab2c94fc56ec52fd2f15457a985fe506bd73/scopt-0.0.5.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}