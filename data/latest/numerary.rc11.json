{
  "info": {
    "author": "Matt Bogosian",
    "author_email": "matt@bogosian.net",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Intended Audience :: Developers",
      "Intended Audience :: Education",
      "Intended Audience :: Science/Research",
      "License :: OSI Approved :: MIT License",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.11",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9",
      "Programming Language :: Python :: Implementation :: CPython",
      "Programming Language :: Python :: Implementation :: PyPy",
      "Topic :: Education",
      "Topic :: Scientific/Engineering :: Mathematics",
      "Topic :: Software Development :: Libraries :: Python Modules",
      "Typing :: Typed"
    ],
    "description": "<!---\n  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n  !!!!!!!!!!!!!!! IMPORTANT: READ THIS BEFORE EDITING! !!!!!!!!!!!!!!!\n  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n  Please keep each sentence on its own unwrapped line.\n  It looks like crap in a text editor, but it has no effect on rendering, and it allows much more useful diffs.\n  Thank you!\n\n  WARNING: THIS DOCUMENT MUST BE SELF-CONTAINED.\n  ALL LINKS MUST BE ABSOLUTE.\n  This file is used on GitHub and PyPi (via setup.cfg).\n  There is no guarantee that other docs/resources will be available where this content is displayed.\n-->\n\n*Copyright and other protections apply.\nPlease see the accompanying ``LICENSE`` file for rights and restrictions governing use of this software.\nAll rights not expressly waived or licensed are reserved.\nIf that file is missing or appears to be modified from its original, then please contact the author before viewing or using this software in any capacity.*\n\n[![Tests](https://github.com/posita/numerary/actions/workflows/on-push.yaml/badge.svg)](https://github.com/posita/numerary/actions/workflows/on-push.yaml)\n[![Version](https://img.shields.io/pypi/v/numerary/0.4.3.svg)](https://pypi.org/project/numerary/0.4.3/)\n[![Development Stage](https://img.shields.io/pypi/status/numerary/0.4.3.svg)](https://pypi.org/project/numerary/0.4.3/)\n[![License](https://img.shields.io/pypi/l/numerary/0.4.3.svg)](http://opensource.org/licenses/MIT)\n[![Supported Python Versions](https://img.shields.io/pypi/pyversions/numerary/0.4.3.svg)](https://pypi.org/project/numerary/0.4.3/)\n[![Supported Python Implementations](https://img.shields.io/pypi/implementation/numerary/0.4.3.svg)](https://pypi.org/project/numerary/0.4.3/)\n[![pre-commit](https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit&logoColor=white)](https://github.com/pre-commit/pre-commit)\n[![Bear-ified™](https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg)](https://beartype.rtfd.io/)\n\nAre you defining a numeric interface that should work with more than just ``int``s and ``float``s?\nAre you annotating that interface for documentation *and* type-checking?\nWere you excited by [PEP 3141](https://www.python.org/dev/peps/pep-3141/)’s glitz and gloss promising a clean, straightforward number type definition mechanism, only to learn the hard way—after many hours of searching, tweaking, hacking, and testing ever more convoluted code, again and again—that you could’t actually make it work with Python’s type-checking system?\nDo you now wonder whether numbers were something new to computing in general because nothing else would explain such a gaping hole in a programming language so popular with the STEM crowd that has been around since the early 1990s?\nDoes the number [3186](https://github.com/python/mypy/issues/3186) haunt you in your dreams?\nDo you find yourself shouting to no one in particular, “There *has* to be a better way?”\n\nWell I’m here to tell you there isn’t.\nBut until there is, there’s …\n\n# *``numerary``—Now with Protocol Power™*\n\nThat’s right!\n\nFor a hopefully limited time, you too can benefit from someone else’s deranged work-arounds for the enormous chasms in Python that lie between the esoteric fields of computation that are “typing” and “numbers” instead of having to roll your own ~~out of sheer desperation~~ *from first principles*!\nIf you still have no idea what I’m talking about, [this may help illustrate](https://posita.github.io/numerary/0.4/whytho/).\n\n``numerary`` is a pure-Python codified rant for signaling that your interface is usable with non-native numeric primitives[^1] without breaking type-checking.\nMore simply, ``numerary`` aspires to a world where numbers and types can work together.\n\nIf you’re thinking that you shouldn’t need a 🤬ing library for that, *you’re right*.\n\n[^1]:\n\n    You know, *super* weird, off-the-wall shit, like members of the [numeric tower](https://docs.python.org/3/library/numbers.html), or [standard library primitives that remain *non*-members for some 🤬ed up reason](https://docs.python.org/3/library/decimal.html), or [legitimate non-members because they predate PEP 3141 and conforming would amount to breaking changes](https://trac.sagemath.org/ticket/28234), or—I don’t know—oodles of libraries and applications that have been around for literally decades that bring huge value to vast scientific and mathematic audiences, but whose number primitives break type-checking if one abides by the ubiquitous bum steer, “I don’t have any experience trying to do what you’re doing, but just use ``float``, bro.”\n\n    Because, hey, *🤬* numbers!\n    Am I right?\n\nThis madness should enjoy no audience.\nIt should not exist.\nYet here we are.\nIts author gauges its success by how quickly it can be forgotten, relegated to the annals of superfluous folly.\n\n``numerary`` is licensed under the [MIT License](https://opensource.org/licenses/MIT).\nSee the accompanying ``LICENSE`` file for details.\nIt should be considered experimental for now, but should settle down quickly.\nSee the [release notes](https://posita.github.io/numerary/0.4/notes/) for a summary of version-to-version changes.\nSource code is [available on GitHub](https://github.com/posita/numerary).\n\nIf you find it lacking in any way, please don’t hesitate to [bring it to my attention](https://posita.github.io/numerary/0.4/contrib/).\n\n## You had me at, “numbers and types can work together”\n\n``numerary`` strives to define composable, *efficient* protocols that one can use to construct numeric requirements.\nIf all you deal with are integrals and reals, and what you want is broad arithmetic operator compatibility, this will probably get you where you likely want to go:\n\n``` python\n>>> from numerary import IntegralLike, RealLike\n\n>>> def deeper_thot(arg: RealLike) -> IntegralLike:\n...   assert arg != 0 and arg ** 0 == 1\n...   return arg // arg + 42\n\n```\n\nBeyond default compositions for common use cases, ``numerary`` expands on the [``Supports`` pattern](https://docs.python.org/3/library/typing.html#protocols ) used in the standard library.\nFor example, ``numerary.types.SupportsIntegralOps`` is a [``@typing.runtime_checkable``](https://docs.python.org/3/library/typing.html#typing.runtime_checkable) protocol that approximates the unary and binary operators introduced by [``numbers.Integral``](https://docs.python.org/3/library/numbers.html#numbers.Integral).\n\n``` python\n>>> from numerary.types import SupportsIntegralOps\n\n>>> def shift_right_one(arg: SupportsIntegralOps) -> SupportsIntegralOps:\n...   assert isinstance(arg, SupportsIntegralOps)\n...   return arg >> 1\n\n>>> shift_right_one(2)\n1\n\n>>> from sympy import sympify\n>>> two = sympify(\"2\") ; type(two)\n<class 'sympy.core.numbers.Integer'>\n>>> res = shift_right_one(two) ; res\n1\n>>> type(res)\n<class 'sympy.core.numbers.One'>\n\n>>> from fractions import Fraction\n>>> shift_right_one(Fraction(1, 2))  # type: ignore [arg-type]  # properly caught by Mypy\nTraceback (most recent call last):\n  ...\nAssertionError\n\n```\n\n!!! note\n\n    Until 1.9, ``sympy.Integer`` [lacked the requisite bitwise operators](https://github.com/sympy/sympy/issues/19311).\n    ``numerary`` catches that!\n    The above properly results in both a type-checking error as well as a runtime failure for [SymPy](https://www.sympy.org/) versions prior to 1.9.\n\n ``numerary``’s ``Supports`` protocols can be composed to refine requirements.\nFor example, let’s say one wanted to ensure type compatibility with primitives that support both ``__abs__`` and ``__divmod__``.\n\n``` python\n>>> from typing import TypeVar\n>>> T_co = TypeVar(\"T_co\", covariant=True)\n>>> from numerary.types import (\n...   CachingProtocolMeta, Protocol, runtime_checkable,\n...   SupportsAbs, SupportsDivmod,\n... )\n\n>>> @runtime_checkable\n... class MyType(\n...   SupportsAbs[T_co], SupportsDivmod[T_co],\n...   Protocol, metaclass=CachingProtocolMeta,\n... ):\n...   pass\n\n>>> my_type: MyType\n\n>>> my_type = 3.5\n>>> isinstance(my_type, MyType)\nTrue\n>>> abs(my_type)\n3.5\n>>> divmod(my_type, 2)\n(1.0, 1.5)\n\n>>> from fractions import Fraction\n>>> my_type = Fraction(22, 7)\n>>> isinstance(my_type, MyType)\nTrue\n>>> abs(my_type)\nFraction(22, 7)\n>>> divmod(my_type, 2)\n(1, Fraction(8, 7))\n\n>>> from decimal import Decimal\n>>> my_type = Decimal(\"5.2\")\n>>> isinstance(my_type, MyType)\nTrue\n>>> abs(my_type)\nDecimal('5.2')\n>>> divmod(my_type, 2)\n(Decimal('2'), Decimal('1.2'))\n\n>>> my_type = \"nope\"  # type: ignore [assignment]  # properly caught by Mypy\n>>> isinstance(my_type, MyType)\nFalse\n\n```\n\nRemember that scandal where [``complex`` defined exception-throwing comparators it wasn’t supposed to have, which confused runtime protocol checking, and then its type definitions lied about it to cover it up](https://posita.github.io/numerary/0.4/whytho/#lies-upon-lies-upon-lies-all-the-way-down)?\nYeah, that shit ends *here*.\n\n``` python\n>>> from numerary.types import SupportsRealOps\n>>> isinstance(1.0, SupportsRealOps)  # all good\nTrue\n>>> has_real_ops: SupportsRealOps = complex(1)  # type: ignore [assignment]  # properly caught by Mypy\n>>> isinstance(complex(1), SupportsRealOps)  # you're not fooling anyone, buddy\nFalse\n\n```\n\n``numerary`` not only caches runtime protocol evaluations, but allows overriding those evaluations when the default machinery gets it wrong.\n\n``` python\n>>> from abc import abstractmethod\n>>> from numerary.types import CachingProtocolMeta, Protocol, runtime_checkable\n\n>>> @runtime_checkable\n... class MySupportsOne(Protocol, metaclass=CachingProtocolMeta):\n...   @abstractmethod\n...   def one(self) -> int:\n...     pass\n\n>>> class Imposter:\n...   def one(self) -> str:\n...     return \"one\"\n\n>>> imp: MySupportsOne = Imposter()  # type: ignore [assignment]  # properly caught by Mypy\n>>> isinstance(imp, MySupportsOne)  # fool me once, shame on you ...\nTrue\n\n>>> MySupportsOne.excludes(Imposter)\n>>> isinstance(imp, MySupportsOne)  # ... can't get fooled again\nFalse\n\n```\n\n``numerary`` has default overrides to correct for known oddities with native types (like our old friend, ``complex``) and with popular libraries like [``numpy``](https://numpy.org/)[^2] and [``sympy``](https://www.sympy.org/).\nOthers will be added as they are identified.\nIf I’ve missed any, or if you would like ``numerary`` to support additional number implementations out of the box, please [let me know](https://posita.github.io/numerary/0.4/contrib/#starting-discussions-and-filing-issues).\n\n[^2]:\n\n    !!! bug\n\n        `numpy` no longer validates on assignment as it once did.\n        See [posita/numerary#16](https://github.com/posita/numerary/issues/16) for details.\n\n## Performance Enhanced Protocols—A *different* kind of “PEP” for your step\n\nBy default, [protocols frustrate runtime type-checking performance](https://bugs.python.org/issue30505).\n\n[A lot.](https://posita.github.io/numerary/0.4/whytho/#puh-roh-tih-caaahhhlllz)\n\n``numerary`` applies two distinct, layered optimization strategies:\n\n1. Cached ``__instancecheck__`` results for ``numerary``-defined protocols; and\n2. Optional(-ish) short-circuit type enumerations.\n\n### Cached ``__instancecheck__`` results\n\nTo understand why ``numerary`` protocols are faster for runtime checks, it helps to understand why non-``numerary`` protocols are so slow.\nAt runtime (i.e., via ``isinstance``), the [default ``Protocol`` implementation](https://github.com/python/cpython/blob/main/Lib/typing.py) delegates to ``type(Protocol).__instancecheck__`` to perform a crude comparison of an instance’s callable attributes against the protocol’s.\nMore attributes means more comparisons.\nFurther, it performs these comparisons … Every. Single. 🤬ing. Time.\n\nProtocols provided by ``numerary`` use instead [``CachingProtocolMeta``](https://posita.github.io/numerary/0.4/numerary.types/#numerary.types.CachingProtocolMeta) as their meta class.\n``CachingProtocolMeta`` derives from ``type(beartype.typing.Protocol)`` which caches results based on instance type.\n``numerary``’s version allows for runtime check overrides of those results.\n\nConceptually:\n\n``` python\n>>> isinstance(1, SupportsIntegralOps)  # first check for an int is delegated to type(Protocol).__instancecheck__\nTrue\n>>> isinstance(2, SupportsIntegralOps)  # cached result\nTrue\n>>> isinstance(1.0, SupportsIntegralOps)  # the first check for a float is delegated to type(Protocol).__instancecheck__\nFalse\n>>> isinstance(2.0, SupportsIntegralOps)  # cached result\nFalse\n\n```\n\nThese offer significant performance improvements, especially where protocols define many methods.\n\n``` python\n--8<-- \"docs/perf_supports_complex.txt\"\n```\n\n<details>\n<summary>Source: <a href=\"https://github.com/posita/numerary/blob/v0.4.3/docs/perf_supports_complex.ipy\"><code>perf_supports_complex.ipy</code></a></summary>\n\n``` python\n--8<-- \"docs/perf_supports_complex.ipy\"\n```\n</details>\n\n### ``Union``s for inclusion\n\nSometimes we might want types that don’t comply with protocol definitions to validate anyway (e.g., because we know they will work at runtime).\nFor example, ``float``s in Python versions prior to 3.9 officially lacked ``__floor__`` and ``__ceil__`` methods, but were registered with the numeric tower and worked just fine with ``math.floor`` and ``math.ceil``.\n\nHow does ``numerary``’s [``SupportsFloorCeil``](https://posita.github.io/numerary/0.4/numerary.types/#numerary.types.SupportsFloorCeil) deal with this situation?\nNot very well, unfortunately, at least not on its own.\n\n``` python\n>>> import math, sys\n>>> from numerary.types import SupportsFloorCeil\n\n>>> def my_dumb_floor_func(arg: SupportsFloorCeil) -> int:\n...   assert isinstance(arg, SupportsFloorCeil)  # will work, even for floats, thanks to default overrides\n...   return math.floor(arg)  # type: ignore [arg-type]  # doesn't understand SupportsFloorCeil\n\n>>> float_val: float = 1.6180339887\n>>> # For illustration only until <https://github.com/python/mypy/issues/5940> is fixed\n>>> if sys.version_info < (3, 9):\n...   my_dumb_floor_func(float_val)  # type: ignore [arg-type]  # still results in a Mypy error for Python version <3.9\n... else:\n...   my_dumb_floor_func(float_val)  # validates\n1\n\n```\n\n``Union``s allow a work-around.\n\n``` python\n>>> from typing import Union\n>>> from numerary.types import SupportsFloorCeil, __floor__\n>>> SupportsFloorCeilU = Union[float, SupportsFloorCeil]\n\n>>> import sys\n>>> def my_floor_func(arg: SupportsFloorCeilU) -> int:\n...   assert isinstance(arg, SupportsFloorCeil)\n...   return __floor__(arg)\n\n>>> my_floor_func(float(1.2))  # works in 3.8+\n1\n\n```\n\nThis is largely a contrived example, since ``math.floor`` and ``math.ceil`` happily accept ``SupportsFloat``, but it is useful for illustration.\n\n### Limitations\n\nThere are some downsides, though.\n(Aren’t there always?)\n\n#### Sometimes protocols are too trusting\n\nProtocols trust numeric tower registrations.\n*TODO(@posita): Is this really true?*\nBut sometimes, out there in the real world, implementations *lie*.\n\nConsider:\n\n``` python\n>>> from numbers import Integral\n>>> hasattr(Integral, \"real\") and hasattr(Integral, \"imag\")\nTrue\n>>> import sympy\n>>> pants_on_fire = sympy.Integer(1)\n>>> isinstance(pants_on_fire, Integral)\nTrue\n>>> hasattr(pants_on_fire, \"real\") or hasattr(pants_on_fire, \"imag\")  # somebody's tellin' stories\nFalse\n>>> from numerary.types import SupportsRealImag\n>>> real_imag: SupportsRealImag = pants_on_fire  # fails to detect the lie\n>>> real_imag.real\nTraceback (most recent call last):\n  ...\nAttributeError: 'One' object has no attribute 'real'\n\n```\n\nIn this particular case, ``numerary`` provides us with a defensive mechanism.\n\n``` python\n>>> from numerary.types import SupportsRealImagMixedU, real, imag\n>>> real_imag_defense: SupportsRealImagMixedU = pants_on_fire\n>>> real(real_imag_defense)\n1\n>>> imag(real_imag)\n0\n\n```\n\n#### Protocols loses fidelity during runtime checking\n\nAt runtime, protocols match *names*, not *signatures*.\nFor example, [``SupportsNumeratorDenominator``](https://posita.github.io/numerary/0.4/numerary.types/#numerary.types.SupportsNumeratorDenominator)’s  ``numerator`` and ``denominator`` *properties* will match [``sage.rings.integer.Integer``](https://doc.sagemath.org/html/en/reference/rings_standard/sage/rings/integer.html#sage.rings.integer.Integer)’s similarly named *[functions](https://trac.sagemath.org/ticket/28234)*.\nIn other words, ``isinstance(sage_integer, SupportsNumeratorDenominator)`` will return ``True``.\nFurther, if the short-circuiting approach is used, because ``sage.rings.integer.Integer`` registers itself with the numeric tower, this *may*[^3] not be caught by Mypy.\n\n[^3]:\n\n    I say *may* because I don’t really understand how Sage’s number registrations work.\n\n``` python\n>>> class SageLikeRational:\n...   def __init__(self, numerator: int, denominator: int = 1):\n...     self._numerator = numerator\n...     self._denominator = denominator\n...   def numerator(self) -> int:\n...     return self._numerator\n...   def denominator(self) -> int:\n...     return self._denominator\n\n>>> from numerary.types import SupportsNumeratorDenominator\n>>> frac: SupportsNumeratorDenominator = Fraction(29, 3)  # no typing error\n>>> sage_rational1: SupportsNumeratorDenominator = SageLikeRational(29, 3)  # type: ignore [assignment]  # Mypy catches this\n>>> isinstance(sage_rational1, SupportsNumeratorDenominator)  # isinstance does not\nTrue\n>>> sage_rational1.numerator\n<...method...numerator...>\n>>> frac.numerator\n29\n\n```\n\nKnown warts *could* be cured by cache overriding as discussed above.\nHowever, to combat this particular situation, ``numerary`` provides an alternative: the [``SupportsNumeratorDenominatorMethods``](https://posita.github.io/numerary/0.4/numerary.types/#numerary.types.SupportsNumeratorDenominatorMethods) protocol and the [``numerator``](https://posita.github.io/numerary/0.4/numerary.types/#numerary.types.numerator) and [``denominator``](https://posita.github.io/numerary/0.4/numerary.types/#numerary.types.denominator) helper functions.\nThese accommodate rational implementations like Sage’s that are mostly compliant with the exception of their respective ``numerator`` and ``denominator`` implementations.\n\n``` python\n>>> from numerary.types import numerator\n>>> numerator(sage_rational1)\n29\n>>> numerator(frac)\n29\n\n>>> from numerary.types import SupportsNumeratorDenominatorMethods, numerator\n>>> sage_rational2: SupportsNumeratorDenominatorMethods = SageLikeRational(3, 29)  # no type error\n>>> numerator(sage_rational2)\n3\n\n```\n\n``numerary`` also defines:\n\n``` python\nSupportsNumeratorDenominatorMixedU = Union[\n    SupportsNumeratorDenominator,\n    SupportsNumeratorDenominatorMethods,\n]\nSupportsNumeratorDenominatorMixedT = (\n    SupportsNumeratorDenominator,\n    SupportsNumeratorDenominatorMethods,\n)\n```\n\n``` python\n>>> from numerary.types import SupportsNumeratorDenominatorMixedU, numerator\n>>> chimera_rational: SupportsNumeratorDenominatorMixedU\n>>> chimera_rational = Fraction(29, 3)  # no type error\n>>> numerator(chimera_rational)\n29\n>>> chimera_rational = SageLikeRational(3, 29)  # still no type error\n>>> numerator(chimera_rational)\n3\n\n```\n\nThe ``SupportsNumeratorDenominator*`` primitives provide the basis for analogous [``numerary.types.RationalLike*`` primitives](https://posita.github.io/numerary/0.4/numerary.types/#numerary.types.RationalLikeMethods), which *should* provide sufficient (if idiosyncratic) coverage for dealing with (seemingly mis-appropriately named) rationals.\n\n#### Pass-through caching with composition is pretty sketchy\n\nThis is really getting into where the sausage is made, but full transparency is important, because ``CachingProtocolMeta`` does change how protocols are validated at runtime.\n\nLet’s say we register an errant implementation as non-compliant using the [``CachingProtocolMeta.excludes``method](https://posita.github.io/numerary/0.4/numerary.types/#numerary.types.CachingProtocolMeta.excludes).\n\n``` python\n>>> from numerary.types import SupportsFloat\n\n>>> class FloatImposter:\n...   def __float__(self) -> float:\n...     raise NotImplementedError(\"Haha! JK! @#$% you!\")\n...   def __int__(self) -> int:\n...     return 42\n\n>>> float_imp = FloatImposter()\n>>> isinstance(float_imp, SupportsFloat)\nTrue\n>>> SupportsFloat.excludes(FloatImposter)\n>>> isinstance(float_imp, SupportsFloat)\nFalse\n\n```\n\nFor registration to be ergonomic, it should be indelible, survive composition, and afford preference to subsequent overrides by inheritors.\n\n``` python\n>>> from numerary.types import (\n...   CachingProtocolMeta, Protocol, runtime_checkable,\n...   SupportsInt,\n... )\n\n>>> @runtime_checkable\n... class MySupportsFloatInt(\n...   SupportsFloat, SupportsInt,\n...   Protocol,\n... ):\n...   pass\n\n>>> isinstance(float_imp, MySupportsFloatInt)  # composition picks up override from base\nFalse\n\n>>> SupportsFloat.reset_for(FloatImposter)  # base resets override\n>>> isinstance(float_imp, SupportsFloat)\nTrue\n>>> isinstance(float_imp, MySupportsFloatInt)  # picks up base’s changes\nTrue\n\n>>> MySupportsFloatInt.excludes(FloatImposter)  # composition overrides\n>>> isinstance(float_imp, MySupportsFloatInt)\nFalse\n>>> SupportsFloat.includes(FloatImposter)  # base changes\n>>> isinstance(float_imp, FloatImposter)\nTrue\n>>> isinstance(float_imp, MySupportsFloatInt)  # composition remains unchanged\nFalse\n\n>>> MySupportsFloatInt.reset_for(FloatImposter)  # removes override in composition\n>>> isinstance(float_imp, MySupportsFloatInt)  # base is visible again\nTrue\n>>> SupportsFloat.excludes(FloatImposter)\n>>> isinstance(float_imp, MySupportsFloatInt)  # base’s changes are visible to composition again\nFalse\n\n```\n\nFor this to work under the current implementation, we cannot rely exclusively on the [standard library’s implementation of ``__instancecheck__``](https://github.com/python/cpython/blob/main/Lib/typing.py), since it flattens and inspects *all* properties (with some proprietary exceptions) of all classes in the inheritance tree (in order of the MRO).\nIn practical terms, this means one can’t easily delegate to an ancestor’s ``__instancecheck__`` method and a protocol’s cache is effectively hidden from its progeny.\nIn other words, leaning on the default behavior would require one to register exceptions with every inheritor.\nThat would suck, so let’s not do that.\n\nHowever, overriding the behavior is problematic, because the standard library uses non-public interfaces to perform its attribute enumeration.\nWe certainly don’t want to re-implement protocol runtime checking from scratch.\n(At least not yet.)\n\n``beartype.typing.Protocol``’s meta class tries to work around this by sneakily limiting its evaluation to directly defined attributes, and then delegating ``isinstance`` evaluation to its ``__base__`` classes.\nIn doing so, it picks up its bases’ then-cached values, but at the cost of re-implementing the attribute check as well as taking a dependency on various implementation details of the standard library, which creates a fragility.\nFurther, for post-inheritance updates, [``CachingProtocolMeta``](https://posita.github.io/numerary/0.4/numerary.types/#numerary.types.CachingProtocolMeta) extends ``beartype``’s version to implement a simplistic publish/subscribe mechanism that dirties non-overridden caches in inheritors when member protocols caches are updated.\nThat’s completely off the beaten path and there are probably some gremlins hiding out there.\n\nOne subtlety is that the implementation deviates from performing checks in MRO order (and may perform redundant checks).\nThis is probably fine as long as runtime comparisons remain limited to crude checks whether attributes merely exist.\nIt would likely fail if runtime checking becomes more sophisticated, at which time, this implementation will need to be revisited.\nHopefully by then, we can just delete ``numerary`` as the aspirationally unnecessary hack it is and move on with our lives.\n\n(See [``beartype.typing``](https://github.com/beartype/beartype/tree/main/beartype/typing) and [``numerary``’s extension](https://github.com/posita/numerary/blob/v0.4.3/numerary/types.py) for details.)\n\n## License\n\n``numerary`` is licensed under the [MIT License](https://opensource.org/licenses/MIT).\nSee the included [``LICENSE``](https://posita.github.io/numerary/0.4/license/) file for details.\nSource code is [available on GitHub](https://github.com/posita/numerary).\n\n## Installation\n\nInstallation can be performed via [PyPI](https://pypi.python.org/pypi/numerary/).\n\n``` sh\n% pip install numerary\n...\n```\n\nAlternately, you can download [the source](https://github.com/posita/numerary) and install manually.\n\n``` sh\n% git clone https://github.com/posita/numerary.git\n...\n% cd numerary\n% python -m pip install .  # -or- python -c 'from setuptools import setup ; setup()' install .\n...\n```\n\n### Requirements\n\n``numerary`` requires a relatively modern version of Python:\n\n* [CPython](https://www.python.org/) (3.8+)\n* [PyPy](http://pypy.org/) (CPython 3.8+ compatible)\n\nIt has the following runtime dependencies:\n\n* [``beartype``](https://pypi.org/project/beartype/) for caching protocols\n  [![Bear-ified™](https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg)](https://beartype.rtfd.io/)\n\n``numerary`` will not use ``beartype`` internally unless the ``NUMERARY_BEARTYPE`` environment variable is set to a truthy[^4] value before ``numerary`` is loaded.\n\n[^4]:\n\n    I.E., one of: ``1``, ``on``, ``t``, ``true``, and ``yes``.\n\nSee the [hacking quick-start](https://posita.github.io/numerary/0.4/contrib/#hacking-quick-start) for additional development and testing dependencies.\n\n## Customers [![``numerary``-encumbered](https://raw.githubusercontent.com/posita/numerary/v0.4.3/docs/numerary-encumbered.svg)](https://posita.github.io/numerary/)\n\n* [``dyce``](https://github.com/posita/dyce/) - a pure-Python library for modeling arbitrarily complex dice mechanics and ~~mother~~ *birthing code base* of ``numerary``!\n* [👻 ``phantom-types``](https://github.com/antonagestam/phantom-types) - predicates and other type constraints without runtime overhead\n* The next one could be _you_! 👋\n\nDo you have a project that suffers problems made slightly less annoying by ``numerary``?\n[Let me know](https://posita.github.io/numerary/0.4/contrib/#starting-discussions-and-filing-issues), and I’ll promote it here!\n\nAnd don’t forget to do your part in perpetuating gratuitous badge-ification!\n\n``` markdown\n<!-- Markdown -->\nAs of version 0.4.1, ``dyce`` is\n[![numerary-encumbered](https://raw.githubusercontent.com/posita/numerary/latest/docs/numerary-encumbered.svg)][numerary-encumbered]!\n[numerary-encumbered]: https://posita.github.io/numerary/ \"numerary-encumbered\"\n```\n\n``` rst\n..\n    reStructuredText - see https://docutils.sourceforge.io/docs/ref/rst/directives.html#image\n\nAs of version 0.4.1, ``dyce`` is |numerary-encumbered|!\n\n.. |numerary-encumbered| image:: https://raw.githubusercontent.com/posita/numerary/latest/docs/numerary-encumbered.svg\n   :align: top\n   :target: https://posita.github.io/numerary/\n   :alt: numerary-encumbered\n```\n\n``` html\n<!-- HTML -->\nAs of version 0.4.1, <code>dyce</code> is <a href=\"https://posita.github.io/numerary/\"><img\n  src=\"https://raw.githubusercontent.com/posita/numerary/latest/docs/numerary-encumbered.svg\"\n  alt=\"numerary-encumbered\"\n  style=\"vertical-align: middle;\"></a>!\n```\n",
    "description_content_type": "text/markdown; charset=UTF-8",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://posita.github.io/numerary/",
    "keywords": "",
    "license": "MIT License",
    "maintainer": "",
    "maintainer_email": "",
    "name": "numerary",
    "package_url": "https://pypi.org/project/numerary/",
    "platform": null,
    "project_url": "https://pypi.org/project/numerary/",
    "project_urls": {
      "Homepage": "https://posita.github.io/numerary/",
      "Source Repository": "https://github.com/posita/numerary/"
    },
    "release_url": "https://pypi.org/project/numerary/0.4.3/",
    "requires_dist": [
      "beartype (==0.*,>=0.10.4)",
      "pre-commit ; extra == 'dev'",
      "numpy (~=1.23.2) ; extra == 'dev'",
      "sympy (~=1.10.1) ; extra == 'dev'",
      "tox ; extra == 'dev'",
      "versioningit (~=2.0) ; extra == 'dev'"
    ],
    "requires_python": ">=3.8",
    "summary": "Python hacks for type-checking numbers",
    "version": "0.4.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16904189,
  "releases": {
    "0.0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4f0b561145eafc1b5b6f11384c3c17de6452192f7930cabb11a0e4c4fb51b5e4",
          "md5": "813778e61e94b02bdbbac03cd9bfd10f",
          "sha256": "b13b98e55ba9e8fc2c2c5bc17ee1cdaf4f804d433756331a823dc605fb18bf0c"
        },
        "downloads": -1,
        "filename": "numerary-0.0.4-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "813778e61e94b02bdbbac03cd9bfd10f",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 17660,
        "upload_time": "2021-11-04T01:40:50",
        "upload_time_iso_8601": "2021-11-04T01:40:50.491699Z",
        "url": "https://files.pythonhosted.org/packages/4f/0b/561145eafc1b5b6f11384c3c17de6452192f7930cabb11a0e4c4fb51b5e4/numerary-0.0.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d1c8723441f2b19e648b9db979abdaf171f63f451a1a1aa4acb2951314e448df",
          "md5": "aecbbcc9f01f8b307baaa2d9ece70d74",
          "sha256": "b5afec3c6ea65c10d7c1b301c2badad9c06253b8bff3fcd230d571d64e67ed65"
        },
        "downloads": -1,
        "filename": "numerary-0.0.4.tar.gz",
        "has_sig": true,
        "md5_digest": "aecbbcc9f01f8b307baaa2d9ece70d74",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 45100,
        "upload_time": "2021-11-04T01:40:52",
        "upload_time_iso_8601": "2021-11-04T01:40:52.339748Z",
        "url": "https://files.pythonhosted.org/packages/d1/c8/723441f2b19e648b9db979abdaf171f63f451a1a1aa4acb2951314e448df/numerary-0.0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.5": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7a2abc6cb4c9ae63718770342b447065b43ea12ab7148625085d6eb8297bffa6",
          "md5": "8ffe385deb1d93e9be16f793ddcef173",
          "sha256": "bcf16a8f109099283ef382f637675dab084d744fed80cdf104a8d3e1a4fc74d6"
        },
        "downloads": -1,
        "filename": "numerary-0.0.5-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "8ffe385deb1d93e9be16f793ddcef173",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 18684,
        "upload_time": "2021-11-05T00:36:19",
        "upload_time_iso_8601": "2021-11-05T00:36:19.118628Z",
        "url": "https://files.pythonhosted.org/packages/7a/2a/bc6cb4c9ae63718770342b447065b43ea12ab7148625085d6eb8297bffa6/numerary-0.0.5-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ecfba6de01c43a050f2f78a52f7c8706ad2b20aa218aac60c7a47f1f87f1804a",
          "md5": "3c50b82f3d1c0aede7c7e31f2252790a",
          "sha256": "6d96096924e8d3ebf84b6921ba0e4f430512195775266bbae1cc7711d0fb748e"
        },
        "downloads": -1,
        "filename": "numerary-0.0.5.tar.gz",
        "has_sig": true,
        "md5_digest": "3c50b82f3d1c0aede7c7e31f2252790a",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 47172,
        "upload_time": "2021-11-05T00:36:21",
        "upload_time_iso_8601": "2021-11-05T00:36:21.994440Z",
        "url": "https://files.pythonhosted.org/packages/ec/fb/a6de01c43a050f2f78a52f7c8706ad2b20aa218aac60c7a47f1f87f1804a/numerary-0.0.5.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6427d3ca484162ae8c73cf3acbdc4080d24b1dfc947911817c0ad0c58b3f7844",
          "md5": "50a47113057376c16d34ddebe3af4fd8",
          "sha256": "0429ca5c8a8aa4f98ef2efc98fec3ac92aa5a2e6f33c9147555f2c52b96d4205"
        },
        "downloads": -1,
        "filename": "numerary-0.1.0-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "50a47113057376c16d34ddebe3af4fd8",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 21010,
        "upload_time": "2021-11-11T03:58:14",
        "upload_time_iso_8601": "2021-11-11T03:58:14.059704Z",
        "url": "https://files.pythonhosted.org/packages/64/27/d3ca484162ae8c73cf3acbdc4080d24b1dfc947911817c0ad0c58b3f7844/numerary-0.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "3d75617b86cd6b690008d4ae3b568d79ad79c1040c592d53b4faabb81e0dc856",
          "md5": "3a664a3b7bb11e504d82fbf1713181c5",
          "sha256": "f79b89affe562571c02e129ea0464c2c56aaff606ce84075b49e0fa681d58de1"
        },
        "downloads": -1,
        "filename": "numerary-0.1.0.tar.gz",
        "has_sig": true,
        "md5_digest": "3a664a3b7bb11e504d82fbf1713181c5",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 53942,
        "upload_time": "2021-11-11T03:58:15",
        "upload_time_iso_8601": "2021-11-11T03:58:15.532330Z",
        "url": "https://files.pythonhosted.org/packages/3d/75/617b86cd6b690008d4ae3b568d79ad79c1040c592d53b4faabb81e0dc856/numerary-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7c96da513c82e99eb01f39ea7bebe3a45fda224b9c4709f74b99ecd36cff6025",
          "md5": "90088e1386cddad3377697cd08f88f7b",
          "sha256": "fa3d7fdcddb6ac0da4c155df496ea33b0be9e02bb219496d5ce3ee3d4dc28092"
        },
        "downloads": -1,
        "filename": "numerary-0.1.1-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "90088e1386cddad3377697cd08f88f7b",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 22685,
        "upload_time": "2021-11-14T15:17:49",
        "upload_time_iso_8601": "2021-11-14T15:17:49.208480Z",
        "url": "https://files.pythonhosted.org/packages/7c/96/da513c82e99eb01f39ea7bebe3a45fda224b9c4709f74b99ecd36cff6025/numerary-0.1.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a465e8236950aef4e7b8856ebce3885a1db150ff4a1306e8199b22f8d7630df8",
          "md5": "16d752abc5fdc229b10f81956cf84231",
          "sha256": "35bf8aa881a82852d53de930ffa39b471a4a93b3ea15911dfadde9204c73800d"
        },
        "downloads": -1,
        "filename": "numerary-0.2.0-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "16d752abc5fdc229b10f81956cf84231",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 24148,
        "upload_time": "2021-12-20T17:50:51",
        "upload_time_iso_8601": "2021-12-20T17:50:51.065581Z",
        "url": "https://files.pythonhosted.org/packages/a4/65/e8236950aef4e7b8856ebce3885a1db150ff4a1306e8199b22f8d7630df8/numerary-0.2.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ce6289dddd8f33e36ad727af30175644bd01264e4f96e18eccca10ccbe3e45e9",
          "md5": "6ae054800b032974ca417eb9dc2e6de1",
          "sha256": "6c1edf25cf9bdae87aed45a82b8e5d14d7607ac62122459ece6feeb4cea2c4f2"
        },
        "downloads": -1,
        "filename": "numerary-0.2.1-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "6ae054800b032974ca417eb9dc2e6de1",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 24344,
        "upload_time": "2021-12-23T02:18:40",
        "upload_time_iso_8601": "2021-12-23T02:18:40.913946Z",
        "url": "https://files.pythonhosted.org/packages/ce/62/89dddd8f33e36ad727af30175644bd01264e4f96e18eccca10ccbe3e45e9/numerary-0.2.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "44a8ad4947b006e79f63162ef0519874d4d9c38cc61d61217dd3575576f36bb4",
          "md5": "07e8dbb7b01a0658c38fe4c29b3504fb",
          "sha256": "0516174ff377bc7114ad383e1355a178410b4f8422ae55dc1d95c5ef23b6a03b"
        },
        "downloads": -1,
        "filename": "numerary-0.3.0-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "07e8dbb7b01a0658c38fe4c29b3504fb",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 23445,
        "upload_time": "2022-01-04T03:33:02",
        "upload_time_iso_8601": "2022-01-04T03:33:02.564323Z",
        "url": "https://files.pythonhosted.org/packages/44/a8/ad4947b006e79f63162ef0519874d4d9c38cc61d61217dd3575576f36bb4/numerary-0.3.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "33525f27076643b5fa8cdb92466808e8b51a2086e5f391e01b6a3d4414480e45",
          "md5": "fcf7c0e5dae8a25c1a57bb5791738263",
          "sha256": "66951452ebba2ef270fb31a4226322addff3bd9d0104b175bb37a58a455fd7f4"
        },
        "downloads": -1,
        "filename": "numerary-0.4.0-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "fcf7c0e5dae8a25c1a57bb5791738263",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 22735,
        "upload_time": "2022-05-04T01:46:13",
        "upload_time_iso_8601": "2022-05-04T01:46:13.249108Z",
        "url": "https://files.pythonhosted.org/packages/33/52/5f27076643b5fa8cdb92466808e8b51a2086e5f391e01b6a3d4414480e45/numerary-0.4.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5593adaff43189d2c1c3b96175d4eb473924157174e0526ba8b9f2aa7bab6b30",
          "md5": "4616e62a53d117868a3396a0e4fbe923",
          "sha256": "97be32df75ecc6a3cd505bfc9fe6e3b074229e784b7b2ad4da27aebf012fd3a0"
        },
        "downloads": -1,
        "filename": "numerary-0.4.1-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "4616e62a53d117868a3396a0e4fbe923",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 22676,
        "upload_time": "2022-05-31T22:23:06",
        "upload_time_iso_8601": "2022-05-31T22:23:06.985676Z",
        "url": "https://files.pythonhosted.org/packages/55/93/adaff43189d2c1c3b96175d4eb473924157174e0526ba8b9f2aa7bab6b30/numerary-0.4.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "dd75c2028a8ed19755eba2c51abc7a320fff8a942ddd2810e48c44e26da74e8c",
          "md5": "9e971d6029f0ee51335fcade89220b29",
          "sha256": "97f21459fa722fb2c27410f85c377143adc43cd94123c9c77c82d04e73ffe935"
        },
        "downloads": -1,
        "filename": "numerary-0.4.2-py3-none-any.whl",
        "has_sig": true,
        "md5_digest": "9e971d6029f0ee51335fcade89220b29",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 22713,
        "upload_time": "2022-06-24T03:47:17",
        "upload_time_iso_8601": "2022-06-24T03:47:17.763328Z",
        "url": "https://files.pythonhosted.org/packages/dd/75/c2028a8ed19755eba2c51abc7a320fff8a942ddd2810e48c44e26da74e8c/numerary-0.4.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a5f321c60bf11c459364e29ecc50e70bd8b8777430928742976bd378aa60ab31",
          "md5": "3ea7ae1d825f3272858e5c3a98c6bad0",
          "sha256": "12bfca1b4a738fda9dee6b4e13ac0d4939a4e85319c504671594a70d130b2036"
        },
        "downloads": -1,
        "filename": "numerary-0.4.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "3ea7ae1d825f3272858e5c3a98c6bad0",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 22666,
        "upload_time": "2022-10-13T21:22:47",
        "upload_time_iso_8601": "2022-10-13T21:22:47.253748Z",
        "url": "https://files.pythonhosted.org/packages/a5/f3/21c60bf11c459364e29ecc50e70bd8b8777430928742976bd378aa60ab31/numerary-0.4.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "a5f321c60bf11c459364e29ecc50e70bd8b8777430928742976bd378aa60ab31",
        "md5": "3ea7ae1d825f3272858e5c3a98c6bad0",
        "sha256": "12bfca1b4a738fda9dee6b4e13ac0d4939a4e85319c504671594a70d130b2036"
      },
      "downloads": -1,
      "filename": "numerary-0.4.3-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "3ea7ae1d825f3272858e5c3a98c6bad0",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.8",
      "size": 22666,
      "upload_time": "2022-10-13T21:22:47",
      "upload_time_iso_8601": "2022-10-13T21:22:47.253748Z",
      "url": "https://files.pythonhosted.org/packages/a5/f3/21c60bf11c459364e29ecc50e70bd8b8777430928742976bd378aa60ab31/numerary-0.4.3-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}