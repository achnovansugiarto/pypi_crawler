{
  "info": {
    "author": "bfzs",
    "author_email": "ydf0509@sohu.com",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: BSD License",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3.6",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9",
      "Programming Language :: Python :: Implementation",
      "Topic :: Software Development :: Libraries"
    ],
    "description": "# 1 安装\r\n\r\npip install auto_run_on_remote\r\n\r\n# 2 auto_run_on_remote 介绍\r\n\r\n```\r\n全名字含义应该是 auto_run_current_python_script_on_remote_server\r\n\r\n在本机运行脚本自动在远程机器上运行。\r\n\r\n自动上传文件夹 自动创建文件夹 自动远程机器上运行python脚本。\r\n原理是 run_current_script_on_remote() 函数中自动利用 sys._getframe(1).f_code.co_filename 获取当前文件位置，所以不用传参告诉函数当前脚本的位置。\r\n\r\n比pycahrm专业版复杂的配置调用远程python解释器更方便，因为pycahrm专业版如果设置了远程解释器启动脚本时候很卡，\r\n启动ide界面更卡，因为ide会去读远程解释器的所有安装的python包，真的是太卡了。\r\n而这个在远程运行启动速度就很快，丝毫不会造成ide卡顿。\r\n还有就是破解最新版pycahrm麻烦老失效，用社区版就好了\r\n```\r\n\r\n# 3 用法如下\r\n```\r\n在项目的任意目录层级下的脚本中运行 run_current_script_on_remote(),则脚本会自动运行在远程机器。\r\n当第一次运行脚本时候，会自动在你当项目的根目录生成 auto_run_on_remote_config.py 配置文件，然后，你自己按需修改其中的值。\r\n以后运行run_current_script_on_remote()会自动读取到 auto_run_on_remote_config.py  中的配置。\r\n```\r\n\r\n```python\r\nimport time\r\nimport sys\r\n\r\nfrom auto_run_on_remote import run_current_script_on_remote\r\n\r\n\r\nrun_current_script_on_remote()\r\n# 以下的代码的print都不是在当前机器打印的，是在远程机器上打印的。\r\n\r\nfor i in range(10):\r\n    print(f'嘻嘻 {i},通过文件路径和python解释器路径，可以发现这句话是在远程机器打印出来的, {__file__} ,{sys.executable} ')\r\n    time.sleep(1)\r\n\r\n```\r\n\r\n\r\n\r\n代码运行截图，我本机是win10，可以看到代码是运行在linux的。\r\n[![hXvZff.png](https://z3.ax1x.com/2021/09/10/hXvZff.png)](https://imgtu.com/i/hXvZff)\r\n\r\n\r\n# 4 配置文件 auto_run_on_remote_config.py 介绍\r\n```python\r\n\"\"\"\r\n这个配置文件是自动生成到你的项目根目录的。\r\n\"\"\"\r\n\r\nimport sys\r\n\r\n# 项目根目录文件夹，这个一般不需要改，会根据PYTHONPATH智能获取。\r\n# pycahrm自动添加了项目根目录到第一个PYTHONPATH，如果是cmd命令启动这先设置PYTHONPATH环境变量。\r\n# windows设置  set PYTHONPATH=你当前python项目根目录,然后敲击你的python运行命令\r\n# linux设置    export PYTHONPATH=你当前python项目根目录,然后敲击你的python运行命令\r\nPYTHON_PROJ_DIR_LOCAL = sys.path[1]\r\n\r\n# 这是远程机器的账号密码配置。把这个配置文件加到gitignore就不会泄漏了。\r\nHOST = '192.168.6.133'\r\nPORT = 22\r\nUSER = 'ydf'\r\nPASSWORD = '123456'\r\n\r\nPYTHON_INTERPRETER = 'python3'  # 如果你安装了四五个python环境，可以直接指定远程解释器的绝对路径  例如 /opt/minicondadir/ens/env35/python\r\n\r\nFORBID_DEPLOY_FROM_LINUX = True # 一般生产机器是linux，是否禁止从linux部署到别的机器，这样可以防止你从生产环境远程到测试环境，配置后，即使生产环境的代码有远程部署，也不会执行远程部署而是直接运行。\r\n\r\n# 上传文件夹的配置，具体可以看paramiko_util.py里面的代码。\r\nPATH_PATTERN_EXLUDED_TUPLE = ('/.git/', '/.idea/', '/dist/', '/build/')  # 路径中如果有这些就自动过滤不上传\r\nFILE_SUFFIX_TUPLE_EXLUDED = ('.pyc', '.log', '.gz')  # 这些后缀的文件不上传\r\nONLY_UPLOAD_WITHIN_THE_LAST_MODIFY_TIME = 3650 * 24 * 60 * 60  # 只有在这个时间之内修改的文件才上传。如果项目比较大，可以第一次完整上传，之后再把这个时间改小。\r\nFILE_VOLUME_LIMIT = 1000 * 1000  # 大于这个体积的文件不上传，单位b。\r\nSFTP_LOG_LEVEL = 20  # 文件夹上传时候的日志级别。10 logging.DEBUG ,20 logging.INFO 30 logging.WaRNING,如果要看为什么某个文件上传失败，可以设置debug级别。\r\n\r\nEXTRA_SHELL_STR = ''  # 远程执行命令之前，可以自定义执行的shell语句，一般例如可以设置啥环境变量什么的。\r\n\r\n\r\n```\r\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/ydf0509/auto_run_on_remote",
    "keywords": "auto_run_on_remote",
    "license": "BSD License",
    "maintainer": "ydf",
    "maintainer_email": "ydf0509@sohu.com",
    "name": "auto-run-on-remote",
    "package_url": "https://pypi.org/project/auto-run-on-remote/",
    "platform": "all",
    "project_url": "https://pypi.org/project/auto-run-on-remote/",
    "project_urls": {
      "Homepage": "https://github.com/ydf0509/auto_run_on_remote"
    },
    "release_url": "https://pypi.org/project/auto-run-on-remote/0.4/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "auto run current python script on remote server",
    "version": "0.4",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17199081,
  "releases": {
    "0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8df58e608e42d0f8c7b7b77457c45d3c1f5ffe2ff3c1c97783c29b7c3ed8790b",
          "md5": "99d7219b761bc9de978e8e9128e267ad",
          "sha256": "8445c41948e1b1e337f4bce850b7a5b0f91a60c6283a11c8c7c8088dbd41f903"
        },
        "downloads": -1,
        "filename": "auto_run_on_remote-0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "99d7219b761bc9de978e8e9128e267ad",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 7876,
        "upload_time": "2021-09-10T06:28:35",
        "upload_time_iso_8601": "2021-09-10T06:28:35.483694Z",
        "url": "https://files.pythonhosted.org/packages/8d/f5/8e608e42d0f8c7b7b77457c45d3c1f5ffe2ff3c1c97783c29b7c3ed8790b/auto_run_on_remote-0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "9dd25a967375c09b8c816df60a4ff45f5e81d82d6a3231c886456a7bb16a5306",
          "md5": "9507f8d5a32fe2a1f7fba8195b464b74",
          "sha256": "bca930c59a823319821473a48fce4e1f2b937031538b3cd26b82babc905c71db"
        },
        "downloads": -1,
        "filename": "auto_run_on_remote-0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "9507f8d5a32fe2a1f7fba8195b464b74",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 8152,
        "upload_time": "2021-09-10T06:39:18",
        "upload_time_iso_8601": "2021-09-10T06:39:18.375543Z",
        "url": "https://files.pythonhosted.org/packages/9d/d2/5a967375c09b8c816df60a4ff45f5e81d82d6a3231c886456a7bb16a5306/auto_run_on_remote-0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "98d726a7c40bd59dc56b9da74d1c9de36df016397e81812d7edda1b5c8258ffb",
          "md5": "f72fe8898b8b16f76c4de4b26579301e",
          "sha256": "f49653be12dad94c31f4087e6100195cc249f91cab06bec3b6e2c9ba62620775"
        },
        "downloads": -1,
        "filename": "auto_run_on_remote-0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "f72fe8898b8b16f76c4de4b26579301e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 8247,
        "upload_time": "2021-09-10T07:46:30",
        "upload_time_iso_8601": "2021-09-10T07:46:30.633185Z",
        "url": "https://files.pythonhosted.org/packages/98/d7/26a7c40bd59dc56b9da74d1c9de36df016397e81812d7edda1b5c8258ffb/auto_run_on_remote-0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "08acee5b9c7195bbf8e53064e2ad9726e8b070b9d91ad36a24abf9cfd081b2bb",
          "md5": "ff15a9cb9f0918f2502b1a09c93c5e6d",
          "sha256": "833929058a9d89d19af3340546675e7902b4816326816d4b2af9e89d961ff77b"
        },
        "downloads": -1,
        "filename": "auto_run_on_remote-0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "ff15a9cb9f0918f2502b1a09c93c5e6d",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 9946,
        "upload_time": "2023-03-08T01:28:54",
        "upload_time_iso_8601": "2023-03-08T01:28:54.295020Z",
        "url": "https://files.pythonhosted.org/packages/08/ac/ee5b9c7195bbf8e53064e2ad9726e8b070b9d91ad36a24abf9cfd081b2bb/auto_run_on_remote-0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "08acee5b9c7195bbf8e53064e2ad9726e8b070b9d91ad36a24abf9cfd081b2bb",
        "md5": "ff15a9cb9f0918f2502b1a09c93c5e6d",
        "sha256": "833929058a9d89d19af3340546675e7902b4816326816d4b2af9e89d961ff77b"
      },
      "downloads": -1,
      "filename": "auto_run_on_remote-0.4.tar.gz",
      "has_sig": false,
      "md5_digest": "ff15a9cb9f0918f2502b1a09c93c5e6d",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 9946,
      "upload_time": "2023-03-08T01:28:54",
      "upload_time_iso_8601": "2023-03-08T01:28:54.295020Z",
      "url": "https://files.pythonhosted.org/packages/08/ac/ee5b9c7195bbf8e53064e2ad9726e8b070b9d91ad36a24abf9cfd081b2bb/auto_run_on_remote-0.4.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}