{
  "info": {
    "author": "Connor Sherwood Maynes",
    "author_email": "connormaynes@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3"
    ],
    "description": "# Scheduled Futures\nconcurrent.futures extension with a ScheduledThreadPoolExecutor to handle delayed and periodic futures with rescheduling\n\n## Preamble\n[concurrent.futures](https://docs.python.org/3/library/concurrent.futures.html) is pretty awesome, but it does not handle periodic work which comes up a fair amount when creating applications.\n\n[apscheduler](https://github.com/agronholm/apscheduler) is great, but trying to wait for jobs to complete involves a racy mess of callbacks.\n\n[asyncio](https://docs.python.org/3/library/asyncio.html) is also good and can simply handle periodic work with a `asyncio.sleep` call, but this is more trouble than it is worth when most of your codebase uses system calls / dlls / synchronous libraries you dont want to rewrite or coat with `asyncio.to_thread` calls.\n\nThis package was created to solve this problem. Please see [Features](#features) below.\n\nDocumentation is just what there is in this README and the code itself.\n\n## Table of Contents\n- [Scheduled Futures](#scheduled-futures)\n\t- [Preamble](#preamble)\n\t- [Table of Contents](#table-of-contents)\n\t- [Inspiration](#inspiration)\n\t- [Features](#features)\n\t- [Technologies](#technologies)\n\t- [Install](#install)\n\t- [Development](#development)\n\t- [Example](#example)\n\t\t- [Code](#code)\n\t\t- [Output](#output)\n\n## Inspiration\nThis package was inspired by [this feature request](https://github.com/python/cpython/issues/62156) and some of the code there.\n\n## Features\n- Schedule futures at a fixed delay using a thread pool executor\n- Rescheduling of `ScheduledFuture` instances after they have started\n- `ScheduledThreadPoolExecutor` is a subclass of `ThreadPoolExecutor`, so it can be used anywhere `ThreadPoolExecutor` can, such as for the asyncio default executor\n- Logged warnings when a `ScheduledFuture's` runtime exceeded its period, indicating it may be scheduled to run too quickly\n- Logged warnings when a `ScheduledFuture` is run later scheduled, indicating you may need more workers to keep up\n- Statistics on the number of executions / exceptions / total runtime / average runtime for each `ScheduledFuture`\n\n## Technologies\n- Python >= 3.5\n\n## Install\n```python\npip install scheduled_futures\n```\n\n## Development\nPull requests and new feature requests are welcome.\n\n## Example\n\n### Code\n```python\nimport time\nfrom concurrent.futures import wait, CancelledError\nimport logging\n\nfrom scheduled_futures import ScheduledThreadPoolExecutor\n\nlogging.basicConfig()  # to see warning messages from lib\n# which are pumped into a null handler by default\n\n\ndef work():\n\tprint(time.time(), 'work!')\n\n\ndef slow_work():\n\ttime.sleep(0.25)\n\tprint(time.time(), 'slow work...huuh')\n\n\nwith ScheduledThreadPoolExecutor() as stpool:\n\tstpool.submit(work)  # same interface as regular ThreadPoolExecutor still works\n\n\t# simple demo of scheduling a callable a little later\n\tprint('\\nDelayed future example')\n\tprint(time.time(), 'work scheduled')\n\tfuture = stpool.schedule(work, start=time.time() + 0.5)\n\ttime.sleep(1)\n\n\t# simple demo of scheduling a callable periodically\n\tprint('\\nPeriodic future example')\n\tfuture = stpool.schedule(work, period=0.25)\n\ttime.sleep(1)\n\tfuture.cancel()\n\twait([future])\n\n\t# show log warning for each execution because the future\n\t# ran for longer than the period between runs\n\tprint('\\nPeriod too short for long-running future example')\n\tfuture = stpool.schedule(slow_work, period=0.20)\n\ttime.sleep(1)\n\tfuture.cancel()\n\twait([future])\n\n\nwith ScheduledThreadPoolExecutor() as stpool:\n\tprint('\\nRescheduling work example')\n\tfuture = stpool.schedule(work, period=0.25)\n\ttime.sleep(0.55)\n\tprint('Rescheduling')\n\tstpool.reschedule(future, period=1)\n\ttime.sleep(2)\n\n\ndef slow_work2():\n\ttime.sleep(0.15)\n\tprint(time.time(), 'slow work2...huuuuuuh')\n\n\nwith ScheduledThreadPoolExecutor(late_run_limit=0.1, max_workers=1) as stpool:\n\t\n\t# show log warning before some executions because there are not enough workers\n\t# to keep up with the execution schedule\n\tprint('\\nNot enough workers example')\n\tfutures = []\n\tfor _ in range(3):\n\t\tfutures.append(stpool.schedule(slow_work2, period=0.20))\n\ttime.sleep(1)\n\tlist(map(lambda f: f.cancel(), futures))\n\twait(futures)\n\n\ni = 0\ndef cancelled_work():\n\tglobal i\n\ti += 1\n\tif i >= 3:\n\t\traise CancelledError('Stop working, now!')\n\tprint(time.time(), 'ran without cancellation')\n\t\n\nwith ScheduledThreadPoolExecutor() as stpool:\n\t\n\t# cancel a periodic from inside a periodic\n\tprint('\\nCancel from inside callable example')\n\tfuture = stpool.schedule(cancelled_work, period=0.25)\n\ttry:\n\t\tfuture.result()\n\texcept CancelledError:\n\t\tprint('work cancelled!')\n```\n\n### Output\n```text\n1654566752.6947718 work!\n\nDelayed future example\n1654566752.6957695 work scheduled\n1654566753.2106197 work!\n\nPeriodic future example\n1654566753.700693 work!\n1654566753.9519553 work!\n1654566754.2048206 work!\n1654566754.4566417 work!\n1654566754.7094283 work!\n\nPeriod too short for long-running future example\n1654566754.963385 slow work...huuh\nWARNING:scheduled_futures:Periodic scheduled future runtime exceeded period.\n1654566755.4197686 slow work...huuh\nWARNING:scheduled_futures:Periodic scheduled future runtime exceeded period.\n1654566755.8865035 slow work...huuh\nWARNING:scheduled_futures:Periodic scheduled future runtime exceeded period.\n\nRescheduling work example\n1654566755.8884244 work!\n1654566756.1499033 work!\n1654566756.4140623 work!\nRescheduling\n1654566756.4449573 work!\n1654566757.454106 work!\n1654566758.462207 work!\n\nNot enough workers example\n1654566758.6189985 slow work2...huuuuuuh\nWARNING:scheduled_futures:Late to run scheduled future.\n1654566758.7743778 slow work2...huuuuuuh\nWARNING:scheduled_futures:Late to run scheduled future.\n1654566758.932357 slow work2...huuuuuuh\nWARNING:scheduled_futures:Late to run scheduled future.\n1654566759.0854318 slow work2...huuuuuuh\nWARNING:scheduled_futures:Late to run scheduled future.\n1654566759.2414527 slow work2...huuuuuuh\nWARNING:scheduled_futures:Late to run scheduled future.\n1654566759.3976445 slow work2...huuuuuuh\nWARNING:scheduled_futures:Late to run scheduled future.\n1654566759.5528805 slow work2...huuuuuuh\n\nCancel from inside callable example\n1654566759.554882 ran without cancellation\n1654566759.8188088 ran without cancellation\nwork cancelled!\n```\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/ConnorSMaynes/scheduled_futures",
    "keywords": "concurrent.futures,apscheduler,asyncio,periodic",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "scheduled-futures",
    "package_url": "https://pypi.org/project/scheduled-futures/",
    "platform": null,
    "project_url": "https://pypi.org/project/scheduled-futures/",
    "project_urls": {
      "Homepage": "https://github.com/ConnorSMaynes/scheduled_futures"
    },
    "release_url": "https://pypi.org/project/scheduled-futures/1.1.0/",
    "requires_dist": null,
    "requires_python": "<4,>=3.5",
    "summary": "concurrent.futures extension with a ScheduledThreadPoolExecutor to handle delayed and periodic futures with rescheduling",
    "version": "1.1.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 14558631,
  "releases": {
    "1.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c422e43a3df26257169b4e89500e3c4d88f91a1fd4d5f43d88e12a38d88f58e4",
          "md5": "0fa0cabe6518a1e5ce019126e0cb7bec",
          "sha256": "0eedddeb0926754e12448ad0b32da16de8d1ec1cb927c4d9a2e69cdfc6824ba4"
        },
        "downloads": -1,
        "filename": "scheduled_futures-1.0.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0fa0cabe6518a1e5ce019126e0cb7bec",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": "<4,>=3.5",
        "size": 4103,
        "upload_time": "2022-06-07T03:08:30",
        "upload_time_iso_8601": "2022-06-07T03:08:30.990043Z",
        "url": "https://files.pythonhosted.org/packages/c4/22/e43a3df26257169b4e89500e3c4d88f91a1fd4d5f43d88e12a38d88f58e4/scheduled_futures-1.0.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ee74926d13fb9abfcf77e7da0913ab26c905caf787080ac9ff7d0b020dff9b88",
          "md5": "725d6163220478051885894ad6f1f54c",
          "sha256": "442c684f0abaf4e0761318ebcf49befa1d29a3f0a5fa32f935c900d89bc9058d"
        },
        "downloads": -1,
        "filename": "scheduled_futures-1.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "725d6163220478051885894ad6f1f54c",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": "<4,>=3.5",
        "size": 9216,
        "upload_time": "2022-06-07T03:50:22",
        "upload_time_iso_8601": "2022-06-07T03:50:22.228127Z",
        "url": "https://files.pythonhosted.org/packages/ee/74/926d13fb9abfcf77e7da0913ab26c905caf787080ac9ff7d0b020dff9b88/scheduled_futures-1.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8df59f87d32673c3afb532d7adaf3ef552b6a4cc10ccf18b9209e6d17dcb30bf",
          "md5": "4c1e1f3b424af1b66e616ad7a6923773",
          "sha256": "97af422406a6cb395ac4eec5ed920fca2891686ae0eb8e19c9678f697409c036"
        },
        "downloads": -1,
        "filename": "scheduled_futures-1.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "4c1e1f3b424af1b66e616ad7a6923773",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": "<4,>=3.5",
        "size": 9263,
        "upload_time": "2022-06-07T12:43:45",
        "upload_time_iso_8601": "2022-06-07T12:43:45.992421Z",
        "url": "https://files.pythonhosted.org/packages/8d/f5/9f87d32673c3afb532d7adaf3ef552b6a4cc10ccf18b9209e6d17dcb30bf/scheduled_futures-1.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "63ea4909ae44e625e925601630b334429f8f923e0f35c382633bf28ea00a6968",
          "md5": "df2074f3026cb9bbb3a290f4cb6a927f",
          "sha256": "03bf06ba9acfdb442ec301a228889f60f66d46c34e9da9066921ca43dc583c1a"
        },
        "downloads": -1,
        "filename": "scheduled_futures-1.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "df2074f3026cb9bbb3a290f4cb6a927f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": "<4,>=3.5",
        "size": 11454,
        "upload_time": "2022-06-07T12:43:47",
        "upload_time_iso_8601": "2022-06-07T12:43:47.501689Z",
        "url": "https://files.pythonhosted.org/packages/63/ea/4909ae44e625e925601630b334429f8f923e0f35c382633bf28ea00a6968/scheduled_futures-1.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "50c1baa2e7bc646b3568d8dc58e5677f2f203e4380dc2590328e38d463bea6e5",
          "md5": "1d857c790c11fd61a9ad26d5ade82900",
          "sha256": "93233d937ed93d0e6b6983fd7efccd3513f45a0f8e23ed61da20455e66a59ffc"
        },
        "downloads": -1,
        "filename": "scheduled_futures-1.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "1d857c790c11fd61a9ad26d5ade82900",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": "<4,>=3.5",
        "size": 10083,
        "upload_time": "2022-07-26T23:14:43",
        "upload_time_iso_8601": "2022-07-26T23:14:43.292050Z",
        "url": "https://files.pythonhosted.org/packages/50/c1/baa2e7bc646b3568d8dc58e5677f2f203e4380dc2590328e38d463bea6e5/scheduled_futures-1.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "efdb2599cbdacf1837b572a1abc99e8d1a6fb2a4ede7784becb15ca17c8a8969",
          "md5": "0215997374990261142baf1752bbb0ed",
          "sha256": "71c92d4e7e31957ba489f6a9c60d1af6614691b54f52d8cd64960ce3ea3ccb84"
        },
        "downloads": -1,
        "filename": "scheduled_futures-1.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "0215997374990261142baf1752bbb0ed",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": "<4,>=3.5",
        "size": 12348,
        "upload_time": "2022-07-26T23:14:44",
        "upload_time_iso_8601": "2022-07-26T23:14:44.692839Z",
        "url": "https://files.pythonhosted.org/packages/ef/db/2599cbdacf1837b572a1abc99e8d1a6fb2a4ede7784becb15ca17c8a8969/scheduled_futures-1.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "50c1baa2e7bc646b3568d8dc58e5677f2f203e4380dc2590328e38d463bea6e5",
        "md5": "1d857c790c11fd61a9ad26d5ade82900",
        "sha256": "93233d937ed93d0e6b6983fd7efccd3513f45a0f8e23ed61da20455e66a59ffc"
      },
      "downloads": -1,
      "filename": "scheduled_futures-1.1.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "1d857c790c11fd61a9ad26d5ade82900",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": "<4,>=3.5",
      "size": 10083,
      "upload_time": "2022-07-26T23:14:43",
      "upload_time_iso_8601": "2022-07-26T23:14:43.292050Z",
      "url": "https://files.pythonhosted.org/packages/50/c1/baa2e7bc646b3568d8dc58e5677f2f203e4380dc2590328e38d463bea6e5/scheduled_futures-1.1.0-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "efdb2599cbdacf1837b572a1abc99e8d1a6fb2a4ede7784becb15ca17c8a8969",
        "md5": "0215997374990261142baf1752bbb0ed",
        "sha256": "71c92d4e7e31957ba489f6a9c60d1af6614691b54f52d8cd64960ce3ea3ccb84"
      },
      "downloads": -1,
      "filename": "scheduled_futures-1.1.0.tar.gz",
      "has_sig": false,
      "md5_digest": "0215997374990261142baf1752bbb0ed",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": "<4,>=3.5",
      "size": 12348,
      "upload_time": "2022-07-26T23:14:44",
      "upload_time_iso_8601": "2022-07-26T23:14:44.692839Z",
      "url": "https://files.pythonhosted.org/packages/ef/db/2599cbdacf1837b572a1abc99e8d1a6fb2a4ede7784becb15ca17c8a8969/scheduled_futures-1.1.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}