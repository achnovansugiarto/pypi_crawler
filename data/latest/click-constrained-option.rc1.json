{
  "info": {
    "author": "",
    "author_email": "",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "Environment :: Console",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: BSD License",
      "Programming Language :: Python :: 3"
    ],
    "description": "# click-constrained-option\n\n**click-constrained-option** is an extension package that adds constrains to option in [Click](https://github.com/pallets/click/).\n\nTested under click 7.x\n\n## What it does\n\nBuild option that: \n* mutually exclusive with others\n* depend on other options\n* is required conditionally\n* is promoted conditionally\n* set its default value conditionally\n* set its type conditionally\n\n## Quick start\n\n```bash\npip install click-constrained-option\n```\n\n```python\n# example.py\n\nimport click\nfrom click_constrained_option import ConstrainedOption\n\n@click.command()\n@click.option(cls=ConstrainedOption,\n              group_require_one=[\"apple\", \"orange\", \"pear\"])\n@click.option(\"--apple\",\n              cls=ConstrainedOption,\n              is_flag=True)\n@click.option(\"--orange\",\n              cls=ConstrainedOption,\n              is_flag=True)\n@click.option(\"--pear\",\n              cls=ConstrainedOption,\n              is_flag=True)\ndef cli(**kwargs):\n    click.echo(kwargs)\n\n\nif __name__ == \"__main__\":\n    cli()\n\n```\n```shell script\n$ python example.py\n\nError: require exact one of '--apple' '--orange' '--pear'\n\n$ python example.py --apple --pear\n\nError: require exact one of '--apple' '--orange' '--pear'\n```\n\n## API\n\n|kwarg|type|usage|\n|:---|:---|:---|\n|allowed_func|`function`|return True to indicate allowance, vice versa\n|allowed_if|`str`|name of the option\n|allowed_if_not|`str`|name of the option\n|allowed_if_all_of|`list`|list of the option names\n|allowed_if_none_of|`list`|list of the option names\n|allowed_if_any_of|`list`|list of the option names\n|allowed_if_one_of|`list`|list of the option names\n|required_func|`function`|return True to indicate requirement, vice versa\n|required_if|`str`|name of the option\n|required_if_not|`str`|name of the option\n|required_if_all_of|`list`|list of the option names\n|required_if_none_of|`list`|list of the option names\n|required_if_any_of|`list`|list of the option names\n|required_if_one_of|`list`|list of the option names\n|prompt_func|`function`|return True to indicate prompt, vice versa\n|prompt_if|`str`|name of the option\n|prompt_if_not|`str`|name of the option\n|prompt_if_all_of|`list`|list of the option names\n|prompt_if_none_of|`list`|list of the option names\n|prompt_if_any_of|`list`|list of the option names\n|prompt_if_one_of|`list`|list of the option names\n|group_require_one|`list`|list of the option names\n|group_require_any|`list`|list of the option names\n|group_require_all|`list`|list of the option names\n|default_func|`function`|return a value to use as the default\n|type_func|`function`|return a valid type of the option\n\n### Note\n\n* If multiple kwargs are used, then all of them must be satisfied. For example, if `prompt_if` and `prompt_if_all_of` are specified, then the option is prompted only when both condition hold true.  \n\n* If the custom function has an argument equals an option name in the command, then the value of that option will be used as argument. For example, value of `--foo` will be passed to a custom function `bar(foo)`. \n\n## Examples\n\n### Dependency and exclusive relation\n\n`--username` is allowed if `--login` is set:\n```python\nimport click\nfrom click_constrained_option import ConstrainedOption\n\n@click.command()\n@click.option(\"--username\",\n              cls=ConstrainedOption,\n              allowed_if=\"login\")\n@click.option(\"--login\", is_flag=True)\ndef cli(**kwargs):\n    click.echo(kwargs)\n\n\nif __name__ == \"__main__\":\n    cli()\n```\n```shell script\n$ python example.py --username=foo\n\nError: Usage for '--username': require '--login'\n```\n\n`--login` is allowed if at least one of `--userid` and `--email` is specified, and `--oauth` is not set:\n```python\nimport click\nfrom click_constrained_option import ConstrainedOption\n\n@click.command()\n@click.option(\"--login\",\n              cls=ConstrainedOption,\n              is_flag=True,\n              allowed_if_any_of=[\"userid\", \"email\"],\n              allowed_if_not=\"cookie\")\n@click.option(\"--userid\")\n@click.option(\"--email\")\n@click.option(\"--oauth\", is_flag=True)\ndef cli(**kwargs):\n    click.echo(kwargs)\n\n\nif __name__ == \"__main__\":\n    cli()\n```\n```shell script\n$ python example.py --login --userid=foo --oauth\n\nError: Usage for '--login': conflict with '--oauth'\n\n$ python example.py --login\n\nError: Usage for '--login': require at least one of '--userid' '--email'\n```\n\n`--port` is required if `--listen` is an IP address:\n```python\nimport click\nimport re\nfrom click_constrained_option import ConstrainedOption\n\n@click.command()\n@click.option(\"--port\",\n              cls=ConstrainedOption,\n              required_func=lambda b: re.match(r\"\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\", b))\n@click.option(\"--listen\")\ndef cli(**kwargs):\n    click.echo(kwargs)\n\n\nif __name__ == \"__main__\":\n    cli()\n```\n```shell script\n$ python example.py --listen=127.0.0.1\n\nError: Missing option '--port'\n```\n\n### Mutually exclusive group\n\nExact one of the `--order-by-date` `--order-by-name` `--order-by-rank` must be set:\n```python\nimport click\nfrom click_constrained_option import ConstrainedOption\n\n@click.option(cls=ConstrainedOption,\n              group_require_one=[\"order_by_name\", \"order_by_rank\", \"order_by_date\"])\n@click.option(\"--order-by-name\",\n              cls=ConstrainedOption,\n              is_flag=True)\n@click.option(\"--order-by-rank\",\n              cls=ConstrainedOption,\n              is_flag=True)\n@click.option(\"--order-by-date\",\n              cls=ConstrainedOption,\n              is_flag=True)\ndef cli(**kwargs):\n    click.echo(kwargs)\n\n\nif __name__ == \"__main__\":\n    cli()\n```\n```shell script\n$ python example.py\n\nError: require exact one of '--order-by-name' '--order-by-rank' '--order-by-date'\n```\n\n### Conditional prompt\n\n`--password` will be prompted if one of `--userid` `--email` is specified\n\n```python\nimport click\nfrom click_constrained_option import ConstrainedOption\n\n@click.command()\n@click.option(\"--userid\")\n@click.option(\"--email\")\n@click.option(\"--password\", \n              hide_input=True,\n              prompt_if_one_of=[\"userid\", \"email\"])\ndef cli(**kwargs):\n    click.echo(kwargs)\n\n\nif __name__ == \"__main__\":\n    cli()\n```\n```shell script\n$ python example.py --userid\n\nPassword: \n```\n\n### Conditional type\n\nType of `--time` will be int if `--time-format=timestamp`\n\n```python\nimport click\nfrom click_constrained_option import ConstrainedOption\n\n@click.command()\n@click.option(\"--time-format\",\n              type=click.Choice([\"iso-8601\", \"timestamp\"]))\n@click.option(\"--time\",\n              cls=ConstrainedOption,\n              type_func=lambda time_format: click.INT if time_format == \"timestamp\" else click.STRING)\ndef cli(**kwargs):\n    click.echo(kwargs)\n\n\nif __name__ == \"__main__\":\n    cli()\n```\n\n```shell script\n$ python --time-format=\"timestamp\" --time=str_not_int\n\nError: Invalid value for '--time': str_not_int is not a valid integer\n```\n\n### Conditional default\n\nDefault of `--lucky` is set through custom function\n\n```python\nimport click\nfrom click_constrained_option import ConstrainedOption\nfrom random import randint\n\n@click.command()\n@click.option(\"--lucky\",\n              default=lambda : randint(0, 9))\ndef cli(**kwargs):\n    click.echo(kwargs)\n\n\nif __name__ == \"__main__\":\n    cli()\n```\n\n```shell script\n$ python example.py\n\n{'lucky': '5'}\n```\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/nobody-65534/click-constrained-option",
    "keywords": "",
    "license": "BSD",
    "maintainer": "",
    "maintainer_email": "",
    "name": "click-constrained-option",
    "package_url": "https://pypi.org/project/click-constrained-option/",
    "platform": "",
    "project_url": "https://pypi.org/project/click-constrained-option/",
    "project_urls": {
      "Homepage": "https://github.com/nobody-65534/click-constrained-option"
    },
    "release_url": "https://pypi.org/project/click-constrained-option/0.1/",
    "requires_dist": [
      "click (<8,>=7.0)"
    ],
    "requires_python": "",
    "summary": "Constrained option support for click",
    "version": "0.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 7522161,
  "releases": {
    "0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b60ac8a2042760ad61cc6ccd5a0496fbfe11cf5a028b2676d381f05586db3c2f",
          "md5": "fdd0e564609d10be58ad2a7650270653",
          "sha256": "fe2dd75250434460382725644f6b7e0c09755fe708117c4996c279b570695799"
        },
        "downloads": -1,
        "filename": "click_constrained_option-0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "fdd0e564609d10be58ad2a7650270653",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 6383,
        "upload_time": "2020-06-20T10:54:15",
        "upload_time_iso_8601": "2020-06-20T10:54:15.518587Z",
        "url": "https://files.pythonhosted.org/packages/b6/0a/c8a2042760ad61cc6ccd5a0496fbfe11cf5a028b2676d381f05586db3c2f/click_constrained_option-0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6310a522ef19f0af35b23b0f5aebbe73f62b24b63d0a61891a2394b33a0e4490",
          "md5": "a4a557f4faf7b430e091648dceb89af6",
          "sha256": "ace4c408c5609ac009087593ea292fb09bb89cc0f9d30ea82292f992015c9681"
        },
        "downloads": -1,
        "filename": "click-constrained-option-0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "a4a557f4faf7b430e091648dceb89af6",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 6239,
        "upload_time": "2020-06-20T10:54:18",
        "upload_time_iso_8601": "2020-06-20T10:54:18.222066Z",
        "url": "https://files.pythonhosted.org/packages/63/10/a522ef19f0af35b23b0f5aebbe73f62b24b63d0a61891a2394b33a0e4490/click-constrained-option-0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "b60ac8a2042760ad61cc6ccd5a0496fbfe11cf5a028b2676d381f05586db3c2f",
        "md5": "fdd0e564609d10be58ad2a7650270653",
        "sha256": "fe2dd75250434460382725644f6b7e0c09755fe708117c4996c279b570695799"
      },
      "downloads": -1,
      "filename": "click_constrained_option-0.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "fdd0e564609d10be58ad2a7650270653",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 6383,
      "upload_time": "2020-06-20T10:54:15",
      "upload_time_iso_8601": "2020-06-20T10:54:15.518587Z",
      "url": "https://files.pythonhosted.org/packages/b6/0a/c8a2042760ad61cc6ccd5a0496fbfe11cf5a028b2676d381f05586db3c2f/click_constrained_option-0.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "6310a522ef19f0af35b23b0f5aebbe73f62b24b63d0a61891a2394b33a0e4490",
        "md5": "a4a557f4faf7b430e091648dceb89af6",
        "sha256": "ace4c408c5609ac009087593ea292fb09bb89cc0f9d30ea82292f992015c9681"
      },
      "downloads": -1,
      "filename": "click-constrained-option-0.1.tar.gz",
      "has_sig": false,
      "md5_digest": "a4a557f4faf7b430e091648dceb89af6",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 6239,
      "upload_time": "2020-06-20T10:54:18",
      "upload_time_iso_8601": "2020-06-20T10:54:18.222066Z",
      "url": "https://files.pythonhosted.org/packages/63/10/a522ef19f0af35b23b0f5aebbe73f62b24b63d0a61891a2394b33a0e4490/click-constrained-option-0.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}