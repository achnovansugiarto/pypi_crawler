{
  "info": {
    "author": "Darren Chambers",
    "author_email": "dazchambers@gmail.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# Cifscloak\n### Mount cifs shares using encrypted credentials\n\nCifscloak is a simple python script for encrypting and storing cifs credentials.  \n\n### Tested so far  \nUbuntu 20.04, python3.8.\n\n### Quick start:  \n\n1/ Install\n\nLatest:\n`sudo pip3 install https://github.com/sudoofus/cifscloak.git`  \n`sudo python3 -m pip install cifscloak`  \n\nScript installs to:  \n/usr/local/bin/cifscloak  \n\n2/ Create an encrypted cifstab and add cifs mounts.  \ncifscloak addmount --name <give_name_to_mount> --sharename <share_name> --mountpoint <mount_point> --i <cifs_server_address> --options <cifs_mount_options> --user cifsusername\n\n`sudo cifscloak addmount -n films -s myfilms -m /mnt/films -i myfileserver -o \"ro\" -u cifsuser`  \n`Password:`  \n\n`sudo cifscloak addmount -n games -s mygames -m /mnt/games -i myfileserver -u cifsuser`  \n`Password:`\n\n3/ Mount one or more cifs shares.  \ncifscloak mount --names <name1> <name2>  \nOr mount all shares.  \ncifscloak mount -a  \n\n`sudo cifscloak mount -n films games`\n\n4/ Unmount one or more cifs shares.  \ncifscloak mount -u --names <name1> <name2>  \nOr unmount all cifs shares named in cifstab  \ncifscloak mount -u -a  \n\n`sudo cifscloak -u -n films games`\n\n5/ List cifs share aliases stored in the cifstab.  \n\n`sudo cifscloak listmounts`\n\n  {  \n      \"films\": {  \n          \"name\": \"films\",  \n          \"host\": \"myfileserver\",  \n          \"share\": \"myfilms\",  \n          \"mountpoint\": \"/mnt/films\",  \n          \"options\": \"ro\"  \n      },  \n      \"games\": {  \n          \"name\": \"games\",  \n          \"host\": \"myfileserver\",  \n          \"share\": \"mygames\",  \n          \"mountpoint\": \"/mnt/games\",  \n          \"options\": \"\"  \n      }  \n  }  \n\n6/ Remove one or more cifs shares from the cifstab.  \ncifscloak removemounts --names <name1> <name2>\n\n`sudo cifscloak removemounts -n films games`\n\n7/ Create systemd file.  \n\n`sudo cifscloak systemdfile -a`\n\n#Generated by cifscloak  \n[Unit]  \nAfter=multi-user.target  \nDescription=cifscloak  \n\n[Service]  \nType=oneshot  \nRemainAfterExit=yes  \nExecStart=/usr/local/bin/cifscloak mount -a  \nExecStop=/usr/local/bin/cifscloak mount -u -a  \n\n[Install]  \nWantedBy=multi-user.target  \n\n`sudo cifscloak systemdfile > /etc/systemd/system/cifscloak.service`  \n`systemctl enable cifscloak`  \n`systemctl start cifscloak`  \n\n### Uninstall\n`python3 -m pip uninstall cifscloak`  \n`rm /root/.cifstab`  \n\n### Synopsis\nThis utility should be run through sudo or directly as root.\n\nThe following directory and files are created the first time that the script is executed:  \n> 0755 /root/.cifstab/  \n> 0400 /root/.cifstab/.keyfile  \n> 0644 /root/.cifstab/.cifstab.db  \n\ncryptography.fernet is used to generate the .keyfile and take care of encryption.  \nsqlite3 is used to store encrypted cifs information into /root/.cifstab/.cifstab.db\n\nOf course if you have the .keyfile and cifstab.db it is really easy to decrypt and display the passwords.  \nBe sure that the cifscloak script is not writable by anyone except root otherwise it would be trivial for a user to modify the script to have it write out the passwords somewhere  next time the script is executed.\n\nFor example:  \n> 550 /usr/bin/cifscloak\n\n### Mount cifs shares at boot time through systemd\nCifscloak can generate a simple systemd file that seems to work fine for me on Ubuntu and Centos 8.  \nInitially I did not write in any retry mechanism because it just felt sloppy but after systemd gave me a bit of a ride ( through my lack of understanding ) and after reading the documentation ( which suggested that causing the boot to wait is bad ), I instead wrote in a retry. Retrying 6 times seems to get the mounts sorted during boot. \n\n* Mountpoint directories are automatically created with default permissions.\n\n## Help\n### cifscloak -h\nusage: cifscloak [-h] {addmount,mount,removemounts,listmounts} ...  \n\ncifscloak - command line utility for mounting cifs shares using encrypted passwords  \n\npositional arguments:  \n  {addmount,mount,removemounts,listmounts}  \n                        Subcommands  \n    addmount            Add a cifs mount to cifstab, addmount -h for help  \n    mount               Mount cifs shares, mount -h for help  \n    removemounts        Remove cifs mounts from cifstab. removemount -h for help  \n    listmounts          Display cifstab shares  \n\noptional arguments:  \n  -h, --help            show this help message and exit  \n\n### cifscloak addmount -h\n\nusage: cifscloak addmount [-h] -n NAME -s SHARENAME -i IPADDRESS -m MOUNTPOINT -u USER [-o OPTIONS]  \n\noptional arguments:  \n  -h, --help            show this help message and exit  \n  -n NAME, --name NAME  Connection name e.g identifying server name  \n  -s SHARENAME, --sharename SHARENAME  \n                        Share name  \n  -i IPADDRESS, --ipaddress IPADDRESS  \n                        Server address or ipaddress  \n  -m MOUNTPOINT, --mountpoint MOUNTPOINT  \n                        Mount point  \n  -u USER, --user USER  User name  \n  -p PASSWORD, --password PASSWORD  \n                        Allows a password to be specified on the command line, otherwise getpass is used and password entry is hidden  \n  -o OPTIONS, --options OPTIONS  \n                        Quoted csv options e.g. \"domain=mydomain,ro\"   \n\n## cifscloak removemounts -h\n\nusage: cifscloak removemounts [-h] -n NAMES [NAMES ...]  \n\noptional arguments:  \n  -h, --help            show this help message and exit  \n  -n NAMES [NAMES ...], --names NAMES [NAMES ...]  \n                        Remove cifs mounts e.g. -a films music  \n\n## cifscloak mount -h\n\nusage: cifscloak mount [-h] [-u] [-r RETRIES] [-w WAITSECS] (-n NAMES [NAMES ...] | -a)  \n\noptional arguments:  \n  -h, --help            show this help message and exit  \n  -u                    Unmount the named cifs shares, e.g -a films music  \n  -r RETRIES, --retries RETRIES  \n                        Optional ( default: 3 ) - Retry count, useful when systemd is in play  \n  -w WAITSECS, --waitsecs WAITSECS  \n                        Optional ( default: 5 seconds ) - Wait time in seconds between retries  \n  -n NAMES [NAMES ...], --names NAMES [NAMES ...]  \n                        Mount reference names, e.g -n films music. --names and --all are mutually exclusive  \n  -a, --all             Mount everything in the cifstab.  \n\n## cifscloak systemdfile -h\n\nusage: cifscloak systemdfile [-h] (-n NAMES [NAMES ...] | -a)  \n\noptional arguments:  \n  -h, --help            show this help message and exit  \n  -n NAMES [NAMES ...], --names NAMES [NAMES ...]  \n                        Add named shares to the systemd unit file  \n  -a, --all             Add all cifstab shares to the systemd unit file  \n\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/sudoofus/cifscloak",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "cifscloak",
    "package_url": "https://pypi.org/project/cifscloak/",
    "platform": null,
    "project_url": "https://pypi.org/project/cifscloak/",
    "project_urls": {
      "Homepage": "https://github.com/sudoofus/cifscloak"
    },
    "release_url": "https://pypi.org/project/cifscloak/1.0.26/",
    "requires_dist": [
      "argparse",
      "cryptography",
      "regex"
    ],
    "requires_python": "",
    "summary": "Mount cifs shares using encrypted passwords",
    "version": "1.0.26",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 14087007,
  "releases": {
    "1.0.21": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4ce600ff04ac48e41009cb19e7ab91cfc131f5deb1ec1931cdea8ed94446095c",
          "md5": "126af35cfe5a159b91e8c0bf17dfffe1",
          "sha256": "de9b178ce20910f54aebfa042bb60830c2276b73c29fb2ff96d9a0aa5139d0e5"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.21.tar.gz",
        "has_sig": false,
        "md5_digest": "126af35cfe5a159b91e8c0bf17dfffe1",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 6805,
        "upload_time": "2020-07-04T09:13:45",
        "upload_time_iso_8601": "2020-07-04T09:13:45.404128Z",
        "url": "https://files.pythonhosted.org/packages/4c/e6/00ff04ac48e41009cb19e7ab91cfc131f5deb1ec1931cdea8ed94446095c/cifscloak-1.0.21.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.22": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "fd774fd2d38ddeda06846c91e673168795ca8f18fe009c6264abc377e27af169",
          "md5": "3e4250f4a59dee23d8603841f6ad22f1",
          "sha256": "06021e50cec529035c2247f77c398983c68c55ca408c41512b1fce33079cb2e7"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.22-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "3e4250f4a59dee23d8603841f6ad22f1",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 19444,
        "upload_time": "2021-09-10T17:37:44",
        "upload_time_iso_8601": "2021-09-10T17:37:44.590677Z",
        "url": "https://files.pythonhosted.org/packages/fd/77/4fd2d38ddeda06846c91e673168795ca8f18fe009c6264abc377e27af169/cifscloak-1.0.22-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "66b49f1872eca0e20f309a15d69834ecdeccb1173ca856126267899c98eb201f",
          "md5": "fcc2fe0f2877d9363043d787dcebe299",
          "sha256": "b85d4059c4c5f66323546fcf13767dd15d78f343cb40cf3a41d672689ed0c7a8"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.22.tar.gz",
        "has_sig": false,
        "md5_digest": "fcc2fe0f2877d9363043d787dcebe299",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 7689,
        "upload_time": "2021-09-10T17:37:46",
        "upload_time_iso_8601": "2021-09-10T17:37:46.093601Z",
        "url": "https://files.pythonhosted.org/packages/66/b4/9f1872eca0e20f309a15d69834ecdeccb1173ca856126267899c98eb201f/cifscloak-1.0.22.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.23": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "44be02f988790f913c9bd2d25ce3af3703350fb6b44a7e70a13aaa8d5cd22e43",
          "md5": "a333a09ed2747eacc919f6eb30966320",
          "sha256": "240fec5142351b69e3bc7e42d3c2a56d447d36d17f58146a18d029c559531412"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.23-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "a333a09ed2747eacc919f6eb30966320",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 19421,
        "upload_time": "2021-09-14T07:27:28",
        "upload_time_iso_8601": "2021-09-14T07:27:28.530906Z",
        "url": "https://files.pythonhosted.org/packages/44/be/02f988790f913c9bd2d25ce3af3703350fb6b44a7e70a13aaa8d5cd22e43/cifscloak-1.0.23-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "3f63e898ef9507f578e8f0eccc2f8da677d7af708af8802552606d8759991c39",
          "md5": "141588157582f19fbe8d92174d9e6279",
          "sha256": "e22739bb57b0544a1b6d2c584bfe1a9156200062134e45599f510c3b4cc2decc"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.23.tar.gz",
        "has_sig": false,
        "md5_digest": "141588157582f19fbe8d92174d9e6279",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 7704,
        "upload_time": "2021-09-14T07:27:30",
        "upload_time_iso_8601": "2021-09-14T07:27:30.144200Z",
        "url": "https://files.pythonhosted.org/packages/3f/63/e898ef9507f578e8f0eccc2f8da677d7af708af8802552606d8759991c39/cifscloak-1.0.23.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.24": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4c80535436fca20dc109baaf50371e72e8c23ee84d1ab7dd7e339257030a5a1a",
          "md5": "c85b244515fc76b90edf971005e92c86",
          "sha256": "78c741e7e08521b5a6e0abee900fcd65f26e6477fd0d1f645b2dcd93dfd41b52"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.24-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "c85b244515fc76b90edf971005e92c86",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 19416,
        "upload_time": "2021-09-14T12:37:41",
        "upload_time_iso_8601": "2021-09-14T12:37:41.532696Z",
        "url": "https://files.pythonhosted.org/packages/4c/80/535436fca20dc109baaf50371e72e8c23ee84d1ab7dd7e339257030a5a1a/cifscloak-1.0.24-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "29725b5727b6c1623203a3b07e153f650b092eee1bad99cbe13fe812a545417b",
          "md5": "43f64b7232854c5b79d500573d650f4e",
          "sha256": "3ab7c55794a00f6119f2f3798a237999c18f6094729477fe73426425948b244b"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.24.tar.gz",
        "has_sig": false,
        "md5_digest": "43f64b7232854c5b79d500573d650f4e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 7666,
        "upload_time": "2021-09-14T12:37:42",
        "upload_time_iso_8601": "2021-09-14T12:37:42.742532Z",
        "url": "https://files.pythonhosted.org/packages/29/72/5b5727b6c1623203a3b07e153f650b092eee1bad99cbe13fe812a545417b/cifscloak-1.0.24.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.25": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7f3ef6fc7cd926bfee14a25d27107619c1a38594dc918d7d9277b2c63b242aed",
          "md5": "12bff4e7cab10c49f84a0e8cb66e9b46",
          "sha256": "a7cd9f88f287d14bbb1221d17828745ca12a10f34b923d886787b4f415253e99"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.25-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "12bff4e7cab10c49f84a0e8cb66e9b46",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 19431,
        "upload_time": "2022-01-26T19:21:31",
        "upload_time_iso_8601": "2022-01-26T19:21:31.783721Z",
        "url": "https://files.pythonhosted.org/packages/7f/3e/f6fc7cd926bfee14a25d27107619c1a38594dc918d7d9277b2c63b242aed/cifscloak-1.0.25-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "3a88f910bea5672c2287ff3ff7e1d9b75cc3b032ff5013138e816959d0b30a04",
          "md5": "a60c335d4014e647c88fe4217ee1046f",
          "sha256": "09c6b6a51752aae770fe24ec07fd6a62fb24ff5975a46bab826b384177baa33b"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.25.tar.gz",
        "has_sig": false,
        "md5_digest": "a60c335d4014e647c88fe4217ee1046f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 7694,
        "upload_time": "2022-01-26T19:21:33",
        "upload_time_iso_8601": "2022-01-26T19:21:33.268960Z",
        "url": "https://files.pythonhosted.org/packages/3a/88/f910bea5672c2287ff3ff7e1d9b75cc3b032ff5013138e816959d0b30a04/cifscloak-1.0.25.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.26": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "512cf53938ceefd2b847e2e5e633e2347fdacd0a4ea1e5ca25179100a2b12628",
          "md5": "f3163d84187184126ff8d6c12f5bc345",
          "sha256": "7446d21940fbf49edeca361132f660ec16768487638b65a4add6bcdfcaaebebb"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.26-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "f3163d84187184126ff8d6c12f5bc345",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 19576,
        "upload_time": "2022-06-09T20:47:52",
        "upload_time_iso_8601": "2022-06-09T20:47:52.032945Z",
        "url": "https://files.pythonhosted.org/packages/51/2c/f53938ceefd2b847e2e5e633e2347fdacd0a4ea1e5ca25179100a2b12628/cifscloak-1.0.26-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ccd1340b74b47457b0117d6fb5ffd3fc4f4a84797f99e2c34a5149a08d5ba230",
          "md5": "8a55de229b4aa8f41191ee384cce1b8d",
          "sha256": "be4643309b1a0109f56a9454d3e6ba234b6213595c74190d4d7e64af52feb876"
        },
        "downloads": -1,
        "filename": "cifscloak-1.0.26.tar.gz",
        "has_sig": false,
        "md5_digest": "8a55de229b4aa8f41191ee384cce1b8d",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 7814,
        "upload_time": "2022-06-09T20:47:53",
        "upload_time_iso_8601": "2022-06-09T20:47:53.838226Z",
        "url": "https://files.pythonhosted.org/packages/cc/d1/340b74b47457b0117d6fb5ffd3fc4f4a84797f99e2c34a5149a08d5ba230/cifscloak-1.0.26.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "512cf53938ceefd2b847e2e5e633e2347fdacd0a4ea1e5ca25179100a2b12628",
        "md5": "f3163d84187184126ff8d6c12f5bc345",
        "sha256": "7446d21940fbf49edeca361132f660ec16768487638b65a4add6bcdfcaaebebb"
      },
      "downloads": -1,
      "filename": "cifscloak-1.0.26-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "f3163d84187184126ff8d6c12f5bc345",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 19576,
      "upload_time": "2022-06-09T20:47:52",
      "upload_time_iso_8601": "2022-06-09T20:47:52.032945Z",
      "url": "https://files.pythonhosted.org/packages/51/2c/f53938ceefd2b847e2e5e633e2347fdacd0a4ea1e5ca25179100a2b12628/cifscloak-1.0.26-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "ccd1340b74b47457b0117d6fb5ffd3fc4f4a84797f99e2c34a5149a08d5ba230",
        "md5": "8a55de229b4aa8f41191ee384cce1b8d",
        "sha256": "be4643309b1a0109f56a9454d3e6ba234b6213595c74190d4d7e64af52feb876"
      },
      "downloads": -1,
      "filename": "cifscloak-1.0.26.tar.gz",
      "has_sig": false,
      "md5_digest": "8a55de229b4aa8f41191ee384cce1b8d",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 7814,
      "upload_time": "2022-06-09T20:47:53",
      "upload_time_iso_8601": "2022-06-09T20:47:53.838226Z",
      "url": "https://files.pythonhosted.org/packages/cc/d1/340b74b47457b0117d6fb5ffd3fc4f4a84797f99e2c34a5149a08d5ba230/cifscloak-1.0.26.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}