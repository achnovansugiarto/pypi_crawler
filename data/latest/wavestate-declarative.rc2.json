{
  "info": {
    "author": "Lee McCuller",
    "author_email": "mcculler@mit.edu",
    "bugtrack_url": null,
    "classifiers": [
      "Intended Audience :: Science/Research",
      "License :: OSI Approved :: Apache Software License",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3",
      "Topic :: Scientific/Engineering :: Physics"
    ],
    "description": "# Declarative Python\n[![REUSE status](https://api.reuse.software/badge/git.fsfe.org/reuse/api)](https://api.reuse.software/info/git.fsfe.org/reuse/api)\n\nCollection of decorators and base classes to allow a declarative style of programming. The \nunderlying philosophy can be described as \"init considered harmful\". Instead, object attributes\nare constructed from decorator functions and then stored. This is essentially like the @property\ndecorator, but @declarative.mproperty additionally _stores_ (memoizes) the result. Unlike the @property\nbuiltin, @declarative.mproperty can take an argument, providing convenient parameterization and transformation\nof inputs.\n\nFor classes inheriting declarative.OverridableObject, the @declarative.dproperty attribute can be used\nand all properties will be called/accessed within the __init__ constructor to ensure construction. This allows\nobjects to register with other objects and is convenient for event-loop reactor programming.\n\nThe Argparse sub-library allows the user to create quick command-line interfaces to create and run methods in declarative fashion.\n\nThe technique of access->construction means that the dependencies between class attributes are resolved\nautomatically. During the construction of each attribute, any required attributes are accessed and therefore\nconstructed if they haven't already been.\n\nThe price for the convenience is that construction becomes implicit and recursive. The wrappers in this library\ndo some error checking to aid with this and to properly report AttributeError. Code also ends up somewhat more\nverbose with the decorator boilerplate.\n\n## Quick Example\n\n```python\nimport declarative\n\nclass Child(object):\n    id = None\n\nclass Parent(object):\n    @declarative.mproperty\n    def child_registry(self):\n        return set()\n\n    @declarative.mproperty\n    def c1(self):\n        print(\"made Parent.c1\")\n        child = Child()\n        child.id = 1\n        self.child_registry.add(child)\n        return child\n\n    @declarative.mproperty\n    def c2(self):\n        print(\"made Parent.c2\")\n        child = Child()\n        child.id = 2\n        self.child_registry.add(child)\n        return child\n\nparent = Parent()\nparent.c1\n#>> made Parent.c1\nparent.c2\n#>> made Parent.c2\nprint(parent.child_registry)\n```\n\nOk, so now as the child object attributes are accessed, they are also registered.\n\n## More automatic Example\n\n```python\nimport declarative\n\nclass Child(declarative.OverridableObject):\n    id = None\n\nclass Parent(declarative.OverridableObject):\n    @declarative.mproperty\n    def child_registry(self):\n        return set()\n\n    @declarative.dproperty\n    def c1(self, val = None):\n        if val is None:\n            child = Child(\n                id = 1,\n            )\n            print(\"made Parent.c1\")\n        else:\n            print(\"Using outside c1\")\n            child = val\n      \n        self.child_registry.add(child)\n        return child\n\n    @declarative.dproperty\n    def c2(self):\n        child = Child(\n            id = 2,\n        )\n        print(\"made Parent.c2\")\n        self.child_registry.add(child)\n        return child\n\n    @declarative.dproperty\n    def c2b(self):\n        child = Child(\n            id = self.c2.id + 0.5\n        )\n        print(\"made Parent.c2b\")\n        self.child_registry.add(child)\n        return child\n\nparent = Parent()\n#>> made Parent.c2\n#>> made Parent.c2b\n#>> made Parent.c1\nprint(parent.child_registry)\n```\n\nNow the registry is filled instantly.\n\nAlternatively, c1 for this object can be replaced.\n\n\n```\nparent = Parent(\n    c1 = Child(id = 8)\n)\n#>> made Parent.c2\n#>> made Parent.c2b\n#>> using outside c1\nprint(parent.child_registry)\n```\n\nNo __init__ function! \n\n## Numerical Usage\n\nThis technique can be applied for memoized numerical results, particularly when you might \nwant to canonicalize the inputs to use a numpy representation.\n\n```python\nimport declarative\n\nclass MultiFunction(declarative.OverridableObject):\n    @declarative.dproperty\n    def input_A(self, val):\n        #not providing a default makes them required keyword arguments\n        #during construction\n        return numpy.asarray(val)\n\n    @declarative.dproperty\n    def input_B(self, val):\n        return numpy.asarray(val)\n\n    @declarative.mproperty\n    def output_A(self):\n        #note usage of mproperty. This will only be computed if accessed, not at construction\n        return self.input_A + self.input_B\n\n    @declarative.mproperty\n    def output_B(self):\n        #note the use of incremental computing into output_A\n        return self.input_A * self.input_B - self.output_A\n\ndata = MultiFunction(\n    input_A = [1,2,3],\n    input_B = [4,5,6],\n)\nprint(data.output_A)\n```\n\n## Additional Features\n\n### Argparse interface\nMentioned above. Some additional annotations and run methods can allow objects to be called and accessed from the command line, without a special interface while providing improved composition of declarative programming.\n\n### Bunches\nThese are dictionary objects that also allow indexing through the '.' attribute access operator. Other libraries provide these, but the ones included here are\n\n* Bunch - just a dictionary wrapper. It also wraps any dictionary's that are stored to provide a consistent interface.\n* DeepBunch - Allows nested access without construction of intermediate dictionary's. Extremely convenient for configuration management of hierarchical systems.\n* HDFDeepBunch - DeepBunch adapted so that the underlying storage are HDF5 data groups using the h5py library. Automatically converts to/from numpy arrays and unwraps values. DeepBunch's containing compatible numbers/arrays can be directly embedded into hdf. This allows configuration storage with datasets.\n\nSee the Bunch page for more.\n\n### Relays and Callbacks\nA number of objects are provided for reactor programming. These are RelayValue and RelayBool which store values and run callbacks upon their change. This is similar Qt's signal/socket programming but lightweight for python.\n\n### Substrate System\nThis is the culmination of the declarative techniques to hierarchical simulation and modeling. Child objects automatically embed into parent objects and gain access to nonlocal data and registration interfaces. It invokes considerably more \"magic\" than this library typically need. Currently used by the python physics/controls simulation software openLoop.\n\n## Development\nThis library was developed in initial form to generate the Control System and interfaces of the Holometer experiment at Fermilab. The underlying technology for that is the EPICS distributed experimental control library (developed at Argonne). \n\nRelayBool and RelayValue objects were bound to EPICS variables using the declarative construction methods of this library. Further logic cross-linked variables and interfaced to hardware. Bunches were used for configuration management. HDFDeepBunch was used for data analysis.\n\n\n## Related Documentation\nUsing multiple inheritance and mixins becomes very simple with this style of programming, but super is often needed, but forces the use of keyword arguments. Since this library forces them anyway, this site details other considerations for using super:\n *  https://fuhm.net/super-harmful/\n \n \n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/wavestate/wavestate-declarative",
    "keywords": "",
    "license": "Apache-2.0",
    "maintainer": "",
    "maintainer_email": "",
    "name": "wavestate.declarative",
    "package_url": "https://pypi.org/project/wavestate.declarative/",
    "platform": "",
    "project_url": "https://pypi.org/project/wavestate.declarative/",
    "project_urls": {
      "Bug Tracker": "https://github.com/wavestate/wavestate-declarative/issues",
      "Homepage": "https://github.com/wavestate/wavestate-declarative",
      "Source Code": "https://github.com/wavestate/wavestate-declarative"
    },
    "release_url": "https://pypi.org/project/wavestate.declarative/1.3.4/",
    "requires_dist": [
      "setuptools-scm (>=6.0.0)"
    ],
    "requires_python": "",
    "summary": "Base classes and methods for declarative object instantiation",
    "version": "1.3.4",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 12804465,
  "releases": {
    "1.3.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "1d7d8bd5e5a034dc65e3dcd1e733c370645a53e0b355dc2678fd9cacca8eaf26",
          "md5": "bb2ae3f7f4dbfc1d0b3aecb45b082bf2",
          "sha256": "099165fb6a3caefa003a282f0a10190c35cf5c6682a2b30d1bbfe13290862149"
        },
        "downloads": -1,
        "filename": "wavestate.declarative-1.3.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "bb2ae3f7f4dbfc1d0b3aecb45b082bf2",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 36507,
        "upload_time": "2022-02-06T16:43:57",
        "upload_time_iso_8601": "2022-02-06T16:43:57.137735Z",
        "url": "https://files.pythonhosted.org/packages/1d/7d/8bd5e5a034dc65e3dcd1e733c370645a53e0b355dc2678fd9cacca8eaf26/wavestate.declarative-1.3.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "eda7993cc2eb461a7d20efa190b22072579f8572157484a9c7028aa55eb92960",
          "md5": "2984feef8ae172a49a955ac9fcae1e6c",
          "sha256": "0a736492dffc0265620bdc212417f49b17015c887cab6a61b6abe09cd768ec2f"
        },
        "downloads": -1,
        "filename": "wavestate.declarative-1.3.3.tar.gz",
        "has_sig": false,
        "md5_digest": "2984feef8ae172a49a955ac9fcae1e6c",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 32652,
        "upload_time": "2022-02-06T16:43:58",
        "upload_time_iso_8601": "2022-02-06T16:43:58.905635Z",
        "url": "https://files.pythonhosted.org/packages/ed/a7/993cc2eb461a7d20efa190b22072579f8572157484a9c7028aa55eb92960/wavestate.declarative-1.3.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.3.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2d4066073cdde67e0c5774680feece18f4b1889952b7ef354706a91e5470cacc",
          "md5": "5681b73f3a8c6e4acc01e8a506d5929a",
          "sha256": "99e827d2ee792f490b5bcb43efbe9bc5c7cfe3259713404c6cdb7a4dff6015f0"
        },
        "downloads": -1,
        "filename": "wavestate.declarative-1.3.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "5681b73f3a8c6e4acc01e8a506d5929a",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 36164,
        "upload_time": "2022-02-06T18:35:10",
        "upload_time_iso_8601": "2022-02-06T18:35:10.438154Z",
        "url": "https://files.pythonhosted.org/packages/2d/40/66073cdde67e0c5774680feece18f4b1889952b7ef354706a91e5470cacc/wavestate.declarative-1.3.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "0261f0d7215c9240614d8ef67c97e3d35ae25b86f698dc06ea751d211f2b7015",
          "md5": "0168dc1162493f1718acf0b9c499c498",
          "sha256": "782217a11e2bcbb87a410536720858c669ca94f41c49aed704bde0e1f192cd99"
        },
        "downloads": -1,
        "filename": "wavestate.declarative-1.3.4.tar.gz",
        "has_sig": false,
        "md5_digest": "0168dc1162493f1718acf0b9c499c498",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 32301,
        "upload_time": "2022-02-06T18:35:12",
        "upload_time_iso_8601": "2022-02-06T18:35:12.017575Z",
        "url": "https://files.pythonhosted.org/packages/02/61/f0d7215c9240614d8ef67c97e3d35ae25b86f698dc06ea751d211f2b7015/wavestate.declarative-1.3.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "2d4066073cdde67e0c5774680feece18f4b1889952b7ef354706a91e5470cacc",
        "md5": "5681b73f3a8c6e4acc01e8a506d5929a",
        "sha256": "99e827d2ee792f490b5bcb43efbe9bc5c7cfe3259713404c6cdb7a4dff6015f0"
      },
      "downloads": -1,
      "filename": "wavestate.declarative-1.3.4-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "5681b73f3a8c6e4acc01e8a506d5929a",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 36164,
      "upload_time": "2022-02-06T18:35:10",
      "upload_time_iso_8601": "2022-02-06T18:35:10.438154Z",
      "url": "https://files.pythonhosted.org/packages/2d/40/66073cdde67e0c5774680feece18f4b1889952b7ef354706a91e5470cacc/wavestate.declarative-1.3.4-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "0261f0d7215c9240614d8ef67c97e3d35ae25b86f698dc06ea751d211f2b7015",
        "md5": "0168dc1162493f1718acf0b9c499c498",
        "sha256": "782217a11e2bcbb87a410536720858c669ca94f41c49aed704bde0e1f192cd99"
      },
      "downloads": -1,
      "filename": "wavestate.declarative-1.3.4.tar.gz",
      "has_sig": false,
      "md5_digest": "0168dc1162493f1718acf0b9c499c498",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 32301,
      "upload_time": "2022-02-06T18:35:12",
      "upload_time_iso_8601": "2022-02-06T18:35:12.017575Z",
      "url": "https://files.pythonhosted.org/packages/02/61/f0d7215c9240614d8ef67c97e3d35ae25b86f698dc06ea751d211f2b7015/wavestate.declarative-1.3.4.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}