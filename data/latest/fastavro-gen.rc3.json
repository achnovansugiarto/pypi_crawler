{
  "info": {
    "author": "Guðjón Ragnar Brynjarsson",
    "author_email": "",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# Avro scheme generation\n\n:exclamation: This is quite barebones. Not all avro structures/types will be handled correctly since it was made with a specific avro schema catalog in mind. If you find anything missing, please submit a PR or create an issue.\n\nThis library aims to create dataclasses and/or typed dict definitions from avro schemes, that can be used to type check creation of messages using a static type checker such as mypy.\nThe aim is to catch bugs before they occurr on runtime, and provide better IDE support.\n\nAs the name suggests, it was thought of as an optional extension to use with the excellent [fastavro](github.com/fastavro/fastavro) library.\nFastavro allows users to read avro schemas, create messages and write them as avro messages, or validate against a schema.\n\nFastavro-gen uses fastavro to read `.avsc` files and from the schema object generated, creates classes. Classes are written one per file, using the namespace to create a directory structure.\nFor example, the following record output class will be created under `./example/avro/user.py`.\n```json\n{\n    \"namespace\": \"example.avro\",\n    \"type\": \"record\",\n    \"name\": \"User\",\n    \"fields\": [\n        {\"name\": \"name\", \"type\": \"string\"},\n        {\"name\": \"favorite_number\",  \"type\": [\"int\", \"null\"]},\n        {\"name\": \"favorite_color\", \"type\": [\"string\", \"null\"]}\n    ]\n}\n```\n\nBuilding a `User` message would normally be done by building a dictionary:\n```python\n{\n    \"name\": \"My User\",\n    \"favorite_number\": \"1\",\n    \"favorite_color\": \"green\",\n}\n```\nNotice that the favorite number field in the schema has type int (or None) but the one we created has a string. This would cause a runtime error when writing or validating the record.\nUsing the generated dataclass we can get IDE support (screenshot using VSCode with the Pylance language server). Notice the underlined `\"1\"`. Hovering over shows the relevant error.\n\n![VSCode IDE support](https://github.com/gudjonragnar/fastavro-gen/blob/main/docs/ide_support.png)\n\nMypy will also catch this issue:\n```bash\ntest.py:9: error: Argument \"favorite_number\" to \"User\" has incompatible type \"str\"; expected \"Optional[int]\"\nFound 1 error in 1 file (checked 1 source file)\n```\n\n\n## Output\n\nThe library offers the user two different output class types, `dataclass`es and `TypedDict`s.\nEach has it's pros and cons that have to be weighed for the user's use cases.\n\n### TypedDict\n`TypedDict`s are only valuable during type checking, and on runtime they are simply treated as normal dicts. \nAs such they can be built using common python dict syntax with an added type annotation, or using a class instantiation syntax:\n```python\nclass A(TypedDict, total=True):\n    field1: int\n    field2: str\n    ...\n\ninstance1: A = {\n    \"field1\": 1,\n    \"field2\": \"2\",\n}\n\ninstance2 = A(\n    field1=1,\n    field2=\"2\",\n)\n```\n:heavy_plus_sign:Messages can be built using python dictionary syntax  \n:heavy_plus_sign:Fastavro expects messages as dictionaries  \n:heavy_minus_sign:All fields of the dictionary have to be given at the time of creation, unless the `total` option is given as `False`.\nHaving `total=False` however restricts some aspects of the type checking e.g. checking if some keys are set or not. \nCurrently this library has the total option hardcoded as `False` but that might be configurable at a later time.  \n:heavy_minus_sign:No ability to specify defaults.  \n\n### dataclass\nDataclasses allow for easy declaration of python classes.\n\n:heavy_plus_sign:Can handle default values for fields. As such only non-default fields have to be instantiated initially.  \n:heavy_plus_sign:Easy to transform to dictionaries with the provided `fastavro_gen.asdict` function. It is simply a wrapper around `dataclasses.asdict`.  \n:heavy_minus_sign:Complex nested schemas means a lot of objects being created  \n:heavy_minus_sign:Extra overhead transforming messages to dictionaries  \n:heavy_minus_sign:Overhead transforming dictionaries to dataclasses using `fastavro_gen.fromdict`.  \n\n\n## Usage\n\nThis is a work in progress but is available on PyPI.\n\n```bash\npip install fastavro-gen\n```\n\nTo generate classes use the CLI or import the `generate` function from `fastavro_gen`. The library also exposes `fastavro_gen.[asdict, fromdict]` to map generated dataclasses to and from dictionaries.\n\n:bulb: When the ordered option is specified, the file parameter will be ignored. Instead you can define schemas specified in the file parameter as singletons in the toml file passed to ordered.\n\n```\nusage: fastavro_gen [-h] [-o ORDERED] [--class-type {dataclass,TypedDict}] [--no-black] [--prefix PREFIX] [--output-dir OUTPUT_DIR] [file [file ...]]\n\nGenerate dataclasses or TypedDicts from avro schemas\n\npositional arguments:\n  file                  file(s) to parse, use '-' for stdin\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -o ORDERED, --ordered ORDERED\n                        Path to a .toml file for multiple schemas or ordered schemas. Overwrites 'file' parameter.\n  --class-type {dataclass,TypedDict}\n  --no-black            Do not run output files through 'black'\n  --prefix PREFIX       Removes this prefix from namespace if it is contained\n  --output-dir OUTPUT_DIR\n                        Specify the output location\n```\n\n### The `--ordered` option\nThe option allows users to specify an order of files to read throught fastavro's `load_schema_ordered` function.\nThis is useful when your files are laid out in a manner that does not follow the structure that the normal `load_schema` expects.\n\nThe option takes as value a path to a `.toml` file that describes what schemas to read and what their pre-requisites.\nFor example, creating classes for a schema A that depends on B and C your `.toml` would include:\n```toml\nschemaA = [\n    \"/path/to/C.avsc\",\n    \"/path/to/B.avsc\",\n    \"/path/to/A.avsc\",\n]\n```\nThe toml file can describe multiple schema dependencies, each as their own list.\n\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/gudjonragnar/fastavro-gen",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "fastavro-gen",
    "package_url": "https://pypi.org/project/fastavro-gen/",
    "platform": null,
    "project_url": "https://pypi.org/project/fastavro-gen/",
    "project_urls": {
      "Homepage": "https://github.com/gudjonragnar/fastavro-gen"
    },
    "release_url": "https://pypi.org/project/fastavro-gen/0.0.3/",
    "requires_dist": [
      "fastavro (>=1.3.0)",
      "black",
      "python-snappy ; extra == 'codecs'",
      "zstandard ; extra == 'codecs'",
      "lz4 ; extra == 'codecs'",
      "lz4 ; extra == 'lz4'",
      "python-snappy ; extra == 'snappy'",
      "zstandard ; extra == 'zstandard'"
    ],
    "requires_python": ">=3.8",
    "summary": "Generation of classes from Avro schemas",
    "version": "0.0.3",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16713107,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "b7ab41a7e325f7d37b3529357aa88fdfa3377ea22d4078163c45a541adce3498",
          "md5": "60568d8e134ceb5e14b244baad9deffd",
          "sha256": "e6bf16fe385e69e4734f4a31d2f0f689125d6d8870a285c0c509cbc141167714"
        },
        "downloads": -1,
        "filename": "fastavro_gen-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "60568d8e134ceb5e14b244baad9deffd",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 9850,
        "upload_time": "2021-02-06T08:16:10",
        "upload_time_iso_8601": "2021-02-06T08:16:10.460649Z",
        "url": "https://files.pythonhosted.org/packages/b7/ab/41a7e325f7d37b3529357aa88fdfa3377ea22d4078163c45a541adce3498/fastavro_gen-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "d8c9f0158bc7c00064ec6a939f0298dc226c9be499312ce78cb83ec9e2aa398a",
          "md5": "af43742641631d02d5b5b4a12697fc74",
          "sha256": "c8582fa63f04e40fd6b73d70e8d426706af055831787404a9d8d14b2744d113f"
        },
        "downloads": -1,
        "filename": "fastavro-gen-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "af43742641631d02d5b5b4a12697fc74",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8",
        "size": 10427,
        "upload_time": "2021-02-06T08:16:11",
        "upload_time_iso_8601": "2021-02-06T08:16:11.719921Z",
        "url": "https://files.pythonhosted.org/packages/d8/c9/f0158bc7c00064ec6a939f0298dc226c9be499312ce78cb83ec9e2aa398a/fastavro-gen-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "77aace2ae75dc8a983a26af1d87e754bea1e155b879f26ccd95a843a0ab57ed2",
          "md5": "f98faa30b499e8cb8d98a435ae460b45",
          "sha256": "eea0a4f4c2f2cea8dd21048076542b258059884b2b1e1ee64698857ee2980cb8"
        },
        "downloads": -1,
        "filename": "fastavro_gen-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "f98faa30b499e8cb8d98a435ae460b45",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 9872,
        "upload_time": "2022-07-12T08:28:44",
        "upload_time_iso_8601": "2022-07-12T08:28:44.766278Z",
        "url": "https://files.pythonhosted.org/packages/77/aa/ce2ae75dc8a983a26af1d87e754bea1e155b879f26ccd95a843a0ab57ed2/fastavro_gen-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5ba792933d86a8942646b091f58ef2dad8a4df1a5761258c17162751283ef61c",
          "md5": "367952f42c6f887e56648752475a7b5b",
          "sha256": "7a0c1493af7990cf75a483755287ba29dffa095b071f8c618de8a103060cff97"
        },
        "downloads": -1,
        "filename": "fastavro-gen-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "367952f42c6f887e56648752475a7b5b",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8",
        "size": 11181,
        "upload_time": "2022-07-12T08:28:46",
        "upload_time_iso_8601": "2022-07-12T08:28:46.352532Z",
        "url": "https://files.pythonhosted.org/packages/5b/a7/92933d86a8942646b091f58ef2dad8a4df1a5761258c17162751283ef61c/fastavro-gen-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "fc7285fd49285ca7046e2ae33f8756dea4b0b8b5e727fd862fbdaa834465c7d9",
          "md5": "3d81578ef0959817504b6ba6329c5449",
          "sha256": "fd9c6c01417732e65885cb116450ceb2f69dd9151151cb3ccfc99ea621d46d93"
        },
        "downloads": -1,
        "filename": "fastavro_gen-0.0.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "3d81578ef0959817504b6ba6329c5449",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8",
        "size": 10121,
        "upload_time": "2023-02-06T14:41:40",
        "upload_time_iso_8601": "2023-02-06T14:41:40.300518Z",
        "url": "https://files.pythonhosted.org/packages/fc/72/85fd49285ca7046e2ae33f8756dea4b0b8b5e727fd862fbdaa834465c7d9/fastavro_gen-0.0.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7ebeee53d2813815ac3596a01a40160965f13c0f04e1d6979355cf84f2825910",
          "md5": "91dc105c69efdc4d7b0f6da7da5342a9",
          "sha256": "1d45ce3ab3a3e4c36dd0a7d8c4f1c62b4f5ca691989f4ef3d9496522720666ae"
        },
        "downloads": -1,
        "filename": "fastavro-gen-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "91dc105c69efdc4d7b0f6da7da5342a9",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8",
        "size": 11436,
        "upload_time": "2023-02-06T14:41:41",
        "upload_time_iso_8601": "2023-02-06T14:41:41.816539Z",
        "url": "https://files.pythonhosted.org/packages/7e/be/ee53d2813815ac3596a01a40160965f13c0f04e1d6979355cf84f2825910/fastavro-gen-0.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "fc7285fd49285ca7046e2ae33f8756dea4b0b8b5e727fd862fbdaa834465c7d9",
        "md5": "3d81578ef0959817504b6ba6329c5449",
        "sha256": "fd9c6c01417732e65885cb116450ceb2f69dd9151151cb3ccfc99ea621d46d93"
      },
      "downloads": -1,
      "filename": "fastavro_gen-0.0.3-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "3d81578ef0959817504b6ba6329c5449",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.8",
      "size": 10121,
      "upload_time": "2023-02-06T14:41:40",
      "upload_time_iso_8601": "2023-02-06T14:41:40.300518Z",
      "url": "https://files.pythonhosted.org/packages/fc/72/85fd49285ca7046e2ae33f8756dea4b0b8b5e727fd862fbdaa834465c7d9/fastavro_gen-0.0.3-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "7ebeee53d2813815ac3596a01a40160965f13c0f04e1d6979355cf84f2825910",
        "md5": "91dc105c69efdc4d7b0f6da7da5342a9",
        "sha256": "1d45ce3ab3a3e4c36dd0a7d8c4f1c62b4f5ca691989f4ef3d9496522720666ae"
      },
      "downloads": -1,
      "filename": "fastavro-gen-0.0.3.tar.gz",
      "has_sig": false,
      "md5_digest": "91dc105c69efdc4d7b0f6da7da5342a9",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.8",
      "size": 11436,
      "upload_time": "2023-02-06T14:41:41",
      "upload_time_iso_8601": "2023-02-06T14:41:41.816539Z",
      "url": "https://files.pythonhosted.org/packages/7e/be/ee53d2813815ac3596a01a40160965f13c0f04e1d6979355cf84f2825910/fastavro-gen-0.0.3.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}