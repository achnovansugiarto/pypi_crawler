{
  "info": {
    "author": "Qotto dev team",
    "author_email": "dev@qotto.net",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 3 - Alpha",
      "Intended Audience :: Developers",
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "# Release 3.0.0\n\nThis is the `release-3.0.0` branch, will be merged into main tagged `3.0.0`. Original README at the bottom\n\n## Quickstart\n\nThe first feature is a concept of `trace_id` and `request_id` context that works with threaded and async execution contexts (using contextvars). This allows to use logging handler defined in eventy to add this information in your logs automatically.\n\n### Logging setup API\n\nOut of the box:\n\n```python\nimport logging\n\nfrom eventy.logging import GkeHandler, SimpleHandler\n\n# Apply to all loggers\n# Log levels can then be reduced in handlers\nroot_logger = logging.getLogger()\nroot_logger.setLevel('DEBUG')\n\n# All INFO and above messages with GKE format\ngke_handler = GkeHandler(level='INFO')\nroot_logger.addHandler(gke_handler)\n\n# Additionally, all messages with default colored text format\ncolortext_handler = SimpleHandler(colored=True, level='DEBUG')\nroot_logger.addHandler(colortext_handler)\n\n# Additionally, all WARNING with a specific format\ncustom_handler = SimpleHandler(\n    fmt='%(asctime)s SPECIAL WARNING! TRACE_id=%(trace_id)s %(message)s',\n    datefmt='[%Y-%m-%d %H:%M:%S %z]',\n    level='WARNING'\n)\nroot_logger.addHandler(custom_handler)\n```\n\nCustomize everything:\n\n```python\nimport logging\nfrom eventy.logging import add_trace_id_filter, add_request_id_filter\n\nhandler = logging.StreamHandler()\nformatter = logging.Formatter(\n    fmt='%(asctime)s [CID:%(correlation_id)s] [RID:%(request_id)s] '\n        '%(levelname)s (%(module)s L%(lineno)d) '\n        '%(message)s',\n    datefmt='[%Y-%m-%d %H:%M:%S %z]',\n)\nhandler.setFormatter(formatter)\n\n# You need to add this if you don't use GkeHandler or SimpleHandler\nhandler.addFilter(add_trace_id_filter)\nhandler.addFilter(add_request_id_filter)\n\nhandler.setLevel('INFO')\nroot_logger.addHandler(handler)\n```\n\n## Context API\n\nConsider this example:\n\n```python\nimport asyncio\nimport logging\n\nfrom eventy.context import request_id\nfrom eventy.logging import SimpleHandler\n\nlogger = logging.getLogger(__name__)\n\nroot_logger = logging.getLogger()\nroot_logger.setLevel('DEBUG')\nroot_logger.addHandler(SimpleHandler())\n\nasync def handle_request(delay):\n    logger.info(f'Begin')\n    await asyncio.sleep(delay)\n    logger.info(f'End')\n\nasync def main():\n    tasks = []\n\n    request_id.set(\"R-1\")\n    tasks.append(asyncio.create_task(handle_request(1.0)))\n    request_id.set(\"R-2\")\n    tasks.append(asyncio.create_task(handle_request(2.0)))\n    request_id.set(\"R-3\")\n    tasks.append(asyncio.create_task(handle_request(1.5)))\n\n    for task in tasks:\n        await task\n\nasyncio.run(main())\n```\n\nNote that the only parameter fo `handle_request` is the delay to process. The logs are:\n\n```\n[2021-06-22 12:15:08 +0200] [TID:] [RID:R-1] INFO __main__ (ex2 L18) Begin\n[2021-06-22 12:15:08 +0200] [TID:] [RID:R-2] INFO __main__ (ex2 L18) Begin\n[2021-06-22 12:15:08 +0200] [TID:] [RID:R-3] INFO __main__ (ex2 L18) Begin\n[2021-06-22 12:15:09 +0200] [TID:] [RID:R-1] INFO __main__ (ex2 L20) End\n[2021-06-22 12:15:09 +0200] [TID:] [RID:R-3] INFO __main__ (ex2 L20) End\n[2021-06-22 12:15:10 +0200] [TID:] [RID:R-2] INFO __main__ (ex2 L20) End\n```\n\nThreading support will come later.\n\n# Eventy\n\n## What is Eventy?\n\nEventy is both a protocol and a library for making the design of fault-tolerant, event-driven, concurrent and distributed applications in a microservices-oriented architecture easier.\n\nAs a protocol, Eventy is language-agnostic.\n\nHowever, the reference implementation is written in Python. Whatever is your programming language, you can use Eventy. If you are using Python, you will be able to make the most of it quicker.\n\n## Motivation\n\nThe reality is, a distributed, microservices-oriented architecture is a bit hard to make right.\n\nMartin Fowler even [ended up stating](https://www.drdobbs.com/errant-architectures/184414966):\n\n> First Law of Distributed Object Design: “don't distribute your objects”.\n\nHe later [detailed his view](https://martinfowler.com/articles/distributed-objects-microservices.html) of the First Law regarding microservices.\n\nAs Martin Folwer points out, inherently microservices come with their undeniable advantages and a few companies use them with great success. The only reason why a lot of people end up struggling with microservices, is because it greatly increases the complexity of the whole system, which makes it harder to get it right.\n\nEventy is adressing exactly that issue — providing you with a reliable framework to make microservices work for you.\n\nA big part of the design process to create Eventy was to understand different use cases and see how the design can be simplified. For instance, not only does Eventy offer state partitionning for free, it actually comes up with a few stratagies that eliminate the need to persist state altogether.\n\n## Inspiration\n\n[Kafka Streams](https://kafka.apache.org/documentation/streams/) was a great influence in making Eventy. [Celery](http://www.celeryproject.org/) and [Faust](https://github.com/robinhood/faust) are also worth to be looked at if you are looking for an opiniated framework easy to get started with.\n\nHowever, these frameworks only partially solve all the issues you will have with microservices. And, in our opinion, these frameworks are not suitable for designing large critical systems.\n\nThey're both opinanated, and therefore cannot be easily integrated in your existing software. You will have to build your software around the framework, instead of the other way around. They also don't give you the full control on the way you can use them: you can only use them as a whole, or not at all.\n\n## What Eventy can do for you\n\nEventy implements multiple features, but all of them simply solve two main problems:\n\n* How to make services communicate with each other\n* How to access and persist state\n\nWith Eventy, you can serialize data the way you want. You can use [Avro](https://avro.apache.org/), [JSON](https://www.json.org/), [gRPC](https://grpc.io/), or whatever customer serializer you like.\n\nWith Eventy, you can use any system you like as a persistency layer, as long as it supports transactions, if you need strong processing guarantees. The most obvious choice is to use [Apache Kafka](https://kafka.apache.org/), but persisting messages over [PostgreSQL](https://www.postgresql.org/) is completely feasable, too.\n\nEventy was destined with the mindset of a library of related but independently usable components - and not a framework: the behaviour is explicit and you're the one in charge: you can design your software your own way.\n\nThis explicit behaviour, albeit requiring more boilerplate, gives you better clarity on what is happening. Recipes and examples are provided so that you can understand how to use Eventy for most use cases.\n\nYou're free to use any part of Eventy as well. Even if you end up not using the Eventy protocol at all, simply reading the documentation and understanding the issues that are adressed and how they are adressed can help you to get on the right path.\n\n## Main components of Eventy\n\n* a **well-defined communication protocol** for sending various types of persisted messages, called _Records_: _Events_, _Requests_ and _Responses_\n* **persistency of _Records_** that can be stored forever, which lets you keep track of all the changes in your system (especially useful for audits and business analytics)\n* **queues** so that _Records_ can be processed asynchroneously, and aren't lost even if your system is down or overloaded\n* **strong processing guarantees**: a Record can be designed to be processed _at least once_, _at most once_ and _exactly once_ even if your system encounters a process or network failure at any point\n* **self-propagating _Contexts_** that in many cases entirely eliminate the need of persisting state\n* **partitionned state persistency** so that you no longer have a single point of failure in your system (aka _the database_) and can scale up as your business grows\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://gitlab.com/qotto/oss/eventy",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "eventy3",
    "package_url": "https://pypi.org/project/eventy3/",
    "platform": "",
    "project_url": "https://pypi.org/project/eventy3/",
    "project_urls": {
      "Homepage": "https://gitlab.com/qotto/oss/eventy"
    },
    "release_url": "https://pypi.org/project/eventy3/3.0.0/",
    "requires_dist": [
      "coloredlogs (==15.0.1)",
      "confluent-kafka (==1.7.0)",
      "contextvars (==2.4)",
      "humanfriendly (==9.2)",
      "immutables (==0.15)",
      "semver (==2.13.0)",
      "urnparse (==0.2.0)"
    ],
    "requires_python": ">=3.7",
    "summary": "Qotto/eventy",
    "version": "3.0.0",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 10731029,
  "releases": {
    "3.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "be6eb26a4c488dda575f7a81605d17114a0f09c6eb3e58f9611b65e427d70023",
          "md5": "f6a745baded1673bb3a54b23965dcde2",
          "sha256": "8555b23798c8b562f79aaf309d6750e0591624e4983bf68c58b40c21592df769"
        },
        "downloads": -1,
        "filename": "eventy3-3.0.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "f6a745baded1673bb3a54b23965dcde2",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7",
        "size": 23362,
        "upload_time": "2021-06-24T09:12:04",
        "upload_time_iso_8601": "2021-06-24T09:12:04.191030Z",
        "url": "https://files.pythonhosted.org/packages/be/6e/b26a4c488dda575f7a81605d17114a0f09c6eb3e58f9611b65e427d70023/eventy3-3.0.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "122ff7c639983b4e70d95331996cf6ef17c209bab2fded6ace426b9bd0327169",
          "md5": "1da815ca8004489313a79db68a75389e",
          "sha256": "42703618135967f7ca0cf04fd7f1ec17046f898dba6980241c6870dab37d6a99"
        },
        "downloads": -1,
        "filename": "eventy3-3.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "1da815ca8004489313a79db68a75389e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7",
        "size": 20859,
        "upload_time": "2021-06-24T09:12:06",
        "upload_time_iso_8601": "2021-06-24T09:12:06.604670Z",
        "url": "https://files.pythonhosted.org/packages/12/2f/f7c639983b4e70d95331996cf6ef17c209bab2fded6ace426b9bd0327169/eventy3-3.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "be6eb26a4c488dda575f7a81605d17114a0f09c6eb3e58f9611b65e427d70023",
        "md5": "f6a745baded1673bb3a54b23965dcde2",
        "sha256": "8555b23798c8b562f79aaf309d6750e0591624e4983bf68c58b40c21592df769"
      },
      "downloads": -1,
      "filename": "eventy3-3.0.0-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "f6a745baded1673bb3a54b23965dcde2",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.7",
      "size": 23362,
      "upload_time": "2021-06-24T09:12:04",
      "upload_time_iso_8601": "2021-06-24T09:12:04.191030Z",
      "url": "https://files.pythonhosted.org/packages/be/6e/b26a4c488dda575f7a81605d17114a0f09c6eb3e58f9611b65e427d70023/eventy3-3.0.0-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "122ff7c639983b4e70d95331996cf6ef17c209bab2fded6ace426b9bd0327169",
        "md5": "1da815ca8004489313a79db68a75389e",
        "sha256": "42703618135967f7ca0cf04fd7f1ec17046f898dba6980241c6870dab37d6a99"
      },
      "downloads": -1,
      "filename": "eventy3-3.0.0.tar.gz",
      "has_sig": false,
      "md5_digest": "1da815ca8004489313a79db68a75389e",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.7",
      "size": 20859,
      "upload_time": "2021-06-24T09:12:06",
      "upload_time_iso_8601": "2021-06-24T09:12:06.604670Z",
      "url": "https://files.pythonhosted.org/packages/12/2f/f7c639983b4e70d95331996cf6ef17c209bab2fded6ace426b9bd0327169/eventy3-3.0.0.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}