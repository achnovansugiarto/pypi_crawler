{
  "info": {
    "author": "Shunsuke KITADA",
    "author_email": "shunsuke.kitada.0831@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: MIT License",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.7",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "# ANLS: Average Normalized Levenshtein Similarity\n\n[![CI](https://github.com/shunk031/ANLS/actions/workflows/ci.yaml/badge.svg)](https://github.com/shunk031/ANLS/actions/workflows/ci.yaml)\n[![Release](https://github.com/shunk031/ANLS/actions/workflows/release.yaml/badge.svg)](https://github.com/shunk031/ANLS/actions/workflows/release.yaml)\n![Python](https://img.shields.io/badge/python-3.7%20%7C%203.8%20%7C%203.9-blue?logo=python)\n[![PyPI](https://img.shields.io/pypi/v/anls.svg)](https://pypi.python.org/pypi/anls)\n\nThis python script is based on the one provided by [the Robust Reading Competition](https://rrc.cvc.uab.es/?com=introduction#) for evaluation of the InfographicVQA task.\n\n## The ANLS metric\n\nThe Average Normalized Levenshtein Similarity (ANLS) proposed by [[Biten+ ICCV'19](https://arxiv.org/abs/1905.13648)] smoothly captures the OCR mistakes applying a slight penalization in case of correct intended responses, but badly recognized. It also makes use of a threshold of value 0.5 that dictates whether the output of the metric will be the ANLS if its value is equal or bigger than 0.5 or 0 otherwise. The key point of this threshold is to determine if the answer has been correctly selected but not properly recognized, or on the contrary, the output is a wrong text selected from the options and given as an answer.\n\nMore formally, the ANLS between the net output and the ground *truth answers is given by* equation 1. Where $N$ is the total number of questions, $M$ total number of GT answers per question, $a_{ij}$ the ground truth answers where $i = \\{0, ..., N\\}$, and $j = \\{0, ..., M\\}$, and $o_{qi}$ be the network's answer for the ith question $q_i$:\n\n$$\n    \\mathrm{ANLS} = \\frac{1}{N} \\sum_{i=0}^{N} \\left(\\max_{j} s(a_{ij}, o_{qi}) \\right),\n$$\n\nwhere $s(\\cdot, \\cdot)$ is defined as follows:\n\n$$\n    s(a_{ij}, o_{qi}) = \\begin{cases}\n    1 - \\mathrm{NL}(a_{ij}, o_{qi}), & \\text{if } \\mathrm{NL}(a_{ij}, o_{qi}) \\lt \\tau \\\\\n    0,                               & \\text{if } \\mathrm{NL}(a_{ij}, o_{qi}) \\ge \\tau\n    \\end{cases}\n$$\n\nThe ANLS metric is not case sensitive, but space sensitive. For example:\n\n[![Coca-Cola_example.jpg from https://rrc.cvc.uab.es/?ch=11&com=tasks](./.github/Coca-Cola_example.jpg)](https://rrc.cvc.uab.es/?ch=11&com=tasks)\n> Q: What soft drink company name is on the red disk?\n>\n> Possible answers:\n> - $a_{i1}$ : Coca Cola\n> - $a_{i2}$ : Coca Cola Company\n\n| Net output ($o_{qi}$) | $s(a_{ij}, o_{qi})$ | Score (ANLS) |\n|:---------------------:|:--------------------------------:|--------------:|\n| The Coca              | $a_{i1} = 0.44$, $a_{i2} = 0.29$ | 0.00          |\n| CocaCola              | $a_{i1} = 0.89$, $a_{i2} = 0.47$ | 0.89          |\n| Coca cola             | $a_{i1} = 1.00$, $a_{i2} = 0.53$ | 1.00          |\n| Cola                  | $a_{i1} = 0.44$, $a_{i2} = 0.23$ | 0.00          |\n| Cat                   | $a_{i1} = 0.22$, $a_{i2} = 0.12$ | 0.00          |\n\n## Installation\n\n- From pypi\n\n```shell\npip install anls\n```\n\n- From GitHub\n\n```shell\npip install git+https://github.com/shunk031/ANLS\n```\n\n## How to use\n\n## From CLI\n\n```shell\ncalculate-anls \\\n    --gold-label-file test_fixtures/evaluation/evaluate_json/gold_label.json \\\n    --submission-file test_fixtures/evaluation/evaluate_json/submission.json \\\n    --anls-threshold 0.5\n```\n\n```shell\n❯❯❯ calculate-anls --help\nusage: calculate-anls [-h] --gold-label-file GOLD_LABEL_FILE --submission-file SUBMISSION_FILE [--anls-threshold ANLS_THRESHOLD]\n\nEvaluation command using ANLS\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --gold-label-file GOLD_LABEL_FILE\n                        Path of the Ground Truth file.\n  --submission-file SUBMISSION_FILE\n                        Path of your method's results file.\n  --anls-threshold ANLS_THRESHOLD\n                        ANLS threshold to use (See Scene-Text VQA paper for more info.).\n```\n\n## From python script\n\n```py\n>>> from anls import anls_score\n>>> ai1 = \"Coca Cola\"\n>>> ai2 = \"Coca Cola Company\"\n>>> net_output = \"The Coca\"\n>>> anls_score(prediction=net_output, gold_labels=[ai1, ai2], threshold=0.5)\n0.00\n>>> net_output  = \"CocaCola\"\n>>> anls_score(prediction=net_output, gold_labels=[ai1, ai2], threshold=0.5)\n0.89\n>>> net_output  = \"Coca cola\"\n>>> anls_score(prediction=net_output, gold_labels=[ai1, ai2], threshold=0.5)\n1.0\n```\n\n## References\n\n- Biten, Ali Furkan, et al. [\"Scene text visual question answering.\"](https://arxiv.org/abs/1905.13648) Proceedings of the IEEE/CVF international conference on computer vision. 2019.\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/shunk031/ANLS",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "anls",
    "package_url": "https://pypi.org/project/anls/",
    "platform": null,
    "project_url": "https://pypi.org/project/anls/",
    "project_urls": {
      "Homepage": "https://github.com/shunk031/ANLS",
      "Repository": "https://github.com/shunk031/ANLS"
    },
    "release_url": "https://pypi.org/project/anls/0.0.2/",
    "requires_dist": null,
    "requires_python": ">=3.7,<4.0",
    "summary": "ANLS: Average Normalized Levenshtein Similarity",
    "version": "0.0.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 14430979,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ec8c42e9738333012f1f8fffbd525fb0254bfde89192efde860573fcf9ab43f4",
          "md5": "75cf85f3168031eceeb6af7abb2daccd",
          "sha256": "adcbb1c4d1bc841dab360ef2f05f0e3ac80e722b5e94ac5f6c703f9b3cd48501"
        },
        "downloads": -1,
        "filename": "anls-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "75cf85f3168031eceeb6af7abb2daccd",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7,<4.0",
        "size": 11973,
        "upload_time": "2022-06-21T14:44:18",
        "upload_time_iso_8601": "2022-06-21T14:44:18.594247Z",
        "url": "https://files.pythonhosted.org/packages/ec/8c/42e9738333012f1f8fffbd525fb0254bfde89192efde860573fcf9ab43f4/anls-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "745314ca3433bac70d47d8ef6d1acd4f40ad2547fd823ed44b8853846f073d9a",
          "md5": "45e35a1af55603176ae56108d432a7d5",
          "sha256": "b2e1ff9191b6704a8c7bd4944b1737973bb3dcb4bb9328c5800f261ae4b05111"
        },
        "downloads": -1,
        "filename": "anls-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "45e35a1af55603176ae56108d432a7d5",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7,<4.0",
        "size": 10232,
        "upload_time": "2022-06-21T14:44:20",
        "upload_time_iso_8601": "2022-06-21T14:44:20.869438Z",
        "url": "https://files.pythonhosted.org/packages/74/53/14ca3433bac70d47d8ef6d1acd4f40ad2547fd823ed44b8853846f073d9a/anls-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "166fbd3b85c757a57c38955ae0c705357aac1ec282f5281cff7679d00620440c",
          "md5": "0ab76e584f177eb8520f3591ef3f7663",
          "sha256": "f6273fc31188784cd3f6ac083412f70be095ab531847580a88245ee836abe811"
        },
        "downloads": -1,
        "filename": "anls-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0ab76e584f177eb8520f3591ef3f7663",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.7,<4.0",
        "size": 12050,
        "upload_time": "2022-07-14T03:20:21",
        "upload_time_iso_8601": "2022-07-14T03:20:21.311194Z",
        "url": "https://files.pythonhosted.org/packages/16/6f/bd3b85c757a57c38955ae0c705357aac1ec282f5281cff7679d00620440c/anls-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6389af7f09252bd4e9932893c0f167fe33baf338f673f8fd4130d7f01c170fb0",
          "md5": "b3536b5c5e4dbaf2e7f369dc0b2fedb6",
          "sha256": "2a0c1223c63a310dca916f130a96cbb33d2145af5fbc6dbb337e160a6e2fbed7"
        },
        "downloads": -1,
        "filename": "anls-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "b3536b5c5e4dbaf2e7f369dc0b2fedb6",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.7,<4.0",
        "size": 10396,
        "upload_time": "2022-07-14T03:20:22",
        "upload_time_iso_8601": "2022-07-14T03:20:22.801944Z",
        "url": "https://files.pythonhosted.org/packages/63/89/af7f09252bd4e9932893c0f167fe33baf338f673f8fd4130d7f01c170fb0/anls-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "166fbd3b85c757a57c38955ae0c705357aac1ec282f5281cff7679d00620440c",
        "md5": "0ab76e584f177eb8520f3591ef3f7663",
        "sha256": "f6273fc31188784cd3f6ac083412f70be095ab531847580a88245ee836abe811"
      },
      "downloads": -1,
      "filename": "anls-0.0.2-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "0ab76e584f177eb8520f3591ef3f7663",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.7,<4.0",
      "size": 12050,
      "upload_time": "2022-07-14T03:20:21",
      "upload_time_iso_8601": "2022-07-14T03:20:21.311194Z",
      "url": "https://files.pythonhosted.org/packages/16/6f/bd3b85c757a57c38955ae0c705357aac1ec282f5281cff7679d00620440c/anls-0.0.2-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "6389af7f09252bd4e9932893c0f167fe33baf338f673f8fd4130d7f01c170fb0",
        "md5": "b3536b5c5e4dbaf2e7f369dc0b2fedb6",
        "sha256": "2a0c1223c63a310dca916f130a96cbb33d2145af5fbc6dbb337e160a6e2fbed7"
      },
      "downloads": -1,
      "filename": "anls-0.0.2.tar.gz",
      "has_sig": false,
      "md5_digest": "b3536b5c5e4dbaf2e7f369dc0b2fedb6",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.7,<4.0",
      "size": 10396,
      "upload_time": "2022-07-14T03:20:22",
      "upload_time_iso_8601": "2022-07-14T03:20:22.801944Z",
      "url": "https://files.pythonhosted.org/packages/63/89/af7f09252bd4e9932893c0f167fe33baf338f673f8fd4130d7f01c170fb0/anls-0.0.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}