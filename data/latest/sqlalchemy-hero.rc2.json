{
  "info": {
    "author": "Matthias Osswald",
    "author_email": "info@busykoala.io",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "# SQLAlchemy Hero\n\n## What is SQLAlchemy Hero?\n\n[SchemaHero](https://schemahero.io/) lets you define declarative\ndatabase schema migrations.\nIn Python schemas are often mapped with\n[SQLAlchemy](https://www.sqlalchemy.org/) models.\n\n`SQLAlchemy Hero` is a package to generate the declarative table YAMLs for\n`SchemaHero` from your existing `SQLAlchemy` Base.\n\n## Getting Started\n\nIn easy cases the below code is all you need to add to a cli script.\nThe `Base` is your `DeclarativeBase` from `SQLAlchemy` and `./out` is the\npath to output the generated table schemas.\n\n```python\nfrom pathlib import Path\n\nfrom sqlalchemy_hero.hero_database import HeroDatabase\nfrom sqlalchemy_hero.hero_generator import HeroGenerator\n\nfrom my_app.models import Base\n\nhero_generator = HeroGenerator(\n    base=Base,\n    db_type=HeroDatabase.postgres,\n    namespace=\"hero-ns\",\n    database=\"hero-db\",\n)\nhero_generator.to_yaml_files(out_path=Path(\"./out\"))\n```\n\n### Example with SQLAlchemy models\n\nLet's look at an example how to use it including some example models.\nThere is a `Parent` and a `Child` model both\ninheriting from a abstract base model with some common fields.\nThe goal is to generate the table YAML files for `SchemaHero`.\n\nThe `HeroGenerator` class implements the methods to extract the model.\nIt is initialized with your declarative base from `SQLAlchemy`,\nthe database type you're using (currently `postgres` and `mysql`),\nthe namespace where the tables should be deployed and the database name.\n\nThe `to_yaml_files` method allowes to specify the output path for the\ngenerated YAMLs (defaults to `Path(\"./out\")`).\n\n```python\nfrom pathlib import Path\n\nfrom sqlalchemy import Column\nfrom sqlalchemy import ForeignKey\nfrom sqlalchemy import Integer\nfrom sqlalchemy import Text\nfrom sqlalchemy import func\nfrom sqlalchemy.orm import declarative_base\nfrom sqlalchemy.orm import relationship\nfrom sqlalchemy_utils import ArrowType\n\nfrom sqlalchemy_hero.hero_database import HeroDatabase\nfrom sqlalchemy_hero.hero_generator import HeroGenerator\n\nDeclarativeBase = declarative_base()\n\n\nclass Base(DeclarativeBase):\n    __abstract__ = True\n\n    id = Column(Integer, primary_key=True)\n    created_on = Column(ArrowType, default=func.now())\n    updated_on = Column(ArrowType, default=func.now(), onupdate=func.now())\n\n\nclass Parent(Base):\n    __tablename__ = \"parent\"\n\n    name = Column(Text)\n    ss_number = Column(Integer, autoincrement=True)\n    children = relationship(\"Child\")\n\n\nclass Child(Base):\n    __tablename__ = \"child\"\n\n    name = Column(Text, nullable=False)\n    description = Column(Text, nullable=False, index=True)\n    parent_id = Column(Integer, ForeignKey(\"parent.id\"))\n\n\nhero_generator = HeroGenerator(\n    base=Base,\n    db_type=HeroDatabase.postgres,\n    namespace=\"hero-ns\",\n    database=\"hero-db\",\n)\nhero_generator.to_yaml_files(out_path=Path(\"./out\"))\n```\n\n### Type Overrides\n\nThe library tries to implement the most common types but it's hard to\nkeep up with all the possiblities for the different databases.\nIf you find a not yet mapped type (commonly used with `SQLAlchemy`) please\nopen a pull request to add it.\n\nFor custom types or quick fixes you can override the types\n(the dict entries override/add to the current types).\n\n```python\nCUSTOM_TYPE_MAPPINGS = {\n    MyCustomType: \"text\",  # add new type mappings\n    Integer: \"serial\",  # override existing mappings\n}\n\nhero_generator = HeroGenerator(\n    base=Base,\n    db_type=HeroDatabase.postgres,\n    namespace=\"hero-ns\",\n    database=\"hero-db\",\n    db_type_override=CUSTOM_TYPE_MAPPINGS,  # add the mappings on init\n)\nhero_generator.to_yaml_files()\n```\n\n### API Version\n\nWe try to update the default API version for `SchemaHero` to the latest.\nIf you wish to use another version or if we haven't updated yet it can be\nspecified on initializing the `HeroGenerator`.\n\n```python\nhero_generator = HeroGenerator(\n    base=Base,\n    db_type=HeroDatabase.postgres,\n    namespace=\"hero-ns\",\n    database=\"hero-db\",\n    api_version=\"schemas.schemahero.io/custom-version\",\n)\nhero_generator.to_yaml_files()\n```\n\n## QA Commands\n\nThe below commands are run in the pipeline and the according checks\nare expected to pass.\n\n```bash\npoetry run pytest\npoetry run black .\npoetry run isort .\npoetry run pylint tests sqlalchemy_hero\npoetry run bandit -r sqlalchemy_hero\n```\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/busykoala/sqlalchemy-hero",
    "keywords": "SQLAlchemy,SchemaHero,GitOps,database,k8s",
    "license": "GPL-3.0-or-later",
    "maintainer": "",
    "maintainer_email": "",
    "name": "sqlalchemy-hero",
    "package_url": "https://pypi.org/project/sqlalchemy-hero/",
    "platform": null,
    "project_url": "https://pypi.org/project/sqlalchemy-hero/",
    "project_urls": {
      "Homepage": "https://github.com/busykoala/sqlalchemy-hero",
      "Repository": "https://github.com/busykoala/sqlalchemy-hero"
    },
    "release_url": "https://pypi.org/project/sqlalchemy-hero/0.1.1/",
    "requires_dist": [
      "SQLAlchemy (>=1.4,<2.0)",
      "SQLAlchemy-Utils (>=0.38,<0.39)",
      "arrow (>=1.2,<2.0)",
      "PyYAML (>=6.0,<7.0)"
    ],
    "requires_python": ">=3.8,<4.0",
    "summary": "SchemaHero table generator from SQLAlchemy models.",
    "version": "0.1.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16282034,
  "releases": {
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6ebaf42c9281eb88fa3b48e1e9dfcdd6349e26d4ae571be9b58e3ba269948df6",
          "md5": "777bf0c40304be7702d598b9e9b10d6d",
          "sha256": "68f782db16afb1cfa10f38c586966c4ace0b82753527f007d9d457d76163efa2"
        },
        "downloads": -1,
        "filename": "sqlalchemy_hero-0.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "777bf0c40304be7702d598b9e9b10d6d",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8,<4.0",
        "size": 20068,
        "upload_time": "2022-09-21T22:02:50",
        "upload_time_iso_8601": "2022-09-21T22:02:50.820046Z",
        "url": "https://files.pythonhosted.org/packages/6e/ba/f42c9281eb88fa3b48e1e9dfcdd6349e26d4ae571be9b58e3ba269948df6/sqlalchemy_hero-0.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "726ed00d73ce16da8f8d0911f4d94b5d2f275f67d8102f4c4906feda1e780a12",
          "md5": "41c428f606751120e8055424bf4e3bb9",
          "sha256": "edacd8482356112f8ad0b1b9ba0fdcc2d8bc5fb849a65ead95ac001148eff7ce"
        },
        "downloads": -1,
        "filename": "sqlalchemy-hero-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "41c428f606751120e8055424bf4e3bb9",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8,<4.0",
        "size": 18972,
        "upload_time": "2022-09-21T22:02:47",
        "upload_time_iso_8601": "2022-09-21T22:02:47.274011Z",
        "url": "https://files.pythonhosted.org/packages/72/6e/d00d73ce16da8f8d0911f4d94b5d2f275f67d8102f4c4906feda1e780a12/sqlalchemy-hero-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "dd5a609b12534438d5add7ccac96de7b8b7140686eda2c20ee06d002a2b3e5d7",
          "md5": "6f545ff9b9f69c2e2b9e560ff77969f0",
          "sha256": "c07cc4729c6976e9b59d5310c5ae97683b688ad8ddcecefb87538d349bd763e2"
        },
        "downloads": -1,
        "filename": "sqlalchemy_hero-0.1.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "6f545ff9b9f69c2e2b9e560ff77969f0",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8,<4.0",
        "size": 20350,
        "upload_time": "2023-01-02T20:17:44",
        "upload_time_iso_8601": "2023-01-02T20:17:44.095684Z",
        "url": "https://files.pythonhosted.org/packages/dd/5a/609b12534438d5add7ccac96de7b8b7140686eda2c20ee06d002a2b3e5d7/sqlalchemy_hero-0.1.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "575af08c8a701e6e6f95e90383e3477a16a28ef34b5b5fb7c82de3aa09fca5f1",
          "md5": "679e8385843e4352ae2b830fe2b5ea87",
          "sha256": "b58240aae43a4bcc030f16ded50f995f6aef4004cbb50668495688455e974a6b"
        },
        "downloads": -1,
        "filename": "sqlalchemy-hero-0.1.1.tar.gz",
        "has_sig": false,
        "md5_digest": "679e8385843e4352ae2b830fe2b5ea87",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8,<4.0",
        "size": 19556,
        "upload_time": "2023-01-02T20:17:42",
        "upload_time_iso_8601": "2023-01-02T20:17:42.170081Z",
        "url": "https://files.pythonhosted.org/packages/57/5a/f08c8a701e6e6f95e90383e3477a16a28ef34b5b5fb7c82de3aa09fca5f1/sqlalchemy-hero-0.1.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "dd5a609b12534438d5add7ccac96de7b8b7140686eda2c20ee06d002a2b3e5d7",
        "md5": "6f545ff9b9f69c2e2b9e560ff77969f0",
        "sha256": "c07cc4729c6976e9b59d5310c5ae97683b688ad8ddcecefb87538d349bd763e2"
      },
      "downloads": -1,
      "filename": "sqlalchemy_hero-0.1.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "6f545ff9b9f69c2e2b9e560ff77969f0",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.8,<4.0",
      "size": 20350,
      "upload_time": "2023-01-02T20:17:44",
      "upload_time_iso_8601": "2023-01-02T20:17:44.095684Z",
      "url": "https://files.pythonhosted.org/packages/dd/5a/609b12534438d5add7ccac96de7b8b7140686eda2c20ee06d002a2b3e5d7/sqlalchemy_hero-0.1.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "575af08c8a701e6e6f95e90383e3477a16a28ef34b5b5fb7c82de3aa09fca5f1",
        "md5": "679e8385843e4352ae2b830fe2b5ea87",
        "sha256": "b58240aae43a4bcc030f16ded50f995f6aef4004cbb50668495688455e974a6b"
      },
      "downloads": -1,
      "filename": "sqlalchemy-hero-0.1.1.tar.gz",
      "has_sig": false,
      "md5_digest": "679e8385843e4352ae2b830fe2b5ea87",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.8,<4.0",
      "size": 19556,
      "upload_time": "2023-01-02T20:17:42",
      "upload_time_iso_8601": "2023-01-02T20:17:42.170081Z",
      "url": "https://files.pythonhosted.org/packages/57/5a/f08c8a701e6e6f95e90383e3477a16a28ef34b5b5fb7c82de3aa09fca5f1/sqlalchemy-hero-0.1.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}