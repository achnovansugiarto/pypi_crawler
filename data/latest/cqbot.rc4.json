{
  "info": {
    "author": "lhlyu",
    "author_email": "",
    "bugtrack_url": null,
    "classifiers": [
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3"
    ],
    "description": "# Cqbot\n\ngo-cqhttp python 框架，可以用于快速塔建 bot\n\n## 安装\n\n```shell\npip install cqbot\n```\n\n## 使用\n\n可以从[examples](examples)文件夹下拷贝所需的文件\n\ngo-cqhttp需要去[releases](https://github.com/Mrs4s/go-cqhttp/releases)下载最新的文件\n\n- 下面是我的目录结构，仅供参考\n\n```\n├── mybot - 项目目录\n│   ├── bot.py - 机器人逻辑文件\n│   ├── config.yml - go-cqhttp配置文件，根据自己的要求修改\n│   ├── go-cqhttp - go-cqhttp执行文件，window下是exe结尾的文件， 如果使用docker构建不需要这个文件\n│   ├── Dockerfile - 构建镜像的文件\n│   ├── run.sh - 脚本构建镜像并创建容器运行\n```\n\n- [config.yml配置](https://docs.go-cqhttp.org/guide/config.html#%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF)\n- [支持的事件](https://docs.go-cqhttp.org/event)\n- [支持的API](https://docs.go-cqhttp.org/api)\n- [支持的CQ码](https://docs.go-cqhttp.org/cqcode)\n\n## [例子](./examples)\n\n### 第一种方式\n\n```python\n# pip install cqbot\nimport json\nfrom typing import List, Any\n\n# pip install addict\nfrom addict import Dict\n\n# pip install cqbot\nfrom cqbot import *\n\n\ndef to_json(obj: object):\n    return json.dumps(obj.__dict__, default=lambda o: o.__dict__, ensure_ascii=False)\n\n\non = True\n\n\ndef cmd_enable(act: Action, msg: EventMessage, args: List[Any]) -> bool:\n    global on\n    on = True\n    act.send_group_msg(msg.group_id, \"已启动！\")\n    return True\n\n\ndef cmd_stop(act: Action, msg: EventMessage, args: List[Any]) -> bool:\n    global on\n    on = False\n    act.send_group_msg(msg.group_id, \"已停止！\")\n    return True\n\n\ndef cmd_test(act: Action, msg: EventMessage, args: List[Any]) -> bool:\n    if len(args) == 0:\n        # 当没有参数的时候打印帮助\n        act.send_group_msg(msg.group_id, cmd.help())\n        return\n    # 将参数原样发回\n    act.send_group_msg(msg.group_id, ' '.join(args))\n    return True\n\n\n# 设置指令\ncmd = Cmd()\ncmd.add('#启动', '启动程序', cmd_enable)\ncmd.add('#停止', '停止程序', cmd_stop)\ncmd.add('#测试', '#测试 你的内容', cmd_test)\n\n\ndef on_message_group(act: Action, msg: EventMessage):\n    # 打印消息体\n    print('on_message_group:', to_json(msg))\n    # 如果是官方机器人则不处理\n    if msg.is_office_bot():\n        return\n    # 执行指令\n    if cmd.run(act, msg):\n        return\n    # 判断当前的消息是否at了机器人\n    if msg.is_at():\n        # 回复这条消息\n        message = f'{CQ.at(msg.user_id)} 好的{CQ.face(124)}'\n        act.send_group_msg(msg.group_id, message)\n        # 再发送一条文字转语音\n        message = f'{CQ.tts(\"人类的赞歌是勇气的赞歌，人类的伟大是勇气的伟大。\")}'\n        act.send_group_msg(msg.group_id, message)\n        return\n\n\ndef on_notice_group_recall(act: Action, msg: EventNotice):\n    # 如果是撤回机器人的消息则不处理\n    if msg.self_id == msg.user_id:\n        return\n    print('on_notice_group_recall:', to_json(msg))\n    # 获取被撤回的消息\n    recall_msg = act.get_msg(msg.message_id)\n    if recall_msg is None:\n        return\n    m = Dict(recall_msg)\n    # 将撤回的消息重新发回群里\n    message = f'{CQ.at(m.data.sender.user_id)}撤回了一条消息: {m.data.message}'\n    act.send_group_msg(msg.group_id, message)\n\n\nif __name__ == '__main__':\n    bot = Bot()\n    # 处理群消息\n    bot.on_message_group = on_message_group\n    # 处理群消息撤回\n    bot.on_notice_group_recall = on_notice_group_recall\n    bot.run()\n```\n\n### 第二种方式\n\n```python\nimport json\nfrom typing import List, Any\n\n# pip install addict\nfrom addict import Dict\n\n# pip install cqbot\nfrom cqbot import *\n\n\ndef to_json(obj: object):\n    return json.dumps(obj.__dict__, default=lambda o: o.__dict__, ensure_ascii=False)\n\n\non = True\n\n\ndef cmd_enable(act: Action, msg: EventMessage, args: List[Any]) -> bool:\n    global on\n    on = True\n    act.send_group_msg(msg.group_id, \"已启动！\")\n    return True\n\n\ndef cmd_stop(act: Action, msg: EventMessage, args: List[Any]) -> bool:\n    global on\n    on = False\n    act.send_group_msg(msg.group_id, \"已停止！\")\n    return True\n\n\ndef cmd_test(act: Action, msg: EventMessage, args: List[Any]) -> bool:\n    if len(args) == 0:\n        # 当没有参数的时候打印帮助\n        act.send_group_msg(msg.group_id, cmd.help())\n        return\n    # 将参数原样发回\n    act.send_group_msg(msg.group_id, ' '.join(args))\n    return True\n\n\n# 设置指令\ncmd = Cmd()\ncmd.add('#启动', '启动程序', cmd_enable)\ncmd.add('#停止', '停止程序', cmd_stop)\ncmd.add('#测试', '#测试 你的内容', cmd_test)\n\n\n# 自定义一个Bot,继承Bot,重写需要处理的事件\nclass MyBot(Bot):\n\n    # 群消息处理\n    def on_message_group(self, act: Action, msg: EventMessage):\n        # 打印消息体\n        print('on_message_group:', to_json(msg))\n        # 如果是官方机器人则不处理\n        if msg.is_office_bot():\n            return\n        # 执行指令\n        if cmd.run(act, msg):\n            return\n        # 判断当前的消息是否at了机器人\n        if msg.is_at():\n            # 回复这条消息\n            message = f'{CQ.at(msg.user_id)} 好的{CQ.face(124)}'\n            act.send_group_msg(msg.group_id, message)\n            # 再发送一条文字转语音\n            message = f'{CQ.tts(\"人类的赞歌是勇气的赞歌，人类的伟大是勇气的伟大。\")}'\n            act.send_group_msg(msg.group_id, message)\n            return\n\n    # 群消息撤回处理\n    def on_notice_group_recall(self, act: Action, msg: EventNotice):\n        # 如果是撤回机器人的消息则不处理\n        if msg.self_id == msg.user_id:\n            return\n        print('on_notice_group_recall:', to_json(msg))\n        # 获取被撤回的消息\n        recall_msg = act.get_msg(msg.message_id)\n        if recall_msg is None:\n            return\n        m = Dict(recall_msg)\n        # 将撤回的消息重新发回群里\n        message = f'{CQ.at(m.data.sender.user_id)}撤回了一条消息: {m.data.message}'\n        act.send_group_msg(msg.group_id, message)\n\n\nif __name__ == '__main__':\n    bot = MyBot()\n    bot.run()\n```\n\n### 直接使用Api\n\n当`go-cqhttp`启动后可以直接使用`Action`方法\n\n```python\n# pip install cqbot\nfrom cqbot import *\n\n\nif __name__ == '__main__':\n    # 连接go-cqhttp暴露的http\n    act = Action('http://0.0.0.0:8000')\n    # 直接指定群号发送消息\n    act.send_group_msg(123, f'你好{CQ.face(78)}')\n```\n\n### CQ码使用\n\n```python\n# pip install cqbot\nfrom cqbot import *\n\nif __name__ == '__main__':\n    # 输出: [CQ:at,qq=12313]\n    print(CQ.at(12313))\n    # 输出: [CQ:face,id=12]\n    print(CQ.face(12))\n    \n```\n\n### 指令使用\n\n```python\nfrom typing import List, Any\nfrom cqbot import *\n\ndef cmd_test(act: Action, msg: EventMessage, args: List[Any]) -> bool:\n    if len(args) == 0:\n        act.send_group_msg(msg.group_id, cmd.help())\n        return\n    act.send_group_msg(msg.group_id, ' '.join(args))\n    return True\n\n\n# 设置指令\ncmd = Cmd()\ncmd.add('#测试1', '#测试 你的内容', cmd_test)\ncmd.add('#测试2', '#测试 你的内容', cmd_test)\n\n\n# 监听群消息\ndef on_message_group(act: Action, msg: EventMessage):\n    # 执行指令\n    cmd.run(act, msg)\n```\n\n## 一些问题\n\n- 在服务器上部署后不好登录，或则提示账号设备不安全\n\n> 可以在本地登录好，将 `session.token` `device.json` 一同上传到服务器，免去了登录的烦恼\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/lhlyu/cqbot",
    "keywords": "",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "cqbot",
    "package_url": "https://pypi.org/project/cqbot/",
    "platform": "any",
    "project_url": "https://pypi.org/project/cqbot/",
    "project_urls": {
      "Homepage": "https://github.com/lhlyu/cqbot"
    },
    "release_url": "https://pypi.org/project/cqbot/0.0.4/",
    "requires_dist": [
      "pyyaml",
      "requests",
      "websocket-client"
    ],
    "requires_python": ">=3.10",
    "summary": "go-cqhttp python 框架，可以用于快速塔建 bot",
    "version": "0.0.4",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 16952761,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "0c525962f5451a57bdb744a6c0807e3ba9dcaf7d02335149de3247da1e981542",
          "md5": "4eff312b412b87a8ce75ebfa53208b45",
          "sha256": "3d64ac357cc48e6999fa4e0f9b66ee78af67dd9614f8c6b1cc2d0bcb3a850e0f"
        },
        "downloads": -1,
        "filename": "cqbot-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "4eff312b412b87a8ce75ebfa53208b45",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.10",
        "size": 16256,
        "upload_time": "2023-02-16T13:57:08",
        "upload_time_iso_8601": "2023-02-16T13:57:08.910731Z",
        "url": "https://files.pythonhosted.org/packages/0c/52/5962f5451a57bdb744a6c0807e3ba9dcaf7d02335149de3247da1e981542/cqbot-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "23cad9ba08275b639f9f06bf69115a0c6b2f418a121bb0c6fdbd752a8c17ed4d",
          "md5": "bff4f89928f913534065e86803b0023f",
          "sha256": "4d89547ad07a3ff9242950aaaaf56dfc4acd8cc2428ef22aea76be61bd29f5d8"
        },
        "downloads": -1,
        "filename": "cqbot-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "bff4f89928f913534065e86803b0023f",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.10",
        "size": 16277,
        "upload_time": "2023-02-16T13:57:10",
        "upload_time_iso_8601": "2023-02-16T13:57:10.976634Z",
        "url": "https://files.pythonhosted.org/packages/23/ca/d9ba08275b639f9f06bf69115a0c6b2f418a121bb0c6fdbd752a8c17ed4d/cqbot-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a7ca464d8b1f1a4c77617c50d2da31a78129e68006ceba2d7e45229c608375e3",
          "md5": "9912ef1df8dae01dd204ce2b030884c5",
          "sha256": "213a1da48dd4b7999e7468fe1086d279fb6e961a30e825dac98a3606d8402112"
        },
        "downloads": -1,
        "filename": "cqbot-0.0.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "9912ef1df8dae01dd204ce2b030884c5",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.10",
        "size": 20835,
        "upload_time": "2023-02-17T14:12:49",
        "upload_time_iso_8601": "2023-02-17T14:12:49.905908Z",
        "url": "https://files.pythonhosted.org/packages/a7/ca/464d8b1f1a4c77617c50d2da31a78129e68006ceba2d7e45229c608375e3/cqbot-0.0.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "87ff0ddb234391e2af4a5350bd133909a068e190a411e797c64c5592d054bd7a",
          "md5": "f459e3acf7b6cfb0a3aed254ab1abf6b",
          "sha256": "cd7f5935d9caa8c73de26a8b32df900db4381bc6a5c620cc823fed0accb64e38"
        },
        "downloads": -1,
        "filename": "cqbot-0.0.2.tar.gz",
        "has_sig": false,
        "md5_digest": "f459e3acf7b6cfb0a3aed254ab1abf6b",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.10",
        "size": 20632,
        "upload_time": "2023-02-17T14:12:52",
        "upload_time_iso_8601": "2023-02-17T14:12:52.664495Z",
        "url": "https://files.pythonhosted.org/packages/87/ff/0ddb234391e2af4a5350bd133909a068e190a411e797c64c5592d054bd7a/cqbot-0.0.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a87271d9a36a81855022509a827a1f8ec8657646b9fb88d0034e13e061cde3df",
          "md5": "428fbf88d6ed28396b8347f516a46a9d",
          "sha256": "ffa2ad55a7f25a5813cdd73f4b8121c1d04db9871edce65a2a5d62576ac81115"
        },
        "downloads": -1,
        "filename": "cqbot-0.0.3-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "428fbf88d6ed28396b8347f516a46a9d",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.10",
        "size": 23430,
        "upload_time": "2023-02-19T08:10:26",
        "upload_time_iso_8601": "2023-02-19T08:10:26.670226Z",
        "url": "https://files.pythonhosted.org/packages/a8/72/71d9a36a81855022509a827a1f8ec8657646b9fb88d0034e13e061cde3df/cqbot-0.0.3-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "f7c9d12d46ef932a0e237abdeae823f1fc4d35d17356c3b78ed6ae4ebe8ac114",
          "md5": "b92bd1930711bf362884b42677e031f0",
          "sha256": "dc561b51977fb30d3f3a159aec5a677e0773e7fad3c26408e26485c298eaeef6"
        },
        "downloads": -1,
        "filename": "cqbot-0.0.3.tar.gz",
        "has_sig": false,
        "md5_digest": "b92bd1930711bf362884b42677e031f0",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.10",
        "size": 23374,
        "upload_time": "2023-02-19T08:10:28",
        "upload_time_iso_8601": "2023-02-19T08:10:28.852142Z",
        "url": "https://files.pythonhosted.org/packages/f7/c9/d12d46ef932a0e237abdeae823f1fc4d35d17356c3b78ed6ae4ebe8ac114/cqbot-0.0.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.0.4": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "cebbc3962cc6fef6ae7e61fbd8e6ae5244eda43ff8ab58a590dd4135f1a179db",
          "md5": "eda64c6e73039f0754f83866941cce96",
          "sha256": "8339ba29dc2a74a456c71d19b5156952b3e183218a982417554bceceecbb8ce1"
        },
        "downloads": -1,
        "filename": "cqbot-0.0.4-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "eda64c6e73039f0754f83866941cce96",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.10",
        "size": 23509,
        "upload_time": "2023-02-21T01:05:56",
        "upload_time_iso_8601": "2023-02-21T01:05:56.165090Z",
        "url": "https://files.pythonhosted.org/packages/ce/bb/c3962cc6fef6ae7e61fbd8e6ae5244eda43ff8ab58a590dd4135f1a179db/cqbot-0.0.4-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2999543f0951caa103cfd8cac20c438e29edbebe35afd5d58a14e65dd241c574",
          "md5": "49e3c1b5da3a3f8a6f12b3174d3b0444",
          "sha256": "f4416a61b311067a5d39e1d1949c2df4d8f6f6610d081d40cfc753ce57509b88"
        },
        "downloads": -1,
        "filename": "cqbot-0.0.4.tar.gz",
        "has_sig": false,
        "md5_digest": "49e3c1b5da3a3f8a6f12b3174d3b0444",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.10",
        "size": 23470,
        "upload_time": "2023-02-21T01:05:58",
        "upload_time_iso_8601": "2023-02-21T01:05:58.672312Z",
        "url": "https://files.pythonhosted.org/packages/29/99/543f0951caa103cfd8cac20c438e29edbebe35afd5d58a14e65dd241c574/cqbot-0.0.4.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "cebbc3962cc6fef6ae7e61fbd8e6ae5244eda43ff8ab58a590dd4135f1a179db",
        "md5": "eda64c6e73039f0754f83866941cce96",
        "sha256": "8339ba29dc2a74a456c71d19b5156952b3e183218a982417554bceceecbb8ce1"
      },
      "downloads": -1,
      "filename": "cqbot-0.0.4-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "eda64c6e73039f0754f83866941cce96",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.10",
      "size": 23509,
      "upload_time": "2023-02-21T01:05:56",
      "upload_time_iso_8601": "2023-02-21T01:05:56.165090Z",
      "url": "https://files.pythonhosted.org/packages/ce/bb/c3962cc6fef6ae7e61fbd8e6ae5244eda43ff8ab58a590dd4135f1a179db/cqbot-0.0.4-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "2999543f0951caa103cfd8cac20c438e29edbebe35afd5d58a14e65dd241c574",
        "md5": "49e3c1b5da3a3f8a6f12b3174d3b0444",
        "sha256": "f4416a61b311067a5d39e1d1949c2df4d8f6f6610d081d40cfc753ce57509b88"
      },
      "downloads": -1,
      "filename": "cqbot-0.0.4.tar.gz",
      "has_sig": false,
      "md5_digest": "49e3c1b5da3a3f8a6f12b3174d3b0444",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.10",
      "size": 23470,
      "upload_time": "2023-02-21T01:05:58",
      "upload_time_iso_8601": "2023-02-21T01:05:58.672312Z",
      "url": "https://files.pythonhosted.org/packages/29/99/543f0951caa103cfd8cac20c438e29edbebe35afd5d58a14e65dd241c574/cqbot-0.0.4.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}