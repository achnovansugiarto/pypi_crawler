{
  "info": {
    "author": "Rob Blackbourn",
    "author_email": "rob.blackbourn@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "License :: OSI Approved :: Apache Software License",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.8",
      "Programming Language :: Python :: 3.9"
    ],
    "description": "# jetblack-negotiate-stream\n\nA Python client for .Net\n[NegotiateStream](https://learn.microsoft.com/en-us/dotnet/api/system.net.security.negotiatestream).\nIt supports single sign on (SSO) and encryption.\n\nThis was tested using Python 3.8 on Windows 11.\n\n## Installation\n\nInstall from pypi.\n\n```bash\npip install jetblack-negotiate-stream\n```\n\n## Example\n\nThe following programs provide a simple echo server in C# and client in Python.\n\n### Client\n\nThis is an example of a Python client using the synchronous\n`NegotiateStream` class. Note the call to `authenticate_as_client` before\nreading and writing.\n\n```python\nimport socket\n\nfrom jetblack_negotiate_stream import NegotiateStream\n\ndef main():\n    hostname = socket.gethostname()\n    port = 8181\n\n    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as sock:\n        sock.connect((hostname, port))\n\n        stream = NegotiateStream(hostname, sock)\n\n        # Do the client side negotiate handshake.\n        stream.authenticate_as_client()\n\n        for data in (b'first line', b'second line', b'third line'):\n            # All reads and writes are encrypted.\n            stream.write(data)\n            response = stream.read()\n            print(\"Received: \", response)\n\nif __name__ == '__main__':\n    main()\n```\n\n### Async Client\n\nThis program uses `NegotiateStreamAsync` which is simply an asynchronous\nversion of the `NegotiateStream` class demonstrated above.\n\n```python\nimport asyncio\nimport socket\n\nfrom jetblack_negotiate_stream import NegotiateStreamAsync\n\nasync def main():\n    hostname = socket.gethostname()\n    port = 8181\n\n    reader, writer = await asyncio.open_connection(hostname, port)\n\n    stream = NegotiateStreamAsync(hostname, reader, writer)\n\n    await stream.authenticate_as_client()\n    for data in (b'first line', b'second line', b'third line'):\n        stream.write(data)\n        await stream.drain()\n        response = await stream.read()\n        print(\"Received: \", response)\n\n    stream.close()\n    await stream.wait_closed()\n\nif __name__ == '__main__':\n    asyncio.run(main())\n```\n\n### Alternative Async Client\n\nThe following client follows the patterns demonstrated in the asyncio library\nusing `open_negotiate_stream`. This follows the conventions of the asyncio\n`open_connection` function. The negotiation happens before the function\nreturns, resulting in cleaner code. \n\n```python\nimport asyncio\nimport socket\n\nfrom jetblack_negotiate_stream import open_negotiate_stream\n\nasync def main():\n    hostname = socket.gethostname()\n    port = 8181\n\n    # Following the same pattern as asyncio.open_connection.\n    reader, writer = await open_negotiate_stream(hostname, port)\n\n    for data in (b'first line', b'second line', b'third line'):\n        writer.write(data)\n        await writer.drain()\n        response = await reader.read()\n        print(\"Received: \", response)\n\n    writer.close()\n    await writer.wait_closed()\n\nif __name__ == '__main__':\n    asyncio.run(main())\n```\n\n### Server\n\nHere is a trivial C# echo server for the clients.\n\n```csharp\nusing System;\nusing System.Net;\nusing System.Net.Security;\nusing System.Net.Sockets;\nusing System.Text;\n\nnamespace NegotiateStreamServer\n{\n    internal class Program\n    {\n        static void Main(string[] args)\n        {\n            var listener = new TcpListener(IPAddress.Any, 8181);\n            listener.Start();\n\n            while (true)\n            {\n                Console.WriteLine(\"Listening ...\");\n                var client = listener.AcceptTcpClient();\n\n                try\n                {\n                    Console.WriteLine(\"... Client connected.\");\n\n                    Console.WriteLine(\"Authenticating...\");\n                    var stream = new NegotiateStream(client.GetStream(), false);\n                    stream.AuthenticateAsServer();\n\n                    Console.WriteLine(\n                        \"... {0} authenticated using {1}\",\n                        stream.RemoteIdentity.Name,\n                        stream.RemoteIdentity.AuthenticationType);\n\n                    var buf = new byte[4096];\n                    for (var i = 0; i < 3; ++i)\n                    {\n                        var bytesRead = stream.Read(buf, 0, buf.Length);\n                        var message = Encoding.UTF8.GetString(buf, 0, bytesRead);\n                        Console.WriteLine(message);\n                        stream.Write(buf, 0, bytesRead);\n                    }\n                    stream.Close();\n                }\n                catch (Exception ex)\n                {\n                    Console.WriteLine(ex.ToString());\n                }\n            }\n        }\n    }\n}\n```\n\n## Acknowledgements\n\nThe library uses the [pyspnego](https://github.com/jborean93/pyspnego) library,\nand takes many ideas from [net.tcp-proxy](https://github.com/ernw/net.tcp-proxy).\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/rob-blackbourn/jetblack-negotiate-stream",
    "keywords": "",
    "license": "Apache-2.0",
    "maintainer": "",
    "maintainer_email": "",
    "name": "jetblack-negotiate-stream",
    "package_url": "https://pypi.org/project/jetblack-negotiate-stream/",
    "platform": null,
    "project_url": "https://pypi.org/project/jetblack-negotiate-stream/",
    "project_urls": {
      "Homepage": "https://github.com/rob-blackbourn/jetblack-negotiate-stream",
      "Repository": "https://github.com/rob-blackbourn/jetblack-negotiate-stream"
    },
    "release_url": "https://pypi.org/project/jetblack-negotiate-stream/0.2.2/",
    "requires_dist": [
      "pyspnego (>=0.7,<0.8)"
    ],
    "requires_python": ">=3.8,<4.0",
    "summary": "A python client for .Net NegotiateStream",
    "version": "0.2.2",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17063377,
  "releases": {
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a95a74e0a75df7019952a8734160e09699565883b0b61a4a2df6152292251aa4",
          "md5": "41c7812d4cb7378bcb811983a8926123",
          "sha256": "32fe7f4db7eefd02db4770c6c161d85ed396221490f41a8b682280f1743bac03"
        },
        "downloads": -1,
        "filename": "jetblack_negotiate_stream-0.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "41c7812d4cb7378bcb811983a8926123",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8,<4.0",
        "size": 7410,
        "upload_time": "2022-12-21T14:59:11",
        "upload_time_iso_8601": "2022-12-21T14:59:11.117469Z",
        "url": "https://files.pythonhosted.org/packages/a9/5a/74e0a75df7019952a8734160e09699565883b0b61a4a2df6152292251aa4/jetblack_negotiate_stream-0.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a18a874d79fd0b61aa0573b3006380ef0bd07a7ee1bec96826c9238ccfb2727d",
          "md5": "417210b136dd2ba7086fbf50b27d9e17",
          "sha256": "be5e8fa9dc678e3564e4f41c02a7abc2870a915132fa5f9f2ff9d78b1a09abce"
        },
        "downloads": -1,
        "filename": "jetblack_negotiate_stream-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "417210b136dd2ba7086fbf50b27d9e17",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8,<4.0",
        "size": 5650,
        "upload_time": "2022-12-21T14:59:13",
        "upload_time_iso_8601": "2022-12-21T14:59:13.214751Z",
        "url": "https://files.pythonhosted.org/packages/a1/8a/874d79fd0b61aa0573b3006380ef0bd07a7ee1bec96826c9238ccfb2727d/jetblack_negotiate_stream-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "3360cacfa430891b281b77ae9751c680e19a9966f872651fc820e6d509090823",
          "md5": "7864f0718e8b5f223e5d6bcedeb14a9b",
          "sha256": "0bd166bb8b7577fca0e888543e257d70645540652461e722a9c029ff54275539"
        },
        "downloads": -1,
        "filename": "jetblack_negotiate_stream-0.1.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "7864f0718e8b5f223e5d6bcedeb14a9b",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8,<4.0",
        "size": 7350,
        "upload_time": "2023-02-22T07:40:14",
        "upload_time_iso_8601": "2023-02-22T07:40:14.890691Z",
        "url": "https://files.pythonhosted.org/packages/33/60/cacfa430891b281b77ae9751c680e19a9966f872651fc820e6d509090823/jetblack_negotiate_stream-0.1.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "02a71b8eb338053a32841db19048c7370474c69edf19d80dee9c96b73d3153ee",
          "md5": "0094a7c847faa1a1fa5e46fcce4e31a7",
          "sha256": "96a313f2d128bfc66fc95d143e0344424ac3d0b51b2aa3b2237819f4c27557ec"
        },
        "downloads": -1,
        "filename": "jetblack-negotiate-stream-0.1.1.tar.gz",
        "has_sig": false,
        "md5_digest": "0094a7c847faa1a1fa5e46fcce4e31a7",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8,<4.0",
        "size": 5796,
        "upload_time": "2023-02-22T07:40:13",
        "upload_time_iso_8601": "2023-02-22T07:40:13.126659Z",
        "url": "https://files.pythonhosted.org/packages/02/a7/1b8eb338053a32841db19048c7370474c69edf19d80dee9c96b73d3153ee/jetblack-negotiate-stream-0.1.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "996d1d1b51a4caec3ce89335e00b892f8e06070df5eb329d82091916f16559da",
          "md5": "f8a0bcd761b848c7bfd2eacbd83c025e",
          "sha256": "3206531c680c4f4a0d5224591421593997bf962f29afe79fe06930c3e432d160"
        },
        "downloads": -1,
        "filename": "jetblack_negotiate_stream-0.2.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "f8a0bcd761b848c7bfd2eacbd83c025e",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8,<4.0",
        "size": 9541,
        "upload_time": "2023-02-22T09:04:59",
        "upload_time_iso_8601": "2023-02-22T09:04:59.790887Z",
        "url": "https://files.pythonhosted.org/packages/99/6d/1d1b51a4caec3ce89335e00b892f8e06070df5eb329d82091916f16559da/jetblack_negotiate_stream-0.2.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "0e35365f5b2807731aee8c50e577f9eaa8d570d32877e462dd9d8c4d08c45c59",
          "md5": "9c5eac9e373934b49e992613214a29f2",
          "sha256": "c82e626b2244efd8fbaf8b5208d4511766b0771264f60b518c716ee6d1a02f67"
        },
        "downloads": -1,
        "filename": "jetblack-negotiate-stream-0.2.0.tar.gz",
        "has_sig": false,
        "md5_digest": "9c5eac9e373934b49e992613214a29f2",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8,<4.0",
        "size": 7720,
        "upload_time": "2023-02-22T09:04:57",
        "upload_time_iso_8601": "2023-02-22T09:04:57.994321Z",
        "url": "https://files.pythonhosted.org/packages/0e/35/365f5b2807731aee8c50e577f9eaa8d570d32877e462dd9d8c4d08c45c59/jetblack-negotiate-stream-0.2.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "399f135d37eac522a4b545a15d416adea8f55128bc576e0956dddd48ec86c89a",
          "md5": "0577cdff562e1ac50f931c2d3cfa0670",
          "sha256": "e74d09b9a153ec0fe2f8aa916688a388a01601650cf1bacdbb0480376c81c1c2"
        },
        "downloads": -1,
        "filename": "jetblack_negotiate_stream-0.2.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "0577cdff562e1ac50f931c2d3cfa0670",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8,<4.0",
        "size": 9734,
        "upload_time": "2023-02-22T09:38:34",
        "upload_time_iso_8601": "2023-02-22T09:38:34.874234Z",
        "url": "https://files.pythonhosted.org/packages/39/9f/135d37eac522a4b545a15d416adea8f55128bc576e0956dddd48ec86c89a/jetblack_negotiate_stream-0.2.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "ad34312411f816c889d0a8b98bffdf1639adeeaaef03ab9298c9177454ad9ed5",
          "md5": "174ac977c65d24acd0804bd1a7717135",
          "sha256": "a88a9b61eb5e672dd67cb78e781c22e02ceed60845e6ab040026ea5fddf79c70"
        },
        "downloads": -1,
        "filename": "jetblack-negotiate-stream-0.2.1.tar.gz",
        "has_sig": false,
        "md5_digest": "174ac977c65d24acd0804bd1a7717135",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8,<4.0",
        "size": 7771,
        "upload_time": "2023-02-22T09:38:32",
        "upload_time_iso_8601": "2023-02-22T09:38:32.794574Z",
        "url": "https://files.pythonhosted.org/packages/ad/34/312411f816c889d0a8b98bffdf1639adeeaaef03ab9298c9177454ad9ed5/jetblack-negotiate-stream-0.2.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.2": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "08e2ebaba1c4d187160ff863d058004f35a7acfbb46fc5f158363677bb3bbd15",
          "md5": "2f9a84beb8127355eea51ec42bf92a07",
          "sha256": "b14b563929944ca503218be09be7aa1df3304a15faf0967e8e8d37dae03bd05f"
        },
        "downloads": -1,
        "filename": "jetblack_negotiate_stream-0.2.2-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "2f9a84beb8127355eea51ec42bf92a07",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": ">=3.8,<4.0",
        "size": 9772,
        "upload_time": "2023-02-27T12:18:06",
        "upload_time_iso_8601": "2023-02-27T12:18:06.175037Z",
        "url": "https://files.pythonhosted.org/packages/08/e2/ebaba1c4d187160ff863d058004f35a7acfbb46fc5f158363677bb3bbd15/jetblack_negotiate_stream-0.2.2-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "81f654c1e7894be785c2f8dab0a0620285c31c5bfbf6c4939de3011fa76390e4",
          "md5": "0313b8c189b535b6a3657c0590b9a7f2",
          "sha256": "802bc76162ebc48f7237b725af160dca68cf11469b574af7a7a2fd0d24bb9389"
        },
        "downloads": -1,
        "filename": "jetblack-negotiate-stream-0.2.2.tar.gz",
        "has_sig": false,
        "md5_digest": "0313b8c189b535b6a3657c0590b9a7f2",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": ">=3.8,<4.0",
        "size": 7790,
        "upload_time": "2023-02-27T12:18:03",
        "upload_time_iso_8601": "2023-02-27T12:18:03.802396Z",
        "url": "https://files.pythonhosted.org/packages/81/f6/54c1e7894be785c2f8dab0a0620285c31c5bfbf6c4939de3011fa76390e4/jetblack-negotiate-stream-0.2.2.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "08e2ebaba1c4d187160ff863d058004f35a7acfbb46fc5f158363677bb3bbd15",
        "md5": "2f9a84beb8127355eea51ec42bf92a07",
        "sha256": "b14b563929944ca503218be09be7aa1df3304a15faf0967e8e8d37dae03bd05f"
      },
      "downloads": -1,
      "filename": "jetblack_negotiate_stream-0.2.2-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "2f9a84beb8127355eea51ec42bf92a07",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": ">=3.8,<4.0",
      "size": 9772,
      "upload_time": "2023-02-27T12:18:06",
      "upload_time_iso_8601": "2023-02-27T12:18:06.175037Z",
      "url": "https://files.pythonhosted.org/packages/08/e2/ebaba1c4d187160ff863d058004f35a7acfbb46fc5f158363677bb3bbd15/jetblack_negotiate_stream-0.2.2-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "81f654c1e7894be785c2f8dab0a0620285c31c5bfbf6c4939de3011fa76390e4",
        "md5": "0313b8c189b535b6a3657c0590b9a7f2",
        "sha256": "802bc76162ebc48f7237b725af160dca68cf11469b574af7a7a2fd0d24bb9389"
      },
      "downloads": -1,
      "filename": "jetblack-negotiate-stream-0.2.2.tar.gz",
      "has_sig": false,
      "md5_digest": "0313b8c189b535b6a3657c0590b9a7f2",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": ">=3.8,<4.0",
      "size": 7790,
      "upload_time": "2023-02-27T12:18:03",
      "upload_time_iso_8601": "2023-02-27T12:18:03.802396Z",
      "url": "https://files.pythonhosted.org/packages/81/f6/54c1e7894be785c2f8dab0a0620285c31c5bfbf6c4939de3011fa76390e4/jetblack-negotiate-stream-0.2.2.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}