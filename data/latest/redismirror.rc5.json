{
  "info": {
    "author": "Ali Saleh Baker",
    "author_email": "alivxlive@gmail.com",
    "bugtrack_url": null,
    "classifiers": [],
    "description": "# Mirror Redis Traffic to another redis node\n<img src=\"https://raw.githubusercontent.com/alivx/redis-mirror/master/Generator/redis-mirror-logo.jpg\" alt=\"logo\" style=\"zoom:50%;\" />\n\n\n# redis-mirror\nRealtime Redis Traffic Mirror to another instance, this script reads the STDOUT from the `redis-cli monitor` command and mirrors the keys to another instance.\n\n## Use Case/Note\nIn some production/development cases, you need to mirror Redis traffic to another node to do some investigation or debugging.\n* This script does not set `TTL` to mirrored key since you need it for debugging.\n* The script support all command since it simply dump and restore the key as is.\n\n\n\n## TO DO:\n1. Add TTL as an option in mirrored redis instance, plus add an option to expand the origin `TTL`.\n2. Support cluster to a single redis instance or vice versa.\n3. Add an option to dump all keys name to the file for further analysis.\n4. Add an option to get all keys from the source and migrate the keys to another redis instance.\n\n## Option\n\n```\nredismirror --help\nUsage: redismirror [OPTIONS]\n\nOptions:\n  --shost TEXT     Source redis host/IP.\n  --sport INTEGER  Source redis port.\n  --sdb INTEGER    Source redis DB.\n  --sauth TEXT     Source redis auth info.\n  --dhost TEXT     Destination redis host/IP.\n  --dport INTEGER  Destination redis port.\n  --ddb INTEGER    Destination redis DB.\n  --dauth TEXT     Destination redis auth info.\n  --limit INTEGER  Stop mirror process at limit X.\n  --replace        Replace key if exists.\n  --help           Show this message and exit.\n```\n\n\n## Useages\n```Bash\nredis-cli monitor | redismirror  --sport 6379 --shost localhost  --dhost 127.0.0.1 --dport 6379\n\n#Exmaple 2\nredis-cli monitor |  redismirror  --shost localhost --dport 6377  --limit 100\n```\n\n## Exmaple output:\n```\n$ redis-cli monitor | redismirror  --sport 6379 --shost localhost  --dhost 127.0.0.1 --dport 6378 --replace  --ttl --ttle 10 --limit 10\n\nonnected to Redis: Host: localhost, Port: 6379, DB: 0\nConnected to Redis: Host: 127.0.0.1, Port: 6378, DB: 0\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_1679609769_json, TTL: 10, Status: OK - Command SET\n☀  Skipping Key -> DUMP, Key -> e2657ecd-6ee0-4182-9128-239be76cbba5_1679609769_json\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_1679609769_image_base64, TTL: 10, Status: OK - Command SET\n☀  Skipping Key -> TTL, Key -> e2657ecd-6ee0-4182-9128-239be76cbba5_1679609769_json\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_key1, TTL: 10, Status: OK - Command MSET\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_setnx_key, TTL: 10, Status: OK - Command SETNX\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_setex_key, TTL: 20, Status: OK - Command SETEX\n☀  Skipping Key -> DUMP, Key -> e2657ecd-6ee0-4182-9128-239be76cbba5_1679609769_image_base64\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_psetex_key, TTL: 20, Status: OK - Command PSETEX\n☀  Skipping Key -> TTL, Key -> e2657ecd-6ee0-4182-9128-239be76cbba5_1679609769_image_base64\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_getset_key, TTL: 10, Status: OK - Command GETSET\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_hash, TTL: 10, Status: OK - Command HSET\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_hash_multi, TTL: 10, Status: OK - Command HSET\n✔  Mirrored key | Key: e2657ecd-6ee0-4182-9128-239be76cbba5_hash_setnx, TTL: 10, Status: OK - Command HSETNX\nLimit reached: 10\n```\n\n## Installation using pypi\n```\npip install redismirror\n```\n\n## Installation\n\n```\n$ pip install -r requirements.txt\n\n$ pip install setup.py\n```\n\n## Development\n\nThis project includes a number of helpers in the `Makefile` to streamline common development tasks.\n\n### Environment Setup\n\nThe following demonstrates setting up and working with a development environment:\n\n```\n### create a virtualenv for development\n\n$ make virtualenv\nOr\n$ python3 -m venv env\nthen\n$ source env/bin/activate\n$ pip install -r requirements.txt\n\n$ pip install setup.py\n\n### run redismirror cli application\n\n$ redismirror --help\n\n\n### run pytest / coverage\n\n$ make test\n```\n\n\n### Releasing to PyPi\n\nBefore releasing to PyPi, you must configure your login credentials:\n\n**~/.pypirc**:\n\n```\n[pypi]\nusername = YOUR_USERNAME\npassword = YOUR_PASSWORD\n```\n\nThen use the included helper function via the `Makefile`:\n\n```\n$ make dist\n\n$ make dist-upload\n\n```\n\n## Deployments\n\n### Docker\n\nIncluded is a basic `Dockerfile` for building and distributing `Redis Mirror `,\nand can be built with the included `make` helper:\n\n```\n$ make docker\n\n$ docker run -it redismirror --help\n```\n\n\n\n## Extra\nTo Generate sample data for your test using the below command:\n```Bash\ncd tests/Generator/;bash SampleDataInserter.sh\n\n# Or Using python script\n# Make sure to update config in the same file\npython fillRedis.py\n```\n\n\nThe following commands are also not logged:\n\n```\nskip_commands_list = [\n    'FLUSHDB', 'INFO', 'FLUSHALL', 'AUTH', 'QUIT', 'SELECT', 'CLIENT', 'ROLE',\n    'BGREWRITEAOF', 'TIME', 'ECHO', 'CONFIG', 'MONITOR', 'SYNC', 'SHUTDOWN',\n    'DBSIZE', 'DEBUG', 'COMMAND', 'SCRIPT', 'SAVE', 'OBJECT', 'SLAVEOF',\n    'KEYS', 'BGSAVE', 'SCAN', 'DUMP', 'SLOWLOG', 'TTL', 'PING', 'LASTSAVE'\n]\n```\n\nCost of running MONITOR\nBecause MONITOR streams back all commands, its use comes at a cost. The following (totally unscientific) benchmark numbers illustrate what the cost of running MONITOR can be.\n\nBenchmark result without MONITOR running:\n\n\n```Bash\n$ src/redis-benchmark -c 10 -n 100000 -q\nPING_INLINE: 101936.80 requests per second\nPING_BULK: 102880.66 requests per second\nSET: 95419.85 requests per second\nGET: 104275.29 requests per second\nINCR: 93283.58 requests per second\n```\nBenchmark results with MONITOR running (redis-cli monitor > /dev/null):\n```Bash\n$ src/redis-benchmark -c 10 -n 100000 -q\nPING_INLINE: 58479.53 requests per second\nPING_BULK: 59136.61 requests per second\nSET: 41823.50 requests per second\nGET: 45330.91 requests per second\nINCR: 41771.09 requests per second\n```\nIn this particular case, running a single MONITOR client can reduce the throughput by more than 50%. Running more MONITOR clients will reduce throughput even more.\n\n\nLicense\n-------\n\nGNU GENERAL PUBLIC LICENSE\n\nAuthor Information\n------------------\n\nThe tool was originally developed by [Ali Saleh Baker](https://www.linkedin.com/in/alivx/).\n\n\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/alivx/redis-mirror",
    "keywords": "traffic,mirror,redis,migration,cli",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "redismirror",
    "package_url": "https://pypi.org/project/redismirror/",
    "platform": null,
    "project_url": "https://pypi.org/project/redismirror/",
    "project_urls": {
      "Homepage": "https://github.com/alivx/redis-mirror"
    },
    "release_url": "https://pypi.org/project/redismirror/1.0.1/",
    "requires_dist": [
      "redis (==4.5.1)",
      "click (==8.1.3)",
      "tqdm (==4.65.0)"
    ],
    "requires_python": "",
    "summary": "Mirror Redis Traffic to another redis node",
    "version": "1.0.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 17422336,
  "releases": {
    "0.0.12": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "c5cfc77c9261c63e97ce099927e9b91d29053c8dff64a6002e6baeb36551eae3",
          "md5": "460f13df8818b89ea2c1e0e7466acd6d",
          "sha256": "5232ebf763d9afcfdf08fa2c1120a6df3e45df385e1dd174e1a818152b88597e"
        },
        "downloads": -1,
        "filename": "redismirror-0.0.12-py3.8.egg",
        "has_sig": false,
        "md5_digest": "460f13df8818b89ea2c1e0e7466acd6d",
        "packagetype": "bdist_egg",
        "python_version": "3.8",
        "requires_python": null,
        "size": 11978,
        "upload_time": "2020-12-26T22:56:18",
        "upload_time_iso_8601": "2020-12-26T22:56:18.334894Z",
        "url": "https://files.pythonhosted.org/packages/c5/cf/c77c9261c63e97ce099927e9b91d29053c8dff64a6002e6baeb36551eae3/redismirror-0.0.12-py3.8.egg",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5cd989f4926f7509db1c0b2554e4a9b399fedb0226c04cab92f41ec80e915132",
          "md5": "163be4437769fef819609646c6db5a21",
          "sha256": "2ece71ea2bfdb07606adddaec12af423a8d868bafc50cb4057d98013d028834a"
        },
        "downloads": -1,
        "filename": "redismirror-0.0.12.tar.gz",
        "has_sig": false,
        "md5_digest": "163be4437769fef819609646c6db5a21",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 7287,
        "upload_time": "2020-12-26T22:56:19",
        "upload_time_iso_8601": "2020-12-26T22:56:19.637099Z",
        "url": "https://files.pythonhosted.org/packages/5c/d9/89f4926f7509db1c0b2554e4a9b399fedb0226c04cab92f41ec80e915132/redismirror-0.0.12.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6e2b63e5591601bb6592aafce442fec39ccaefb7ea02258a9b218e48547cac5b",
          "md5": "655f3a036660edc78708fe283c35738f",
          "sha256": "6be4af6237cd194388cfb0fc5fe03d1ac2c269da4879334046a763bce20aefdb"
        },
        "downloads": -1,
        "filename": "redismirror-0.1.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "655f3a036660edc78708fe283c35738f",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 17368,
        "upload_time": "2021-01-05T19:31:48",
        "upload_time_iso_8601": "2021-01-05T19:31:48.233396Z",
        "url": "https://files.pythonhosted.org/packages/6e/2b/63e5591601bb6592aafce442fec39ccaefb7ea02258a9b218e48547cac5b/redismirror-0.1.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "5692c3dd9fbe9d069a944471e1824f4dd17612bf9a7d97bd90c010532828486c",
          "md5": "e2ac2421d6379badaa2794ba8b547b24",
          "sha256": "1a8cfab3684bb726476aea337aafad867b53d26bbb1073f0cbfa8edf154dbb81"
        },
        "downloads": -1,
        "filename": "redismirror-0.1.0.tar.gz",
        "has_sig": false,
        "md5_digest": "e2ac2421d6379badaa2794ba8b547b24",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 17160,
        "upload_time": "2021-01-05T19:31:49",
        "upload_time_iso_8601": "2021-01-05T19:31:49.771319Z",
        "url": "https://files.pythonhosted.org/packages/56/92/c3dd9fbe9d069a944471e1824f4dd17612bf9a7d97bd90c010532828486c/redismirror-0.1.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.1.7": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "a25e634bb5936822a6aa58d63f2263174aaf7a28c13a99899c1454997f8117a2",
          "md5": "b77ac242f0a7262448b8edb26eb0e4df",
          "sha256": "5aea3061ad98a70b2e2c332c9218ac3374e86b066aaf266033ad2bd0320b039d"
        },
        "downloads": -1,
        "filename": "redismirror-0.1.7-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "b77ac242f0a7262448b8edb26eb0e4df",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 17390,
        "upload_time": "2021-01-05T20:04:22",
        "upload_time_iso_8601": "2021-01-05T20:04:22.996199Z",
        "url": "https://files.pythonhosted.org/packages/a2/5e/634bb5936822a6aa58d63f2263174aaf7a28c13a99899c1454997f8117a2/redismirror-0.1.7-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "112382f54ae10a4343267e94d29f5a71c8f2759546c02b637a67dd715481913b",
          "md5": "d2e42180ecf1644a10c94ce223b35c59",
          "sha256": "9b24c9ff58bcf6c26a105e1621f42c2c6264b76fc0754c7adb9d292f975f18d5"
        },
        "downloads": -1,
        "filename": "redismirror-0.1.7.tar.gz",
        "has_sig": false,
        "md5_digest": "d2e42180ecf1644a10c94ce223b35c59",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 17168,
        "upload_time": "2021-01-05T20:04:24",
        "upload_time_iso_8601": "2021-01-05T20:04:24.348269Z",
        "url": "https://files.pythonhosted.org/packages/11/23/82f54ae10a4343267e94d29f5a71c8f2759546c02b637a67dd715481913b/redismirror-0.1.7.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "627dadd14a78331b4847aad92c70f10565f69cf9463055374ec3434a32654b88",
          "md5": "83ceb4b31b9ecbb0317a67c9087a7967",
          "sha256": "a3580906e7d9192fdb40d01eb5bca5f46a42a76cf1196a12ddaedc7a81668842"
        },
        "downloads": -1,
        "filename": "redismirror-1.0.0-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "83ceb4b31b9ecbb0317a67c9087a7967",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 17460,
        "upload_time": "2021-01-06T21:05:25",
        "upload_time_iso_8601": "2021-01-06T21:05:25.641469Z",
        "url": "https://files.pythonhosted.org/packages/62/7d/add14a78331b4847aad92c70f10565f69cf9463055374ec3434a32654b88/redismirror-1.0.0-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "9c3d012d5d37ca78e501acc83daf7f28b1831b0987c544e9be235eb5f0bd41d5",
          "md5": "fe736cacb6627f24fbbdce16fb96cb10",
          "sha256": "2e403b2b677345091ffde77ab453b4aaefd1b550a4df1efa635e43872a2bed17"
        },
        "downloads": -1,
        "filename": "redismirror-1.0.0.tar.gz",
        "has_sig": false,
        "md5_digest": "fe736cacb6627f24fbbdce16fb96cb10",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 17548,
        "upload_time": "2021-01-06T21:05:26",
        "upload_time_iso_8601": "2021-01-06T21:05:26.681951Z",
        "url": "https://files.pythonhosted.org/packages/9c/3d/012d5d37ca78e501acc83daf7f28b1831b0987c544e9be235eb5f0bd41d5/redismirror-1.0.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "1.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "25254a23014b7f443c2f134856f5d3fa3d6f041ee6d6ce1f17f2b249bab3ef8b",
          "md5": "80abc6c97dd60fcf1c99457790de85a3",
          "sha256": "10ddbcd996c8917924c9e829a40cefe2d3550f0dbd150d1ddb72804a39966c4d"
        },
        "downloads": -1,
        "filename": "redismirror-1.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "80abc6c97dd60fcf1c99457790de85a3",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 18135,
        "upload_time": "2023-03-23T22:38:30",
        "upload_time_iso_8601": "2023-03-23T22:38:30.132009Z",
        "url": "https://files.pythonhosted.org/packages/25/25/4a23014b7f443c2f134856f5d3fa3d6f041ee6d6ce1f17f2b249bab3ef8b/redismirror-1.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "963eeed5f2a5b83c2c16d93319694387bc28e3b9295ffb97ced6e814eca7eb92",
          "md5": "3d2cbe28ec35fa16673661cef576c92d",
          "sha256": "1a31787edd11b01b19ade88f3923013df34c275a5c74dd76fd69a47a04e18524"
        },
        "downloads": -1,
        "filename": "redismirror-1.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "3d2cbe28ec35fa16673661cef576c92d",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 18146,
        "upload_time": "2023-03-23T22:38:32",
        "upload_time_iso_8601": "2023-03-23T22:38:32.449778Z",
        "url": "https://files.pythonhosted.org/packages/96/3e/eed5f2a5b83c2c16d93319694387bc28e3b9295ffb97ced6e814eca7eb92/redismirror-1.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "25254a23014b7f443c2f134856f5d3fa3d6f041ee6d6ce1f17f2b249bab3ef8b",
        "md5": "80abc6c97dd60fcf1c99457790de85a3",
        "sha256": "10ddbcd996c8917924c9e829a40cefe2d3550f0dbd150d1ddb72804a39966c4d"
      },
      "downloads": -1,
      "filename": "redismirror-1.0.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "80abc6c97dd60fcf1c99457790de85a3",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 18135,
      "upload_time": "2023-03-23T22:38:30",
      "upload_time_iso_8601": "2023-03-23T22:38:30.132009Z",
      "url": "https://files.pythonhosted.org/packages/25/25/4a23014b7f443c2f134856f5d3fa3d6f041ee6d6ce1f17f2b249bab3ef8b/redismirror-1.0.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "963eeed5f2a5b83c2c16d93319694387bc28e3b9295ffb97ced6e814eca7eb92",
        "md5": "3d2cbe28ec35fa16673661cef576c92d",
        "sha256": "1a31787edd11b01b19ade88f3923013df34c275a5c74dd76fd69a47a04e18524"
      },
      "downloads": -1,
      "filename": "redismirror-1.0.1.tar.gz",
      "has_sig": false,
      "md5_digest": "3d2cbe28ec35fa16673661cef576c92d",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 18146,
      "upload_time": "2023-03-23T22:38:32",
      "upload_time_iso_8601": "2023-03-23T22:38:32.449778Z",
      "url": "https://files.pythonhosted.org/packages/96/3e/eed5f2a5b83c2c16d93319694387bc28e3b9295ffb97ced6e814eca7eb92/redismirror-1.0.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}