{
  "info": {
    "author": "Andres Vazquez",
    "author_email": "andres@data99.com.ar",
    "bugtrack_url": null,
    "classifiers": [
      "Development Status :: 4 - Beta",
      "License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)",
      "Programming Language :: Python :: 2.7"
    ],
    "description": "[![Build Status](https://travis-ci.org/avdata99/ckanext-siu-harvester.svg?branch=master)](https://travis-ci.org/avdata99/ckanext-siu-harvester)\n[![Docker Pulls](https://img.shields.io/docker/pulls/avdata99/ckan-env.svg)](https://hub.docker.com/r/avdata99/ckan-env/tags)\n[![Docker Automated](https://img.shields.io/docker/automated/avdata99/ckan-env.svg)](https://hub.docker.com/r/avdata99/ckan-env/tags)\n[![](https://img.shields.io/pypi/implementation/ckanext-siu-harvester)](https://pypi.org/project/ckanext-siu-harvester/)\n[![](https://img.shields.io/pypi/pyversions/ckanext-siu-harvester)](https://pypi.org/project/ckanext-siu-harvester/)\n[![](https://img.shields.io/pypi/wheel/ckanext-siu-harvester)](https://pypi.org/project/ckanext-siu-harvester/)\n[![](https://img.shields.io/pypi/:period/ckanext-siu-harvester)](https://pypi.org/project/ckanext-siu-harvester/)\n[![](https://img.shields.io/pypi/format/ckanext-siu-harvester)](https://pypi.org/project/ckanext-siu-harvester/)\n[![](https://img.shields.io/pypi/status/ckanext-siu-harvester)](https://pypi.org/project/ckanext-siu-harvester/)\n[![](https://img.shields.io/pypi/l/ckanext-siu-harvester)](https://pypi.org/project/ckanext-siu-harvester/)\n[![](https://img.shields.io/pypi/v/ckanext-siu-harvester)](https://pypi.org/project/ckanext-siu-harvester/)\n\n# SIU Harvester\nEsta extensión de CKAN permite cosechar (_harvest_) datos expuestos en sistemas [SIU](https://www.siu.edu.ar/).  \nEl **Sistema de Información Universitaria** es un [conjunto de aplicaciones](https://www.siu.edu.ar/como-obtengo-los-sistemas/) que permite de manera gratuita a las Universidades argentinas contar con las herramientas de software para su gestión integral.\n\nEsta extensión de CKAN esta pensada para obtener estos datos y publicarlos en formatos reutilizables para darles mayor accesibilidad al público general.\n\n## Portal de transparencia\n\nSIU incluye un [portal de transparencia](http://documentacion.siu.edu.ar/wiki/SIU-Wichi/Version6.6.0/portal_transparencia) que incluye un API.  \nEstos datos se toman de la base SIU-Wichi, que contiene datos provenientes de los módulos SIU-Pilaga (Presupuesto), SIU-Mapuche (RRHH), SIU-Diaguita (Compras y Patrimonio) y SIU-Araucano (Académicos).\n\n### Consultas\n\nLas consultas a la base de datose se definen en archivos CDA\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<CDADescriptor>\n   <DataSources>\n      <Connection id=\"myconnection\" type=\"sql.jndi\">\n         <Jndi>transparencia</Jndi>\n      </Connection>\n   </DataSources>\n\n   <DataAccess \n       access=\"public\" \n       cache=\"true\" \n       cacheDuration=\"7200\" \n       connection=\"myconnection\" \n       id=\"IdParaUsarComDataAccessID\" \n       type=\"sql\">\n      <Columns/>\n\n      <Parameter name=\"prm_anio\" type=\"Numeric\" default=\"0\"/>\n      \n      <Query>SELECT field_a, field_b, field_c \n                      FROM xtable\n                      where field_a = ${anio}\n      </Query>\n\n   </DataAccess>\n</CDADescriptor>\n```\n\nEste harvester lee los enpoints del API que expone cada archivo CDA.\nLos archivos CDA incluidos en el Portal de Transparencia ya están cubiertos \nen este harvester. Esta listo para consumir y republicar datos.\n\nEs posible tambien definir archivos CDA personalizados y \n[agregarlos al harvester](https://github.com/avdata99/ckanext-siu-harvester/issues/20)\npara consumir estos datos de manera automtizada y periódicamente.\n\n### Instalación\n\nDisponible en [Pypi](https://pypi.org/project/ckanext-siu-harvester/) o vía GitHub.  \n\n```\npip install ckanext-siu-harvester\nó\npip install -e git+https://github.com/avdata99/ckanext-siu-harvester.git#egg=ckanext-siu-harvester\n\n+\npip install -r https://raw.githubusercontent.com/avdata99/ckanext-siu-harvester/master/requirements.txt\n\n```\n\n### Agregar origen\n\nLa URL los _harvest sources_ de este tipo son de la forma:\n```\nhttp://wichi.siu.edu.ar/pentaho/plugin/cda/api/doQuery\n```\n\nDebe elegir la URL de la instancia de la que desea obtener datos\n\n### Configuración\n\nPara conectarse es requisito que para cada _harvest source_ definir una configuración.  \nLa configuración mínima y bigatoria es solo el usuario y a contraseña del API del portal de \ntransparencia al que este _harvester_ se va a conectar\n\n```json\n{\n    \"username\": \"user\",\n    \"password\": \"password\"    \n}\n```\n\n### Datos a extraer\n\nEstos endpoints pueden incluir multiples recursos. Cada recurso es un _query_ al endpoint ya listo para usar.  \nEstos ya están configurados en el directorio `queries` de la librería [siu-data](https://pypi.org/project/siu-data/)\n\nPor ejemplo `egresados-pos-facultad.json`\n\n```\n{\n    \"name\": \"evolucion-de-cargos-activos-por-escalafon\",\n    \"title\": \"Evolución de cargos activos por escalafón\",\n    \"notes\": \"\",\n    \"internals\": \"Describir mejor\",\n    \"iterables\": {\n        \"sub_list\": {\n            \"help\": \"Necesitamos primero obtener la lista de unidades académicas con otra consulta\",\n            \"name\": \"lista-de-unidades-academicas\",\n            \"params\": {\n                \"paramprm_tablero_visible\": \"18\",\n                \"dataAccessId\": \"param_ua_cargos\",\n                \"sortBy\": \"\"\n            },\n            \"apply_to\": \"paramprm_ua_cargos\"\n        }\n    },\n    \"tags\": [\n        \"Cargos\", \"Personal\"\n    ],\n    \"params\": {\n        \"paramprm_ua_cargos\": \"\",\n        \"path\": \"/home/SIU-Wichi/Portal Transparencia/cda/4_rrhh.cda\",\n        \"dataAccessId\": \"tablero_18\",\n        \"outputIndexId\": 1,\n        \"pageSize\": 0,\n        \"pageStart\": 0,\n        \"sortBy\": \"2D\"\n        }\n}\n```\n\nDe esta forma este _harvester_ va a iterar por los años disponibles y creará un dataset para cada año.  \nEs posible agregar más _queries_ para consumir más datos.\n\n## Configuraciones adicionales\n\n### Limitar los archivos de _queries_ usadas\n\nLa [librería siu-data](https://github.com/avdata99/pySIUdata) a la que se conecta este _harvester_ incluye todos los \n[archivos de consulta disponibles](https://github.com/avdata99/pySIUdata/tree/master/siu_data/queries) \n(descriptos más abajo).  \nDe manera predeterminada todos los archivos se usarán pero es posible limitar los archivos \nusados en la configuracion con `only_files` de esta forma:  \n\n```js\n\"only_files\": [\n    \"1-PRESUPUESTO-tablero_01.json\",\n    \"1-PRESUPUESTO-tablero_02.json\"\n    ]\n```\nLos archivos a usar se identifican con la propiedad `name` de cada archivo de consulta.\n\n### Sobreescribir configuraciones\n\nLos archivos de consulta permiten definir _tags_, _grupos_ y otros metadatos que cada dataset cosechado va a usar.  \nEs tambien posible configurar cambios desde la configuracion del harvester.  \nEjemplo:  \n\n```js\n\"override\": {\n    \"1-PRESUPUESTO-tablero_01.json\": {\n        \"notes\": \"Esta es una nueva descripcion para todos los datasets cosechados desde este archivo\",\n        \"tags\": [\"nuevo_tag_01\", \"nuevo_tag_02\"]\n    },\n    \"1-PRESUPUESTO-tablero_02.json\": {\n        \"tags\": [\"nuevo_tag_02\", \"nuevo_tag_03\"],\n        \"groups\": [\"group_01\", \"group_02\"]\n    }\n}\n```\n\n### Agregar extras a los datasets\n\nSi se requiere que en cada cosecha (además de los tags, grupos, notas, etc) se agreguen más \nmetadatos a los datasets cosechados \n\n```js\n\"override\": {\n    \"4-RRHH-tablero_18.json\": {\n\n        \"extras\": {\n            \"my_custom_extra\": \"999\",\n            \"dataset_preview\": {\n                \"chart\": {\n                    \"height\": \"250\",\n                    \"chart_type\": \"Column\",\n                    \"chart_color\": \"#30AA71\",\n                    \"fields\": \"['Facultad', 'cantidad de empleados']\", \n            \n                }\n            }\n        },\n\n        \"notes\": \"Nueva descripcion\",\n        \"tags\": [\"nuevo_tag_09\", \"nuevo_tag_12\"]\n    }\n}\n```\n\n## Ejemplo configuracion final\n\n```json\n{\n\"username\": \"usuario\",\n\"password\": \"clave\",\n\"only_files\": [\"4-RRHH-tablero_18.json\"],\n\"override\": {\n    \"4-RRHH-tablero_18.json\": {\n        \"extras\": {\n            \"my_custom_extra\": \"999\",\n            \"dataset_preview\": {\n                \"chart\": {\n                    \"height\": \"250\",\n                    \"chart_type\": \"Column\",\n                    \"chart_color\": \"#30AA71\",\n                    \"fields\": \"['fuente_financiamiento' ,'total_devengado']\", \n                    }\n                }\n            },\n        \"notes\": \"Nueva descripcion\",\n        \"tags\": [\"nuevo_tag_09\", \"nuevo_tag_12\"],\n        \"groups\": [\"group_01\", \"group_02\"]\n        }\n    }\n}\n```\n## Tests \n\nLocally\n\n```\ndocker-compose exec ckan bash -c \\\n    \"cd src_extensions/ckanext-siu-harvester && \\\n        nosetests --ckan --nologcapture --with-pylons=test.ini ckanext/siu_harvester/tests\"\n```",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "https://github.com/avdata99/ckanext-siu-harvester",
    "keywords": "CKAN harvest SIU Universid",
    "license": "MIT",
    "maintainer": "",
    "maintainer_email": "",
    "name": "ckanext-siu-harvester",
    "package_url": "https://pypi.org/project/ckanext-siu-harvester/",
    "platform": "",
    "project_url": "https://pypi.org/project/ckanext-siu-harvester/",
    "project_urls": {
      "Homepage": "https://github.com/avdata99/ckanext-siu-harvester"
    },
    "release_url": "https://pypi.org/project/ckanext-siu-harvester/0.2.79/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "SIU Harvest",
    "version": "0.2.79",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 8258560,
  "releases": {
    "0.1.9": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "7f0fa13f9a43fd0f132d0987ec9f15b134a4890952da6e90a9c73e7b596b05ed",
          "md5": "e402c7e539f36497e09651c757cd0b45",
          "sha256": "ff55e5bddfbdc0942cc00374aaf2d42c05cad191841ccb12289a3181f1e9f613"
        },
        "downloads": -1,
        "filename": "ckanext-siu-harvester-0.1.9.tar.gz",
        "has_sig": false,
        "md5_digest": "e402c7e539f36497e09651c757cd0b45",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 24235,
        "upload_time": "2020-06-01T03:20:05",
        "upload_time_iso_8601": "2020-06-01T03:20:05.288902Z",
        "url": "https://files.pythonhosted.org/packages/7f/0f/a13f9a43fd0f132d0987ec9f15b134a4890952da6e90a9c73e7b596b05ed/ckanext-siu-harvester-0.1.9.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.0": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "4143cb81ad1d8aed4dc7806967a8c9d7a621a30efff79f7c74ffb10f563b1fbf",
          "md5": "cbf8db95a8c3dba82beb14e9f1887db7",
          "sha256": "bf08ef87ae96ad8c64435f3bd4b5251232f75ccb55bedc02a7a810732d694f4b"
        },
        "downloads": -1,
        "filename": "ckanext-siu-harvester-0.2.0.tar.gz",
        "has_sig": false,
        "md5_digest": "cbf8db95a8c3dba82beb14e9f1887db7",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 24097,
        "upload_time": "2020-06-01T03:27:01",
        "upload_time_iso_8601": "2020-06-01T03:27:01.889414Z",
        "url": "https://files.pythonhosted.org/packages/41/43/cb81ad1d8aed4dc7806967a8c9d7a621a30efff79f7c74ffb10f563b1fbf/ckanext-siu-harvester-0.2.0.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.3": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "57fdbd23b48f780e13d58bde6d1a566941d04af2945b225cfe2e68d12b4f1dc3",
          "md5": "fb8b0e851f1bc2a52560f4352bb0b32a",
          "sha256": "2621aae2a34b5fe7548b8620b0629a50e42caa3218fbf6f061cd55e42fd5bad2"
        },
        "downloads": -1,
        "filename": "ckanext-siu-harvester-0.2.3.tar.gz",
        "has_sig": false,
        "md5_digest": "fb8b0e851f1bc2a52560f4352bb0b32a",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 31420,
        "upload_time": "2020-06-17T21:13:08",
        "upload_time_iso_8601": "2020-06-17T21:13:08.361878Z",
        "url": "https://files.pythonhosted.org/packages/57/fd/bd23b48f780e13d58bde6d1a566941d04af2945b225cfe2e68d12b4f1dc3/ckanext-siu-harvester-0.2.3.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.75": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "8ac882af3d1cc971fab187f176f92e352aea9d586284dd0fb6bed653ff37bf65",
          "md5": "ebd925bc907db0a04973363e6111732e",
          "sha256": "b71421dbd250c999db21828cdaa65807a8d62e59e860a4c4801d1761170d8da0"
        },
        "downloads": -1,
        "filename": "ckanext-siu-harvester-0.2.75.tar.gz",
        "has_sig": false,
        "md5_digest": "ebd925bc907db0a04973363e6111732e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 25071,
        "upload_time": "2020-08-26T01:05:35",
        "upload_time_iso_8601": "2020-08-26T01:05:35.550740Z",
        "url": "https://files.pythonhosted.org/packages/8a/c8/82af3d1cc971fab187f176f92e352aea9d586284dd0fb6bed653ff37bf65/ckanext-siu-harvester-0.2.75.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.76": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "2aefbda21380d7b97281bc24bec973c371689769c3a090cd91301dae487c848d",
          "md5": "db023a9eab769aa0c0c8a5f777b22edc",
          "sha256": "984cd3b7e25011db636ac4f9fd3dde191d497b5fdbde4d8dadb1302338c236ca"
        },
        "downloads": -1,
        "filename": "ckanext-siu-harvester-0.2.76.tar.gz",
        "has_sig": false,
        "md5_digest": "db023a9eab769aa0c0c8a5f777b22edc",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 24624,
        "upload_time": "2020-09-06T15:29:54",
        "upload_time_iso_8601": "2020-09-06T15:29:54.135270Z",
        "url": "https://files.pythonhosted.org/packages/2a/ef/bda21380d7b97281bc24bec973c371689769c3a090cd91301dae487c848d/ckanext-siu-harvester-0.2.76.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ],
    "0.2.79": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "bc8fb2485bd8df5fefcd38848ee6f2d0cc3109021f4985fbd85aa23a5e5b9204",
          "md5": "107b8b194491dbb24436671b24551d9e",
          "sha256": "e2b29757ec15b8b185946f92e03dd8aea2ba7cb023bc05a4b32f5cdd82c72f2b"
        },
        "downloads": -1,
        "filename": "ckanext-siu-harvester-0.2.79.tar.gz",
        "has_sig": false,
        "md5_digest": "107b8b194491dbb24436671b24551d9e",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 24809,
        "upload_time": "2020-09-24T03:16:32",
        "upload_time_iso_8601": "2020-09-24T03:16:32.086859Z",
        "url": "https://files.pythonhosted.org/packages/bc/8f/b2485bd8df5fefcd38848ee6f2d0cc3109021f4985fbd85aa23a5e5b9204/ckanext-siu-harvester-0.2.79.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "bc8fb2485bd8df5fefcd38848ee6f2d0cc3109021f4985fbd85aa23a5e5b9204",
        "md5": "107b8b194491dbb24436671b24551d9e",
        "sha256": "e2b29757ec15b8b185946f92e03dd8aea2ba7cb023bc05a4b32f5cdd82c72f2b"
      },
      "downloads": -1,
      "filename": "ckanext-siu-harvester-0.2.79.tar.gz",
      "has_sig": false,
      "md5_digest": "107b8b194491dbb24436671b24551d9e",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 24809,
      "upload_time": "2020-09-24T03:16:32",
      "upload_time_iso_8601": "2020-09-24T03:16:32.086859Z",
      "url": "https://files.pythonhosted.org/packages/bc/8f/b2485bd8df5fefcd38848ee6f2d0cc3109021f4985fbd85aa23a5e5b9204/ckanext-siu-harvester-0.2.79.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}