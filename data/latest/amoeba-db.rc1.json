{
  "info": {
    "author": "Georgia Tech Database System Implementation",
    "author_email": "gtcs6422@gmail.com",
    "bugtrack_url": null,
    "classifiers": [
      "Operating System :: OS Independent",
      "Programming Language :: Python :: 3"
    ],
    "description": "# AMOEBA-6422\n\n## Environment Setup\n\n1. Install dependencies\n- Install postgresql-12 (https://www.postgresql.org/download/)\n- Download demo data from [dropbox](https://www.dropbox.com/s/jw5719fycsxq5n6/data.zip?dl=0) and unzip it to `data` folder\n- Start postgresql server with data folder: `/usr/lib/postgresql/12/bin/pg_ctl -D ./data start`\n  - If you install postgresql-12 from apt, stop it via `sudo systemctl stop postgresql.service` and give permission to the lock file via `sudo chmod o+w /var/run/postgresql`\n- Install dependencies\n  - `sudo apt-get install python3-dev libmysqlclient-dev` (if not Debian/Ubuntu, see https://github.com/PyMySQL/mysqlclient#install for more details)\n  - `pip install -r requirements.txt` for python dependencies\n\n2. Setup environment\n- Installation of `direnv` is needed. And run `eval \"$(direnv hook bash)\"` to setup the environment (replace `bash` with `zsh` or any shell you're using).\n- Build the `MUTATOR` of `AMOEBA` (only necessary if you make changes to the `MUTATOR`)\n    ```\n    cd /workspace/calcite-fuzzing && ./gradlew build -x core:checkstyleMain -x test -x core:checkstyleTest -x core:forbiddenApisTest -x core:autostyleJavaCheck\n    ```\n\n## Quick Start\n`AMOEBA` is configurable, a launch command template looks like the following:\n```bash\n$ timeout {total_timeout} ./test_driver.py --workers {num_workers} --output {outputfolder} --queries {num_queries_per_worker} --rewriter ./calcite-fuzzing --dbms={dbms_undertest} --validate --num_loops={num_feedbackloops} --feedback={conf_feedback} --dbconf=db_conf_demo.json --query_timeout {per_query_timeout}\n```\n\nYou can customize the value of the following options:\n- {total_timeout}: timeout for the entire run of `AMOEBA` (unit is seconds)\n- {workers}: number of parallel workers to invoke `GENERATOR` and `MUTATOR`\n- {output}: location to store the intermediate results and bug reports\n- {queries}: number of base queries that are generated by each `GENERATOR` instance\n- {dbms}: DBMS that `AMOEBA` will evaluate on (i.e., `postgresql` or `cockroachdb`)\n- {num_loops}: number of feedback loops\n- {validate}: a boolean argument that decides whether to invoke the `VALIDATOR` after generating the equivalent query pairs\n- {feedback}: what types of feedbacks to utilize (i.e., `both`, `none`, `mutator`, or `validator`)\n- {query_timeout}: timeout for executing each query (unit is seconds)\n\n\nFor example, you can launch `AMOEBA` with the following command:\n\n```shell\ntimeout 3600 ./test_driver.py --workers 1 --output /home/postgres/exp/1 --queries 200 --rewriter ./calcite-fuzzing --dbms=postgresql --validate --num_loops=100 --feedback=none --dbconf=db_conf_demo.json --query_timeout 30\n```\nIf `AMOEBA` is working correctly, you should expect to see the following progress information is printed:\n```bash\nstart query generator\n['mutator.py --prob_table=/home/postgres/test/190156/prob_table_190156.json --db_info=/workspace/amoeba_conf/db_conf_demo.json -s seq --queries 100 1>/home/postgres/test/190156/0/log_sa0 2>/home/postgres/test/190156/0/input.sql']\nfinish query generator\nstart query rewriter\n['java -cp calcite-core-1.22.0-SNAPSHOT-tests.jar:./*:. org.apache.calcite.test.Transformer /home/postgres/test/190156/0']\nfinish query rewriter\nstart validator\nbegin compare plan cost of equivalent queries\ncompare plan cost /home/postgres/test/190156/0/out/q20.sql\nfind plan diff /home/postgres/test/190156/0/out/q20.sql\ncompare plan cost /home/postgres/test/190156/0/out/q13.sql\nfind plan diff /home/postgres/test/190156/0/out/q13.sql\ncompare plan cost /home/postgres/test/190156/0/out/q18.sql\ncompare plan cost /home/postgres/test/190156/0/out/q23.sql\n```\nThis example command should complete within 20 minutes. You can check the generated intermediate results in `/home/postgres/exp/1`. If `AMOEBA` discovers potential performance bugs, the generated bug report will live at `/home/postgres/exp/1/bugs.md`.\n\nThe shortcut CTRL+C can be used to terminate `AMOEBA` manually. Otherwise, `AMOEBA` will terminate either after a specified experiment timeout is reached or after a specified number of base queries have been examined. The option `total_timeout` controls the experiment timeout. The options `workers`,  `queries`, and `num_loops` altogether determine the number of base queries that `AMOEBA` is going to examine.\n\n## Note\n- calcite part is based on Apache Calcite 1.22 and the only new class is added on `core/src/test/java/org/apache/calcite/test/Transformer.java`\n- need to remove all dependencies in this repo and ask users to download it as needed.\n- grant appropriate permission to your user to access the database. ref: https://stackoverflow.com/a/23934693/10180666\n",
    "description_content_type": "text/markdown",
    "docs_url": null,
    "download_url": "",
    "downloads": {
      "last_day": -1,
      "last_month": -1,
      "last_week": -1
    },
    "home_page": "",
    "keywords": "",
    "license": "",
    "maintainer": "",
    "maintainer_email": "",
    "name": "amoeba-db",
    "package_url": "https://pypi.org/project/amoeba-db/",
    "platform": null,
    "project_url": "https://pypi.org/project/amoeba-db/",
    "project_urls": null,
    "release_url": "https://pypi.org/project/amoeba-db/0.0.1/",
    "requires_dist": null,
    "requires_python": "",
    "summary": "SQL Fuzzing Module",
    "version": "0.0.1",
    "yanked": false,
    "yanked_reason": null
  },
  "last_serial": 15953812,
  "releases": {
    "0.0.1": [
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "6148195752a2f224c211deaebe3269860789ad92d6b1eff656ded23908165902",
          "md5": "7b1fbac7fad43f95950f176b5c621223",
          "sha256": "babc0653115ca892aa161f5e7194ff1414674766a3f42688f76aeb4ca9620f20"
        },
        "downloads": -1,
        "filename": "amoeba_db-0.0.1-py3-none-any.whl",
        "has_sig": false,
        "md5_digest": "7b1fbac7fad43f95950f176b5c621223",
        "packagetype": "bdist_wheel",
        "python_version": "py3",
        "requires_python": null,
        "size": 3105,
        "upload_time": "2022-12-01T11:02:46",
        "upload_time_iso_8601": "2022-12-01T11:02:46.213221Z",
        "url": "https://files.pythonhosted.org/packages/61/48/195752a2f224c211deaebe3269860789ad92d6b1eff656ded23908165902/amoeba_db-0.0.1-py3-none-any.whl",
        "yanked": false,
        "yanked_reason": null
      },
      {
        "comment_text": "",
        "digests": {
          "blake2b_256": "62cfd5eec022a0806012a2b74aeac1e3b1d1add2df959c0d0ab8c2e61963a857",
          "md5": "a1d0bac4d3a75076718a5d4643602ced",
          "sha256": "b8fcee2634b537997cf82587174d29d00770ae3577f49c8f308f99666f06f76a"
        },
        "downloads": -1,
        "filename": "amoeba-db-0.0.1.tar.gz",
        "has_sig": false,
        "md5_digest": "a1d0bac4d3a75076718a5d4643602ced",
        "packagetype": "sdist",
        "python_version": "source",
        "requires_python": null,
        "size": 3475,
        "upload_time": "2022-12-01T11:02:48",
        "upload_time_iso_8601": "2022-12-01T11:02:48.157450Z",
        "url": "https://files.pythonhosted.org/packages/62/cf/d5eec022a0806012a2b74aeac1e3b1d1add2df959c0d0ab8c2e61963a857/amoeba-db-0.0.1.tar.gz",
        "yanked": false,
        "yanked_reason": null
      }
    ]
  },
  "urls": [
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "6148195752a2f224c211deaebe3269860789ad92d6b1eff656ded23908165902",
        "md5": "7b1fbac7fad43f95950f176b5c621223",
        "sha256": "babc0653115ca892aa161f5e7194ff1414674766a3f42688f76aeb4ca9620f20"
      },
      "downloads": -1,
      "filename": "amoeba_db-0.0.1-py3-none-any.whl",
      "has_sig": false,
      "md5_digest": "7b1fbac7fad43f95950f176b5c621223",
      "packagetype": "bdist_wheel",
      "python_version": "py3",
      "requires_python": null,
      "size": 3105,
      "upload_time": "2022-12-01T11:02:46",
      "upload_time_iso_8601": "2022-12-01T11:02:46.213221Z",
      "url": "https://files.pythonhosted.org/packages/61/48/195752a2f224c211deaebe3269860789ad92d6b1eff656ded23908165902/amoeba_db-0.0.1-py3-none-any.whl",
      "yanked": false,
      "yanked_reason": null
    },
    {
      "comment_text": "",
      "digests": {
        "blake2b_256": "62cfd5eec022a0806012a2b74aeac1e3b1d1add2df959c0d0ab8c2e61963a857",
        "md5": "a1d0bac4d3a75076718a5d4643602ced",
        "sha256": "b8fcee2634b537997cf82587174d29d00770ae3577f49c8f308f99666f06f76a"
      },
      "downloads": -1,
      "filename": "amoeba-db-0.0.1.tar.gz",
      "has_sig": false,
      "md5_digest": "a1d0bac4d3a75076718a5d4643602ced",
      "packagetype": "sdist",
      "python_version": "source",
      "requires_python": null,
      "size": 3475,
      "upload_time": "2022-12-01T11:02:48",
      "upload_time_iso_8601": "2022-12-01T11:02:48.157450Z",
      "url": "https://files.pythonhosted.org/packages/62/cf/d5eec022a0806012a2b74aeac1e3b1d1add2df959c0d0ab8c2e61963a857/amoeba-db-0.0.1.tar.gz",
      "yanked": false,
      "yanked_reason": null
    }
  ],
  "vulnerabilities": []
}